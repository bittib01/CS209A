{
  "question": {
    "tags": [
      "java",
      "assertion"
    ],
    "owner": {
      "account_id": 98821,
      "reputation": 91325,
      "user_id": 267269,
      "user_type": "registered",
      "accept_rate": 86,
      "profile_image": "https://i.sstatic.net/xR5Ag.png?s=256",
      "display_name": "Praveen",
      "link": "https://stackoverflow.com/users/267269/praveen"
    },
    "is_answered": true,
    "view_count": 630196,
    "protected_date": 1367312881,
    "accepted_answer_id": 2758645,
    "answer_count": 20,
    "score": 751,
    "last_activity_date": 1723186644,
    "creation_date": 1272892316,
    "last_edit_date": 1681581885,
    "question_id": 2758224,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/2758224/what-are-assertions-in-java-and-when-should-they-be-used",
    "title": "What are assertions in Java and when should they be used?",
    "body": "<p>What are some <strong>real life examples</strong> to understand the key role of the Java <code>assert</code> keyword?</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 2309641,
        "reputation": 5070,
        "user_id": 2028066,
        "user_type": "registered",
        "accept_rate": 52,
        "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
        "display_name": "MiguelMunoz",
        "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
      },
      "is_accepted": false,
      "score": 2,
      "last_activity_date": 1723186644,
      "last_edit_date": 1723186644,
      "creation_date": 1602846121,
      "answer_id": 64387889,
      "question_id": 2758224,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Here's another example. I wrote a method that finds the median of the values in two sorted arrays. The method assumes the arrays are already sorted. For performance reasons, it should NOT sort the arrays first, or even check to ensure they're sorted. (Sorting the arrays first would turn the log(n) method to an n(log(n)) method.) However, it's a serious bug to call this method with unsorted data, and we want those bugs to get caught early, in the development phase. So here's how I handled those seemingly conflicting goals:</p>\n<pre><code>public static int medianOf(int[] a, int[] b) {\n  assert assertionOnlyIsSorted(a);      // Assertion is order n\n  assert assertionOnlyIsSorted(b);\n  ... // rest of implementation goes here. Algorithm is order log(n)\n}\n\npublic static boolean assertionOnlyIsSorted(int[] array) {\n  for (int i=1; i&lt;array.length; ++i) {\n    if (array[i] &lt; array[i-1]) {\n      return false;\n    }\n  }\n  return true;\n}\n</code></pre>\n<p>This way, the test, which is slow, is only performed during the development phase, where speed is less important than catching bugs. You want the <code>medianOf()</code> method to have log(n) performance, but the &quot;is sorted&quot; test is order n. So I put it inside an assertion, to limit its use to the development phase, and I give it a name that makes it clear it's not suitable for production.</p>\n<p>This way I have the best of both worlds. In development, I know that any method that calls this incorrectly will get caught and fixed. And I know that the slow test to do so won't affect performance in production. (It's also a good illustration of why you want to leave assertions off in production, but turn them on in development.)</p>\n"
    },
    {
      "owner": {
        "account_id": 271876,
        "reputation": 2174,
        "user_id": 562646,
        "user_type": "registered",
        "accept_rate": 40,
        "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=256&d=identicon&r=PG",
        "display_name": "digitig",
        "link": "https://stackoverflow.com/users/562646/digitig"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1722906417,
      "creation_date": 1722906417,
      "answer_id": 78836896,
      "question_id": 2758224,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>A lot of heat (and limited light) on this.</p>\n<p>Here's my POV as someone used to working with safety-critical systems (ones that will only kill a few hundred people if they go wrong and you are lucky).</p>\n<p>Assertions (in all languages, not just Java) are a <em>development</em> tool for helping ensure correctness of program logic, that should <em>never</em> be enabled in production code. They serve two purposes:</p>\n<ol>\n<li><p>Documentation. Assertions relating to the state when a function is called (&quot;preconditions&quot;) document &quot;don't you <em>dare</em> call this function if you're not in this state. If I hadn't put this precondition in, then the behaviour would be undocumented, which means I'd be entitled to make green demons fly out of your ears if I wanted to. But I've put in the precondition, so you'll catch it in testing (if your testing is any good at all). Assertions about the state on exit from a function mean you can either damn sure of the state on exit from the function matches the precondition <em>or</em> you need to get a new test engineer because your present one isn't exercising the code properly.</p>\n</li>\n<li><p>Other preconditions such as loop variants and invariants (look 'em\nup) are the second use of assertions, which is to help <em>you</em> make sure you haven't screwed up your logic (though you might still be dependent on that tester). And as a by-product, they help understand the code and the assumptions you have made, a bit like executable comments.</p>\n</li>\n</ol>\n"
    },
    {
      "owner": {
        "account_id": 2309641,
        "reputation": 5070,
        "user_id": 2028066,
        "user_type": "registered",
        "accept_rate": 52,
        "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
        "display_name": "MiguelMunoz",
        "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
      },
      "is_accepted": false,
      "score": 85,
      "last_activity_date": 1722564764,
      "last_edit_date": 1722564764,
      "creation_date": 1389993493,
      "answer_id": 21196051,
      "question_id": 2758224,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Assertions are a development-phase tool to catch bugs in your code. They're designed to be easily removed, so they won't exist in production code. So assertions are not part of the &quot;solution&quot; that you deliver to the customer. They're internal checks to make sure that the assumptions you're making are correct. The most common example is to test for null. Many methods are written like this:</p>\n<pre><code>void doSomething(Widget widget) {\n  if (widget != null) {\n    widget.someMethod(); // ...\n    ... // do more stuff with this widget\n  }\n}\n</code></pre>\n<p>Very often in a method like this, the widget should simply never be null. So if it's null, there's a bug in your code somewhere that you need to track down. But the code above will never tell you this. So in a well-intentioned effort to write &quot;safe&quot; code, you're also hiding a bug. It's much better to write code like this:</p>\n<pre><code>/**\n * @param Widget widget Should never be null\n */\nvoid doSomething(Widget widget) {\n  assert widget != null;\n  widget.someMethod(); // ...\n    ... // do more stuff with this widget\n}\n</code></pre>\n<p>This way, you will be sure to catch this bug early. (It's also useful to specify in the contract that this parameter should never be null.) Be sure to turn assertions on when you test your code during development. (And persuading your colleagues to do this, too is often difficult, which I find very annoying.)</p>\n<p>Now, some of your colleagues will object to this code, arguing that you should still put in the null check to prevent an exception in production. In that case, the assertion is still useful. You can write it like this:</p>\n<pre><code>void doSomething(Widget widget) {\n  assert widget != null;\n  if (widget != null) {\n    widget.someMethod(); // ...\n    ... // do more stuff with this widget\n  }\n}\n</code></pre>\n<p>This way, your colleagues will be happy that the null check is there for production code, but during development, you're no longer hiding the bug when widget is null.</p>\n<p>Here's a real-world example: I once wrote a method that compared two arbitrary values for equality, where either value could be null:</p>\n<pre><code>/**\n * Compare two values using equals(), after checking for null.\n * @param thisValue (may be null)\n * @param otherValue (may be null)\n * @return True if they are both null or if equals() returns true\n */\npublic static boolean compare(final Object thisValue, final Object otherValue) {\n  boolean result;\n  if (thisValue == null) {\n    result = otherValue == null;\n  } else {\n    result = thisValue.equals(otherValue);\n  }\n  return result;\n}\n</code></pre>\n<p>This code delegates the work of the <code>equals()</code> method in the case where thisValue is not null. But it assumes the <code>equals()</code> method correctly fulfills the contract of <code>equals()</code> by properly handling a null parameter.</p>\n<p>A colleague objected to my code, telling me that many of our classes have buggy <code>equals()</code> methods that don't test for null, so I should put that check into this method. It's debatable if this is wise, or if we should force the error, so we can spot it and fix it, but I deferred to my colleague and put in a null check, which I've marked with a comment:</p>\n<pre><code>public static boolean compare(final Object thisValue, final Object otherValue) {\n  boolean result;\n  if (thisValue == null) {\n    result = otherValue == null;\n  } else {\n    result = otherValue != null &amp;&amp; thisValue.equals(otherValue); // questionable null check\n  }\n  return result;\n}\n</code></pre>\n<p>The additional check here, <code>other != null</code>, is only necessary if the <code>equals()</code> method fails to check for null as required by its contract.</p>\n<p>Rather than engage in a fruitless debate with my colleague about the wisdom of letting the buggy code stay in our code base, I simply put two assertions in the code. These assertions will let me know, during the development phase, if one of our classes fails to implement <code>equals()</code> properly, so I can fix it:</p>\n<pre><code>public static boolean compare(final Object thisValue, final Object otherValue) {\n  boolean result;\n  if (thisValue == null) {\n    result = otherValue == null;\n    assert otherValue == null || otherValue.equals(null) == false;\n  } else {\n    result = otherValue != null &amp;&amp; thisValue.equals(otherValue);\n    assert thisValue.equals(null) == false;\n  }\n  return result;\n}\n</code></pre>\n<p>The important points to keep in mind are these:</p>\n<ol>\n<li><p>Assertions are development-phase tools only.</p>\n</li>\n<li><p>The point of an assertion is to let you know if there's a bug, not just in your code, but in your <em>code base</em>. (The assertions here will actually flag bugs in other classes.)</p>\n</li>\n<li><p>Even if my colleague was confident that our classes were properly written, the assertions here would still be useful. New classes will be added that might fail to test for null, and this method can flag those bugs for us.</p>\n</li>\n<li><p>In development, you should always turn assertions on, even if the code you've written doesn't use assertions. My IDE is set to always do this by default for any new executable.</p>\n</li>\n<li><p>The assertions don't change the behavior of the code in production, so my colleague is happy that the null check is there, and that this method will execute properly even if the <code>equals()</code> method is buggy. I'm happy because I will catch any buggy <code>equals()</code> method in development.</p>\n</li>\n</ol>\n<p>Also, you should test your assertion policy by putting in a temporary assertion that will fail, so you can be certain that you are notified, either through the log file or a stack trace in the output stream.</p>\n<p>(I should add that my colleague was wrong about our code being buggy. None of these assertions were ever triggered. Our code was fine, as I expected.)</p>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 467725,
        "reputation": 20887,
        "user_id": 873282,
        "user_type": "registered",
        "accept_rate": 55,
        "profile_image": "https://www.gravatar.com/avatar/1e6ae94f84a34641ccc5abc86a664694?s=256&d=identicon&r=PG",
        "display_name": "koppor",
        "link": "https://stackoverflow.com/users/873282/koppor"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1693333087,
      "post_id": 2758224,
      "comment_id": 135746024,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 2229408,
        "reputation": 875,
        "user_id": 1967402,
        "user_type": "registered",
        "accept_rate": 33,
        "profile_image": "https://www.gravatar.com/avatar/8b04a0d611becab37b915e29044a5019?s=256&d=identicon&r=PG",
        "display_name": "Micha&#235;l Benjamin Saerens",
        "link": "https://stackoverflow.com/users/1967402/micha%c3%abl-benjamin-saerens"
      },
      "edited": false,
      "score": 2,
      "creation_date": 1592471464,
      "post_id": 2758224,
      "comment_id": 110439147,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 2309641,
        "reputation": 5070,
        "user_id": 2028066,
        "user_type": "registered",
        "accept_rate": 52,
        "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
        "display_name": "MiguelMunoz",
        "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1571959334,
      "post_id": 2758224,
      "comment_id": 103421398,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 2309641,
        "reputation": 5070,
        "user_id": 2028066,
        "user_type": "registered",
        "accept_rate": 52,
        "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
        "display_name": "MiguelMunoz",
        "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1571958768,
      "post_id": 2758224,
      "comment_id": 103421282,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "64387889": [],
    "78836896": [],
    "21196051": [
      {
        "owner": {
          "account_id": 2309641,
          "reputation": 5070,
          "user_id": 2028066,
          "user_type": "registered",
          "accept_rate": 52,
          "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
          "display_name": "MiguelMunoz",
          "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
        },
        "reply_to_user": {
          "account_id": 1175385,
          "reputation": 23793,
          "user_id": 1151521,
          "user_type": "registered",
          "accept_rate": 77,
          "profile_image": "https://www.gravatar.com/avatar/aa1c3ce93537e4a6f189e2b1dd41a925?s=256&d=identicon&r=PG",
          "display_name": "Aleksandr Dubinsky",
          "link": "https://stackoverflow.com/users/1151521/aleksandr-dubinsky"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1723176323,
        "post_id": 21196051,
        "comment_id": 139021392,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 2309641,
          "reputation": 5070,
          "user_id": 2028066,
          "user_type": "registered",
          "accept_rate": 52,
          "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
          "display_name": "MiguelMunoz",
          "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
        },
        "reply_to_user": {
          "account_id": 1175385,
          "reputation": 23793,
          "user_id": 1151521,
          "user_type": "registered",
          "accept_rate": 77,
          "profile_image": "https://www.gravatar.com/avatar/aa1c3ce93537e4a6f189e2b1dd41a925?s=256&d=identicon&r=PG",
          "display_name": "Aleksandr Dubinsky",
          "link": "https://stackoverflow.com/users/1151521/aleksandr-dubinsky"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1723173901,
        "post_id": 21196051,
        "comment_id": 139021283,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1175385,
          "reputation": 23793,
          "user_id": 1151521,
          "user_type": "registered",
          "accept_rate": 77,
          "profile_image": "https://www.gravatar.com/avatar/aa1c3ce93537e4a6f189e2b1dd41a925?s=256&d=identicon&r=PG",
          "display_name": "Aleksandr Dubinsky",
          "link": "https://stackoverflow.com/users/1151521/aleksandr-dubinsky"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1723125930,
        "post_id": 21196051,
        "comment_id": 139017112,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 2309641,
          "reputation": 5070,
          "user_id": 2028066,
          "user_type": "registered",
          "accept_rate": 52,
          "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
          "display_name": "MiguelMunoz",
          "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
        },
        "reply_to_user": {
          "account_id": 1175385,
          "reputation": 23793,
          "user_id": 1151521,
          "user_type": "registered",
          "accept_rate": 77,
          "profile_image": "https://www.gravatar.com/avatar/aa1c3ce93537e4a6f189e2b1dd41a925?s=256&d=identicon&r=PG",
          "display_name": "Aleksandr Dubinsky",
          "link": "https://stackoverflow.com/users/1151521/aleksandr-dubinsky"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1723096275,
        "post_id": 21196051,
        "comment_id": 139013240,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 2309641,
          "reputation": 5070,
          "user_id": 2028066,
          "user_type": "registered",
          "accept_rate": 52,
          "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
          "display_name": "MiguelMunoz",
          "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1723094901,
        "post_id": 21196051,
        "comment_id": 139013135,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1175385,
          "reputation": 23793,
          "user_id": 1151521,
          "user_type": "registered",
          "accept_rate": 77,
          "profile_image": "https://www.gravatar.com/avatar/aa1c3ce93537e4a6f189e2b1dd41a925?s=256&d=identicon&r=PG",
          "display_name": "Aleksandr Dubinsky",
          "link": "https://stackoverflow.com/users/1151521/aleksandr-dubinsky"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1722793984,
        "post_id": 21196051,
        "comment_id": 138986381,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 2309641,
          "reputation": 5070,
          "user_id": 2028066,
          "user_type": "registered",
          "accept_rate": 52,
          "profile_image": "https://i.sstatic.net/U9hAY.jpg?s=256",
          "display_name": "MiguelMunoz",
          "link": "https://stackoverflow.com/users/2028066/miguelmunoz"
        },
        "reply_to_user": {
          "account_id": 1175385,
          "reputation": 23793,
          "user_id": 1151521,
          "user_type": "registered",
          "accept_rate": 77,
          "profile_image": "https://www.gravatar.com/avatar/aa1c3ce93537e4a6f189e2b1dd41a925?s=256&d=identicon&r=PG",
          "display_name": "Aleksandr Dubinsky",
          "link": "https://stackoverflow.com/users/1151521/aleksandr-dubinsky"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1722565552,
        "post_id": 21196051,
        "comment_id": 138972060,
        "content_license": "CC BY-SA 4.0"
      }
    ]
  }
}