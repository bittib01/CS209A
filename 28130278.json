{
  "question": {
    "tags": [
      "java",
      "tcp",
      "ftp",
      "connectexception"
    ],
    "owner": {
      "account_id": 5678523,
      "reputation": 1,
      "user_id": 4490680,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/71a1e5d8ff11a3adbcccb59d37664045?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "user4490680",
      "link": "https://stackoverflow.com/users/4490680/user4490680"
    },
    "is_answered": false,
    "view_count": 12192,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1764669620,
    "creation_date": 1422133766,
    "last_edit_date": 1688616928,
    "question_id": 28130278,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/28130278/java-ftp-connection-timed-out",
    "title": "Java FTP connection timed out",
    "body": "<p>I am working on a project which will later upload a few files to an FTP server after they are modified...I have everything but uploading the file figured out.  I can successfully connect to the FTP server, but once the file goes to upload, the program hangs for a couple minutes, then it states that it timed out.</p>\n<pre><code>java.net.ConnectException: Connection timed out: connect\n    at java.net.DualStackPlainSocketImpl.connect0(Native Method)\n    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:579)\n    at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:762)\n    at org.apache.commons.net.ftp.FTPClient._storeFile(FTPClient.java:565)\n    at org.apache.commons.net.ftp.FTPClient.__storeFile(FTPClient.java:557)\n    at org.apache.commons.net.ftp.FTPClient.storeFile(FTPClient.java:1795)\n    at AdvertisementCreator.main(AdvertisementCreator.java:128)\n\n \n</code></pre>\n<p>Here is the code I have for the FTP connection: (Keep in mind I omitted the login details)</p>\n<pre><code>FTPClient fClient = new FTPClient();\ntry {\n    fClient.connect(server, port);\n    showServerReply(fClient);\n    int replyCode = fClient.getReplyCode();\n    if (!FTPReply.isPositiveCompletion(replyCode)) {\n        System.out.println(&quot;Operation failed. Server reply code: &quot; + replyCode);\n        return;\n    }\n    boolean success = fClient.login(user, pass);\n    showServerReply(fClient);\n    if (!success) {\n        System.out.println(&quot;Could not login to the server&quot;);\n    } else {\n        System.out.println(&quot;You are now logged on!&quot;);\n        loginLoop = false;\n    }\n    fClient.enterLocalPassiveMode();\n    fClient.setFileType(FTP.BINARY_FILE_TYPE);\n    File localFile = new File(&quot;files\\\\shared.txt&quot;);\n    String remoteFile = &quot;shared.txt&quot;;\n    InputStream inputStream = new FileInputStream(localFile);\n    System.out.println(&quot;Start uploading the file&quot;);\n    boolean done = fClient.storeFile(remoteFile, inputStream);\n    inputStream.close();\n    if (done) {\n        System.out.println(remoteFile+&quot; has been uploaded successfully&quot;);\n    }\n} catch (IOException ex) {\n    System.out.println(&quot;Oops! Something wrong happened&quot;);\n    ex.printStackTrace();\n} finally {\n    try {\n        if (fClient.isConnected()) {\n            fClient.logout();\n            fClient.disconnect();\n            System.out.println(&quot;FTP Disconnected&quot;);\n        }\n    } catch (IOException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<p>I have never really messed with Apache Commons FTP until today.  If anyone could provide some insight, I would greatly appreciate it</p>\n<p>Edit: I forgot to mention that before adding the following line, the file transferred, but when I tried to open it on the server, it was empty.</p>\n<pre><code>fClient.enterLocalPassiveMode();\nfClient.setFileType(FTP.BINARY_FILE_TYPE);\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [
    {
      "owner": {
        "account_id": 71739,
        "reputation": 311873,
        "user_id": 207421,
        "user_type": "registered",
        "accept_rate": 82,
        "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=256&d=identicon&r=PG",
        "display_name": "user207421",
        "link": "https://stackoverflow.com/users/207421/user207421"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1688616989,
      "post_id": 28130278,
      "comment_id": 135098171,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {}
}