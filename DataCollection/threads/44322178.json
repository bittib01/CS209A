{
  "question": {
    "tags": [
      "java",
      "android",
      "database",
      "android-room"
    ],
    "owner": {
      "account_id": 3728672,
      "reputation": 13147,
      "user_id": 3101777,
      "user_type": "registered",
      "accept_rate": 79,
      "profile_image": "https://i.sstatic.net/1zAxp.jpg?s=256",
      "display_name": "Misha Akopov",
      "link": "https://stackoverflow.com/users/3101777/misha-akopov"
    },
    "is_answered": true,
    "view_count": 227125,
    "protected_date": 1523878824,
    "accepted_answer_id": 44645943,
    "answer_count": 18,
    "score": 581,
    "last_activity_date": 1752067713,
    "creation_date": 1496384738,
    "last_edit_date": 1577946875,
    "question_id": 44322178,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/44322178/room-schema-export-directory-is-not-provided-to-the-annotation-processor-so-we",
    "title": "Room - Schema export directory is not provided to the annotation processor so we cannot export the schema",
    "body": "<p>I am using Android Database Component Room</p>\n\n<p>I've configured everything, but when I compile, Android Studio gives me this warning:</p>\n\n<blockquote>\n  <p>Schema export directory is not provided to the annotation processor so\n  we cannot export the schema. You can either provide\n  <code>room.schemaLocation</code> annotation processor argument OR set\n  exportSchema to false.</p>\n</blockquote>\n\n<p>As I understand it is the location where DB file will be located</p>\n\n<p>How can it affect my app? What is the best practice here? Should I use the default location (<code>false</code> value)?</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 263656,
        "reputation": 79593,
        "user_id": 549372,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://www.gravatar.com/avatar/430cfd8b3056a0425f950cb1c6abd208?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Martin Zeitler",
        "link": "https://stackoverflow.com/users/549372/martin-zeitler"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1752067713,
      "last_edit_date": 1752067713,
      "creation_date": 1752020420,
      "answer_id": 79694950,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>With version <code>2.7.2</code> none of this changes anything, likely because method <code>schemaDirectory(path: String)</code> of the <code>RoomExtension</code> does not function.</p>\n<p>When passing <code>Pair(key, value)</code> instead of <code>mapOf(key to value)</code>, it stops complaining.<br/>\nOne can then also remove the Room plug-in altogether, as it probably does not much else,<br/>\nexcept: warning that the annotation-processor does not know about the export location.</p>\n<pre><code>android.defaultConfig {\n    javaCompileOptions {\n        annotationProcessorOptions {\n            arguments += Pair(&quot;room.schemaLocation&quot;, &quot;$rootDir/schemas&quot;)\n        }\n    }\n}\n</code></pre>\n<hr />\n<p>It seems as if <code>AnnotationProcessorOptions</code> used to be an array of <code>Map</code> and is now <code>Pair</code>.<br/>\nBut the AGP <a href=\"https://developer.android.com/reference/tools/gradle-api/8.6/com/android/build/api/dsl/AnnotationProcessorOptions#arguments()\" rel=\"nofollow noreferrer\">documentation</a> clearly reads: <a href=\"https://github.com/JetBrains/kotlin/blob/2.2.0/libraries/stdlib/jvm/builtins/Collections.kt#L439\" rel=\"nofollow noreferrer\"><code>val arguments: MutableMap&lt;String, String&gt;</code></a></p>\n"
    },
    {
      "owner": {
        "account_id": 8610734,
        "reputation": 1200,
        "user_id": 6449273,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/9d4305e29162182aee843542ec76f4c6?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "jsa",
        "link": "https://stackoverflow.com/users/6449273/jsa"
      },
      "is_accepted": false,
      "score": 7,
      "last_activity_date": 1751040837,
      "last_edit_date": 1751040837,
      "creation_date": 1568364190,
      "answer_id": 57920156,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>I use <code>.kts</code> Gradle files (Kotlin Gradle DSL) and the <code>kotlin-kapt</code> plugin but I still get a script compilation error when I use Ivanov Maksim's answer.</p>\n<pre><code>Unresolved reference: kapt\n</code></pre>\n<p>For me this was the only thing which worked:</p>\n<pre><code>android {\n    defaultConfig {\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments += mapOf(&quot;room.schemaLocation&quot; to &quot;$rootDir/schemas&quot;)\n            }\n        }\n    }\n}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 4821746,
        "reputation": 457,
        "user_id": 3892248,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://i.sstatic.net/eh2gt.jpg?s=256",
        "display_name": "Ali Sadeghi",
        "link": "https://stackoverflow.com/users/3892248/ali-sadeghi"
      },
      "is_accepted": false,
      "score": 6,
      "last_activity_date": 1725199851,
      "creation_date": 1725199851,
      "answer_id": 78937534,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>If using room 2.6.0 and above + version catalog + Kotlin DSL:</p>\n<p><strong>Versions catalog:</strong></p>\n<pre><code>[versions]\nroom = &quot;2.6.1&quot;\n\n[plugins]\nroom = { id = &quot;androidx.room&quot;, version.ref = &quot;room&quot; }\n</code></pre>\n<p><strong>build.gradle(app):</strong></p>\n<pre><code>plugins {\n    alias(libs.plugins.room)\n}\n\nandroid {\n    room {\n        schemaDirectory(&quot;$projectDir/schemas&quot;)\n    }\n}\n</code></pre>\n<p><strong>build.gradle(project):</strong></p>\n<pre><code>plugins {\n    alias(libs.plugins.room) apply false\n}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 6495279,
        "reputation": 1672,
        "user_id": 5028085,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/5m0fK.jpg?s=256",
        "display_name": "AndroidEngineX",
        "link": "https://stackoverflow.com/users/5028085/androidenginex"
      },
      "is_accepted": false,
      "score": 11,
      "last_activity_date": 1716756392,
      "creation_date": 1716756392,
      "answer_id": 78536438,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p><strong>LATEST</strong> method</p>\n<p>For room version higher <code>2.6.0</code> you can use the Room gradle plugin as mentioned in the <a href=\"https://developer.android.com/jetpack/androidx/releases/room#gradle-plugin\" rel=\"noreferrer\">doc</a></p>\n<p>In the Gradle top level <code>build.gradle[.kts]</code> file add the following line in the Gradle plugin block</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;androidx.room&quot;) version &quot;$room_version&quot; apply false\n}\n</code></pre>\n<p>In the app module(or lib module where your Room db is defined) you can add the following Gradle plugin</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;androidx.room&quot;)\n}\n</code></pre>\n<p>And then in the file level of the <code>build.gradle[.kts]</code> add <code>room</code> block just like we add <code>android</code> block below</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>room {\n    schemaDirectory(&quot;$projectDir/schemas&quot;)\n}\n</code></pre>\n<p><strong>OLDER</strong> method</p>\n<p>In case either you are not using the Room Gradle plugin or you are using an older Room version than <code>2.6.0</code>. Add the below blocks in the file level(in the app or lib module where db is present) as per the <a href=\"https://developer.android.com/jetpack/androidx/releases/room#annotation-processor-options\" rel=\"noreferrer\">doc</a></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// For KSP\nksp {\n    arg(RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;)))\n}\n\n// For javac and KAPT\nandroid {\n    ...\n    defaultConfig {\n        javaCompileOptions {\n            annotationProcessorOptions {\n                compilerArgumentProviders(\n                    RoomSchemaArgProvider(File(projectDir, &quot;schemas&quot;))\n                )\n            }\n        }\n    }\n}\n\n// This is required as schema location is directory and using Gradle `CommandLineArgumentProvider` is important for correctness and incremental build \nclass RoomSchemaArgProvider(\n    @get:InputDirectory\n    @get:PathSensitive(PathSensitivity.RELATIVE)\n    val schemaDir: File,\n) : CommandLineArgumentProvider {\n    override fun asArguments(): Iterable&lt;String&gt; {\n        // Note: If you're using KAPT and javac, change the line below to\n        // return listOf(&quot;-Aroom.schemaLocation=${schemaDir.path}&quot;).\n        return listOf(&quot;room.schemaLocation=${schemaDir.path}&quot;)\n    }\n}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 22104302,
        "reputation": 2335,
        "user_id": 16360266,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/ada093a86588c65e84ec862af742e8ab?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Eyjafl",
        "link": "https://stackoverflow.com/users/16360266/eyjafl"
      },
      "is_accepted": false,
      "score": 133,
      "last_activity_date": 1712324610,
      "last_edit_date": 1712324610,
      "creation_date": 1647102379,
      "answer_id": 71451314,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>For Kotlin KSP:</p>\n<pre><code>ksp {\n    arg('room.schemaLocation', &quot;$projectDir/schemas&quot;)\n}\n</code></pre>\n<p>(it's Groovy DSL, in Kotlin DSL use double quotes)</p>\n"
    },
    {
      "owner": {
        "account_id": 2644499,
        "reputation": 8208,
        "user_id": 6505084,
        "user_type": "registered",
        "accept_rate": 14,
        "profile_image": "https://i.sstatic.net/m8TJM.png?s=256",
        "display_name": "DoruChidean",
        "link": "https://stackoverflow.com/users/6505084/doruchidean"
      },
      "is_accepted": true,
      "score": 561,
      "last_activity_date": 1711949699,
      "last_edit_date": 1711949699,
      "creation_date": 1497941916,
      "answer_id": 44645943,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>As per the <a href=\"https://developer.android.com/reference/androidx/room/Database#exportSchema()\" rel=\"noreferrer\">docs</a>:</p>\n<blockquote>\n<p>You can set annotation processor argument (room.schemaLocation) to tell Room to export the schema into a folder. Even though it is not mandatory, it is a good practice to have version history in your codebase and you should commit that file into your version control system (but don't ship it with your app!).</p>\n</blockquote>\n<p>So if you don't need to check the schema and you want to get rid of the warning, just add <code>exportSchema = false</code> to your <code>RoomDatabase</code>, as follows.</p>\n<pre><code>@Database(entities = { YourEntity.class }, version = 1, exportSchema = false)\npublic abstract class AppDatabase extends RoomDatabase {\n   //...\n}\n</code></pre>\n<p>If you follow @mikejonesguy <a href=\"https://stackoverflow.com/a/44424908/1363731\">answer</a> below, you will follow the good practice mentioned in the docs.\nBasically you will get a <code>.json</code> file in your <code>../app/schemas/</code> folder, which looks something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;formatVersion&quot;: 1,\n  &quot;database&quot;: {\n    &quot;version&quot;: 1,\n    &quot;identityHash&quot;: &quot;53db508c5248423325bd5393a1c88c03&quot;,\n    &quot;entities&quot;: [\n      {\n        &quot;tableName&quot;: &quot;sms_table&quot;,\n        &quot;createSql&quot;: &quot;CREATE TABLE IF NOT EXISTS `${TABLE_NAME}` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `message` TEXT, `date` INTEGER, `client_id` INTEGER)&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;fieldPath&quot;: &quot;id&quot;,\n            &quot;columnName&quot;: &quot;id&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;message&quot;,\n            &quot;columnName&quot;: &quot;message&quot;,\n            &quot;affinity&quot;: &quot;TEXT&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;date&quot;,\n            &quot;columnName&quot;: &quot;date&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          },\n          {\n            &quot;fieldPath&quot;: &quot;clientId&quot;,\n            &quot;columnName&quot;: &quot;client_id&quot;,\n            &quot;affinity&quot;: &quot;INTEGER&quot;\n          }\n        ],\n        &quot;primaryKey&quot;: {\n          &quot;columnNames&quot;: [\n            &quot;id&quot;\n          ],\n          &quot;autoGenerate&quot;: true\n        },\n        &quot;indices&quot;: [],\n        &quot;foreignKeys&quot;: []\n      }\n    ],\n    &quot;setupQueries&quot;: [\n      &quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;,\n      &quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, \\&quot;53db508c5248423325bd5393a1c88c03\\&quot;)&quot;\n    ]\n  }\n}\n</code></pre>\n<p>If my understanding is correct, you will get such a file with every database version update, so that you can easily follow the history of your db.</p>\n"
    },
    {
      "owner": {
        "account_id": 18450048,
        "reputation": 688,
        "user_id": 13440404,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/Ghtur.jpg?s=256",
        "display_name": "Moataz",
        "link": "https://stackoverflow.com/users/13440404/moataz"
      },
      "is_accepted": false,
      "score": 5,
      "last_activity_date": 1710115910,
      "creation_date": 1710115910,
      "answer_id": 78137898,
      "question_id": 44322178,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>If you are using room with <strong>ksp</strong> add this in your <strong>app-module-build</strong></p>\n<pre><code>android {\n...\ndefaultConfig {\n    ...\n    /**\n     * Set the Room database schema export location for debug build to inspect the database\n     */\n    ksp {\n        arg(&quot;room.schemaLocation&quot;, &quot;$projectDir/schemas&quot;)\n    }\n  }\n}\n</code></pre>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "79694950": [],
    "57920156": [],
    "78937534": [],
    "78536438": [
      {
        "owner": {
          "account_id": 6495279,
          "reputation": 1672,
          "user_id": 5028085,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/5m0fK.jpg?s=256",
          "display_name": "AndroidEngineX",
          "link": "https://stackoverflow.com/users/5028085/androidenginex"
        },
        "reply_to_user": {
          "account_id": 1008068,
          "reputation": 362,
          "user_id": 1021253,
          "user_type": "registered",
          "accept_rate": 100,
          "profile_image": "https://www.gravatar.com/avatar/a3e8675cdf221032cf1c93352ef16ff7?s=256&d=identicon&r=PG",
          "display_name": "Granjero",
          "link": "https://stackoverflow.com/users/1021253/granjero"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1719480469,
        "post_id": 78536438,
        "comment_id": 138712749,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1008068,
          "reputation": 362,
          "user_id": 1021253,
          "user_type": "registered",
          "accept_rate": 100,
          "profile_image": "https://www.gravatar.com/avatar/a3e8675cdf221032cf1c93352ef16ff7?s=256&d=identicon&r=PG",
          "display_name": "Granjero",
          "link": "https://stackoverflow.com/users/1021253/granjero"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1719438313,
        "post_id": 78536438,
        "comment_id": 138709396,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "71451314": [
      {
        "owner": {
          "account_id": 22104302,
          "reputation": 2335,
          "user_id": 16360266,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/ada093a86588c65e84ec862af742e8ab?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "Eyjafl",
          "link": "https://stackoverflow.com/users/16360266/eyjafl"
        },
        "reply_to_user": {
          "account_id": 3791,
          "reputation": 69760,
          "user_id": 5536,
          "user_type": "registered",
          "accept_rate": 75,
          "profile_image": "https://i.sstatic.net/2RAZb.jpg?s=256",
          "display_name": "Paul Stephenson",
          "link": "https://stackoverflow.com/users/5536/paul-stephenson"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1702059616,
        "post_id": 71451314,
        "comment_id": 136855186,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 3791,
          "reputation": 69760,
          "user_id": 5536,
          "user_type": "registered",
          "accept_rate": 75,
          "profile_image": "https://i.sstatic.net/2RAZb.jpg?s=256",
          "display_name": "Paul Stephenson",
          "link": "https://stackoverflow.com/users/5536/paul-stephenson"
        },
        "edited": false,
        "score": 4,
        "creation_date": 1702052401,
        "post_id": 71451314,
        "comment_id": 136854105,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 20511146,
          "reputation": 428,
          "user_id": 15052881,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/dc4c8624ea8ccd9ff00d1912e2744c63?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "Programmer007",
          "link": "https://stackoverflow.com/users/15052881/programmer007"
        },
        "reply_to_user": {
          "account_id": 15034189,
          "reputation": 107,
          "user_id": 10851172,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/1c18bf9d4987de1070ba372562f91288?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "josh",
          "link": "https://stackoverflow.com/users/10851172/josh"
        },
        "edited": false,
        "score": 3,
        "creation_date": 1694603499,
        "post_id": 71451314,
        "comment_id": 135912272,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 15034189,
          "reputation": 107,
          "user_id": 10851172,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/1c18bf9d4987de1070ba372562f91288?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "josh",
          "link": "https://stackoverflow.com/users/10851172/josh"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1694586062,
        "post_id": 71451314,
        "comment_id": 135908883,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 13476330,
          "reputation": 1240,
          "user_id": 9723204,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/JwPwM.png?s=256",
          "display_name": "Hawklike",
          "link": "https://stackoverflow.com/users/9723204/hawklike"
        },
        "edited": false,
        "score": 4,
        "creation_date": 1667338261,
        "post_id": 71451314,
        "comment_id": 131143274,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "44645943": [
      {
        "owner": {
          "account_id": 2186330,
          "reputation": 1917,
          "user_id": 1934673,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/cfea11519561a332f662b40aa7ad8c19?s=256&d=identicon&r=PG",
          "display_name": "M.Paunov",
          "link": "https://stackoverflow.com/users/1934673/m-paunov"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1649251062,
        "post_id": 44645943,
        "comment_id": 126828152,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "78137898": []
  }
}