{
  "question": {
    "tags": [
      "java",
      "google-cloud-platform",
      "redis",
      "redisson"
    ],
    "owner": {
      "account_id": 4716885,
      "reputation": 965,
      "user_id": 3872529,
      "user_type": "registered",
      "accept_rate": 67,
      "profile_image": "https://www.gravatar.com/avatar/51cb55fc3b5201aef03d2b13ea7a950c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "M.Ahsen Taqi",
      "link": "https://stackoverflow.com/users/3872529/m-ahsen-taqi"
    },
    "is_answered": false,
    "view_count": 10611,
    "answer_count": 2,
    "score": 3,
    "last_activity_date": 1764532930,
    "creation_date": 1643207355,
    "last_edit_date": 1643289187,
    "question_id": 70865073,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/70865073/redisson-client-redistimeoutexception-issue",
    "title": "Redisson client ; RedisTimeoutException issue",
    "body": "<p>I am using <code>Google cloud managed redis cluster(v5)</code> via <code>redisson(3.12.5)</code></p>\n<p>Following are my <code>SingleServer</code> configurations in yaml file</p>\n<pre><code>singleServerConfig:\n    idleConnectionTimeout: 10000\n    connectTimeout: 10000\n    timeout: 3000\n    retryAttempts: 3\n    retryInterval: 1500\n    password: null\n    subscriptionsPerConnection: 5\n    clientName: null\n    address: &quot;redis://127.0.0.1:6379&quot;\n    subscriptionConnectionMinimumIdleSize: 1\n    subscriptionConnectionPoolSize: 50\n    connectionMinimumIdleSize: 40\n    connectionPoolSize: 250\n    database: 0\n    dnsMonitoringInterval: 5000\nthreads: 0\nnettyThreads: 0\ncodec: !&lt;org.redisson.codec.JsonJacksonCodec&gt; {}\n</code></pre>\n<p>I am getting following exceptions when I increase the load on my application</p>\n<pre><code>org.redisson.client.RedisTimeoutException: Unable to acquire connection! Increase connection pool size and/or retryInterval settings Node source: NodeSource \n\norg.redisson.client.RedisTimeoutException: Command still hasn't been written into connection! Increase nettyThreads and/or retryInterval settings. Payload size in bytes: 34. Node source: NodeSource \n</code></pre>\n<p>It seems there is no issue on redis cluster and i think i need to make tweaking in my client side redis connection pooling confs(mentioned above) to make it work.</p>\n<p>Please suggest me the changes i need to make in my confs</p>\n<p>I am also curious if I should close the <code>Redis</code> connection after making get/set calls. I have tried finding this but found nothing conclusive on how to close <code>Redis</code> connections</p>\n<p>One last thing that I want to ask is that is there any mechanism to get <code>Redis</code> connection pool stats(active connection, idle connection etc ) in <code>Redisson</code></p>\n<p><strong>Edit1:</strong></p>\n<p>I have tried by changing values following values in 3 different iterations</p>\n<p><strong>Iteration 1:</strong></p>\n<pre><code> idleConnectionTimeout: 30000\n connectTimeout: 30000\n timeout: 30000\n</code></pre>\n<p><strong>Iteration 2:</strong></p>\n<p><code>nettyThreads: 0</code></p>\n<p><strong>Iteration 3:</strong></p>\n<pre><code>connectionMinimumIdleSize: 100\nconnectionPoolSize: 750\n</code></pre>\n<p>I have tried these things but nothing has worked for me</p>\n<p>Any help is appreciated.</p>\n<p>Thanks in advance</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 399098,
        "reputation": 10842,
        "user_id": 764206,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/69a2897401b5e9d1aa5b25316d971271?s=256&d=identicon&r=PG",
        "display_name": "Nikita Koksharov",
        "link": "https://stackoverflow.com/users/764206/nikita-koksharov"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1663395184,
      "creation_date": 1663395184,
      "answer_id": 73752553,
      "question_id": 70865073,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Try to set <code>nettyThreads = 64</code> settings</p>\n"
    },
    {
      "owner": {
        "account_id": 3352154,
        "reputation": 306,
        "user_id": 2815984,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/YSXln.jpg?s=256",
        "display_name": "Roopesh Payyanath",
        "link": "https://stackoverflow.com/users/2815984/roopesh-payyanath"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1646228471,
      "creation_date": 1646228471,
      "answer_id": 71323726,
      "question_id": 70865073,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Assuming you are getting low memory alerts on your cache JVM.</p>\n<p>You may have to analyze the traffic and determine 2 things</p>\n<ol>\n<li>Too many parallel cache persists.</li>\n<li>Huge chunk of data being persisted.</li>\n</ol>\n<p>Both can be determined by the traffic on your server.</p>\n<p>For option 1 configuring pool-size would solve you issue, but for option 2 you may have to refactor your code to persist data in smaller chunks.</p>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 1517172,
        "reputation": 1055,
        "user_id": 1417917,
        "user_type": "registered",
        "accept_rate": 100,
        "profile_image": "https://i.sstatic.net/pvOZN.jpg?s=256",
        "display_name": "Ali Ahmad",
        "link": "https://stackoverflow.com/users/1417917/ali-ahmad"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1643283655,
      "post_id": 70865073,
      "comment_id": 125301137,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "73752553": [],
    "71323726": []
  }
}