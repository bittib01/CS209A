{
  "question": {
    "tags": [
      "java",
      "json",
      "jackson"
    ],
    "owner": {
      "user_type": "does_not_exist",
      "display_name": "user372743"
    },
    "is_answered": true,
    "view_count": 36250,
    "answer_count": 7,
    "score": 60,
    "last_activity_date": 1764863051,
    "creation_date": 1376497620,
    "last_edit_date": 1495535497,
    "question_id": 18237222,
    "content_license": "CC BY-SA 3.0",
    "link": "https://stackoverflow.com/questions/18237222/duplicate-json-field-with-jackson",
    "title": "Duplicate JSON Field with Jackson",
    "body": "<p>I am using Jackson for JSON (de)serialization in conjunction with Spring. However I am having an issue with a field being twice in some cases.</p>\n\n<p>I have an abstract class: </p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"mimeType\")\n@JsonSubTypes({\n    @JsonSubTypes.Type(value = ImageBookmarkJsonModel.class, name = \"image/jpeg\"),\n    @JsonSubTypes.Type(value = EpubBookmarkJsonModel.class, name = \"application/epub+zip\")\n})\npublic abstract class AbstractBookmarkJsonModel extends AbstractJsonModel {\n    protected String mimeType;\n    // Removed other fields for brevity\n\n    public String getMimeType() {\n        return mimeType;\n    }\n\n    public void setMimeType(String mimeType) {\n        this.mimeType = mimeType;\n    }\n\n    @Override\n    public String toString() {\n        ObjectMapper mapper = new ObjectMapper();\n\n        try {\n            return mapper.writeValueAsString(this);\n        } catch (IOException e) {\n            throw new IllegalStateException(\"Cannot convert object of type \" + this.getClass().toString() + \" to JSON\", e);\n        }\n    }\n}\n</code></pre>\n\n<p>And a concrete class extend the abstract:</p>\n\n<pre><code>public class EpubBookmarkJsonModel extends AbstractBookmarkJsonModel {\n    private static final long serialVersionUID = 1L;\n    // Removed other fields for brevity\n\n    public EpubBookmarkJsonModel() {\n        this.mimeType = \"application/epub+zip\";\n    }\n}\n</code></pre>\n\n<p>The problem is that when I serialize this JSON, I get a duplicate <code>mimeType</code> field:</p>\n\n<pre><code>{\n  \"mimeType\": \"application/epub+zip\",\n  \"mimeType\": \"application/epub+zip\",\n  \"userId\": 24,\n  \"acid\": \"ACID-000000000029087\",\n  \"added\": \"2013-08-14T12:02:17Z\",\n  \"epubBookmarkId\": 34,\n  \"cfi\": \"epubcfi(/6/4!/2/68)\",\n  \"context\": \"CONTEXT\"\n}\n</code></pre>\n\n<p>I have tried using the recommendation of <a href=\"https://stackoverflow.com/questions/13262662/duplicate-json-property-when-converting-java-object-to-json-string-using-jackson\">previous</a> <a href=\"https://stackoverflow.com/questions/7105745/how-to-specify-jackson-to-only-use-fields-preferably-globally\">answers</a> to use the <code>@JsonAutoDetect</code> annotation to specify that only fields on a class should be used as well as setting the same on the <code>ObjectMapper</code>, however this does not fix the problem.</p>\n\n<p>Annotation:</p>\n\n<pre><code>@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE,\n        setterVisibility = JsonAutoDetect.Visibility.NONE, creatorVisibility = JsonAutoDetect.Visibility.NONE,\n        isGetterVisibility = JsonAutoDetect.Visibility.NONE)\n</code></pre>\n\n<p>ObjectMapper:</p>\n\n<pre><code>    ObjectMapper mapper = new ObjectMapper();\n    mapper.getSerializationConfig().getDefaultVisibilityChecker()\n            .withFieldVisibility(JsonAutoDetect.Visibility.ANY)\n            .withGetterVisibility(JsonAutoDetect.Visibility.NONE)\n            .withSetterVisibility(JsonAutoDetect.Visibility.NONE)\n            .withCreatorVisibility(JsonAutoDetect.Visibility.NONE);\n</code></pre>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 6158622,
        "reputation": 436,
        "user_id": 4800887,
        "user_type": "registered",
        "accept_rate": 40,
        "profile_image": "https://www.gravatar.com/avatar/9c0752eaedc4176a43e122960bdc87ce?s=256&d=identicon&r=PG",
        "display_name": "dmitryb",
        "link": "https://stackoverflow.com/users/4800887/dmitryb"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1764863051,
      "creation_date": 1764863051,
      "answer_id": 79838101,
      "question_id": 18237222,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>In case this will be helpful to someone, setting <code>visibility</code> on <code>ObjectMapper</code> object like below worked for me.</p>\n<pre><code>objectMapper.setVisibility(objectMapper.getSerializationConfig().getDefaultVisibilityChecker()\n        .withFieldVisibility(JsonAutoDetect.Visibility.ANY)\n        .withGetterVisibility(JsonAutoDetect.Visibility.NONE)\n        .withSetterVisibility(JsonAutoDetect.Visibility.NONE)\n        .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));\n</code></pre>\n<p>Then I only need to have <code>@JsonProperty</code> on the field definition.</p>\n<pre><code>public class MyClass {\n  @JsonProperty(&quot;newName&quot;)\n  private OtherClass otherClass = null;\n\n  public OtherClass getOtherClass() {\n    return otherClass;\n  }\n\n  public void setOtherClass(OtherClass otherClass) {\n    this.otherClass = otherClass;\n  }\n}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 6100969,
        "reputation": 984,
        "user_id": 4760014,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-7XaUmG8PvMA/AAAAAAAAAAI/AAAAAAAAAFY/PvO8dJRi0S8/s256-rj/photo.jpg",
        "display_name": "Thomas Vaughan",
        "link": "https://stackoverflow.com/users/4760014/thomas-vaughan"
      },
      "is_accepted": false,
      "score": 81,
      "last_activity_date": 1735278565,
      "last_edit_date": 1735278565,
      "creation_date": 1443449645,
      "answer_id": 32825241,
      "question_id": 18237222,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>I solved this by using the <code>JsonTypeInfo.As.EXISTING_PROPERTY</code> in the @JsonTypeInfo annotation.</p>\n"
    },
    {
      "owner": {
        "account_id": 15938469,
        "reputation": 23,
        "user_id": 11500966,
        "user_type": "registered",
        "profile_image": "https://lh3.googleusercontent.com/-r-g5NuUDKLE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rexZ-XzHC86_tqrmF_cvHe9w7Ucrg/mo/s256-rj/photo.jpg",
        "display_name": "Chris",
        "link": "https://stackoverflow.com/users/11500966/chris"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1709774819,
      "creation_date": 1709774819,
      "answer_id": 78118274,
      "question_id": 18237222,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>For me, duplicate fields in JSON occurred when I accidently had same name for field and JSON property like .</p>\n<p><code>@JsonProperty(&quot;Feild1&quot;) private String Field1;</code></p>\n<p>I fixed it like this</p>\n<p><code>@JsonProperty(&quot;Feild1&quot;) private String field1;</code></p>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "79838101": [],
    "32825241": [
      {
        "owner": {
          "account_id": 436004,
          "reputation": 101,
          "user_id": 822895,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/e3f60cfdbd3a613a9f9e2b897aa29cd4?s=256&d=identicon&r=PG",
          "display_name": "Andrey Andrei",
          "link": "https://stackoverflow.com/users/822895/andrey-andrei"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1714173994,
        "post_id": 32825241,
        "comment_id": 138205202,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1535561,
          "reputation": 9056,
          "user_id": 1431720,
          "user_type": "registered",
          "accept_rate": 89,
          "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=256&d=identicon&r=PG",
          "display_name": "Robert",
          "link": "https://stackoverflow.com/users/1431720/robert"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1710366432,
        "post_id": 32825241,
        "comment_id": 137788011,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1714235,
          "reputation": 93,
          "user_id": 1571676,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/d3ca3929e645029f27f854395a30d2f3?s=256&d=identicon&r=PG",
          "display_name": "Rick Hanton",
          "link": "https://stackoverflow.com/users/1571676/rick-hanton"
        },
        "edited": false,
        "score": 3,
        "creation_date": 1646687704,
        "post_id": 32825241,
        "comment_id": 126181334,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1565759,
          "reputation": 511,
          "user_id": 1454613,
          "user_type": "registered",
          "accept_rate": 78,
          "profile_image": "https://www.gravatar.com/avatar/7046128e0345c2ec9e87122a8ec24baf?s=256&d=identicon&r=PG",
          "display_name": "SO AI Can Scrape Deez Nuts",
          "link": "https://stackoverflow.com/users/1454613/so-ai-can-scrape-deez-nuts"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1637630984,
        "post_id": 32825241,
        "comment_id": 123872843,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 72596,
          "reputation": 6812,
          "user_id": 209568,
          "user_type": "registered",
          "accept_rate": 57,
          "profile_image": "https://www.gravatar.com/avatar/6127bcd1a5b5823106da0a9e1fb07a57?s=256&d=identicon&r=PG",
          "display_name": "Adam",
          "link": "https://stackoverflow.com/users/209568/adam"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1564152635,
        "post_id": 32825241,
        "comment_id": 100949309,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 6100969,
          "reputation": 984,
          "user_id": 4760014,
          "user_type": "registered",
          "profile_image": "https://lh6.googleusercontent.com/-7XaUmG8PvMA/AAAAAAAAAAI/AAAAAAAAAFY/PvO8dJRi0S8/s256-rj/photo.jpg",
          "display_name": "Thomas Vaughan",
          "link": "https://stackoverflow.com/users/4760014/thomas-vaughan"
        },
        "edited": false,
        "score": 2,
        "creation_date": 1523477336,
        "post_id": 32825241,
        "comment_id": 86582710,
        "content_license": "CC BY-SA 3.0"
      },
      {
        "owner": {
          "account_id": 404325,
          "reputation": 3340,
          "user_id": 772590,
          "user_type": "registered",
          "accept_rate": 69,
          "profile_image": "https://www.gravatar.com/avatar/e12c7753ffedc4af494a0f024ff371ef?s=256&d=identicon&r=PG",
          "display_name": "Santosh Joshi",
          "link": "https://stackoverflow.com/users/772590/santosh-joshi"
        },
        "edited": false,
        "score": 4,
        "creation_date": 1523378944,
        "post_id": 32825241,
        "comment_id": 86532950,
        "content_license": "CC BY-SA 3.0"
      },
      {
        "owner": {
          "account_id": 1318781,
          "reputation": 1833,
          "user_id": 1265070,
          "user_type": "registered",
          "accept_rate": 29,
          "profile_image": "https://www.gravatar.com/avatar/df66f0b50defb0a33bcfde1fba77b594?s=256&d=identicon&r=PG",
          "display_name": "ozma",
          "link": "https://stackoverflow.com/users/1265070/ozma"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1482671273,
        "post_id": 32825241,
        "comment_id": 69846377,
        "content_license": "CC BY-SA 3.0"
      },
      {
        "owner": {
          "account_id": 1746627,
          "reputation": 1017,
          "user_id": 1596665,
          "user_type": "registered",
          "accept_rate": 50,
          "profile_image": "https://i.sstatic.net/q3ziU.jpg?s=256",
          "display_name": "c-toesca",
          "link": "https://stackoverflow.com/users/1596665/c-toesca"
        },
        "edited": false,
        "score": 6,
        "creation_date": 1460147671,
        "post_id": 32825241,
        "comment_id": 60624548,
        "content_license": "CC BY-SA 3.0"
      }
    ],
    "78118274": []
  }
}