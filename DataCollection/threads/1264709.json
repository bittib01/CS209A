{
  "question": {
    "tags": [
      "java",
      "arrays",
      "inputstream"
    ],
    "owner": {
      "account_id": 47576,
      "reputation": 13095,
      "user_id": 140962,
      "user_type": "registered",
      "accept_rate": 99,
      "profile_image": "https://i.sstatic.net/ttvCS.jpg?s=256",
      "display_name": "JGC",
      "link": "https://stackoverflow.com/users/140962/jgc"
    },
    "is_answered": true,
    "view_count": 1251054,
    "protected_date": 1485901984,
    "accepted_answer_id": 1264756,
    "answer_count": 35,
    "score": 1024,
    "last_activity_date": 1726582305,
    "creation_date": 1250062042,
    "last_edit_date": 1410343749,
    "question_id": 1264709,
    "content_license": "CC BY-SA 3.0",
    "link": "https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-array-in-java",
    "title": "Convert InputStream to byte array in Java",
    "body": "<p>How do I read an entire <code>InputStream</code> into a byte array?</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 12787173,
        "reputation": 910,
        "user_id": 9253032,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/895857b3c90018c0e09daed025978fde?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "eicksl",
        "link": "https://stackoverflow.com/users/9253032/eicksl"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1726582305,
      "last_edit_date": 1726582305,
      "creation_date": 1726517228,
      "answer_id": 78991637,
      "question_id": 1264709,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>When using other answers here, please ensure that you can trust the source of the input stream. Reading an arbitrarily large input stream could exhaust all memory on the system and lead to a <a href=\"https://en.wikipedia.org/wiki/Denial-of-service_attack\" rel=\"nofollow noreferrer\">DOS attack</a>.</p>\n<p>Note that <code>InputStream.available()</code> has to do with Java's non-blocking IO capabilities and cannot be relied on to get the total size of the input stream. <strong>Reading a stream is the only way to be sure what its size is</strong>. It is therefore advisable to throw an exception after reading some <em>n</em> bytes. One way is to use apache commons' <code>ThresholdingOutputStream</code>:</p>\n<pre><code>public static byte[] toByteArray(InputStream is) throws IOException {\n    byte[] bytes;\n    UnsynchronizedByteArrayOutputStream ubaOutput = UnsynchronizedByteArrayOutputStream.builder().get();\n    ThresholdingOutputStream thresholdOutput = new ThresholdingOutputStream(MAX_BYTES, os -&gt; {\n        throw new IllegalArgumentException(String.format(&quot;Input stream length exceeds maximum allowed size of %d bytes&quot;, MAX_BYTES));\n    }, os -&gt; ubaOutput);\n    IOUtils.copy(is, thresholdOutput);\n    bytes = ubaOutput.toByteArray();\n    ubaOutput.close();\n    thresholdOutput.close();\n    return bytes;\n}\n</code></pre>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "78991637": []
  }
}