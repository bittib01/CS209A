{
  "question": {
    "tags": [
      "java",
      "iterator",
      "java-8"
    ],
    "owner": {
      "account_id": 1744405,
      "reputation": 29720,
      "user_id": 1594933,
      "user_type": "registered",
      "accept_rate": 74,
      "profile_image": "https://www.gravatar.com/avatar/c79e2c2fc783083a98e4d515b091edfe?s=256&d=identicon&r=PG",
      "display_name": "gontard",
      "link": "https://stackoverflow.com/users/1594933/gontard"
    },
    "is_answered": true,
    "view_count": 381998,
    "accepted_answer_id": 24511534,
    "answer_count": 13,
    "score": 645,
    "last_activity_date": 1742276792,
    "creation_date": 1404219915,
    "last_edit_date": 1631838064,
    "question_id": 24511052,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/24511052/how-to-convert-an-iterator-to-a-stream",
    "title": "How to convert an Iterator to a Stream?",
    "body": "<p>I am looking for a concise way to convert an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\" rel=\"noreferrer\"><code>Iterator</code></a> to a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\"><code>Stream</code></a> or more specifically to \"view\" the iterator as a stream.</p>\n\n<p>For performance reason, I would like to avoid a copy of the iterator in a new list:</p>\n\n<pre><code>Iterator&lt;String&gt; sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();\nCollection&lt;String&gt; copyList = new ArrayList&lt;String&gt;();\nsourceIterator.forEachRemaining(copyList::add);\nStream&lt;String&gt; targetStream = copyList.stream();\n</code></pre>\n\n<hr>\n\n<p>Based on the some suggestions in the comments, I have also tried to use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#generate-java.util.function.Supplier-\" rel=\"noreferrer\"><code>Stream.generate</code></a>:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    Iterator&lt;String&gt; sourceIterator = Arrays.asList(\"A\", \"B\", \"C\").iterator();\n    Stream&lt;String&gt; targetStream = Stream.generate(sourceIterator::next);\n    targetStream.forEach(System.out::println);\n}\n</code></pre>\n\n<p>However, I get a <code>NoSuchElementException</code> (since there is no invocation of <code>hasNext</code>)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread \"main\" java.util.NoSuchElementException\n    at java.util.AbstractList$Itr.next(AbstractList.java:364)\n    at Main$$Lambda$1/1175962212.get(Unknown Source)\n    at java.util.stream.StreamSpliterators$InfiniteSupplyingSpliterator$OfRef.tryAdvance(StreamSpliterators.java:1351)\n    at java.util.Spliterator.forEachRemaining(Spliterator.java:326)\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\n    at Main.main(Main.java:20)\n</code></pre>\n\n<p>I have looked at <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/StreamSupport.html\" rel=\"noreferrer\"><code>StreamSupport</code></a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html\" rel=\"noreferrer\"><code>Collections</code></a> but I didn't find anything.</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 30239291,
        "reputation": 61,
        "user_id": 23174726,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/ab2e521e3451199d184ba3868a6800c4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Keegan Carlo Falcao",
        "link": "https://stackoverflow.com/users/23174726/keegan-carlo-falcao"
      },
      "is_accepted": false,
      "score": 7,
      "last_activity_date": 1742276792,
      "last_edit_date": 1742276792,
      "creation_date": 1704653345,
      "answer_id": 77774391,
      "question_id": 24511052,
      "content_license": "CC BY-SA 4.0",
      "body": "<p><code>Stream.iterate</code> does the job for you.\nSimply iterate while it has elements and map them to next.</p>\n<pre><code>public &lt;X&gt; Stream&lt;X&gt; toStream(Iterator&lt;X&gt; iter) {\n    return Stream.iterate(iter, Iterator::hasNext, UnaryOperator.identity()).map(Iterator::next);\n}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 39063067,
        "reputation": 11,
        "user_id": 29087944,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/c7749446db70cf2919e0504a51dac36d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "SurajK AtWork",
        "link": "https://stackoverflow.com/users/29087944/surajk-atwork"
      },
      "is_accepted": false,
      "score": 1,
      "last_activity_date": 1739437086,
      "creation_date": 1739437086,
      "answer_id": 79435573,
      "question_id": 24511052,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>I prefer two static methods\n<br>1. For Iterator object</p>\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; of(Iterator&lt;T&gt; iterator) {\nreturn StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator,\n    Spliterator.ORDERED | Spliterator.IMMUTABLE), false);}\n</code></pre>\n<p><br> 2. For iterable object</p>\n<pre><code> public static &lt;T&gt; Stream&lt;T&gt; of(Iterable&lt;T&gt; iterable) {\nreturn StreamUtil.of(iterable.iterator());}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 1693760,
        "reputation": 11266,
        "user_id": 1555615,
        "user_type": "registered",
        "accept_rate": 62,
        "profile_image": "https://i.sstatic.net/BwrUZ.jpg?s=256",
        "display_name": "Marinos An",
        "link": "https://stackoverflow.com/users/1555615/marinos-an"
      },
      "is_accepted": false,
      "score": 2,
      "last_activity_date": 1729065140,
      "last_edit_date": 1729065140,
      "creation_date": 1617870670,
      "answer_id": 67000164,
      "question_id": 24511052,
      "content_license": "CC BY-SA 4.0",
      "body": "<p><strong>1</strong> <a href=\"https://stackoverflow.com/a/24511534/1555615\">assylias's solution</a> wrapped in a method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; toStream(Iterator&lt;T&gt; iterator) {\n    return StreamSupport.stream(((Iterable&lt;T&gt;)() -&gt; iterator).spliterator(), false);\n}\n</code></pre>\n<p><strong>2</strong> <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Streams.java\" rel=\"nofollow noreferrer\">guava Streams</a> implementation (marked with <code>@Beta</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Stream&lt;T&gt; stream(Iterator&lt;T&gt; iterator) {\n    return StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator, 0), false);\n}\n</code></pre>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "77774391": [
      {
        "owner": {
          "account_id": 238697,
          "reputation": 2017,
          "user_id": 507761,
          "user_type": "registered",
          "accept_rate": 100,
          "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=256&d=identicon&r=PG",
          "display_name": "Matthew Read",
          "link": "https://stackoverflow.com/users/507761/matthew-read"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1719508435,
        "post_id": 77774391,
        "comment_id": 138716997,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "79435573": [],
    "67000164": []
  }
}