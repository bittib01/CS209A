{
  "question": {
    "tags": [
      "java",
      "concurrency",
      "locking"
    ],
    "owner": {
      "account_id": 1931674,
      "reputation": 549,
      "user_id": 1740939,
      "user_type": "registered",
      "accept_rate": 69,
      "profile_image": "https://www.gravatar.com/avatar/edd856825b3121d6daecb2584e38e249?s=256&d=identicon&r=PG",
      "display_name": "Philipp Li",
      "link": "https://stackoverflow.com/users/1740939/philipp-li"
    },
    "is_answered": true,
    "view_count": 2979,
    "accepted_answer_id": 32843324,
    "answer_count": 2,
    "score": 3,
    "last_activity_date": 1764468521,
    "creation_date": 1443527471,
    "last_edit_date": 1764468521,
    "question_id": 32843259,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/32843259/better-solution-than-while-reentrantlock-islocked-for-waiting",
    "title": "Better solution than while (reentrantLock.isLocked()) for waiting",
    "body": "<p>I have a service bean which provides access to a Map. From time to time I need to rebuild the content of the Map which takes several seconds and I want to block the access to the map while it's rebuilding, because it can be accessed from different Threads.</p>\n<pre><code>@Service\npublic class MyService {\n  private Map&lt;Key,Value&gt; cache = null;\n  private ReentrantLock reentrantLock = new ReentrantLock();\n\n   public void rebuildCache(){\n     try {\n       reentrantLock.lock();\n       cache = new ConcurrentHashMap&lt;&gt;();\n       ... //processing time consuming stuff and building up the cache\n       }finally {\n        reentrantLock.unlock();\n     }\n   }\n    \n   public Value getValue(Key key){\n     while (lock.isLocked()){}\n     return cache.get(key);\n   }\n   ...\n}\n</code></pre>\n<p>As you can see I use</p>\n<pre><code>while (reentrantLock.isLocked()){}\n</code></pre>\n<p>to check if the lock is locked and wait until its unlocked. This solution seems to be quite dirty. Is there a better solution?</p>\n"
  },
  "answers": [],
  "question_comments": [
    {
      "owner": {
        "account_id": 2360785,
        "reputation": 12395,
        "user_id": 2067492,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=256&d=identicon&r=PG",
        "display_name": "matt",
        "link": "https://stackoverflow.com/users/2067492/matt"
      },
      "edited": false,
      "score": 1,
      "creation_date": 1443527911,
      "post_id": 32843259,
      "comment_id": 53520863,
      "content_license": "CC BY-SA 3.0"
    },
    {
      "owner": {
        "account_id": 3550933,
        "reputation": 2251,
        "user_id": 2965839,
        "user_type": "registered",
        "accept_rate": 88,
        "profile_image": "https://i.sstatic.net/ewrzl.jpg?s=256",
        "display_name": "Kiki",
        "link": "https://stackoverflow.com/users/2965839/kiki"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1443527653,
      "post_id": 32843259,
      "comment_id": 53520678,
      "content_license": "CC BY-SA 3.0"
    }
  ],
  "answer_comments": {}
}