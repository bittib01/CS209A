{
  "question": {
    "tags": [
      "java",
      "date",
      "timezone"
    ],
    "owner": {
      "account_id": 137777,
      "reputation": 199150,
      "user_id": 342235,
      "user_type": "registered",
      "accept_rate": 77,
      "profile_image": "https://www.gravatar.com/avatar/88e5a9eb011a73ab970ddc8cfb05ff85?s=256&d=identicon&r=PG",
      "display_name": "Freewind",
      "link": "https://stackoverflow.com/users/342235/freewind"
    },
    "is_answered": true,
    "view_count": 820288,
    "protected_date": 1433866025,
    "accepted_answer_id": 6841479,
    "answer_count": 11,
    "score": 7613,
    "last_activity_date": 1758885411,
    "creation_date": 1311754558,
    "last_edit_date": 1684606299,
    "question_id": 6841333,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-epoch-milli-times-in-year-1927-giving-a-strange-r",
    "title": "Why is subtracting these two epoch-milli Times (in year 1927) giving a strange result?",
    "body": "<p>If I run the following program, which parses two date strings referencing times 1 second apart and compares them:</p>\n<pre><code>public static void main(String[] args) throws ParseException {\n    SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);  \n    String str3 = &quot;1927-12-31 23:54:07&quot;;  \n    String str4 = &quot;1927-12-31 23:54:08&quot;;  \n    Date sDt3 = sf.parse(str3);  \n    Date sDt4 = sf.parse(str4);  \n    long ld3 = sDt3.getTime() /1000;  \n    long ld4 = sDt4.getTime() /1000;\n    System.out.println(ld4-ld3);\n}\n</code></pre>\n<p><strong>The output is:</strong></p>\n<pre><code>353\n</code></pre>\n<p>Why is <code>ld4-ld3</code>, not <code>1</code> (as I would expect from the one-second difference in the times), but <code>353</code>?</p>\n<p>If I change the dates to times 1 second later:</p>\n<pre><code>String str3 = &quot;1927-12-31 23:54:08&quot;;  \nString str4 = &quot;1927-12-31 23:54:09&quot;;  \n</code></pre>\n<p>Then <code>ld4-ld3</code> will be <code>1</code>.</p>\n<hr />\n<p><strong>Java version:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>java version &quot;1.6.0_22&quot;\nJava(TM) SE Runtime Environment (build 1.6.0_22-b04)\nDynamic Code Evolution Client VM (build 0.2-b02-internal, 19.0-b04-internal, mixed mode)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Timezone(`TimeZone.getDefault()`):\n\nsun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,\noffset=28800000,dstSavings=0,\nuseDaylight=false,\ntransitions=19,\nlastRule=null]\n\nLocale(Locale.getDefault()): zh_CN\n</code></pre>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 11683,
        "reputation": 1520792,
        "user_id": 22656,
        "user_type": "registered",
        "accept_rate": 86,
        "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
        "display_name": "Jon Skeet",
        "link": "https://stackoverflow.com/users/22656/jon-skeet"
      },
      "is_accepted": true,
      "score": 11937,
      "last_activity_date": 1740504452,
      "last_edit_date": 1740504452,
      "creation_date": 1311755470,
      "answer_id": 6841479,
      "question_id": 6841333,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>It's a time zone change on December 31st in Shanghai.</p>\n<p>See <a href=\"https://web.archive.org/web/20140821151721/https://www.timeanddate.com/time/change/china/shanghai?year=1927\" rel=\"noreferrer\">this page</a> for details of 1927 in Shanghai. Basically at midnight at the end of 1927, the clocks went back 5 minutes and 52 seconds. So &quot;1927-12-31 23:54:08&quot; actually happened twice, and it looks like Java is parsing it as the <em>later</em> possible instant for that local date/time - hence the difference.</p>\n<p>Just another episode in the often weird and wonderful world of time zones.</p>\n<p><strong>If rebuilt with version 2013a of <a href=\"https://github.com/nodatime/nodatime/blob/master/src/NodaTime.Demo/StackOverflowExamples.cs#L68\" rel=\"noreferrer\">TZDB</a></strong>, The original question would no longer demonstrate quite the same behaviour. In 2013a, the result would be 358 seconds, with a transition time of 23:54:03 instead of 23:54:08.</p>\n<p>I only noticed this because I'm collecting questions like this in Noda Time, in the form of <a href=\"https://github.com/nodatime/nodatime/blob/master/src/NodaTime.Demo/StackOverflowExamples.cs#L68\" rel=\"noreferrer\">unit tests</a>... The test has now been changed, but it just goes to show - not even historical data is safe.</p>\n<p><strong>In TZDB 2014f</strong>, the time of the change has moved to 1900-12-31, and it's now a mere 343 second change (so the time between <code>t</code> and <code>t+1</code> is 344 seconds, if you see what I mean).</p>\n<hr />\n<p>To answer a question around a transition at 1900... it looks like the Java time zone implementation treats <em>all</em> time zones as simply being in their standard time for any instant before the start of 1900 UTC:</p>\n<pre><code>import java.util.TimeZone;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n        long startOf1900Utc = -2208988800000L;\n        for (String id : TimeZone.getAvailableIDs()) {\n            TimeZone zone = TimeZone.getTimeZone(id);\n            if (zone.getRawOffset() != zone.getOffset(startOf1900Utc - 1)) {\n                System.out.println(id);\n            }\n        }\n    }\n}\n</code></pre>\n<p>The code above produces no output on my Windows machine. So any time zone which has any offset other than its standard one at the start of 1900 will count that as a transition. TZDB itself has some data going back earlier than that, and doesn't rely on any idea of a &quot;fixed&quot; standard time (which is what <code>getRawOffset</code> assumes to be a valid concept) so other libraries needn't introduce this artificial transition.</p>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 4987147,
        "reputation": 14696,
        "user_id": 4010391,
        "user_type": "registered",
        "accept_rate": 92,
        "profile_image": "https://i.sstatic.net/NgRol.jpg?s=256",
        "display_name": "Travis",
        "link": "https://stackoverflow.com/users/4010391/travis"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1758730845,
      "post_id": 6841333,
      "comment_id": 140757449,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 4865492,
        "reputation": 49205,
        "user_id": 3923896,
        "user_type": "registered",
        "accept_rate": 69,
        "profile_image": "https://i.sstatic.net/AcZuX.png?s=256",
        "display_name": "Steve Summit",
        "link": "https://stackoverflow.com/users/3923896/steve-summit"
      },
      "reply_to_user": {
        "account_id": 16660,
        "reputation": 20271,
        "user_id": 36537,
        "user_type": "registered",
        "accept_rate": 74,
        "profile_image": "https://www.gravatar.com/avatar/05e8bace9f460f632af6b699a80408e9?s=256&d=identicon&r=PG",
        "display_name": "Phil H",
        "link": "https://stackoverflow.com/users/36537/phil-h"
      },
      "edited": false,
      "score": 2,
      "creation_date": 1661592892,
      "post_id": 6841333,
      "comment_id": 129812204,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 244572,
        "reputation": 2215,
        "user_id": 2266682,
        "user_type": "registered",
        "accept_rate": 75,
        "profile_image": "https://www.gravatar.com/avatar/f56eb127cfa555e11b11260bd9accda7?s=256&d=identicon&r=PG",
        "display_name": "Aqeel Ashiq",
        "link": "https://stackoverflow.com/users/2266682/aqeel-ashiq"
      },
      "edited": false,
      "score": 9,
      "creation_date": 1661226181,
      "post_id": 6841333,
      "comment_id": 129714885,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "6841479": []
  }
}