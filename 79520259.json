{
  "question": {
    "tags": [
      "java",
      "command-line-arguments",
      "spring-shell"
    ],
    "owner": {
      "account_id": 19099073,
      "reputation": 1,
      "user_id": 13947716,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gjgx5WCgmSalvS8odiuCYl1jcxqhPYzcsku_s2NFg=k-s256",
      "display_name": "Raghuveera Kore",
      "link": "https://stackoverflow.com/users/13947716/raghuveera-kore"
    },
    "is_answered": false,
    "view_count": 117,
    "closed_date": 1764858275,
    "answer_count": 2,
    "score": -1,
    "last_activity_date": 1764849402,
    "creation_date": 1742388904,
    "last_edit_date": 1742389534,
    "question_id": 79520259,
    "link": "https://stackoverflow.com/questions/79520259/how-to-implement-logic-to-process-dynamic-command-line-arguments-with-spring-she",
    "closed_reason": "Needs more focus",
    "title": "How to implement logic to process dynamic command-line arguments with Spring Shell?",
    "body": "<p>I'm working on a Spring Shell-based application where I need to process dynamic command-line arguments. I have implemented logic for a specific format, but I’m encountering issues when the order and separators of the options change.</p>\n<ol>\n<li>The command works correctly for this format:</li>\n</ol>\n<pre><code>./co2-calculator --start Hamburg --end Berlin --transportation-method diesel-car-medium\n</code></pre>\n<pre><code>Output:\nStart city: Hamburg\nEnd city: Berlin\nTransportation method: diesel-car-medium\n</code></pre>\n<ol start=\"2\">\n<li>But, when I try the following commands with different argument formats or order, I get errors:</li>\n</ol>\n<pre><code>./co2-calculator --start &quot;Hamburg&quot; --end &quot;Berlin&quot; --transportation-method=dieselcar-medium\n</code></pre>\n<pre><code>Error:\n\nUnrecognised option '--transportation-method=dieselcar-medium'\nMissing mandatory option --transportation-method, Transportation method.\n</code></pre>\n<p>What I Have Tried:</p>\n<pre><code>@ShellComponent\npublic class HelloCommand {\n    @ShellMethod(&quot;Calculate CO2 emissions for the trip.&quot;)\n    public String calculateCO2(\n            @ShellOption(value = &quot;--start&quot;, help = &quot;Start city&quot;) String start,\n            @ShellOption(value = &quot;--end&quot;, help = &quot;End city&quot;) String end,\n            @ShellOption(value = &quot;--transportation-method&quot;, help = &quot;Transportation method&quot;) String transportationMethod) {\n        \n        System.out.println(&quot;Start city: &quot; + start);\n        System.out.println(&quot;End city: &quot; + end);\n        System.out.println(&quot;Transportation method: &quot; + transportationMethod);\n    }\n}\n</code></pre>\n<p>This works fine for the first command, but not for the second due to differences in option format and order.</p>\n<p>What I Need:\nI need to implement logic that can:</p>\n<p>Handle any order of arguments.\nAccept both space and equal signs (=) for the assignment of values.\nProperly process all three command-line arguments regardless of the order or separators used.</p>\n<p>Questions:</p>\n<ol>\n<li><p>How can I make the Spring Shell application handle options like --start &quot;Hamburg&quot; or --start=Hamburg (with and without spaces)?</p>\n</li>\n<li><p>What changes do I need to make to the @ShellOption annotations or any other part of the logic to properly handle both --transportation-method=dieselcar-medium and --transportation-method diesel-car-medium formats?</p>\n</li>\n<li><p>Are there any best practices or known solutions for processing dynamic command-line options in Spring Shell that I might be overlooking?</p>\n</li>\n</ol>\n<p>I’d appreciate any help or suggestions on how to fix this issue. Thanks!</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 26698569,
        "reputation": 4070,
        "user_id": 20306007,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
        "display_name": "life888888",
        "link": "https://stackoverflow.com/users/20306007/life888888"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1764849402,
      "last_edit_date": 1764849402,
      "creation_date": 1742402992,
      "answer_id": 79520867,
      "question_id": 79520259,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>The parameter does not support being set using the equals sign format, such as <code>-s=ABC</code>.</p>\n<p>Alternatively, you may consider using <strong>picocli</strong> to process command line arguments directly. It supports the two formats you might want: (a) <code>--start &quot;ABC 123&quot;</code> or (b) <code>--satrt=&quot;ABC 123&quot;</code></p>\n<h1>CalculateCo2Command.java</h1>\n<ul>\n<li>you can give parameter short name and long name</li>\n<li>You can set a parameter to a default value. Then when you import, you can skip this parameter.</li>\n</ul>\n<pre><code>package com.example;\n\nimport org.springframework.shell.standard.ShellComponent;\nimport org.springframework.shell.standard.ShellMethod;\nimport org.springframework.shell.standard.ShellOption;\n\n@ShellComponent\npublic class CalculateCo2Command {\n    @ShellMethod(\n            key = {&quot;co2-calculator&quot;},\n            value = &quot;Calculate CO2 emissions for the trip.&quot;\n    )\n    public String calculateCO2(\n            @ShellOption(value = {&quot;--start&quot;, &quot;-s&quot;}, help = &quot;Start city&quot;) String start,\n            @ShellOption(value = {&quot;--end&quot;, &quot;-e&quot;}, help = &quot;End city&quot;) String end,\n            @ShellOption(value = {&quot;--transportation-method&quot;, &quot;-t&quot;}, defaultValue = &quot;dieselcar-medium&quot;, help = &quot;Transportation method&quot;) String transportationMethod) {\n        System.out.println(&quot;Start city: &quot; + start);\n        System.out.println(&quot;End city: &quot; + end);\n        System.out.println(&quot;Transportation method: &quot; + transportationMethod);\n        return &quot;CO2 calculation completed.&quot;;\n    }\n}\n</code></pre>\n<h1>Test 1</h1>\n<ul>\n<li>parameter order is not important.</li>\n</ul>\n<p><code>co2-calculator -t &quot;Hello My Method&quot; -e &quot;XYZ 456&quot; -s &quot;ABC 123&quot;</code></p>\n<p>output</p>\n<pre><code>shell:&gt;co2-calculator -t &quot;Hello My Method&quot; -e &quot;XYZ 456&quot; -s &quot;ABC 123&quot;\n\nStart city: ABC 123\nEnd city: XYZ 456\nTransportation method: Hello My Method\nCO2 calculation completed.\n</code></pre>\n<h1>Test 2</h1>\n<ul>\n<li>no input <code>Transportation method</code>, but set default value: <code>dieselcar-medium</code></li>\n</ul>\n<p><code>co2-calculator -e &quot;XYZ 456&quot; -s &quot;ABC 123&quot;</code></p>\n<p>output</p>\n<pre><code>shell:&gt;co2-calculator -e &quot;XYZ 456&quot; -s &quot;ABC 123&quot;\nStart city: ABC 123\nEnd city: XYZ 456\nTransportation method: dieselcar-medium\nCO2 calculation completed.\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 39994530,
        "reputation": 79,
        "user_id": 29556869,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/269e8c4932c4183f4b672023edeed8d0?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Reet",
        "link": "https://stackoverflow.com/users/29556869/reet"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1747938427,
      "creation_date": 1747938427,
      "answer_id": 79634336,
      "question_id": 79520259,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>ExtendedDefaultParser uses whitespace as delimiter: <a href=\"https://docs.spring.io/spring-shell/reference/api/java/org/springframework/shell/jline/ExtendedDefaultParser.html#isDelimiter(java.lang.CharSequence,int)\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-shell/reference/api/java/org/springframework/shell/jline/ExtendedDefaultParser.html#isDelimiter(java.lang.CharSequence,int)</a>. This would not allow option 2 to work. However, your current code should handle any order of arguments.</p>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "79520867": [],
    "79634336": []
  }
}