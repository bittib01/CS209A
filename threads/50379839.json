{
  "question": {
    "tags": [
      "java",
      "mysql",
      "exception",
      "connector"
    ],
    "owner": {
      "account_id": 13588641,
      "reputation": 6097,
      "user_id": 9802634,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/1dbc62ddd2963f9501510ee83e79a898?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "danny",
      "link": "https://stackoverflow.com/users/9802634/danny"
    },
    "is_answered": true,
    "view_count": 962185,
    "protected_date": 1565177179,
    "accepted_answer_id": 50438872,
    "answer_count": 28,
    "score": 588,
    "last_activity_date": 1764434212,
    "creation_date": 1526504539,
    "last_edit_date": 1695404087,
    "question_id": 50379839,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/50379839/connection-java-mysql-public-key-retrieval-is-not-allowed",
    "title": "Connection Java - MySQL : Public Key Retrieval is not allowed",
    "body": "<p>I try to connect MySQL database with Java using connector 8.0.11.   Everything seems to be OK, but I get this exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed at\n     com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:108) at \n     com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:95) at\n     com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) at     \n     com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:862) at \n     com.mysql.cj.jdbc.ConnectionImpl.(ConnectionImpl.java:444) at\n     com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:230) at\n     com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:226) at\n     com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:438) at\n     com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:146) at\n     com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:119) at\n     ConnectionManager.getConnection(ConnectionManager.java:28) at\n     Main.main(Main.java:8)\n</code></pre>\n<p>Here is my Connection Manager class:</p>\n<pre><code>public class ConnectionManager {\n\n    public static final String serverTimeZone = &quot;UTC&quot;;\n    public static final String serverName = &quot;localhost&quot;;\n    public static final String databaseName =&quot;biblioteka&quot;;\n    public static final int portNumber = 3306;\n    public static final String user = &quot;anyroot&quot;;\n    public static final String password = &quot;anyroot&quot;;\n    \n    public static Connection getConnection() throws SQLException {\n    \n        MysqlDataSource dataSource = new MysqlDataSource();\n    \n        dataSource.setUseSSL( false );\n        dataSource.setServerTimezone( serverTimeZone );\n        dataSource.setServerName( serverName );\n        dataSource.setDatabaseName( databaseName );\n        dataSource.setPortNumber( portNumber );\n        dataSource.setUser( user );\n        dataSource.setPassword( password );\n        \n        return dataSource.getConnection();\n    }\n}\n</code></pre>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 12493206,
        "reputation": 11185,
        "user_id": 9094093,
        "user_type": "registered",
        "profile_image": "https://lh5.googleusercontent.com/-0wK119YgtUg/AAAAAAAAAAI/AAAAAAAAAWs/nJevJpVLTqU/s256-rj/photo.jpg",
        "display_name": "Javier Aviles",
        "link": "https://stackoverflow.com/users/9094093/javier-aviles"
      },
      "is_accepted": false,
      "score": 821,
      "last_activity_date": 1764434212,
      "last_edit_date": 1764434212,
      "creation_date": 1579210280,
      "answer_id": 59778108,
      "question_id": 50379839,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>For <strong>DBeaver</strong> users:</p>\n<ol>\n<li><p>Right-click your connection, choose <code>Edit Connection</code></p>\n</li>\n<li><p>On the <code>Connection settings</code> screen (main screen), click on <code>Driver properties</code> tab</p>\n</li>\n<li><p>Set these two properties: <code>allowPublicKeyRetrieval</code> to <strong>TRUE</strong> and <code>useSSL</code> to <strong>FALSE</strong></p>\n</li>\n</ol>\n"
    },
    {
      "owner": {
        "account_id": 2704864,
        "reputation": 1073,
        "user_id": 2334668,
        "user_type": "registered",
        "accept_rate": 50,
        "profile_image": "https://i.sstatic.net/UzzRn.jpg?s=256",
        "display_name": "Selim Reza",
        "link": "https://stackoverflow.com/users/2334668/selim-reza"
      },
      "is_accepted": false,
      "score": 10,
      "last_activity_date": 1721994523,
      "creation_date": 1721994523,
      "answer_id": 78797874,
      "question_id": 50379839,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>I had the same issue with DBeaver database tools.</p>\n<p>I used <strong>URL ( connection string )</strong> instead of host as below :</p>\n<pre><code>jdbc:mysql://localhost:3306/hwg?allowPublicKeyRetrieval=true&amp;useSSL=False;\n</code></pre>\n<p>and it works.</p>\n<p>see the screenshot:\n<a href=\"https://i.sstatic.net/8Zg4gsTK.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/8Zg4gsTK.png\" alt=\"db connection string URL \" /></a></p>\n"
    },
    {
      "owner": {
        "account_id": 15006936,
        "reputation": 3881,
        "user_id": 10832700,
        "user_type": "registered",
        "profile_image": "https://lh5.googleusercontent.com/-VaEfviibRa8/AAAAAAAAAAI/AAAAAAAAAAg/4ZoM9Pbgda0/s256-rj/photo.jpg",
        "display_name": "ahmnouira",
        "link": "https://stackoverflow.com/users/10832700/ahmnouira"
      },
      "is_accepted": false,
      "score": 1,
      "last_activity_date": 1719144241,
      "creation_date": 1719144241,
      "answer_id": 78658635,
      "question_id": 50379839,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Go to your <code>application.properties</code> and change your <code>spring.datasource.url</code></p>\n<p>See my example:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/hotel_java?allowPublicKeyRetrieval=true&amp;useSSL=false\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 26206668,
        "reputation": 261,
        "user_id": 19886178,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/U93WP.jpg?s=256",
        "display_name": "Vishal Bramhankar",
        "link": "https://stackoverflow.com/users/19886178/vishal-bramhankar"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1708882715,
      "creation_date": 1708882715,
      "answer_id": 78056989,
      "question_id": 50379839,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>check below line one more time</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/customerbankdb?autoReconnect=true&amp;AllowPublicKeyRetrieval=true&amp;useSSL=false\n</code></pre>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 1296827,
        "reputation": 564,
        "user_id": 1247667,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8fc6225853888eded3a91a95718d4f2f?s=256&d=identicon&r=PG",
        "display_name": "Ryabinin Sergey",
        "link": "https://stackoverflow.com/users/1247667/ryabinin-sergey"
      },
      "edited": false,
      "score": 1,
      "creation_date": 1666271749,
      "post_id": 50379839,
      "comment_id": 130900454,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "59778108": [
      {
        "owner": {
          "account_id": 6609037,
          "reputation": 311,
          "user_id": 5104886,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/brP4A.png?s=256",
          "display_name": "Neo Tan",
          "link": "https://stackoverflow.com/users/5104886/neo-tan"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1732719156,
        "post_id": 59778108,
        "comment_id": 139714036,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 1445425,
          "reputation": 1109,
          "user_id": 1364101,
          "user_type": "registered",
          "accept_rate": 12,
          "profile_image": "https://i.sstatic.net/wn5Cm.jpg?s=256",
          "display_name": "ali",
          "link": "https://stackoverflow.com/users/1364101/ali"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1719763791,
        "post_id": 59778108,
        "comment_id": 138734785,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 4716379,
          "reputation": 1411,
          "user_id": 3901138,
          "user_type": "registered",
          "accept_rate": 41,
          "profile_image": "https://i.sstatic.net/z3jlM.png?s=256",
          "display_name": "Park JongBum",
          "link": "https://stackoverflow.com/users/3901138/park-jongbum"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1688623231,
        "post_id": 59778108,
        "comment_id": 135098839,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 9365930,
          "reputation": 586,
          "user_id": 6950847,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/tBNyo.png?s=256",
          "display_name": "zeg",
          "link": "https://stackoverflow.com/users/6950847/zeg"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1673257184,
        "post_id": 59778108,
        "comment_id": 132449329,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 8868539,
          "reputation": 2367,
          "user_id": 6622913,
          "user_type": "registered",
          "profile_image": "https://lh5.googleusercontent.com/-Ox4mfYesxlg/AAAAAAAAAAI/AAAAAAAAAA0/2c0OMTmAbes/s256-rj/photo.jpg",
          "display_name": "Istiaque Hossain",
          "link": "https://stackoverflow.com/users/6622913/istiaque-hossain"
        },
        "edited": false,
        "score": 2,
        "creation_date": 1635394517,
        "post_id": 59778108,
        "comment_id": 123287501,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 3958600,
          "reputation": 199,
          "user_id": 3266342,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/3PO0g.jpg?s=256",
          "display_name": "Ara Kokeba",
          "link": "https://stackoverflow.com/users/3266342/ara-kokeba"
        },
        "edited": false,
        "score": 4,
        "creation_date": 1629337701,
        "post_id": 59778108,
        "comment_id": 121662550,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 2139107,
          "reputation": 1782,
          "user_id": 1898218,
          "user_type": "registered",
          "accept_rate": 100,
          "profile_image": "https://i.sstatic.net/EPTJK.png?s=256",
          "display_name": "Halfstop",
          "link": "https://stackoverflow.com/users/1898218/halfstop"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1621485179,
        "post_id": 59778108,
        "comment_id": 119511168,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "78797874": [],
    "78658635": [
      {
        "owner": {
          "account_id": 17294021,
          "reputation": 842,
          "user_id": 12525065,
          "user_type": "registered",
          "profile_image": "https://graph.facebook.com/568166703965577/picture?type=large",
          "display_name": "Abdul Abdurahim",
          "link": "https://stackoverflow.com/users/12525065/abdul-abdurahim"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1732600471,
        "post_id": 78658635,
        "comment_id": 139704246,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "78056989": [
      {
        "owner": {
          "account_id": 2385083,
          "reputation": 466,
          "user_id": 2086219,
          "user_type": "registered",
          "accept_rate": 60,
          "profile_image": "https://i.sstatic.net/Pdy9o.jpg?s=256",
          "display_name": "chokdee",
          "link": "https://stackoverflow.com/users/2086219/chokdee"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1708941500,
        "post_id": 78056989,
        "comment_id": 137614358,
        "content_license": "CC BY-SA 4.0"
      }
    ]
  }
}