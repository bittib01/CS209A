{
  "question": {
    "tags": [
      "java",
      "dependency-injection",
      "quarkus",
      "cdi"
    ],
    "owner": {
      "account_id": 26949862,
      "reputation": 41,
      "user_id": 20531127,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/3b5bee6e475dc3ccf8df41f5a3e78ad5?s=256&d=identicon&r=PG",
      "display_name": "BananKongen",
      "link": "https://stackoverflow.com/users/20531127/banankongen"
    },
    "is_answered": true,
    "view_count": 1056,
    "accepted_answer_id": 78621412,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1764456350,
    "creation_date": 1718302602,
    "question_id": 78619560,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78619560/quarkus-bean-initialization-order",
    "title": "Quarkus Bean initialization order",
    "body": "<p>I have a situation where one of my classes needs to perform some initialization tasks when the application starts up. This class depends on another component that also needs to be initialized at startup. I am using Quarkus and have annotated the dependent component with <code>@Startup</code> to ensure it gets initialized early. However, I am observing that the initialization method in my main class, which listens for the <code>StartupEvent</code>, is executing before the dependent component is initialized. This leads to issues such as the dependent component not being available when my main class tries to use it, resulting in exceptions. How can I ensure that the dependent component is fully initialized before my main class starts its initialization process in Quarkus?</p>\n<p>In Spring I could use the <code>@DependsOn</code> which does not exist in Quarkus</p>\n<p>I tried to use the <code>@Priority</code> but it seems to not work in my case.</p>\n<p>Does anyone have an idea how I can control the initialisation sequence for those beans?</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 21334898,
        "reputation": 11,
        "user_id": 15706273,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/d217a76e813dda7bd5788c6c5edc0fde?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Mohamed Hafidi",
        "link": "https://stackoverflow.com/users/15706273/mohamed-hafidi"
      },
      "is_accepted": false,
      "score": 1,
      "last_activity_date": 1764456350,
      "creation_date": 1764456350,
      "answer_id": 79833582,
      "question_id": 78619560,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>If we look at <a href=\"https://quarkus.io/guides/lifecycle\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/lifecycle</a>, we find many ways to initialize when the application starts, the following experiments could help to find out which way precedes the other and therefore build your logic correctly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Startup\npublic class A {\n    \n    @PostConstruct\n    public void init() {\n        System.out.println(&quot;------------- A Initialized -------------&quot;);\n    }\n}\n\n@Singleton\npublic class B {\n    public void init(@Observes StartupEvent evet) {\n        System.out.println(&quot;------------- B initialized -------------&quot;);\n    }\n}\n\n@ApplicationScoped\npublic class C {\n    \n    @Startup\n    public void init() {\n        System.out.println(&quot;------------- C Initialized -------------&quot;);\n    }\n}\n\n@ApplicationScoped\npublic class D {\n    \n    public void init(@Observes @Priority(100) StartupEvent event) {\n        System.out.println(&quot;------------- D Initialized -------------&quot;);\n    }\n}\n\npublic class E {\n    public void init(@Observes @Priority(1000) StartupEvent event) {\n        System.out.println(&quot;------------- E Initialized -------------&quot;);\n    }\n}\n\npublic class F {\n    public void init(@Observes @Priority(1) StartupEvent event) {\n        System.out.println(&quot;------------- F Initialized -------------&quot;);\n    }\n}\n</code></pre>\n<p>When Starting the app.</p>\n<p>------------- F Initialized -------------</p>\n<p>------------- D Initialized -------------</p>\n<p>------------- E Initialized -------------</p>\n<p>------------- C Initialized -------------</p>\n<p>------------- B initialized -------------</p>\n<p>------------- A Initialized -------------</p>\n"
    },
    {
      "owner": {
        "account_id": 3138056,
        "reputation": 1631,
        "user_id": 2654154,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/nSmwmAnP.jpg?s=256",
        "display_name": "Martin Kouba",
        "link": "https://stackoverflow.com/users/2654154/martin-kouba"
      },
      "is_accepted": true,
      "score": 0,
      "last_activity_date": 1718347217,
      "creation_date": 1718347217,
      "answer_id": 78621412,
      "question_id": 78619560,
      "content_license": "CC BY-SA 4.0",
      "body": "<p><code>@Startup#value()</code> can be used to specify the priority of the generated observer method and thus affects the ordering. In other words, if you annotate the class with <code>@Startup(10)</code> then it's translated to something like:</p>\n<pre><code>void start(@Observes @Priority(10) StartupEvent event, YourBean bean) {\n   // some code that makes sure the bean is initialized\n}\n</code></pre>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "79833582": [],
    "78621412": [
      {
        "owner": {
          "account_id": 3138056,
          "reputation": 1631,
          "user_id": 2654154,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/nSmwmAnP.jpg?s=256",
          "display_name": "Martin Kouba",
          "link": "https://stackoverflow.com/users/2654154/martin-kouba"
        },
        "reply_to_user": {
          "account_id": 6963528,
          "reputation": 7031,
          "user_id": 5342297,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/ec65b3838b1d1ea981cdb5be0a7a4a57?s=256&d=identicon&r=PG",
          "display_name": "Siliarus",
          "link": "https://stackoverflow.com/users/5342297/siliarus"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1718621634,
        "post_id": 78621412,
        "comment_id": 138631472,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 6963528,
          "reputation": 7031,
          "user_id": 5342297,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/ec65b3838b1d1ea981cdb5be0a7a4a57?s=256&d=identicon&r=PG",
          "display_name": "Siliarus",
          "link": "https://stackoverflow.com/users/5342297/siliarus"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1718350505,
        "post_id": 78621412,
        "comment_id": 138611418,
        "content_license": "CC BY-SA 4.0"
      }
    ]
  }
}