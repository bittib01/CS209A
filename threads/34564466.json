{
  "question": {
    "tags": [
      "java",
      "mongodb-java"
    ],
    "owner": {
      "account_id": 2404366,
      "reputation": 1336,
      "user_id": 2101271,
      "user_type": "registered",
      "accept_rate": 50,
      "profile_image": "https://www.gravatar.com/avatar/6d4429b601a59bea02247b25318dd470?s=256&d=identicon&r=PG",
      "display_name": "reversebind",
      "link": "https://stackoverflow.com/users/2101271/reversebind"
    },
    "is_answered": false,
    "view_count": 9679,
    "answer_count": 2,
    "score": 14,
    "last_activity_date": 1764857180,
    "creation_date": 1451727386,
    "last_edit_date": 1751437191,
    "question_id": 34564466,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/34564466/java-mongodb-driver-how-do-you-catch-exceptions",
    "title": "java mongodb driver how do you catch exceptions?",
    "body": "<p>I want to be able to detect if a MongoDB server is available from the Java driver for the purpose of reacting to any abnormal events as one would in JDBC land etc. It all works fine when the server is up, but I am struggling to understand why it is so difficult to detect errors. I have a feeling it's because the MongoDB client runs in a different thread and it doesn't re throw to me or something?</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    MongoClient mongoClient = new MongoClient(&quot;localhost&quot;, 27017);\n    MongoDatabase db = mongoClient.getDatabase(&quot;mydb&quot;);\n    // if db is down or error getting people collection handle it in catch block\n    MongoCollection&lt;Document&gt; people = commentarr.getCollection(&quot;people&quot;);\n} catch (Exception e) {\n    // handle server down or failed query here.\n}\n</code></pre>\n<p>The result is</p>\n<blockquote>\n<p>INFO: Exception in monitor thread while connecting to server localhost:27017</p>\n</blockquote>\n<p>With the resulting stack trace containing a few different exceptions which I have tried to catch, but my catch blocks still didn't do anything.</p>\n<pre class=\"lang-none prettyprint-override\"><code>com.mongodb.MongoSocketOpenException: Exception opening socket\nCaused by: java.net.ConnectException: Connection refused\n</code></pre>\n<p>I am using the Java MongoDB driver 3.0.4, most posts I read are from an older API with hacks like <code>MongoClient.getDatabaseNames()</code> which throws a <code>MongoException</code> if errors, except this is deprecated now and replaced with <code>MongoClient.listDatabaseNames()</code> which doesn't have the same error throwing semantics.</p>\n<p>Is there a way to just execute a MongoDB query from the Java driver in a try catch block and actually have the exception caught?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}