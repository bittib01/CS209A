{
  "question": {
    "tags": [
      "java",
      "android",
      "android-studio",
      "shared-libraries",
      "importerror"
    ],
    "owner": {
      "account_id": 13689459,
      "reputation": 551,
      "user_id": 9877665,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/6msPa.jpg?s=256",
      "display_name": "kiteandwindsurfer",
      "link": "https://stackoverflow.com/users/9877665/kiteandwindsurfer"
    },
    "is_answered": true,
    "view_count": 885,
    "accepted_answer_id": 78963187,
    "answer_count": 3,
    "score": 0,
    "last_activity_date": 1764743341,
    "creation_date": 1725718740,
    "question_id": 78960351,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78960351/android-studio-cannot-find-imported-library-using-tarsosdsp-java-import-error",
    "title": "Android Studio Cannot Find Imported Library (Using TarsosDSP java import error)",
    "body": "<p>There is a package (<code>TarsosDSP</code>) that I wish to use in my app <code>SongTracker</code>. I am able to import 4 of 5 the libraries, but the 5th import statement has the error when trying to compile:</p>\n<pre><code>import be.tarsos.dsp.io.android.AudioDispatcherFactory;\n</code></pre>\n<p><strong>Here is the error:</strong></p>\n<p><code>Cannot resolve symbol 'android'</code></p>\n<p><strong>What I Have Tried</strong></p>\n<p>Build -&gt; Clean Project</p>\n<p>Build -&gt; Rebuild Project</p>\n<p>Neither helped. Iâ€™m not sure whether to post the full build output, but here is a partial output:</p>\n<pre><code>FAILURE: Build completed with 8 failures.\n\n1: Task failed with an exception.\n-----------\n* What went wrong:\nExecution failed for task ':app:checkDebugAarMetadata'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Could not find be.tarsos:dsp:2.4.\n     Searched in the following locations:\n       - https://dl.google.com/dl/android/maven2/be/tarsos/dsp/2.4/dsp-2.4.pom\n       - https://repo.maven.apache.org/maven2/be/tarsos/dsp/2.4/dsp-2.4.pom\n       - https://jcenter.bintray.com/be/tarsos/dsp/2.4/dsp-2.4.pom\n       - https://mvn.0110.be/releases/be/tarsos/dsp/2.4/dsp-2.4.pom\n\n     Required by:\n         project :app\n</code></pre>\n<p><strong>Background</strong></p>\n<p>I already have my app built, which opens .txt files so that the words and chords to the songs being displayed are viewable (hence the need to scroll). I wish to use TarsosDSP so the app can 'listen' to the beats-per-minute using the device microphone and adjust the scrolling speed for the .txt file dynamically. However, I cannot begin to tweak TarsosDSP until I get all the relevant libraries to install and run.</p>\n<p>The library is being used in this method setupTarasosDSP:</p>\n<pre><code>// Initialize TarsosDSP audio processing for BPM detection\nAudioDispatcher dispatcher = AudioDispatcherFactory.fromDefaultMicrophone(22050, 1024, 0);\n</code></pre>\n<p>The AudioDispatcherFactory is highlighted in red, and Android Studio states: Cannot resolve symbol 'AudioDispatcherFactory'.</p>\n<p>In my build.gradle file, I have these dependencies:</p>\n<pre><code>// TarsosDSP library\nimplementation 'be.tarsos.dsp:core:2.5'\nimplementation 'be.tarsos.dsp:jvm:2.5'\nimplementation 'be.tarsos:dsp:2.4'\n</code></pre>\n<p>I have four other related import statements, all of which seem to have no issue:</p>\n<pre><code>import be.tarsos.dsp.AudioDispatcher;\nimport be.tarsos.dsp.AudioProcessor;\nimport be.tarsos.dsp.pitch.PitchDetectionHandler;\nimport be.tarsos.dsp.pitch.PitchProcessor;\n</code></pre>\n<p>Below is my settings.gradle file:</p>\n<pre><code>pluginManagement {\n    repositories {\n        google()\n        mavenCentral()\n        gradlePluginPortal()\n    }\n}\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n        //maven { url 'https://jitpack.io' }\n        jcenter()\n        maven {\n            name = &quot;TarsosDSP repository&quot;\n            url = &quot;https://mvn.0110.be/releases&quot;\n        }\n    }\n}\nrootProject.name = &quot;Song Tracker&quot;\ninclude ':app'\n</code></pre>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 44888157,
        "reputation": 1,
        "user_id": 31987751,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/f8d47631ee853988a93361bac1184fac?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Muneeb Technest",
        "link": "https://stackoverflow.com/users/31987751/muneeb-technest"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1764743341,
      "last_edit_date": 1764743341,
      "creation_date": 1764737704,
      "answer_id": 79836539,
      "question_id": 78960351,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>The class <code>be.tarsos.dsp.io.jvm.AudioDispatcherFactory</code> won't work on Android. This class is only for desktop Java programs, not for Android apps. Make a <code>.jar</code> file and then add it in your project and import it. Now you can easily resolve the <code>AudioDispatcherFactory</code> class for Android. And now your import should be like</p>\n<pre><code>be.tarsos.dsp.io.**android.**AudioDispatcherFactory. \n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 14946093,
        "reputation": 21,
        "user_id": 10791333,
        "user_type": "registered",
        "profile_image": "https://lh6.googleusercontent.com/-P1vbC6zsAw0/AAAAAAAAAAI/AAAAAAAAS6M/LK76HY-Pqfc/s256-rj/photo.jpg",
        "display_name": "Regis Hsu",
        "link": "https://stackoverflow.com/users/10791333/regis-hsu"
      },
      "is_accepted": false,
      "score": 2,
      "last_activity_date": 1753329479,
      "creation_date": 1753329479,
      "answer_id": 79712782,
      "question_id": 78960351,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>that was my solution and work fine.</p>\n<p>build.gradle.kts</p>\n<pre><code>// TarsosDSP library\nimplementation 'be.tarsos.dsp:core:2.5'\nimplementation 'be.tarsos.dsp:jvm:2.5'\n</code></pre>\n<p>place these code into yours mainActivaty.kt</p>\n<pre><code>class AndroidAudioInputStream(\n    private val underlyingStream: AudioRecord,\n    private val format: TarsosDSPAudioFormat?\n) : TarsosDSPAudioInputStream {\n    @Throws(IOException::class)\n    override fun skip(bytesToSkip: Long): Long {\n        throw IOException(&quot;Can not skip in audio stream&quot;)\n    }\n\n    @Throws(IOException::class)\n    override fun read(b: ByteArray, off: Int, len: Int): Int {\n        return underlyingStream.read(b, off, len)\n    }\n\n    @Throws(IOException::class)\n    override fun close() {\n        underlyingStream.stop()\n        underlyingStream.release()\n    }\n\n    override fun getFormat(): TarsosDSPAudioFormat? {\n        return format\n    }\n\n    override fun getFrameLength(): Long {\n        return -1\n    }\n}\n\nobject AudioDispatcherFactory {\n    /**\n     * Create a new AudioDispatcher connected to the default microphone.\n     *\n     * @param sampleRate\n     * The requested sample rate.\n     * @param audioBufferSize\n     * The size of the audio buffer (in samples).\n     *\n     * @param bufferOverlap\n     * The size of the overlap (in samples).\n     * @return A new AudioDispatcher\n     */\n    @RequiresPermission(Manifest.permission.RECORD_AUDIO)\n    fun fromDefaultMicrophone(\n        sampleRate: Int,\n        audioBufferSize: Int, bufferOverlap: Int\n    ): AudioDispatcher {\n        val minAudioBufferSize = AudioRecord.getMinBufferSize(\n            sampleRate,\n            AudioFormat.CHANNEL_IN_MONO,\n            AudioFormat.ENCODING_PCM_16BIT\n        )\n        val minAudioBufferSizeInSamples = minAudioBufferSize / 2\n        if (minAudioBufferSizeInSamples &lt;= audioBufferSize) {\n            val audioInputStream = AudioRecord(\n                MediaRecorder.AudioSource.MIC, sampleRate,\n                AudioFormat.CHANNEL_IN_MONO,\n                AudioFormat.ENCODING_PCM_16BIT,\n                audioBufferSize * 2\n            )\n\n            val format = TarsosDSPAudioFormat(sampleRate.toFloat(), 16, 1, true, false)\n\n            val audioStream: TarsosDSPAudioInputStream =\n                AndroidAudioInputStream(audioInputStream, format)\n            //start recording ! Opens the stream.\n            audioInputStream.startRecording()\n            return AudioDispatcher(audioStream, audioBufferSize, bufferOverlap)\n        } else {\n            throw java.lang.IllegalArgumentException(&quot;Buffer size too small should be at least &quot; + (minAudioBufferSize * 2))\n        }\n    }\n\n\n    /**\n     * Create a stream from a piped sub process and use that to create a new\n     * [AudioDispatcher] The sub-process writes a WAV-header and\n     * PCM-samples to standard out. The header is ignored and the PCM samples\n     * are are captured and interpreted. Examples of executables that can\n     * convert audio in any format and write to stdout are ffmpeg and avconv.\n     *\n     * @param source\n     * The file or stream to capture.\n     * @param targetSampleRate\n     * The target sample rate.\n     * @param audioBufferSize\n     * The number of samples used in the buffer.\n     * @param bufferOverlap\n     * The number of samples to overlap the current and previous buffer.\n     * @return A new audioprocessor.\n     */\n    /*\n    fun fromPipe(\n        source: String,\n        targetSampleRate: Int,\n        audioBufferSize: Int,\n        bufferOverlap: Int\n    ): AudioDispatcher {\n        val f = PipedAudioStream(source)\n        val audioStream: TarsosDSPAudioInputStream? = f.getMonoStream(targetSampleRate)\n        return AudioDispatcher(audioStream, audioBufferSize, bufferOverlap)\n    }\n    */\n}\n</code></pre>\n"
    },
    {
      "owner": {
        "account_id": 111736,
        "reputation": 12346,
        "user_id": 295004,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=256&d=identicon&r=PG",
        "display_name": "Morrison Chang",
        "link": "https://stackoverflow.com/users/295004/morrison-chang"
      },
      "is_accepted": true,
      "score": 1,
      "last_activity_date": 1725824439,
      "creation_date": 1725824439,
      "answer_id": 78963187,
      "question_id": 78960351,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Based on the comments from OP it would appear that</p>\n<p><code>import be.tarsos.dsp.io.android.AudioDispatcherFactory;</code></p>\n<p>Does not exist in the version of the libraries being imported, i.e. the main popular Tarsos DSP project: <a href=\"https://github.com/JorenSix/TarsosDSP\" rel=\"nofollow noreferrer\">https://github.com/JorenSix/TarsosDSP</a></p>\n<p>and that on Android <code>be.tarsos.dsp.io.jvm.AudioDispatcherFactory</code> will not work directly.</p>\n<p>A general recommendation for adding a third-party library to a Android project is to check any documentation/issue tickets (open and closed) available to verify that Android support does exist for that project or if it some other fork of the base library being referenced. As Android has been evolving its APIs with some regularity (Android permissions, changes in function signature, etc.) checking what is and isn't supported should be considered.</p>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 13689459,
        "reputation": 551,
        "user_id": 9877665,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/6msPa.jpg?s=256",
        "display_name": "kiteandwindsurfer",
        "link": "https://stackoverflow.com/users/9877665/kiteandwindsurfer"
      },
      "reply_to_user": {
        "account_id": 111736,
        "reputation": 12346,
        "user_id": 295004,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=256&d=identicon&r=PG",
        "display_name": "Morrison Chang",
        "link": "https://stackoverflow.com/users/295004/morrison-chang"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1725817903,
      "post_id": 78960351,
      "comment_id": 139224797,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 13689459,
        "reputation": 551,
        "user_id": 9877665,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/6msPa.jpg?s=256",
        "display_name": "kiteandwindsurfer",
        "link": "https://stackoverflow.com/users/9877665/kiteandwindsurfer"
      },
      "reply_to_user": {
        "account_id": 111736,
        "reputation": 12346,
        "user_id": 295004,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=256&d=identicon&r=PG",
        "display_name": "Morrison Chang",
        "link": "https://stackoverflow.com/users/295004/morrison-chang"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1725815357,
      "post_id": 78960351,
      "comment_id": 139224604,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 111736,
        "reputation": 12346,
        "user_id": 295004,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=256&d=identicon&r=PG",
        "display_name": "Morrison Chang",
        "link": "https://stackoverflow.com/users/295004/morrison-chang"
      },
      "edited": false,
      "score": 1,
      "creation_date": 1725780778,
      "post_id": 78960351,
      "comment_id": 139222388,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "79836539": [
      {
        "owner": {
          "account_id": 17839052,
          "reputation": 26493,
          "user_id": 12957340,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/L2QyZ.jpg?s=256",
          "display_name": "jared_mamrot",
          "link": "https://stackoverflow.com/users/12957340/jared-mamrot"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1764741656,
        "post_id": 79836539,
        "comment_id": 140884728,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "79712782": [
      {
        "owner": {
          "account_id": -1,
          "reputation": 1,
          "user_id": -1,
          "user_type": "moderator",
          "profile_image": "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
          "display_name": "Community",
          "link": "https://stackoverflow.com/users/-1/community"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1753329533,
        "post_id": 79712782,
        "comment_id": 140613786,
        "content_license": "CC BY-SA 4.0"
      }
    ],
    "78963187": []
  }
}