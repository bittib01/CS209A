{
  "question": {
    "tags": [
      "java",
      "android",
      "opencv",
      "unsatisfiedlinkerror"
    ],
    "owner": {
      "account_id": 12786516,
      "reputation": 159,
      "user_id": 9252607,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/f1a24e39934e572f2898819db0cba765?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "divine_rythm",
      "link": "https://stackoverflow.com/users/9252607/divine-rythm"
    },
    "is_answered": true,
    "view_count": 7052,
    "answer_count": 2,
    "score": 7,
    "last_activity_date": 1764523677,
    "creation_date": 1586944116,
    "last_edit_date": 1764523677,
    "question_id": 61225784,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/61225784/java-lang-unsatisfiedlinkerror-dlopen-failed-library-lib-libopencv-core",
    "title": "java.lang.UnsatisfiedLinkError: dlopen failed: library &quot;../../lib/libopencv_core.so&quot; not found",
    "body": "<p>I'm developing a face recognition application using android and openCV. My android studio version is 3.5.3 and openCV version is 3.4.10. The phone on which I'm running my application is arm64-v8a and I'm getting this error :</p>\n\n<pre><code>2020-04-15 15:00:40.425 15788-15788/com.example.opencvdemo E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.opencvdemo, PID: 15788\njava.lang.UnsatisfiedLinkError: dlopen failed: \"/data/app/com.example.opencvdemo-o8BNe1NoZik-avIk3otJaw==/lib/arm64/libjniopencv_contrib.so\" is 32-bit instead of 64-bit\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1071)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1007)\n    at java.lang.System.loadLibrary(System.java:1667)\n    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:711)\n    at com.googlecode.javacpp.Loader.load(Loader.java:586)\n    at com.googlecode.javacpp.Loader.load(Loader.java:540)\n    at com.googlecode.javacv.cpp.opencv_contrib.&lt;clinit&gt;(opencv_contrib.java:97)\n    at com.googlecode.javacv.cpp.opencv_contrib.createLBPHFaceRecognizer(Native Method)\n    at com.example.opencvdemo.CtrRecognizer.&lt;init&gt;(CtrRecognizer.java:40)\n    at com.example.opencvdemo.MainActivity$1.onManagerConnected(MainActivity.java:94)\n    at org.opencv.android.AsyncServiceHelper$3.onServiceConnected(AsyncServiceHelper.java:319)\n    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1956)\n    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1988)\n    at android.os.Handler.handleCallback(Handler.java:883)\n    at android.os.Handler.dispatchMessage(Handler.java:100)\n    at android.os.Looper.loop(Looper.java:224)\n    at android.app.ActivityThread.main(ActivityThread.java:7520)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\n Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: \"/data/app/com.example.opencvdemo-o8BNe1NoZik-avIk3otJaw==/lib/arm64/libopencv_contrib.so\" is 32-bit instead of 64-bit\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1071)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1007)\n    at java.lang.System.loadLibrary(System.java:1667)\n    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:711)\n    at com.googlecode.javacpp.Loader.load(Loader.java:577)\n    at com.googlecode.javacpp.Loader.load(Loader.java:540) \n    at com.googlecode.javacv.cpp.opencv_contrib.&lt;clinit&gt;(opencv_contrib.java:97) \n    at com.googlecode.javacv.cpp.opencv_contrib.createLBPHFaceRecognizer(Native Method) \n    at com.example.opencvdemo.CtrRecognizer.&lt;init&gt;(CtrRecognizer.java:40) \n    at com.example.opencvdemo.MainActivity$1.onManagerConnected(MainActivity.java:94) \n    at org.opencv.android.AsyncServiceHelper$3.onServiceConnected(AsyncServiceHelper.java:319) \n    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1956) \n    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1988) \n    at android.os.Handler.handleCallback(Handler.java:883) \n    at android.os.Handler.dispatchMessage(Handler.java:100) \n    at android.os.Looper.loop(Looper.java:224) \n    at android.app.ActivityThread.main(ActivityThread.java:7520) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539) \n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950) \n2020-04-15 15:00:40.427 15788-15788/com.example.opencvdemo E/MQSEventManagerDelegate: failed to get MQSService.\n</code></pre>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\ncompileSdkVersion 28\n//buildToolsVersion \"29.0.0\"\ndefaultConfig {\n    applicationId \"com.example.opencvdemo\"\n    minSdkVersion 19\n    targetSdkVersion 28\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n\n}\n\nsourceSets {\n    main {\n        jni.srcDirs = ['src/main/jniLibs']\n        jniLibs.srcDir 'src/main/libs'\n    }\n  }\n}\ndependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar','*.so'])\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.intuit.sdp:sdp-android:1.0.6'\nimplementation 'com.intuit.ssp:ssp-android:1.0.6'\nimplementation 'com.google.android.material:material:1.1.0'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.1'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\nimplementation 'com.github.bumptech.glide:glide:3.7.0'\nimplementation 'com.github.markushi:circlebutton:1.1'\nimplementation project(path: ':openCV3410')\n}\n</code></pre>\n\n<p>For removing this error I made changes to my <strong>build.gradle</strong> as follows:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\ncompileSdkVersion 28\n//buildToolsVersion \"29.0.0\"\ndefaultConfig {\n    applicationId \"com.example.opencvdemo\"\n    minSdkVersion 19\n    targetSdkVersion 28\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    ndk {\n        abiFilters \"armeabi-v7a\", \"x86\", \"armeabi\", \"mips\"\n    }\n    externalNativeBuild {\n        cmake {\n            cppFlags \"-frtti -fexceptions\"\n        }\n    }\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n\n}\n\nsourceSets {\n    main {\n        jni.srcDirs = ['src/main/jniLibs']\n        jniLibs.srcDir 'src/main/libs'\n     }\n   }\n}\ndependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar','*.so'])\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.intuit.sdp:sdp-android:1.0.6'\nimplementation 'com.intuit.ssp:ssp-android:1.0.6'\nimplementation 'com.google.android.material:material:1.1.0'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.1'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\nimplementation 'com.github.bumptech.glide:glide:3.7.0'\nimplementation 'com.github.markushi:circlebutton:1.1'\nimplementation project(path: ':openCV3410')\n}\n</code></pre>\n\n<p>Now I'm getting this error :</p>\n\n<pre><code>2020-04-15 15:11:19.353 17892-17892/com.example.opencvdemo E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.opencvdemo, PID: 17892\njava.lang.UnsatisfiedLinkError: dlopen failed: library \"../../lib/libopencv_core.so\" not found\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1071)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1007)\n    at java.lang.System.loadLibrary(System.java:1667)\n    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:711)\n    at com.googlecode.javacpp.Loader.load(Loader.java:586)\n    at com.googlecode.javacpp.Loader.load(Loader.java:540)\n    at com.googlecode.javacv.cpp.opencv_contrib.&lt;clinit&gt;(opencv_contrib.java:97)\n    at com.googlecode.javacv.cpp.opencv_contrib.createLBPHFaceRecognizer(Native Method)\n    at com.example.opencvdemo.CtrRecognizer.&lt;init&gt;(CtrRecognizer.java:40)\n    at com.example.opencvdemo.MainActivity$1.onManagerConnected(MainActivity.java:94)\n    at com.example.opencvdemo.MainActivity.onResume(MainActivity.java:233)\n    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1454)\n    at android.app.Activity.performResume(Activity.java:8050)\n    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:4236)\n    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:4278)\n    at android.app.servertransaction.ResumeActivityItem.execute(ResumeActivityItem.java:52)\n    at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:176)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2040)\n    at android.os.Handler.dispatchMessage(Handler.java:107)\n    at android.os.Looper.loop(Looper.java:224)\n    at android.app.ActivityThread.main(ActivityThread.java:7520)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\n Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: library \"../../lib/libopencv_core.so\" not found\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1071)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:1007)\n    at java.lang.System.loadLibrary(System.java:1667)\n    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:711)\n    at com.googlecode.javacpp.Loader.load(Loader.java:577)\n    at com.googlecode.javacpp.Loader.load(Loader.java:540) \n    at com.googlecode.javacv.cpp.opencv_contrib.&lt;clinit&gt;(opencv_contrib.java:97) \n    at com.googlecode.javacv.cpp.opencv_contrib.createLBPHFaceRecognizer(Native Method) \n    at com.example.opencvdemo.CtrRecognizer.&lt;init&gt;(CtrRecognizer.java:40) \n    at com.example.opencvdemo.MainActivity$1.onManagerConnected(MainActivity.java:94) \n    at com.example.opencvdemo.MainActivity.onResume(MainActivity.java:233) \n    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1454) \n    at android.app.Activity.performResume(Activity.java:8050) \n    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:4236) \n    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:4278) \n    at android.app.servertransaction.ResumeActivityItem.execute(ResumeActivityItem.java:52) \n    at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:176) \n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97) \n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2040) \n    at android.os.Handler.dispatchMessage(Handler.java:107) \n    at android.os.Looper.loop(Looper.java:224) \n    at android.app.ActivityThread.main(ActivityThread.java:7520) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539) \n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950) \n   2020-04-15 15:11:19.361 17892-17892/com.example.opencvdemo E/MQSEventManagerDelegate: failed to get MQSService.\n</code></pre>\n\n<p><a href=\"https://i.sstatic.net/h59Lw.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/h59Lw.png\" alt=\"jniLibs folders\"></a></p>\n\n<p><a href=\"https://i.sstatic.net/bPjMU.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/bPjMU.png\" alt=\"jniLibs files\"></a></p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 20511146,
        "reputation": 428,
        "user_id": 15052881,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/dc4c8624ea8ccd9ff00d1912e2744c63?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Programmer007",
        "link": "https://stackoverflow.com/users/15052881/programmer007"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1671623586,
      "creation_date": 1671623586,
      "answer_id": 74875671,
      "question_id": 61225784,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>Follow these steps if you are getting .so file not found in jniLibs folder</p>\n<p>1- add source path in android in <strong>buildgradle</strong> file below <code>defaultConfig</code></p>\n<pre><code>sourceSets {\n        main {\n            jniLibs.srcDirs = ['src/main/jniLibs']\n        }\n    }\n</code></pre>\n<p>2- add ndk in defaultConfig in <code>buildgradle</code> file. abifilters can be found in jniLibs folders containing missing files.</p>\n<pre><code>ndk{\n     abiFilters 'armeabi-v7a'\n   }\n</code></pre>\n<p>if not resolved then visit this link <a href=\"https://blog.csdn.net/u010920692/article/details/114476490\" rel=\"nofollow noreferrer\">https://blog.csdn.net/u010920692/article/details/114476490</a></p>\n"
    },
    {
      "owner": {
        "account_id": 17424219,
        "reputation": 1093,
        "user_id": 12629252,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/NJHwG.jpg?s=256",
        "display_name": "easy_breezy",
        "link": "https://stackoverflow.com/users/12629252/easy-breezy"
      },
      "is_accepted": false,
      "score": 1,
      "last_activity_date": 1586951750,
      "creation_date": 1586951750,
      "answer_id": 61228083,
      "question_id": 61225784,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>According to the stack trace: java.lang.UnsatisfiedLinkError: dlopen failed: \"/data/app/com.example.opencvdemo-o8BNe1NoZik-avIk3otJaw==/lib/arm64/libjniopencv_contrib.so\" <strong>is 32-bit instead of 64-bit</strong></p>\n\n<p>So I suppose that your library doesn't have resources for arm64-v8a, to solve this problem you must add to your project opencv .so files for arm64-v8a arch</p>\n"
    }
  ],
  "question_comments": [],
  "answer_comments": {
    "74875671": [],
    "61228083": [
      {
        "owner": {
          "account_id": 17424219,
          "reputation": 1093,
          "user_id": 12629252,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/NJHwG.jpg?s=256",
          "display_name": "easy_breezy",
          "link": "https://stackoverflow.com/users/12629252/easy-breezy"
        },
        "reply_to_user": {
          "account_id": 12786516,
          "reputation": 159,
          "user_id": 9252607,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/f1a24e39934e572f2898819db0cba765?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "divine_rythm",
          "link": "https://stackoverflow.com/users/9252607/divine-rythm"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1587139366,
        "post_id": 61228083,
        "comment_id": 108400566,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 17424219,
          "reputation": 1093,
          "user_id": 12629252,
          "user_type": "registered",
          "profile_image": "https://i.sstatic.net/NJHwG.jpg?s=256",
          "display_name": "easy_breezy",
          "link": "https://stackoverflow.com/users/12629252/easy-breezy"
        },
        "reply_to_user": {
          "account_id": 12786516,
          "reputation": 159,
          "user_id": 9252607,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/f1a24e39934e572f2898819db0cba765?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "divine_rythm",
          "link": "https://stackoverflow.com/users/9252607/divine-rythm"
        },
        "edited": false,
        "score": 0,
        "creation_date": 1587005792,
        "post_id": 61228083,
        "comment_id": 108341330,
        "content_license": "CC BY-SA 4.0"
      },
      {
        "owner": {
          "account_id": 12786516,
          "reputation": 159,
          "user_id": 9252607,
          "user_type": "registered",
          "profile_image": "https://www.gravatar.com/avatar/f1a24e39934e572f2898819db0cba765?s=256&d=identicon&r=PG&f=y&so-version=2",
          "display_name": "divine_rythm",
          "link": "https://stackoverflow.com/users/9252607/divine-rythm"
        },
        "edited": false,
        "score": 1,
        "creation_date": 1586981804,
        "post_id": 61228083,
        "comment_id": 108334300,
        "content_license": "CC BY-SA 4.0"
      }
    ]
  }
}