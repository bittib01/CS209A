{
  "question": {
    "tags": [
      "java",
      "utc",
      "java-time"
    ],
    "owner": {
      "account_id": 965625,
      "reputation": 904,
      "user_id": 1103606,
      "user_type": "registered",
      "accept_rate": 51,
      "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=256&d=identicon&r=PG",
      "display_name": "Peter Penzov",
      "link": "https://stackoverflow.com/users/1103606/peter-penzov"
    },
    "is_answered": true,
    "view_count": 365,
    "answer_count": 2,
    "score": -4,
    "last_activity_date": 1764996434,
    "creation_date": 1739722609,
    "last_edit_date": 1739803036,
    "question_id": 79443500,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79443500/add-timezone-to-java-time-offsetdatetime",
    "title": "Add timezone to java.time.OffsetDateTime",
    "body": "<p>I have this Joda-Time date which I want to migrate to <code>java.time.OffsetDateTime</code>:</p>\n<pre><code>import org.joda.time.DateTime;\nprivate DateTime createdDate;\n\nprivate String creationTime;\n.....\nDateTimeFormatter dtf = DateTimeFormat.forPattern(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n\n...\n.setCreationTime(dtf.print(account.getCreatedDate().toDateTime(DateTimeZone.UTC)));\n</code></pre>\n<p>As you can tell, the code gets the Joda-Time <code>DateTime</code> named <code>createdDate</code> from the object <code>account</code>, converts it to a <code>DateTime</code> in UTC, formats it to a <code>String</code> using the formatter and sets <code>creationTime</code> of an object to the resulting <code>String</code>.</p>\n<p>I tried to migrate this code to:</p>\n<pre><code>    import java.time.OffsetDateTime;\n    private OffsetDateTime createdDate;\n    \n    private String creationTime;\n    .....\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n    \n    ... \n   .setCreationTime(dtf.format(account.getCreatedDate().withOffsetSameInstant(ZoneOffset.of(&quot;UTC&quot;))));\n</code></pre>\n<p>I want this code to do the same as the Joda-Time code that I am migrating away from. Specifically I should get the same resulting string. The question is: Do I need to set timezone using <code>withOffsetSameInstant(ZoneOffset.of(&quot;UTC&quot;))));</code>, or I can skip it?</p>\n<p>In one example the call did not seem to make any difference.</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 322981,
        "reputation": 346871,
        "user_id": 642706,
        "user_type": "registered",
        "accept_rate": 58,
        "profile_image": "https://i.sstatic.net/ZWEI3.jpg?s=256",
        "display_name": "Basil Bourque",
        "link": "https://stackoverflow.com/users/642706/basil-bourque"
      },
      "is_accepted": false,
      "score": 1,
      "last_activity_date": 1764996434,
      "last_edit_date": 1764996434,
      "creation_date": 1764982137,
      "answer_id": 79839414,
      "question_id": 79443500,
      "content_license": "CC BY-SA 4.0",
      "body": "<h2>tl;dr</h2>\n<blockquote>\n<p>Do I need to set timezone using withOffsetSameInstant(ZoneOffset.of(&quot;UTC&quot;))));, or I can skip it?</p>\n</blockquote>\n<p>No, you do not need to specify an offset. The <code>Z</code> in your input string already indicates an offset of zero.</p>\n<pre><code>Instant.parse( &quot;2025-01-23T01:23:45Z&quot; )  // That's all you need.\n</code></pre>\n<p>Generate text in standard ISO 8601 format by simply calling <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/Instant.html#toString()\" rel=\"nofollow noreferrer\"><code>toString</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String output = instant.toString() ;  // Returns: 2025-01-23T01:23:45Z\n</code></pre>\n<p>Simplify your custom class to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.Instant;\n…\nprivate Instant created;  // (A) Use `Instant` to represent a moment as seen in UTC. (B) No need for `String creationTime`. Generate text when needed.\n</code></pre>\n<h2>Do not ignore <code>Z</code></h2>\n<blockquote>\n<p>&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;</p>\n</blockquote>\n<p><em>Never</em> put single-quotes around <code>Z</code> in a date-time formatting pattern. Doing so ignores the vital meaning of that letter as an informational signal. The <code>Z</code> is short for an offset of zero hours-minutes-seconds, <code>+00:00</code>. Your quotes are deleting information.</p>\n<p>The <code>T</code> in the middle should indeed have single-quotes around it. The single-quotes mean “expect but ignore the text”. The <code>T</code> is merely a delimiter without semantics. So we do indeed need to expect it but then want to ignore it as meaningless. Not so with <code>Z</code>.</p>\n<h2>ISO 8601</h2>\n<p>Your format complies with the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard.</p>\n<h2><code>java.time.Instant</code></h2>\n<p>The <em>java.time</em> classes use standard ISO 8601 formats by default when parsing/generating text. So no need to specify a formatting pattern at all. Just call <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/Instant.html#parse(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>Instant.parse</code></a>. That method uses the predefined formatting pattern in constant <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/format/DateTimeFormatter.html#ISO_INSTANT\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter.ISO_INSTANT</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Instant instant = Instant.parse( &quot;2025-01-23T01:23:45Z&quot; ) ;\n</code></pre>\n<h2>UTC-time</h2>\n<blockquote>\n<p>I tried to migrate this code to:</p>\n</blockquote>\n<p>You are workin too hard. No need for that code.</p>\n<p>A <code>java.time.Instant</code> is always “in UTC”, meaning its offset is always zero, +00:00.</p>\n<p>Your input string with a <code>Z</code> on the end means an offset of zero. So it parses directly as a <code>Instant</code> object with no adjustment to offset.</p>\n<h2>Prefer <code>Instant</code> over <code>OffsetDateTime</code></h2>\n<p>If your goal is to represent a moment in UTC, just use <code>Instant</code> class. No need for <code>OffsetDateTime</code>. An <code>Instant</code> object and a <code>java.time.OffsetDateTime</code> object with an offset of zero (<code>ZoneOffset.UTC</code>), have the same meaning.</p>\n<p>As a data field on your custom class, you should generally use <code>Instant</code> as the type if your intent is a moment as seen in UTC.</p>\n<p>So likely your line <code>private OffsetDateTime createdDate;</code> should be <code>private Instant createdDate;</code>. And I recommend simple but clear variable naming. So I would shorten to <code>private Instant created;</code>.</p>\n<h3>JDBC</h3>\n<p>Generally, we only need <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> for use with databases via JDBC.</p>\n<p>JDBC 4.2 and later requires every JDBC driver to support a subset of the <em>java.time</em> types. The <code>OffsetDateTime</code> class is one of the types in that subset, but <code>Instant</code> (and <code>ZonedDateTime</code>) are not. That is because of the peculiar limitations in the SQL Standard (written by people who did not understand date-time handling).</p>\n<p>Some JDBC drivers may offer support for <code>Instant</code>. You may choose to use such a feature, but know that your code may not port to other</p>\n<p>When you need to exchange an <code>Instant</code> object with a database, convert to/from <code>OffsetDateTime</code>. For your convenience, the <code>ZoneOffset</code> class offers a constant for an offset of zero, <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/ZoneOffset.html#UTC\" rel=\"nofollow noreferrer\"><code>ZoneOffset.UTC</code></a>.</p>\n<h4>Writing to database</h4>\n<p>When writing to database, we call <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/Instant.html#atOffset(java.time.ZoneOffset)\" rel=\"nofollow noreferrer\"><code>Instant#atOffset</code></a> to convert to <code>OffsetDateTime</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Instant created = Instant.now() ;\nOffsetDateTime odt = created.atOffset( ZoneOffset.UTC ) ; \nmyPreparedStatement.setObject( … , odt ) ;\n</code></pre>\n<p>Abbreviated:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myPreparedStatement.setObject( … , Instant.now().atOffset( ZoneOffset.UTC )  ) ;\n</code></pre>\n<p>Or even briefer, skip <code>Instant</code> to directly call <code>OffsetDateTime.now</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myPreparedStatement.setObject( … , OffsetDateTime.now( ZoneOffset.UTC )  ) ;\n</code></pre>\n<p>⚠️ Be aware that some databases such as Postgres adjust inputs to UTC values for storage. And some do not.</p>\n<h4>Reading from database</h4>\n<p>When reading, fetch a <code>OffsetDateTime</code> object via JDBC, then convert to <code>Instant</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\nInstant instant = odt.toInstant() ;\n</code></pre>\n<p>Abbreviated:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Instant instant = myResultSet.getObject( … , OffsetDateTime.class ).toInstant() ;\n</code></pre>\n<p>⚠️ Many middleware tools &amp; SQL clients have the anti-feature of dynamically applying some default time zone after retrieving date-time values. This creates the confusing illusion that the value was stored with that time zone. JDBC clients (that I know of) do <em>not</em> apply some time zone. So the code shown above should always give you the truth, the actual value stored by the database.</p>\n"
    },
    {
      "owner": {
        "account_id": 40220928,
        "reputation": 19,
        "user_id": 29669799,
        "user_type": "unregistered",
        "profile_image": "https://www.gravatar.com/avatar/00263ef2f8d0d1974f2514357f030400?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Hosna L&#243;pez",
        "link": "https://stackoverflow.com/users/29669799/hosna-l%c3%b3pez"
      },
      "is_accepted": false,
      "score": 1,
      "last_activity_date": 1739753876,
      "last_edit_date": 1739753876,
      "creation_date": 1739731869,
      "answer_id": 79443747,
      "question_id": 79443500,
      "content_license": "CC BY-SA 4.0",
      "body": "<h2>Use a proper date-time object for your creation time</h2>\n<p>To store your creation time in an instance field in an object, use <code>Instant</code>, not <code>String</code>. Strings are for presentation to users, for storage if your storage doesn’t support date-time types and for data exchange.</p>\n<p>For example:</p>\n<pre><code>    OffsetDateTime creationDateTime = ZonedDateTime.of(\n                    2025, 2, 16, 23, 35, 0, 0,\n                    ZoneId.of(&quot;Asia/Yekaterinburg&quot;))\n            .toOffsetDateTime();\n    System.out.println(creationDateTime);\n\n    Instant creationTime = creationDateTime.toInstant();\n    System.out.println(creationTime);\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>2025-02-16T23:35+05:00\n2025-02-16T18:35:00Z\n</code></pre>\n</blockquote>\n<p>The <code>Instant</code> already prints in the format you asked for, only it will also print a fraction of second if a non-zero fraction exists.</p>\n<h2>If you need a <code>String</code></h2>\n<p>If against my recommendation you insist on a string, I suggest this formatter:</p>\n<pre><code>private static final DateTimeFormatter formatter\n        = new DateTimeFormatterBuilder()\n                .append(DateTimeFormatter.ISO_LOCAL_DATE)\n                .appendLiteral('T')\n                .appendPattern(&quot;HH:mm:ssX&quot;)\n                .toFormatter(Locale.ROOT);\n</code></pre>\n<p>It’s wordier than yours but has the advantage of reusing the built-in <code>DateTimeFormatter.ISO_LOCAL_DATE</code>. Now convert to UTC and format:</p>\n<pre><code>    String utcString = creationDateTime.withOffsetSameInstant(ZoneOffset.UTC)\n            .format(formatter);\n    System.out.println(utcString);\n</code></pre>\n<p>Output is the same as before:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>2025-02-16T18:35:00Z\n</code></pre>\n</blockquote>\n<p>If you prefer putting the formatting the other way around, do that, it makes no difference:</p>\n<pre><code>    String utcString = formatter.format(\n            creationDateTime.withOffsetSameInstant(ZoneOffset.UTC));\n    System.out.println(utcString);\n</code></pre>\n<p><strong>Or the short alternative:</strong> Don’t use any formatter. Discard any fraction of second from the <code>Instant</code> from above and use its <code>toString</code> method:</p>\n<pre><code>    String utcString = creationTime.truncatedTo(ChronoUnit.SECONDS)\n            .toString();\n</code></pre>\n<p>Output is the same again.</p>\n<h2>You are not adding a time zone</h2>\n<p>An <code>OffsetDateTime</code> has an offset from UTC, hence the class name. In java.time parlance a <em>time zone</em> is a IANA time zone and comprises past, present and future UTC offsets used in a particular place, the zone, such as Asia/Yekaterinburg in my code example above. So UTC is not a time zone, and an <code>OffsetDateTime</code> cannot have a time zone in this sense (this is what we have the <code>ZonedDateTime</code> class for).</p>\n<h2>Converting to UTC</h2>\n<blockquote>\n<p>Do I need to set timezone using\n<code>withOffsetSameInstant(ZoneOffset.of(&quot;UTC&quot;))));</code> or I can skip it?</p>\n</blockquote>\n<p>First, <code>ZoneOffset.of(&quot;UTC&quot;)</code> throws an exception. Instead use the built-in constant <code>ZoneOffset.UTC</code>. Then the answer to your question is, it depends on the result you want, of course. Your result will typically differ depending on whether you convert it to UTC or not. In my example above the <code>OffsetDateTime</code> had an offset of 5 hours from UTC, which we converted to 0 hours from UTC.</p>\n<h2>Never enclose <code>Z</code> in single quotes in your format pattern</h2>\n<p>As @Anonymous said in a comment, you will typically be getting an incorrect result from including <code>'Z'</code> (with the quotes) in a format pattern string. When you convert your date and time to UTC, the result happens to be the same. But you asked whether you needed to. What would happen if you didn’t? You would get the date and time of the original <code>OffsetDateTime</code> with an appended <code>Z</code> that would tell the reader that the date and time were in UTC. This would be doubly wrong: You would get a lie, and you would not get date and time at the desired UTC offset. Use pattern letter <code>X</code> as I do for the UTC offset. Now if you try leaving out the conversion to UTC, you still don’t get the date and time at the expected offset, but at least you are being told the offset so that you can see it’s not what you had wanted. If a wrong output, which do you prefer? A wrong output that looks right so you can’t tell that it’s wrong? Or an output that declares what it is giving you so you <em>can</em> see that it’s not what you expected? For the latter, use pattern letter <code>X</code>. It prints the offset as <code>Z</code> if it is zero hours-minutes-seconds from UTC and only in this case.</p>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 322981,
        "reputation": 346871,
        "user_id": 642706,
        "user_type": "registered",
        "accept_rate": 58,
        "profile_image": "https://i.sstatic.net/ZWEI3.jpg?s=256",
        "display_name": "Basil Bourque",
        "link": "https://stackoverflow.com/users/642706/basil-bourque"
      },
      "edited": false,
      "score": 1,
      "creation_date": 1764982522,
      "post_id": 79443500,
      "comment_id": 140889905,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 965625,
        "reputation": 904,
        "user_id": 1103606,
        "user_type": "registered",
        "accept_rate": 51,
        "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=256&d=identicon&r=PG",
        "display_name": "Peter Penzov",
        "link": "https://stackoverflow.com/users/1103606/peter-penzov"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1764977529,
      "post_id": 79443500,
      "comment_id": 140889844,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 7612423,
        "reputation": 87400,
        "user_id": 5772882,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Anonymous",
        "link": "https://stackoverflow.com/users/5772882/anonymous"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1739727337,
      "post_id": 79443500,
      "comment_id": 140105321,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 7612423,
        "reputation": 87400,
        "user_id": 5772882,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Anonymous",
        "link": "https://stackoverflow.com/users/5772882/anonymous"
      },
      "edited": false,
      "score": 2,
      "creation_date": 1739726834,
      "post_id": 79443500,
      "comment_id": 140105282,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 22124137,
        "reputation": 4244,
        "user_id": 16376827,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/1ImPw.png?s=256",
        "display_name": "g00se",
        "link": "https://stackoverflow.com/users/16376827/g00se"
      },
      "edited": false,
      "score": 1,
      "creation_date": 1739723273,
      "post_id": 79443500,
      "comment_id": 140105086,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 1894950,
        "reputation": 18654,
        "user_id": 1712135,
        "user_type": "registered",
        "profile_image": "https://i.sstatic.net/cErYR.png?s=256",
        "display_name": "deHaar",
        "link": "https://stackoverflow.com/users/1712135/dehaar"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1739722911,
      "post_id": 79443500,
      "comment_id": 140105058,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 6651855,
        "reputation": 291985,
        "user_id": 5133585,
        "user_type": "registered",
        "accept_rate": 96,
        "profile_image": "https://i.sstatic.net/dfqcw.png?s=256",
        "display_name": "Sweeper",
        "link": "https://stackoverflow.com/users/5133585/sweeper"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1739722895,
      "post_id": 79443500,
      "comment_id": 140105056,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "79839414": [],
    "79443747": []
  }
}