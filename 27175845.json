{
  "question": {
    "tags": [
      "java",
      "hibernate",
      "jpa",
      "where-clause",
      "hibernate-mapping"
    ],
    "owner": {
      "account_id": 938667,
      "reputation": 5632,
      "user_id": 967143,
      "user_type": "registered",
      "accept_rate": 45,
      "profile_image": "https://www.gravatar.com/avatar/348299fd90e68b310fc75c3c96a6ad58?s=256&d=identicon&r=PG",
      "display_name": "Johny19",
      "link": "https://stackoverflow.com/users/967143/johny19"
    },
    "is_answered": false,
    "view_count": 17134,
    "answer_count": 1,
    "score": 8,
    "last_activity_date": 1764622820,
    "creation_date": 1417107972,
    "last_edit_date": 1417118472,
    "question_id": 27175845,
    "content_license": "CC BY-SA 3.0",
    "link": "https://stackoverflow.com/questions/27175845/hibernate-where-annotation-on-a-manytoone-relation",
    "title": "Hibernate @Where annotation on a ManyToOne relation",
    "body": "<p>I have recently started to refactor my project because I had to add an extra column to some of my table. The extra column is an Enum (Pending, or Active). \nBecause of that change I would need now to refactor ALL my queries to only retrieves a row if the status is ACTIVE.</p>\n\n<p>After some research I found that we can annotate an Entity with the @Where annotation. it works fine where I use it on a simple column but my table look like this:</p>\n\n<pre><code>@Where(clause = 'state='ACTIVE'\")\n@Entity\npublic class Place {\n\n  @Column(name=\"id_place\")\n  private String placeId;\n\n  @Column(name=\"name\")\n  private String palceName;\n\n@OneToMany(mappedBy = \"place\")\n    private Set&lt;PlaceTag&gt; placeTag;\n\n  ...\n  ...\n}\n\n@Where(clause = 'state='ACTIVE'\")\n@Entity\npublic class Tag {\n\n  @Column(name=\"id_tag\")\n  private String tagId;\n\n  @Column(name=\"name\")\n  private String tagName;\n\n   @OneToMany(mappedBy = \"tag\")\n    private Set&lt;PlaceTag&gt; placeTag;\n   ... \n   ...\n}\n\n@Where(clause = 'poi.state='ACTIVE' AND tag.state='ACTIVE\")\n@Entity\npublic class PlaceTag {\n\n  @Column(name=\"id\")\n  private String id;\n\n  @ManyToOne(cascade = CascadeType.DETACH, fetch = FetchType.LAZY)\n  @JoinColumn(name = \"place_id\")\n  private Place place;\n\n  @ManyToOne(cascade = CascadeType.DETACH, fetch = FetchType.LAZY)\n  @JoinColumn(name = \"tag_id\")\n  private Tag tag;\n\n  ...\n  ...\n\n}\n</code></pre>\n\n<p>Now my question would be how can make this statement ONLY return the places and tags that are ACTIVE ?</p>\n\n<pre><code>SELECT pt FROM PlaceTag pt;\n</code></pre>\n\n<p>Is this possible? Or will I have to write the query Explicitly ?</p>\n\n<p>Thank you </p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}