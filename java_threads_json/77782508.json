{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "micrometer-tracing"
    ],
    "owner": {
      "account_id": 1126095,
      "reputation": 1662,
      "user_id": 1113356,
      "user_type": "registered",
      "accept_rate": 58,
      "profile_image": "https://www.gravatar.com/avatar/8772bc8065604e2a635093a10131bbd2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "KKK",
      "link": "https://stackoverflow.com/users/1113356/kkk"
    },
    "is_answered": true,
    "view_count": 878,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1709832776,
    "creation_date": 1704738283,
    "question_id": 77782508,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77782508/spring-boot-3-micrometer-tracing-slf4j-not-displaying-new-spanid",
    "title": "Spring Boot 3 - Micrometer Tracing @SLF4J Not Displaying New SpanID",
    "body": "<p>I'm currently working with Spring Boot - version 3.2.1, utilizing io.micrometer for tracing and configured Zipkin tracing.</p>\n<p>Within my controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/product&quot;)\npublic ResponseEntity&lt;APIResponse&lt;ProductResponseDTO&gt;&gt; getProduct() throws JsonProcessingException {\n    log.info(&quot;Executing getProduct function&quot;);\n\n    ParameterizedTypeReference&lt;ProductResponseDTO&gt; typeRef = new ParameterizedTypeReference&lt;&gt;() {};\n\n    ProductResponseDTO response = apiUtil.get(&quot;https://dummyjson.com/products&quot;, typeRef);\n\n    log.info(&quot;Everything is okay&quot;);\n    test_1();\n    test_2();\n    return apiUtil.okay(response, MessageCode.SUCCESS);\n}\n\n@NewSpan\npublic void test_2(){\n    log.info(&quot;test_2 function&quot;);\n}\n\npublic void test_1(){\n    Span newspan = tracer.nextSpan();\n    newspan.name(&quot;test_1-span&quot;);\n\n    try {\n        Thread.sleep(1000);  // delay for 1 second\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n    log.info(&quot;test_1 function&quot;);\n}\n\n</code></pre>\n<p>Logback Configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>%X{traceId:-}/%X{spanId:-}\n</code></pre>\n<p>Additionally, I've enabled <code>Hooks.enableAutomaticContextPropagation();</code> in the main class.</p>\n<p>While I can see new span IDs in Zipkin (not for logs but HTTP), the console consistently displays the same span ID.</p>\n<p>How can I ensure that the new span IDs are correctly reflected in the console logs?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}