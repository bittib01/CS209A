{
  "question": {
    "tags": [
      "java",
      "performance",
      "unsafe",
      "lambda-metafactory",
      "varhandle"
    ],
    "owner": {
      "account_id": 1364678,
      "reputation": 2232,
      "user_id": 1301373,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/56eb9a131846d4447ca24b5ea9ecb600?s=256&d=identicon&r=PG",
      "display_name": "winne2",
      "link": "https://stackoverflow.com/users/1301373/winne2"
    },
    "is_answered": true,
    "view_count": 156,
    "closed_date": 1763460470,
    "accepted_answer_id": 79822684,
    "answer_count": 1,
    "score": -9,
    "last_activity_date": 1764475822,
    "creation_date": 1763397607,
    "last_edit_date": 1764475822,
    "question_id": 79822552,
    "link": "https://stackoverflow.com/questions/79822552/are-there-any-plans-to-expose-internal-arrays-in-java-lang-string",
    "closed_reason": "Opinion-based",
    "title": "Are there any plans to expose internal arrays in java.lang.String?",
    "body": "<p>When trying to performance-tune our Java XML parsing/validation/binding pipeline, I observed the following:</p>\n<ul>\n<li>Iterating a String's chars via <code>String.charAt()</code> is slow, cf. e.g. <a href=\"https://github.com/FasterXML/woodstox/blob/main/src/main/java/com/ctc/wstx/sw/BaseStreamWriter.java#L95\" rel=\"nofollow noreferrer\">Woodstox</a> (I was able to verify this statement with own benchmarks):</li>\n</ul>\n<blockquote>\n<p>Intermediate buffer into which characters of a String can be copied, in cases where such a copy followed by array access is faster than calling <code>String.charAt()</code> (which perhaps surprisingly is often case, and especially significant for longer buffers).</p>\n</blockquote>\n<ul>\n<li>Copying to a buffer array with <code>String.getChars()</code> and <em>then</em> iterating the buffer is obviously more expensive than just iterating over an array.</li>\n<li>Heavily performance-optimized libraries like <a href=\"https://www.alibabacloud.com/blog/techniques-to-construct-string-objects-and-access-internal-members-quickly_599831\" rel=\"nofollow noreferrer\">FastJSON</a> use a mix of unsafe, deprecated and undocumented APIs (AFAIU) to directly access a String's backing array (I verified with own benchmarks that this approach has performance benefits)</li>\n</ul>\n<p>Are you aware of any plans to &quot;officially&quot; offer an API to directly access a String's backing array?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}