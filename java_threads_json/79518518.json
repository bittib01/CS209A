{
  "question": {
    "tags": [
      "java",
      "reflection",
      "instance",
      "outer-classes"
    ],
    "owner": {
      "account_id": 5477283,
      "reputation": 5005,
      "user_id": 4354956,
      "user_type": "registered",
      "accept_rate": 38,
      "profile_image": "https://lh3.googleusercontent.com/-dGnI8MKmUL4/AAAAAAAAAAI/AAAAAAAAABE/s48lzQAiCKk/s256-rj/photo.jpg",
      "display_name": "Joseph K. Strauss",
      "link": "https://stackoverflow.com/users/4354956/joseph-k-strauss"
    },
    "is_answered": true,
    "view_count": 263,
    "closed_date": 1742420172,
    "accepted_answer_id": 79518784,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1742393996,
    "creation_date": 1742326809,
    "last_edit_date": 1742331657,
    "question_id": 79518518,
    "link": "https://stackoverflow.com/questions/79518518/java-21-reflection-access-instance-of-outer-class",
    "closed_reason": "Not suitable for this site",
    "title": "Java 21: Reflection: Access instance of outer class",
    "body": "<p>I have a framework that needs to discover the instance for an outer class when supplied an instance of the inner class so that I can set a field of the outer instance.</p>\n<pre><code>class Outer {\n\n  String outerField;\n \n  class Inner {\n    // String outerMaskedField() {\n    //   return Outer.this.outerField;\n    // }\n  }\n}\n</code></pre>\n<p>In Java 17 this was possible, because the inner class had a private field named &quot;this$0&quot; on the inner class. It was then possible to read that field by filtering for a field that had the type of the outer class (assuming that there is only 1).</p>\n<pre><code>Arrays.stream(target.getClass().getDeclaredFields())\n    .filter(it -&gt; it.getType() == target.getClass().getEnclosingClass())\n    .findFirst();\n</code></pre>\n<p>However, in Java 21 this is not available anymore. Is there an alternative way to find this out at runtime?</p>\n<p>As discussed in the comments, uncommenting the code will fix the error, but it is an undocumented solution. A less flaky solution would be desirable.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}