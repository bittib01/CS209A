{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "maven",
      "jpa",
      "lombok"
    ],
    "owner": {
      "account_id": 40845322,
      "reputation": 1,
      "user_id": 29991341,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/oJu3m0uA.jpg?s=256",
      "display_name": "Matias Campos",
      "link": "https://stackoverflow.com/users/29991341/matias-campos"
    },
    "is_answered": false,
    "view_count": 45,
    "closed_date": 1742455613,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1742401985,
    "creation_date": 1742401985,
    "question_id": 79520831,
    "link": "https://stackoverflow.com/questions/79520831/spring-boot-mapstruct-fields-null-in-entity",
    "closed_reason": "Duplicate",
    "title": "Spring Boot + MapStruct: Fields null in entity",
    "body": "<p>I'm developing a REST API using Spring Boot and facing an issue with MapStruct when mapping a VehicleDTO to Vehicle.\nWhen I try to create a new vehicle, the values of the Vehicle object are becoming null before being saved in the database.</p>\n<p>As seen in the logs, the VehicleDTO is received correctly.\nHowever, after conversion to Vehicle using VehicleMapper, all fields in Vehicle are null or 0.\nThis results in the error &quot;NULL not allowed for column 'BRAND'&quot; when saving to the database.</p>\n<ol>\n<li>Vehicle (JPA Entity)</li>\n</ol>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;vehicles&quot;)\npublic class Vehicle {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String brand;\n\n    @Column(nullable = false)\n    private String model;\n\n    @Column(unique = true, nullable = false)\n    private String licensePlate;\n\n    @Column(nullable = false)\n    private int kilometers;\n\n    @Column(nullable = false)\n    private boolean isNew;\n}\n</code></pre>\n<ol start=\"2\">\n<li>VehicleDTO (DTO used in the request)</li>\n</ol>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class VehicleDTO {\n    private Long id;\n    private String brand;\n    private String model;\n    private String licensePlate;\n    private int kilometers;\n    private boolean isNew;\n}\n</code></pre>\n<ol start=\"3\">\n<li>VehicleMapper (MapStruct interface)</li>\n</ol>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface VehicleMapper {\n    VehicleDTO toDTO(Vehicle vehicle);\n    Vehicle toEntity(VehicleDTO vehicleDTO);\n    List&lt;VehicleDTO&gt; toDTOList(List&lt;Vehicle&gt; vehicles);\n    List&lt;Vehicle&gt; toEntitiesList(List&lt;VehicleDTO&gt; vehicleDTOSList);\n}\n</code></pre>\n<ol start=\"4\">\n<li>VehicleService (Service Layer)</li>\n</ol>\n<pre><code>@Service\npublic class VehicleService {\n    private final VehicleRepository vehicleRepository;\n    private final VehicleMapper vehicleMapper;\n\n    public VehicleService(VehicleRepository vehicleRepository, VehicleMapper vehicleMapper) {\n        this.vehicleRepository = vehicleRepository;\n        this.vehicleMapper = vehicleMapper;\n    }\n\n    public List&lt;VehicleDTO&gt; getAllVehicles() {\n        return vehicleRepository.findAll().stream()\n                .map(vehicleMapper::toDTO)\n                .collect(Collectors.toList());\n    }\n\n    public Optional&lt;VehicleDTO&gt; getVehicleById(Long id) {\n        return vehicleRepository.findById(id).map(vehicleMapper::toDTO);\n    }\n\n    public VehicleDTO saveVehicle(VehicleDTO vehicleDTO) {\n        System.out.println(&quot;Received DTO: &quot; + vehicleDTO);\n        Vehicle vehicle = vehicleMapper.toEntity(vehicleDTO);\n        System.out.println(&quot;Converted Vehicle: &quot; + vehicle);\n        Vehicle savedVehicle = vehicleRepository.save(vehicle);\n        return vehicleMapper.toDTO(savedVehicle);\n    }\n\n    public void deleteVehicle(Long id) {\n        vehicleRepository.deleteById(id);\n    }\n}\n</code></pre>\n<ol start=\"5\">\n<li>VehicleController (REST Controller)</li>\n</ol>\n<pre><code>@RestController\n@RequestMapping(&quot;/vehicles&quot;)\npublic class VehicleController {\n    private final VehicleService vehicleService;\n\n    public VehicleController(VehicleService vehicleService) {\n        this.vehicleService = vehicleService;\n    }\n\n    @PostMapping(&quot;/create&quot;)\n    public ResponseEntity&lt;VehicleDTO&gt; createVehicle(@RequestBody VehicleDTO vehicleDTO) {\n        return ResponseEntity.ok(vehicleService.saveVehicle(vehicleDTO));\n    }\n}\n</code></pre>\n<ol start=\"6\">\n<li>VehicleRepository (JPA Repository)</li>\n</ol>\n<pre><code>@Repository\npublic interface VehicleRepository extends JpaRepository&lt;Vehicle, Long&gt; {\n    List&lt;Vehicle&gt; findByBrand(String brand);\n    List&lt;Vehicle&gt; findByIsNew(boolean isNew);\n}\n</code></pre>\n<ol start=\"7\">\n<li>JSON Request sent via Postman</li>\n</ol>\n<pre><code>{\n  &quot;brand&quot;: &quot;Toyota&quot;,\n  &quot;model&quot;: &quot;Corolla&quot;,\n  &quot;licensePlate&quot;: &quot;ABC123&quot;,\n  &quot;kilometers&quot;: 50000,\n  &quot;isNew&quot;: false\n}\n</code></pre>\n<ol start=\"8\">\n<li>System Logs</li>\n</ol>\n<pre><code>Received DTO: VehicleDTO{id=null, brand='Toyota', model='Corolla', licensePlate='ABC123', kilometers=50000, isNew=false}\nConverted Vehicle: Vehicle{id=null, brand='null', model='null', licensePlate='null', kilometers=0, isNew=false}\n</code></pre>\n<ol start=\"9\">\n<li>Maven</li>\n</ol>\n<pre><code>    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Validaciones con Javax (Spring Boot Validation) --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Pruebas con JUnit y Mockito (Spring Boot Test) --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Documentaci칩n Swagger OpenAPI --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;1.5.5.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- MapStruct Processor (para que se genere el c칩digo autom치ticamente) --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n            &lt;version&gt;1.5.5.Final&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Integraci칩n con Spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}