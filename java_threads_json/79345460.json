{
  "question": {
    "tags": [
      "java",
      "https",
      "google-calendar-api"
    ],
    "owner": {
      "account_id": 5818533,
      "reputation": 461,
      "user_id": 4587314,
      "user_type": "registered",
      "accept_rate": 22,
      "profile_image": "https://www.gravatar.com/avatar/b9a572ca46912f7d2fa64f41839a94e8?s=256&d=identicon&r=PG",
      "display_name": "Lovegiver",
      "link": "https://stackoverflow.com/users/4587314/lovegiver"
    },
    "is_answered": true,
    "view_count": 92,
    "accepted_answer_id": 79379276,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1738600291,
    "creation_date": 1736506484,
    "last_edit_date": 1738600291,
    "question_id": 79345460,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79345460/why-does-google-calendar-events-watch-say-my-request-is-not-https",
    "title": "Why does Google Calendar.Events.Watch say my request is not HTTPS",
    "body": "<p>I'm currently working on an app using Google Calendar API.</p>\n<p>I'm completely stuck when requesting the Watch content because Google says the URI I've specified for the Channel content is not HTTPS :</p>\n<pre><code>2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,068 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) -------------- REQUEST  --------------\n2025-01-10 10:49:32 app-1           | POST https://www.googleapis.com/calendar/v3/calendars/primary/events/watch\n2025-01-10 10:49:32 app-1           | Accept-Encoding: gzip\n2025-01-10 10:49:32 app-1           | Authorization: &lt;Not Logged&gt;\n2025-01-10 10:49:32 app-1           | User-Agent: OptimeApp Google-API-Java-Client/2.0.0 Google-HTTP-Java-Client/1.45.0 (gzip)\n2025-01-10 10:49:32 app-1           | x-goog-api-client: gl-java/21.0.5 gdcl/2.0.0 linux/5.15.167\n2025-01-10 10:49:32 app-1           | Content-Type: application/json; charset=UTF-8\n2025-01-10 10:49:32 app-1           | Content-Encoding: gzip\n2025-01-10 10:49:32 app-1           | \n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,068 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) curl -v --compressed -X POST -H 'Accept-Encoding: gzip' -H 'Authorization: &lt;Not Logged&gt;' -H 'User-Agent: OptimeApp Google-API-Java-Client/2.0.0 Google-HTTP-Java-Client/1.45.0 (gzip)' -H 'x-goog-api-client: gl-java/21.0.5 gdcl/2.0.0 linux/5.15.167' -H 'Content-Type: application/json; charset=UTF-8' -H 'Content-Encoding: gzip' -d '@-' -- 'https://www.googleapis.com/calendar/v3/calendars/primary/events/watch' &lt;&lt; $$$\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,071 DEBUG [sun.net.www.pro.htt.HttpURLConnection] (executor-thread-1) sun.net.www.MessageHeader@614f3e811 pairs: {POST /calendar/v3/calendars/primary/events/watch HTTP/1.1: null}{Accept-Encoding: gzip}{Authorization: ***}{User-Agent: OptimeApp Google-API-Java-Client/2.0.0 Google-HTTP-Java-Client/1.45.0 (gzip)}{x-goog-api-client: gl-java/21.0.5 gdcl/2.0.0 linux/5.15.167}{Content-Type: application/json; charset=UTF-8}{Content-Encoding: gzip}{Host: www.googleapis.com}{Accept: */*}{Connection: keep-alive}{Transfer-Encoding: chunked}\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,079 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) Total: 110 bytes\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,079 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) {&quot;id&quot;:&quot;ChannelID&quot;,&quot;resourceUri&quot;:&quot;https://example.com/optime/googlecalendar/notifications&quot;,&quot;type&quot;:&quot;web_hook&quot;}\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,226 DEBUG [sun.net.www.pro.htt.HttpURLConnection] (executor-thread-1) sun.net.www.MessageHeader@6e009cd114 pairs: {null: HTTP/1.1 400 Bad Request}{Vary: Origin}{Vary: X-Origin}{Vary: Referer}{Content-Type: application/json; charset=UTF-8}{Content-Encoding: gzip}{Date: Fri, 10 Jan 2025 09:49:32 GMT}{Server: ESF}{X-XSS-Protection: 0}{X-Frame-Options: SAMEORIGIN}{X-Content-Type-Options: nosniff}{Alt-Svc: h3=&quot;:443&quot;; ma=2592000,h3-29=&quot;:443&quot;; ma=2592000}{x-l2-request-path: l2-managed-14}{Transfer-Encoding: chunked}\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,229 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) -------------- RESPONSE --------------\n2025-01-10 10:49:32 app-1           | HTTP/1.1 400 Bad Request\n2025-01-10 10:49:32 app-1           | X-Frame-Options: SAMEORIGIN\n2025-01-10 10:49:32 app-1           | Transfer-Encoding: chunked\n2025-01-10 10:49:32 app-1           | Server: ESF\n2025-01-10 10:49:32 app-1           | Alt-Svc: h3=&quot;:443&quot;; ma=2592000,h3-29=&quot;:443&quot;; ma=2592000\n2025-01-10 10:49:32 app-1           | X-Content-Type-Options: nosniff\n2025-01-10 10:49:32 app-1           | Content-Encoding: gzip\n2025-01-10 10:49:32 app-1           | Vary: Origin\n2025-01-10 10:49:32 app-1           | Vary: X-Origin\n2025-01-10 10:49:32 app-1           | Vary: Referer\n2025-01-10 10:49:32 app-1           | X-XSS-Protection: 0\n2025-01-10 10:49:32 app-1           | Date: Fri, 10 Jan 2025 09:49:32 GMT\n2025-01-10 10:49:32 app-1           | Content-Type: application/json; charset=UTF-8\n2025-01-10 10:49:32 app-1           | x-l2-request-path: l2-managed-14\n2025-01-10 10:49:32 app-1           | \n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,243 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) Total: 253 bytes\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,243 CONFIG [com.goo.api.cli.htt.HttpTransport] (executor-thread-1) {\n2025-01-10 10:49:32 app-1           |   &quot;error&quot;: {\n2025-01-10 10:49:32 app-1           |     &quot;errors&quot;: [\n2025-01-10 10:49:32 app-1           |       {\n2025-01-10 10:49:32 app-1           |         &quot;domain&quot;: &quot;global&quot;,\n2025-01-10 10:49:32 app-1           |         &quot;reason&quot;: &quot;push.webhookUrlNotHttps&quot;,\n2025-01-10 10:49:32 app-1           |         &quot;message&quot;: &quot;WebHook callback must be HTTPS: &quot;\n2025-01-10 10:49:32 app-1           |       }\n2025-01-10 10:49:32 app-1           |     ],\n2025-01-10 10:49:32 app-1           |     &quot;code&quot;: 400,\n2025-01-10 10:49:32 app-1           |     &quot;message&quot;: &quot;WebHook callback must be HTTPS: &quot;\n2025-01-10 10:49:32 app-1           |   }\n2025-01-10 10:49:32 app-1           | }\n2025-01-10 10:49:32 app-1           | 2025-01-10 09:49:32,248 DEBUG [org.jbo.res.rea.ser.cor.RuntimeExceptionMapper] (executor-thread-1) IOError processing HTTP request to https://example.com/optime/actions failed, the client likely terminated the connection.: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request\n2025-01-10 10:49:32 app-1           | POST https://www.googleapis.com/calendar/v3/calendars/primary/events/watch\n2025-01-10 10:49:32 app-1           | {\n2025-01-10 10:49:32 app-1           |   &quot;code&quot;: 400,\n2025-01-10 10:49:32 app-1           |   &quot;errors&quot;: [\n2025-01-10 10:49:32 app-1           |     {\n2025-01-10 10:49:32 app-1           |       &quot;domain&quot;: &quot;global&quot;,\n2025-01-10 10:49:32 app-1           |       &quot;message&quot;: &quot;WebHook callback must be HTTPS: &quot;,\n2025-01-10 10:49:32 app-1           |       &quot;reason&quot;: &quot;push.webhookUrlNotHttps&quot;\n2025-01-10 10:49:32 app-1           |     }\n2025-01-10 10:49:32 app-1           |   ],\n2025-01-10 10:49:32 app-1           |   &quot;message&quot;: &quot;WebHook callback must be HTTPS: &quot;\n2025-01-10 10:49:32 app-1           | }\n</code></pre>\n<p>When building the Watch object, the URI I Use is HTTPS :</p>\n<pre><code>URI uri = new URI(&quot;https://example.com/optime/googlecalendar/notifications&quot;);\n        Calendar.Events.Watch watched = service.events().watch(\n                &quot;primary&quot;,\n                new Channel()\n                        .setId(&quot;ChannelID&quot;)\n                        .setType(&quot;web_hook&quot;)\n                        .setResourceUri(uri.toURL().toString())\n        );\n</code></pre>\n<p>This URI has been declared in the Google console and is present in the credentials.json file with ID and secrets.</p>\n<p>The domain does exist, has a valid, not self-signed certificate :</p>\n<pre><code>2025-01-10 10:48:07 app-1           | 2025-01-10 09:48:07,344 DEBUG [jdk.eve.security] (vert.x-internal-blocking-1) X509Certificate: Alg:SHA256withRSA, Serial:***, Subject:CN=example.com, Issuer:CN=R10, O=Let's Encrypt, C=US, Key type:RSA, Length:2048, Cert Id:1053261847, Valid from:1/10/25, 8:48 AM, Valid until:4/10/25, 8:48 AM\n</code></pre>\n<p>An endpoint also exists in a controller :</p>\n<pre><code>@Path(&quot;/notifications&quot;)\n@POST\npublic Response watch(Object payload) {\n    LOG.debug(&quot;WATCH function&quot;);\n    return Response.ok().build();\n}\n</code></pre>\n<p>At this point, I can't understand what I'm missing and I hope someone is able to point the mistake(s) I've made.</p>\n<p>Thanx for your time.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}