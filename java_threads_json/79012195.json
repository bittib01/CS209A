{
  "question": {
    "tags": [
      "java",
      "apache-kafka",
      "apache-flink"
    ],
    "owner": {
      "account_id": 30413014,
      "reputation": 25,
      "user_id": 23306543,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/m2msl.jpg?s=256",
      "display_name": "Paulo Alves",
      "link": "https://stackoverflow.com/users/23306543/paulo-alves"
    },
    "is_answered": true,
    "view_count": 521,
    "accepted_answer_id": 79012259,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1727028294,
    "creation_date": 1727026214,
    "question_id": 79012195,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79012195/java-flink-noclassdeffounderror-org-apache-flink-shaded-guava30-com-google-commo",
    "title": "Java Flink NoClassDefFoundError org/apache/flink/shaded/guava30/com/google/common/io/Closer",
    "body": "<p>I have a Java 21 application that uses Apache Flink (version 1.20.0) dependencies for filtering kafka stream.</p>\n<p>When I try executing my program I get the following error:</p>\n<pre><code>[flink-pekko.actor.default-dispatcher-5] INFO org.apache.flink.runtime.executiongraph.ExecutionGraph - Source: Wikimedia Recent Change Events -&gt; Filter -&gt; Sink: Writer -&gt; Sink: Committer (12/20) (b06737fae3a29dd6d5031f24d0e01683_cbc357ccb763df2852fee8c4fc7d55f2_11_0) switched from INITIALIZING to FAILED on 114b44f3-53af-41a6-bc97-a040192436ae @ localhost (dataPort=-1).\njava.lang.NoClassDefFoundError: org/apache/flink/shaded/guava30/com/google/common/io/Closer\n    at org.apache.flink.connector.kafka.sink.KafkaWriter.&lt;init&gt;(KafkaWriter.java:109)\n    at org.apache.flink.connector.kafka.sink.KafkaSink.createWriter(KafkaSink.java:111)\n    at org.apache.flink.connector.kafka.sink.KafkaSink.createWriter(KafkaSink.java:57)\n    at org.apache.flink.api.connector.sink2.Sink.createWriter(Sink.java:78)\n    at org.apache.flink.streaming.runtime.operators.sink.StatefulSinkWriterStateHandler.createWriter(StatefulSinkWriterStateHandler.java:122)\n    at org.apache.flink.streaming.runtime.operators.sink.SinkWriterOperator.initializeState(SinkWriterOperator.java:148)\n    at org.apache.flink.streaming.api.operators.StreamOperatorStateHandler.initializeOperatorState(StreamOperatorStateHandler.java:147)\n    at org.apache.flink.streaming.api.operators.AbstractStreamOperator.initializeState(AbstractStreamOperator.java:294)\n    at org.apache.flink.streaming.runtime.tasks.RegularOperatorChain.initializeStateAndOpenOperators(RegularOperatorChain.java:106)\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.restoreStateAndGates(StreamTask.java:858)\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.lambda$restoreInternal$5(StreamTask.java:812)\n    at org.apache.flink.streaming.runtime.tasks.StreamTaskActionExecutor$1.call(StreamTaskActionExecutor.java:55)\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.restoreInternal(StreamTask.java:812)\n    at org.apache.flink.streaming.runtime.tasks.StreamTask.restore(StreamTask.java:771)\n    at org.apache.flink.runtime.taskmanager.Task.runWithSystemExitMonitoring(Task.java:970)\n    at org.apache.flink.runtime.taskmanager.Task.restoreAndInvoke(Task.java:939)\n    at org.apache.flink.runtime.taskmanager.Task.doRun(Task.java:763)\n    at org.apache.flink.runtime.taskmanager.Task.run(Task.java:575)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: java.lang.ClassNotFoundException: org.apache.flink.shaded.guava30.com.google.common.io.Closer\n    ... 19 more\n</code></pre>\n<p>I have tried adding the following dependency to my pom.xml as a way to solve this issue:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-shaded-guava&lt;/artifactId&gt;\n            &lt;version&gt;31.1-jre-17.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>But I still get the same error.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}