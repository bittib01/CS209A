{
  "question": {
    "tags": [
      "java",
      "android",
      "kotlin",
      "gradle",
      "gradle-kotlin-dsl"
    ],
    "owner": {
      "account_id": 14201244,
      "reputation": 341,
      "user_id": 10259099,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/zOFWi.png?s=256",
      "display_name": "Rofie Sagara",
      "link": "https://stackoverflow.com/users/10259099/rofie-sagara"
    },
    "is_answered": false,
    "view_count": 380,
    "answer_count": 2,
    "score": 3,
    "last_activity_date": 1735256435,
    "creation_date": 1728964964,
    "question_id": 79088370,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79088370/android-ksp-java-lang-nosuchmethoderror-com-google-common-collect-immutablem",
    "title": "Android [ksp] java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap$Builder.buildOrThrow()&#39;",
    "body": "<p>I update libs to latest version and include jvm to 17 but until now the problem i have its said that <code>[ksp] java.lang.NoSuchMethodError: 'com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap$Builder.buildOrThrow()' </code></p>\n<p>i already look at the website and said maybe its use old version <code>guava</code>, so i try to <code>implementation(&quot;com.google.guava:guava:33.3.1-android&quot;)</code> in my gradle and still not work</p>\n<p>i cant find which libs that use guava, try to updated the libs to the latest version and guava also but still same problem, i give you gradle.kts</p>\n<p><code>app Gradle kts</code></p>\n<pre><code>import org.jetbrains.kotlin.konan.properties.Properties\n\nplugins {\n    id(&quot;com.android.application&quot;)\n    id(&quot;org.jetbrains.kotlin.android&quot;)\n    id(&quot;io.realm.kotlin&quot;)\n    id(&quot;com.google.devtools.ksp&quot;)\n    id(&quot;com.google.dagger.hilt.android&quot;)\n    id(&quot;kotlin-parcelize&quot;)\n    id(&quot;com.google.gms.google-services&quot;)\n    id(&quot;com.google.firebase.crashlytics&quot;)\n}\n\nval props = Properties()\nfile(&quot;../local.properties&quot;).inputStream().use { props.load(it) }\n\nandroid {\n    namespace = &quot;com.honcho.quickfire&quot;\n    compileSdk = 34\n\n    signingConfigs {\n        getByName(&quot;debug&quot;) {\n            keyAlias = props.getProperty(&quot;debug.key.alias&quot;)\n            keyPassword = props.getProperty(&quot;debug.key.password&quot;)\n            storeFile = file(props.getProperty(&quot;debug.key.path&quot;))\n            storePassword = props.getProperty(&quot;debug.key.password.store&quot;)\n        }\n        create(&quot;release&quot;) {\n            keyAlias = props.getProperty(&quot;release.key.alias&quot;)\n            keyPassword = props.getProperty(&quot;release.key.password&quot;)\n            storeFile = file(props.getProperty(&quot;release.key.path&quot;))\n            storePassword = props.getProperty(&quot;release.key.password.store&quot;)\n        }\n        create(&quot;beta&quot;) {\n            keyAlias = props.getProperty(&quot;release.key.alias&quot;)\n            keyPassword = props.getProperty(&quot;release.key.password&quot;)\n            storeFile = file(props.getProperty(&quot;release.key.path&quot;))\n            storePassword = props.getProperty(&quot;release.key.password.store&quot;)\n        }\n    }\n\n    defaultConfig {\n        applicationId = &quot;com.honcho.quickfire&quot;\n        minSdk = 23\n        targetSdk = 34\n        versionCode = 81\n        versionName = &quot;2.0.24&quot;\n\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables {\n            useSupportLibrary = true\n        }\n    }\n\n    buildTypes {\n        release {\n            isMinifyEnabled = true\n            proguardFiles(getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot;)\n            buildConfigField(&quot;String&quot;, &quot;HOST&quot;, props.getProperty(&quot;RELEASE_HOST_API&quot;))\n            buildConfigField(&quot;String&quot;, &quot;GALLERY_HOST&quot;, props.getProperty(&quot;RELEASE_GALLERY_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;WEB_HOST&quot;, props.getProperty(&quot;RELEASE_WEB_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;SOCKET_HOST&quot;, props.getProperty(&quot;RELEASE_SOCKET_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;MIXPANEL_TOKEN&quot;, props.getProperty(&quot;MIXPANEL_TOKEN&quot;))\n            buildConfigField(&quot;String&quot;, &quot;DATADOG_TOKEN&quot;, props.getProperty(&quot;DATADOG_TOKEN&quot;))\n            signingConfig = signingConfigs.getByName(&quot;release&quot;)\n        }\n\n        debug {\n            applicationIdSuffix = &quot;.debug&quot;\n            isDebuggable = true\n            buildConfigField(&quot;String&quot;, &quot;HOST&quot;, props.getProperty(&quot;DEBUG_HOST_API&quot;))\n            buildConfigField(&quot;String&quot;, &quot;GALLERY_HOST&quot;, props.getProperty(&quot;DEBUG_GALLERY_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;WEB_HOST&quot;, props.getProperty(&quot;DEBUG_WEB_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;SOCKET_HOST&quot;, props.getProperty(&quot;DEBUG_SOCKET_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;MIXPANEL_TOKEN&quot;, props.getProperty(&quot;MIXPANEL_TOKEN&quot;))\n            buildConfigField(&quot;String&quot;, &quot;DATADOG_TOKEN&quot;, props.getProperty(&quot;DATADOG_TOKEN&quot;))\n        }\n\n        create(&quot;beta&quot;) {\n            applicationIdSuffix = &quot;.beta&quot;\n            isMinifyEnabled = true\n            proguardFiles(getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot;)\n            buildConfigField(&quot;String&quot;, &quot;HOST&quot;, props.getProperty(&quot;RELEASE_HOST_API&quot;))\n            buildConfigField(&quot;String&quot;, &quot;GALLERY_HOST&quot;, props.getProperty(&quot;RELEASE_GALLERY_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;WEB_HOST&quot;, props.getProperty(&quot;RELEASE_WEB_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;SOCKET_HOST&quot;, props.getProperty(&quot;RELEASE_SOCKET_HOST&quot;))\n            buildConfigField(&quot;String&quot;, &quot;MIXPANEL_TOKEN&quot;, props.getProperty(&quot;MIXPANEL_TOKEN&quot;))\n            buildConfigField(&quot;String&quot;, &quot;DATADOG_TOKEN&quot;, props.getProperty(&quot;DATADOG_TOKEN&quot;))\n        }\n    }\n    compileOptions {\n        isCoreLibraryDesugaringEnabled = true\n        sourceCompatibility = JavaVersion.VERSION_17\n        targetCompatibility = JavaVersion.VERSION_17\n    }\n    kotlinOptions {\n        jvmTarget = &quot;17&quot;\n    }\n    buildFeatures {\n        compose = true\n        buildConfig = true\n    }\n    composeOptions {\n        // kotlinCompilerExtensionVersion = &quot;1.4.3&quot;\n    }\n    packaging {\n        resources {\n            excludes += &quot;/META-INF/{AL2.0,LGPL2.1}&quot;\n        }\n    }\n\n    allprojects {\n        tasks.withType&lt;JavaCompile&gt; {\n            options.compilerArgs.addAll(arrayOf(&quot;-parameters&quot;, &quot;-Xlint:deprecation&quot;))\n        }\n    }\n}\n\nkotlin {\n    jvmToolchain(17)\n}\n\nksp {\n    arg(&quot;jvmTarget&quot;, &quot;17&quot;)\n}\n\ndependencies {\n    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:1.1.5&quot;)\n    implementation(&quot;androidx.core:core-ktx:1.13.1&quot;)\n    implementation(&quot;androidx.activity:activity-compose:1.9.2&quot;)\n\n    implementation(project(mapOf(&quot;path&quot; to &quot;:service&quot;)))\n    implementation(files(&quot;libs/pronto-release.aar&quot;))\n\n    // Kotlin\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.9.0&quot;)\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.9.0&quot;)\n\n    // Compose\n    implementation(platform(&quot;androidx.compose:compose-bom:2024.09.03&quot;))\n    implementation(&quot;androidx.compose.ui:ui&quot;)\n    implementation(&quot;androidx.compose.ui:ui-graphics&quot;)\n    implementation(&quot;androidx.compose.ui:ui-tooling-preview&quot;)\n    implementation(&quot;androidx.compose.material3:material3&quot;)\n\n    // Lifecycle\n    implementation(&quot;androidx.lifecycle:lifecycle-runtime-ktx:2.8.6&quot;)\n    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.8.6&quot;)\n    implementation(&quot;androidx.lifecycle:lifecycle-viewmodel-compose:2.8.6&quot;)\n    implementation(&quot;androidx.lifecycle:lifecycle-livedata-ktx:2.8.6&quot;)\n    implementation(&quot;androidx.lifecycle:lifecycle-runtime-compose:2.8.6&quot;)\n\n    // Navigation 6.0\n    implementation (&quot;androidx.navigation:navigation-compose:2.8.2&quot;)\n\n    // Work manager\n    implementation(&quot;androidx.work:work-runtime-ktx:2.9.1&quot;)\n    implementation(&quot;androidx.work:work-multiprocess:2.9.1&quot;)\n\n    // CameraX\n    implementation(&quot;androidx.camera:camera-core:1.3.4&quot;)\n    implementation(&quot;androidx.camera:camera-camera2:1.3.4&quot;)\n    implementation(&quot;androidx.camera:camera-lifecycle:1.3.4&quot;)\n    implementation(&quot;androidx.camera:camera-video:1.3.4&quot;)\n    implementation(&quot;androidx.camera:camera-view:1.3.4&quot;)\n    implementation(&quot;androidx.camera:camera-extensions:1.3.4&quot;)\n\n    // Test\n    androidTestImplementation(platform(&quot;androidx.compose:compose-bom:2024.09.03&quot;))\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\n    androidTestImplementation(&quot;androidx.test.ext:junit:1.2.1&quot;)\n    androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.6.1&quot;)\n    androidTestImplementation(&quot;androidx.compose.ui:ui-test-junit4&quot;)\n    debugImplementation(&quot;androidx.compose.ui:ui-tooling&quot;)\n    debugImplementation(&quot;androidx.compose.ui:ui-test-manifest&quot;)\n\n    // Hilt\n    implementation (&quot;com.google.dagger:hilt-android:2.52&quot;)\n    ksp(&quot;com.google.dagger:hilt-android-compiler:2.52&quot;)\n\n    implementation (&quot;androidx.hilt:hilt-navigation-compose:1.2.0&quot;)\n    implementation(&quot;androidx.hilt:hilt-work:1.2.0&quot;)\n    ksp(&quot;androidx.hilt:hilt-compiler:1.2.0&quot;)\n\n    // Firebase\n    implementation(platform(&quot;com.google.firebase:firebase-bom:28.0.0&quot;))\n    implementation(&quot;com.google.firebase:firebase-analytics&quot;)\n    implementation(&quot;com.google.firebase:firebase-crashlytics&quot;)\n    implementation(&quot;com.google.firebase:firebase-auth&quot;)\n\n    // FirebaseUI for Firebase Auth\n    implementation(&quot;com.firebaseui:firebase-ui-auth:8.0.2&quot;)\n    implementation(&quot;com.google.android.gms:play-services-auth:20.6.0&quot;)\n\n    // Ktor\n    implementation(&quot;io.ktor:ktor-client-core:2.3.4&quot;)\n    implementation(&quot;io.ktor:ktor-client-cio:2.3.4&quot;)\n    implementation(&quot;io.ktor:ktor-client-json:2.3.4&quot;)\n    implementation(&quot;io.ktor:ktor-client-content-negotiation:2.3.4&quot;)\n    implementation(&quot;io.ktor:ktor-client-serialization:2.3.4&quot;)\n    implementation(&quot;io.ktor:ktor-serialization-kotlinx-json:2.3.4&quot;)\n\n    // Coil\n    implementation(&quot;io.coil-kt:coil-compose:2.6.0&quot;)\n    implementation(&quot;io.coil-kt:coil:2.6.0&quot;)\n\n    // Guava\n    implementation(&quot;com.google.guava:guava:33.3.1-android&quot;)\n\n    // Splash Screen\n    implementation (&quot;androidx.core:core-splashscreen:1.0.1&quot;)\n    implementation(&quot;androidx.compose.animation:animation-graphics:1.7.3&quot;)\n\n    // Realm MongoDB\n    implementation (&quot;io.realm.kotlin:library-base:1.10.0&quot;)\n    implementation (&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.9.0&quot;)\n\n    // Event Bus\n    implementation(&quot;org.greenrobot:eventbus:3.3.1&quot;)\n    // ExifInterface\n    implementation(&quot;androidx.exifinterface:exifinterface:1.3.7&quot;)\n    // Datastore\n    implementation(&quot;androidx.datastore:datastore-preferences:1.1.1&quot;)\n    // QrCode\n    implementation(&quot;com.github.androidmads:QRGenerator:1.0.1&quot;)\n    // GSON\n    implementation(&quot;com.google.code.gson:gson:2.11.0&quot;)\n    // ZoomImage\n    implementation (&quot;net.engawapg.lib:zoomable:1.5.2&quot;)\n    // MixPanel\n    implementation(&quot;com.mixpanel.android:mixpanel-android:7.4.0&quot;)\n    //Tooltip Balloon\n    implementation(&quot;com.github.skydoves:balloon-compose:1.6.4&quot;)\n    // Datadog\n    implementation(&quot;com.datadoghq:dd-sdk-android-logs:2.6.2&quot;)\n}\n</code></pre>\n<p><code>service Gradle kts</code> i use this project to handle services to backend</p>\n<pre><code>plugins {\n    id(&quot;com.android.library&quot;)\n    id(&quot;com.google.devtools.ksp&quot;)\n    id(&quot;org.jetbrains.kotlin.android&quot;)\n    id(&quot;io.realm.kotlin&quot;)\n    id(&quot;kotlinx-serialization&quot;)\n    id(&quot;com.google.gms.google-services&quot;)\n    id(&quot;com.google.dagger.hilt.android&quot;)\n}\n\nandroid {\n    namespace = &quot;com.honcho.service&quot;\n    compileSdk = 34\n\n    defaultConfig {\n        minSdk = 23\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        consumerProguardFiles(&quot;consumer-rules.pro&quot;)\n    }\n\n    buildTypes {\n        release {\n            isMinifyEnabled = true\n            proguardFiles(\n                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),\n                &quot;proguard-rules.pro&quot;\n            )\n        }\n\n        create(&quot;beta&quot;) {}\n    }\n    compileOptions {\n        isCoreLibraryDesugaringEnabled = true\n        sourceCompatibility = JavaVersion.VERSION_17\n        targetCompatibility = JavaVersion.VERSION_17\n    }\n    kotlinOptions {\n        jvmTarget = 17.toString()\n        tasks.withType&lt;org.jetbrains.kotlin.gradle.internal.KaptGenerateStubsTask&gt;().configureEach {\n            kotlinOptions {\n                jvmTarget = 17.toString()\n            }\n        }\n    }\n}\n\nkotlin {\n    jvmToolchain(17)\n}\n\nksp {\n    arg(&quot;jvmTarget&quot;, &quot;17&quot;)\n}\n\ndependencies {\n\n    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.1.2&quot;)\n    implementation(&quot;androidx.core:core-ktx:1.13.1&quot;)\n    implementation(&quot;androidx.appcompat:appcompat:1.7.0&quot;)\n\n    // Kotlin\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-play-services:1.9.0&quot;)\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.9.0&quot;)\n\n    // SDK Camera\n    compileOnly(files(&quot;libs/pronto-release.aar&quot;))\n\n    // implementation(&quot;com.google.android.material:material:1.12.0&quot;)\n\n    // Guava\n    implementation(&quot;com.google.guava:guava:33.3.1-android&quot;)\n\n    // Hilt\n    implementation (&quot;com.google.dagger:hilt-android:2.52&quot;)\n    ksp(&quot;com.google.dagger:hilt-android-compiler:2.52&quot;)\n\n    // Realm\n    implementation(&quot;io.realm.kotlin:library-base:3.0.0&quot;)\n\n    // Ktor\n    implementation(&quot;io.ktor:ktor-client-core:3.0.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-okhttp:3.0.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-auth:3.0.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-logging:3.0.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-content-negotiation:3.0.0&quot;)\n    implementation(&quot;io.ktor:ktor-client-serialization:3.0.0&quot;)\n    implementation(&quot;io.ktor:ktor-serialization-gson:3.0.0&quot;)\n\n    // Firebase\n    implementation(platform(&quot;com.google.firebase:firebase-bom:28.0.0&quot;))\n    implementation(&quot;com.google.firebase:firebase-auth-ktx&quot;)\n\n    // FirebaseUI for Firebase Auth\n    implementation(&quot;com.firebaseui:firebase-ui-auth:8.0.2&quot;)\n    implementation(&quot;com.google.android.gms:play-services-auth:20.6.0&quot;)\n\n    // Test\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\n    androidTestImplementation(&quot;androidx.test.ext:junit:1.2.1&quot;)\n    androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.6.1&quot;)\n\n    // Serialization\n    implementation(&quot;com.google.code.gson:gson:2.11.0&quot;)\n    // Centrifuge\n    implementation(&quot;io.github.centrifugal:centrifuge-java:0.4.2&quot;)\n}\n</code></pre>\n<p>This <code>root Gradle</code></p>\n<pre><code>import org.jetbrains.kotlin.gradle.dsl.kotlinExtension\n\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id(&quot;com.android.application&quot;) version &quot;8.7.0&quot; apply false\n    id(&quot;org.jetbrains.kotlin.android&quot;) version &quot;1.9.25&quot; apply false\n    id(&quot;com.google.devtools.ksp&quot;) version &quot;1.9.25-1.0.20&quot; apply false\n    id(&quot;org.gradle.toolchains.foojay-resolver-convention&quot;) version(&quot;0.5.0&quot;) apply false\n    id(&quot;io.realm.kotlin&quot;) version &quot;1.10.0&quot; apply false\n    id(&quot;com.android.library&quot;) version &quot;8.7.0&quot; apply false\n    id(&quot;com.google.dagger.hilt.android&quot;) version &quot;2.52&quot; apply false\n    id(&quot;com.google.gms.google-services&quot;) version &quot;4.4.1&quot; apply false\n    id(&quot;org.jetbrains.kotlin.plugin.serialization&quot;) version &quot;1.8.10&quot; apply false\n    id(&quot;com.google.firebase.crashlytics&quot;) version &quot;2.9.9&quot; apply false\n}\n\nsubprojects {\n    afterEvaluate {\n        kotlinExtension.jvmToolchain(17)\n    }\n}\n\nconfigurations.all {\n    resolutionStrategy {\n        force(&quot;com.google.guava:guava:33.3.1-android&quot;)\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}