{
  "question": {
    "tags": [
      "java",
      "apache-camel",
      "quarkus"
    ],
    "owner": {
      "account_id": 38416109,
      "reputation": 11,
      "user_id": 28762987,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/4c6b579f266cdb9b0e6cd4056a916300?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Harshil Kapasi",
      "link": "https://stackoverflow.com/users/28762987/harshil-kapasi"
    },
    "is_answered": true,
    "view_count": 248,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1739974724,
    "creation_date": 1734072839,
    "last_edit_date": 1734076580,
    "question_id": 79277429,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79277429/unable-to-send-message-specific-signed-mdn-response-in-apache-camel-as2-library",
    "title": "Unable to send message specific signed MDN response in Apache Camel AS2 library",
    "body": "<p>I am using the Apache Camel AS2 library in my Java project where I have implemented an AS2 server.\nCurrently, I'm generating a signed MDN response by configuring the certificate and algorithm in the server endpoint configuration, and it is working fine. However, I want to sign the MDN based on the AS2 request, where in headers, I will get the Mic algorithm that the user has requested. So, I want to sign using one of those algorithm at runtime, instead of hard-coding the algorithm at the endpoint creation.</p>\n<p>I have also gone through the library code, and checked online, but I was not able to find any solution.</p>\n<p>I have seen online server <a href=\"https://stackoverflow.com\">https://mendelson-e-c.com/as2_testserver</a> which does the same, and signs according to the AS2 message, please help me in implementing this.</p>\n<p>My server code is something like below, with signing defined in the endpoint configuration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Singleton\npublic class As2Server extends RouteBuilder {\n    private final CamelContext camelContext;\n\n    @Inject\n    public As2Server(CamelContext camelContext) {\n        this.camelContext = camelContext;\n    }\n\n    @Override\n    public void configure() {\n        try {\n            from(configureServerEndpoint()).process(exchange -&gt; {\n\n            // processing logic\n\n            });\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private Endpoint configureServerEndpoint() throws Exception {\n        AS2Configuration endpointConfiguration = new AS2Configuration();\n        endpointConfiguration.setApiName(AS2ApiName.SERVER);\n        endpointConfiguration.setMethodName(AS2ServerManagerApiMethod.LISTEN.name());\n        endpointConfiguration.setDecryptingPrivateKey(getPrivateKey());\n        endpointConfiguration.setSigningPrivateKey(getPrivateKey());\n        endpointConfiguration.setSigningCertificateChain(getCertificateChain());\n        endpointConfiguration.setSigningAlgorithm(AS2SignatureAlgorithm.MD5WITHRSA);\n        endpointConfiguration.setMdnMessageTemplate(&quot;Your AS2 message has been received&quot;);\n\n        try (AS2Component as2Component = new AS2Component()) {\n            as2Component.setCamelContext(camelContext);\n            as2Component.setConfiguration(endpointConfiguration);\n            return as2Component.createEndpoint(STR.&quot;as2://server/listen?serverPortNumber=11080&amp;requestUriPattern=*&quot;);\n        }\n    }\n\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}