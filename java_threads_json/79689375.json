{
  "question": {
    "tags": [
      "java",
      "algorithm"
    ],
    "owner": {
      "account_id": 31187804,
      "reputation": 794,
      "user_id": 23993901,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/7417aaad0c8ece3fac44f06d05a8ba8b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "CodeCrusader",
      "link": "https://stackoverflow.com/users/23993901/codecrusader"
    },
    "is_answered": true,
    "view_count": 431,
    "answer_count": 6,
    "score": 6,
    "last_activity_date": 1756516588,
    "creation_date": 1751570807,
    "last_edit_date": 1751729200,
    "question_id": 79689375,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79689375/count-maximum-stable-segments",
    "title": "Count maximum stable segments",
    "body": "<p><strong>Problem Statement:</strong></p>\n<p>A warehouse manages a line of containers prepared for shipment. Each container has a specified mass, provided in the list massList, where massList[i] represents the mass of the ùëñth container in the lineup.</p>\n<p>Containers are grouped into segments, where each segment consists of one or more consecutive containers. For example, given masses [3, 6, 3], valid segments include [3], [6], [3, 6], [6, 3], and [3, 6, 3]‚Äîbut not [3, 3], since the containers are not adjacent.</p>\n<p>A segment is considered stable if the final container does not have the maximum mass among all containers in that segment. For instance:</p>\n<p>[3, 9, 4, 7] is stable (last mass is 7, but the maximum is 9).</p>\n<p>[4, 7, 2, 7] is not stable (last mass is 7, which equals the max).</p>\n<p>Divide the sequence into the maximum number of stable segments such that:</p>\n<p>Every container is part of exactly one segment.</p>\n<p>Each segment uses a contiguous part of the list.</p>\n<p>Every segment must be stable.</p>\n<p>If it's impossible to create a stable segment, return 0.</p>\n<p><strong>Example:</strong></p>\n<p>massList = [1, 2, 3, 2, 6, 3]\nOne valid partitioning: [1, 2, 3, 2] and [6, 3]</p>\n<p>Both are stable segments.</p>\n<p>No other partition yields more than 2 stable segments.</p>\n<p>Answer: 2</p>\n<p><strong>Constraints:</strong></p>\n<pre><code>2‚â§n‚â§10^5\n1‚â§massList[i]‚â§10^9\n</code></pre>\n<p>I have used greedy approach to solve this:</p>\n<p>We make one pass through the list and maintain:</p>\n<p>max: the maximum mass seen so far in the current segment.</p>\n<p>stableCount: how many stable segments we‚Äôve found.</p>\n<pre><code>import java.util.*;\n\nclass ContainerPlanner {\n    public static int getMaxStableSegments(List&lt;Integer&gt; massList) {\n        int n = massList.size();    \n        int max = 0;\n        int stableCount = 0;\n\n        for (int i = 0; i &lt; n; i++) {\n            int m = massList.get(i);\n            max = Math.max(m, max);\n            if (m &lt; max &amp;&amp; max &gt; 0) {\n                stableCount++;\n                max = 0;\n            }\n        }\n\n        return stableCount;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(getMaxStableSegments(Arrays.asList(1, 2, 3, 2, 6, 3))); // Output: 2\n        System.out.println(getMaxStableSegments(Arrays.asList(8, 5, 4, 7, 2)));    // Output: 2\n        System.out.println(getMaxStableSegments(Arrays.asList(4, 3, 6, 5, 3, 4, 7, 1))); // Output: 3\n        System.out.println(getMaxStableSegments(Arrays.asList(\n            10, 5, 6, 4, 7, 6, 4, 2, 7, 1, 4, 6, 3, 4, 5, 1, 7, 5, 4, 6, 7, 8, 4, 6, 1, 9, 9\n        ))); // Output: 1\n    }\n}\n</code></pre>\n<p>I have added some test cases in main method, out of 4 test cases 1 test case fails</p>\n<p>Expected output is 1 but my solution is returning 10 for test case</p>\n<pre><code>getMaxStableSegments(Arrays.asList(\n            10, 5, 6, 4, 7, 6, 4, 2, 7, 1, 4, 6, 3, 4, 5, 1, 7, 5, 4, 6, 7, 8, 4, 6, 1, 9, 9\n        )); // Output: 1\n</code></pre>\n<p>My current greedy approach is incorrect because it fails to handle edge cases where it's impossible to divide all masses into valid stable segments. As a result, it's returning values like 10 instead of the correct answer, such as 1.</p>\n<p>What would be the correct and efficient approach to solve this problem, ensuring all masses are included in valid stable segments while maintaining optimal time complexity, that is less than O(n^2)?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}