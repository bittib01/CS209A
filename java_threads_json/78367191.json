{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "docker",
      "dockerfile"
    ],
    "owner": {
      "account_id": 25518816,
      "reputation": 83,
      "user_id": 22711516,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b5483f3564b424ed9efcdc7cd3ed64b6?s=256&d=identicon&r=PG",
      "display_name": "Victor Fernandes Neto",
      "link": "https://stackoverflow.com/users/22711516/victor-fernandes-neto"
    },
    "is_answered": true,
    "view_count": 12459,
    "accepted_answer_id": 78367228,
    "answer_count": 3,
    "score": 8,
    "last_activity_date": 1736934509,
    "creation_date": 1713798237,
    "question_id": 78367191,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78367191/trying-to-dockerize-maven-application-but-got-release-version-21-not-supported",
    "title": "Trying to Dockerize Maven Application but got &quot;release version 21 not supported&quot;",
    "body": "<p>New to Java and Docker, trying to dockerize <a href=\"https://github.com/victorfernandesneto/myanimelist-randomizer\" rel=\"noreferrer\">this</a> (my first Spring Boot application) with:</p>\n<pre><code>Dockerfile\n\n\nFROM maven:3.8.4-jdk-11 AS build\n\nCOPY src /app/src\nCOPY pom.xml /app\n\nWORKDIR /app\nRUN mvn clean install -U\n\nFROM openjdk:8-jre-alpine\nCOPY --from=build /app/target/mal-randomizer-0.0.1-SNAPSHOT.jar /app/app.jar\n\nWORKDIR /app\n\nEXPOSE 8080\n\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\n</code></pre>\n<p>Got this error multiple times last night:</p>\n<pre><code>20.09 [INFO] Compiling 8 source files with javac [debug release 21] to target/classes\n20.18 [INFO] ------------------------------------------------------------------------\n20.18 [INFO] BUILD FAILURE\n20.18 [INFO] ------------------------------------------------------------------------\n20.18 [INFO] Total time:  19.160 s\n20.18 [INFO] Finished at: 2024-04-22T14:49:00Z\n20.18 [INFO] ------------------------------------------------------------------------\n20.18 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project mal-randomizer: Fatal error compiling: error: release version 21 not supported -&gt; [Help 1]\n20.18 [ERROR] \n20.18 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n20.18 [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n20.18 [ERROR] \n20.18 [ERROR] For more information about the errors and possible solutions, please read the following articles:\n20.18 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>I tried multiple solutions such as:</p>\n<ul>\n<li>redefining my <code>JAVA_HOME</code> env</li>\n<li>changed the image</li>\n<li>changed <code>pom.xml</code> Java version, maven-compiler target and source*</li>\n</ul>\n<p>*If I downgrade the Java version too much (below Java 16), my code won't run since records have been introduced in 16.</p>\n<p>I believe the solution lies in the <code>pom.xml</code> still:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.victorfernandesneto&lt;/groupId&gt;\n    &lt;artifactId&gt;mal-randomizer&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;mal-randomizer&lt;/name&gt;\n    &lt;description&gt;MyAnimeList&amp;apos;s Unofficial List Randomizer&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}