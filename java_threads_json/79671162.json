{
  "question": {
    "tags": [
      "java",
      "quarkus",
      "jdbi"
    ],
    "owner": {
      "account_id": 5654940,
      "reputation": 3791,
      "user_id": 4474430,
      "user_type": "registered",
      "accept_rate": 52,
      "profile_image": "https://www.gravatar.com/avatar/36ad515a416889ba2d620b8aa2b898ca?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "steady_progress",
      "link": "https://stackoverflow.com/users/4474430/steady-progress"
    },
    "is_answered": false,
    "view_count": 82,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1751230055,
    "creation_date": 1750271010,
    "last_edit_date": 1750271420,
    "question_id": 79671162,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79671162/how-can-i-retrieve-list-of-values-from-database-within-a-usetransaction-lambda",
    "title": "How can I retrieve list of values from database within a &quot;useTransaction&quot; lambda expression?",
    "body": "<p>What I would like to do is the following:</p>\n<pre><code>    private List&lt;Integer&gt; getIds(Jdbi jdbi) {\n        List&lt;Integer&gt; ids = new ArrayList&lt;&gt;();\n        \n        jdbi.useTransaction(handle -&gt; {\n            ids = handle.createQuery(&quot;select distinct id from table_x where status = 12&quot;)\n                    .mapTo(Integer.class)\n                    .list();\n        });\n\n        return ids;\n    }\n</code></pre>\n<p>However, this is not allowed (ids need to be final or effectively final.)</p>\n<p>The following code was suggested by my IDE:</p>\n<pre><code>    private List&lt;Integer&gt; getIds2(Jdbi jdbi) {\n        AtomicReference&lt;List&lt;Integer&gt;&gt; result = new AtomicReference&lt;&gt;(new ArrayList&lt;&gt;());\n        jdbi.useTransaction(handle -&gt; {\n            List&lt;Integer&gt; ids = handle.createQuery(&quot;select distinct id from table_x where status = 12&quot;)\n                    .mapTo(Integer.class)\n                    .list();\n            result.set(ids);\n        });\n\n        return result.get();\n    }\n</code></pre>\n<p>Isn't there an easier way to retrieve a list of values from the database?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}