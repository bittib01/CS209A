{
  "question": {
    "tags": [
      "java",
      "spring",
      "mongodb"
    ],
    "owner": {
      "account_id": 29770011,
      "reputation": 99,
      "user_id": 22815503,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/7a2b97fec8c525dceecbce4dae232205?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "pomipiwimo",
      "link": "https://stackoverflow.com/users/22815503/pomipiwimo"
    },
    "is_answered": false,
    "view_count": 64,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1745316689,
    "creation_date": 1721985870,
    "last_edit_date": 1726780513,
    "question_id": 78797237,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78797237/java-mongodb-not-mapping-extended-classes",
    "title": "Java MongoDB not mapping extended classes",
    "body": "<p>I have a base class <strong>Person</strong> and 2 classes that extends from it. When I insert instances of these classes into the database, it keeps all the info about the extended classes as shown below.</p>\n<p>Below is the mongo config, code used to insert, get and remove the documents as well as the classes I am trying to map to.</p>\n<p><strong>people.json</strong>:</p>\n<pre><code>[\n    {\n        &quot;_id&quot;: &quot;d54d1113-2e00-46ef-8128-c6bc42220a6f&quot;,\n        &quot;name&quot;: &quot;Jo&quot;,\n        &quot;_class&quot;: &quot;person&quot;\n    },\n    {\n        &quot;_id&quot;: &quot;3187d2a6-08da-4055-9080-2bfb7481a4a2&quot;,\n        &quot;name&quot;: &quot;Josh&quot;,\n        &quot;jobTitle&quot;: &quot;Manager&quot;,\n        &quot;_class&quot;: &quot;employee&quot;\n    },\n    {\n        &quot;_id&quot;: &quot;80c25ae9-a402-469c-9873-5c093e093733&quot;,\n        &quot;name&quot;: &quot;John&quot;,\n        &quot;major&quot;: &quot;Art&quot;,\n        &quot;_class&quot;: &quot;student&quot;\n    },\n]\n</code></pre>\n<p>However, when I grab the documents from the database, it only maps to the base <strong>Person</strong> class, losing the <strong>major</strong> and <strong>jobTitle</strong> field. I have tried adding a type alias to the classes, but it did not change anything.</p>\n<p><strong>MongoConfig.java</strong>:</p>\n<pre><code>package com.example.demo;\n\nimport com.mongodb.ConnectionString;\nimport com.mongodb.MongoClientSettings;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoClients;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.mongodb.config.AbstractMongoClientConfiguration;\n\n@Configuration\npublic class MongoConfig extends AbstractMongoClientConfiguration {\n\n    @Override\n    protected String getDatabaseName() {\n        return &quot;test&quot;;\n    }\n\n    @Override\n    public MongoClient mongoClient() {\n        ConnectionString connectionString = new ConnectionString(&quot;mongodb://localhost:27017/example&quot;);\n        MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\n                .applyConnectionString(connectionString)\n                .build();\n\n        return MongoClients.create(mongoClientSettings);\n    }\n\n\n}\n</code></pre>\n<p><strong>Test.java</strong>:</p>\n<pre><code>package com.example.demo;\n\nimport jakarta.annotation.PostConstruct;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.stereotype.Component;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Component\npublic class Test {\n\n    @Autowired\n    MongoConfig config;\n\n    MongoTemplate template;\n\n    String collection = &quot;people&quot;;\n\n    private void insertData() {\n        List&lt;Person&gt; peopleList = new ArrayList&lt;&gt;();\n        peopleList.add(new Person(&quot;Jo&quot;));\n        peopleList.add(new Employee(&quot;Josh&quot;, &quot;Manager&quot;));\n        peopleList.add(new Student(&quot;John&quot;,&quot;Art&quot;));\n\n        MongoTemplate template = new MongoTemplate(config.mongoClient(), &quot;test&quot;);\n        if (template.count(new Query(), collection) == 0) {\n            template.insert(peopleList, collection);\n        }\n\n    }\n\n\n    @PostConstruct\n    public void doStuff() {\n\n        template = new MongoTemplate(config.mongoClient(), &quot;test&quot;);\n        insertData();\n        List&lt;Person&gt; people = template.find(new Query(), Person.class,collection);\n         template.find(new Query(), Person.class,collection);\n        for (Person person : people) {\n            System.out.println(person);\n        }\n\n        template.remove(new Query(),Person.class,collection);\n    }\n}\n</code></pre>\n<p><strong>Person.java</strong>:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.data.annotation.TypeAlias;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\nimport java.util.UUID;\n\n@TypeAlias(&quot;person&quot;)\n@Document(collection = &quot;person&quot;)\npublic class Person {\n    String id;\n    String name;\n\n    public Person() {\n    }\n\n    public Person(String name) {\n        this.id = UUID.randomUUID().toString();\n        this.name = name;\n\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; +\n                &quot;id='&quot; + id + '\\'' +\n                &quot;, name='&quot; + name + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>Employee.java</strong>:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.data.annotation.TypeAlias;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\n@TypeAlias(&quot;employee&quot;)\n@Document(collection = &quot;person&quot;)\npublic class Employee extends Person{\n    String jobTitle;\n\n    public Employee(){\n\n    }\n\n    public Employee(String jobTitle) {\n        this.jobTitle = jobTitle;\n    }\n\n    public Employee(String name, String jobTitle) {\n        super(name);\n        this.jobTitle = jobTitle;\n    }\n\n    public String getJobTitle() {\n        return jobTitle;\n    }\n\n    public void setJobTitle(String jobTitle) {\n        this.jobTitle = jobTitle;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Employee{&quot; +\n                &quot;jobTitle='&quot; + jobTitle + '\\'' +\n                &quot;, id='&quot; + id + '\\'' +\n                &quot;, name='&quot; + name + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>Student.java</strong>:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.data.annotation.TypeAlias;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\n@TypeAlias(&quot;student&quot;)\n@Document(collection = &quot;person&quot;)\npublic class Student extends Person {\n    String major;\n\n\n\n\n    public Student(String name, String major) {\n        super(name);\n        this.major = major;\n    }\n\n    public String getMajor() {\n        return major;\n    }\n\n    public void setMajor(String major) {\n        this.major = major;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Student{&quot; +\n                &quot;major='&quot; + major + '\\'' +\n                &quot;, id='&quot; + id + '\\'' +\n                &quot;, name='&quot; + name + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>EDIT</strong>\nNoticed I put the wrong class in for Test.java. Corrected it so people can see the test.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}