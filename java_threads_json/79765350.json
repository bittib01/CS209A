{
  "question": {
    "tags": [
      "java",
      "character-encoding",
      "java-nio"
    ],
    "owner": {
      "account_id": 43022,
      "reputation": 24636,
      "user_id": 125562,
      "user_type": "registered",
      "accept_rate": 64,
      "profile_image": "https://i.sstatic.net/SdIqA.png?s=256",
      "display_name": "Basilevs",
      "link": "https://stackoverflow.com/users/125562/basilevs"
    },
    "is_answered": true,
    "view_count": 131,
    "answer_count": 1,
    "score": 3,
    "last_activity_date": 1757954841,
    "creation_date": 1757950700,
    "last_edit_date": 1757954841,
    "question_id": 79765350,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79765350/how-to-efficiently-split-a-text-file-with-an-arbitrary-charset-without-damaging",
    "title": "How to efficiently split a text file with an arbitrary Charset without damaging code points?",
    "body": "<p>Given a valid text file file and its <code>java.nio.charset.Charset</code> how can I efficiently (preferably using <code>RandomAccessFile.seek()</code> or <code>InputStream.skip()</code>, without <a href=\"https://github.com/basilevs/jstackfilter/blob/master/core/core/src/main/java/org/basilevs/jstackfilter/FastChunkSplitter.java\" rel=\"nofollow noreferrer\">reading the whole file</a>) split it into two or more chunks while ensuring that no chunks contain partial code points (it would be nice not to split a character/grapheme, but that's probably too hard)?</p>\n<p>For fixed-length encodings the answer is trivial - split on aligned positions. However, I'm not sure if <code>CharsetDecoder.averageBytesPerChar() == CharsetDecoder.maxBytesPerChar()</code> is a proper indication of a fixed length encoding, so it would be nice to find one.</p>\n<p>Some variable length encodings are not <a href=\"https://en.wikipedia.org/wiki/Self-synchronizing_code\" rel=\"nofollow noreferrer\">self-synchronÂ­izing</a>, how can I find their character or code point in a byte stream after split?</p>\n<p><sub>The objective is to split the file for parallel processing. Classic IO fails to load all CPU cores while reading a file sequentially.</sub></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}