{
  "question": {
    "tags": [
      "java",
      "cucumber-java",
      "serenity-bdd",
      "java-21"
    ],
    "owner": {
      "account_id": 39507402,
      "reputation": 1,
      "user_id": 29310790,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/245e6b1c6871b91a2084c8d4d0d9edda?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Stephen Prasad",
      "link": "https://stackoverflow.com/users/29310790/stephen-prasad"
    },
    "is_answered": true,
    "view_count": 695,
    "accepted_answer_id": 79383192,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1738484743,
    "creation_date": 1737536834,
    "last_edit_date": 1738484743,
    "question_id": 79377082,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79377082/unsupportedoperationexception-when-upgrading-from-java-17-to-java-21",
    "title": "UnsupportedOperationException when upgrading from Java 17 to Java 21",
    "body": "<p>I have some code which uses cucumber-java8 with serenity and run using Java 17. I now want to upgrade to Java 21, but when I attempt to run the cucumber file (through <code>mvn test</code>), I get the following runtime error during execution:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: java.lang.UnsupportedOperationException: Cannot define class using reflection: Unable to make protected java.lang.Package java.lang.ClassLoader.getPackage(java.lang.String) accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @6bc168e5\n at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$Initializable$Unavailable.defineClass(ClassInjector.java:472)\n at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.injectRaw(ClassInjector.java:284)\n at net.bytebuddy.dynamic.loading.ClassInjector$AbstractBase.inject(ClassInjector.java:118)\n at net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:241)\n at net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default.load(ClassLoadingStrategy.java:148)\n at net.bytebuddy.dynamic.TypeResolutionStrategy$Passive.initialize(TypeResolutionStrategy.java:101)\n at net.bytebuddy.dynamic.DynamicType$Default$Unloaded.load(DynamicType.java:6166)\n at net.serenitybdd.rest.utils.RestSpecificationFactory.\\&lt;clinit\\&gt;(RestSpecificationFactory.java:60)\n at net.serenitybdd.rest.utils.RestDecorationHelper.decorate(RestDecorationHelper.java:20)\n at net.serenitybdd.rest.SerenityRest.fetchRequestSpecification(SerenityRest.java:233)\n at net.serenitybdd.rest.SerenityRest.given(SerenityRest.java:220)\n</code></pre>\n<p>It works again when I switch back to Java 17.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;cucumber.version&gt;7.9.0&lt;/cucumber.version&gt;\n&lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\n&lt;junit.jupiter.version&gt;5.9.0&lt;/junit.jupiter.version&gt;\n&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n&lt;serenity.version&gt;4.1.6&lt;/serenity.version&gt;\n&lt;webdriver.driver&gt;provided&lt;/webdriver.driver&gt;\n&lt;maven.surefire.version&gt;3.5.2&lt;/maven.surefire.version&gt;\n&lt;java.version&gt;21&lt;/java.version&gt;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}