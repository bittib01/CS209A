{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "junit",
      "spring-test",
      "wiremock"
    ],
    "owner": {
      "account_id": 2990507,
      "reputation": 5179,
      "user_id": 2538180,
      "user_type": "registered",
      "accept_rate": 53,
      "profile_image": "https://www.gravatar.com/avatar/93be29c31504e7b76f60064d2fe28e2f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "emoleumassi",
      "link": "https://stackoverflow.com/users/2538180/emoleumassi"
    },
    "is_answered": true,
    "view_count": 151,
    "accepted_answer_id": 79784423,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1759831151,
    "creation_date": 1759739020,
    "question_id": 79783467,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79783467/wiremock-autoconfigurewiremock-httphostconnectexception-connection-refused",
    "title": "wiremock AutoConfigureWireMock HttpHostConnectException: Connection refused",
    "body": "<pre><code>@ActiveProfiles(&quot;it&quot;)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ContextConfiguration(classes = ServiceApplication.class)\n@AutoConfigureWireMock(port = 0)\n@TestPropertySource(properties = {\n        &quot;server.servlet.context-path=http://localhost:${wiremock.server.port}/abc&quot;\n})\npublic class ABCTest {\n\n    \n    @Autowired\n    protected TestRestTemplate restTemplate;\n\n    private static final String INIT_URL = &quot;/init&quot;;\n\n    private static final String JSON_RESPONSE = &quot;&quot;&quot;\n            {&quot;result&quot;:...\n            &quot;generatedAt&quot;:&quot;2025-10-06T06:46:28.745Z&quot;}\n    &quot;&quot;&quot;;\n\n    @BeforeClass\n    public void beforeClass() {\n    }\n\n    @Test\n    public void init() throws IOException {\n\n\n        stubFor(get(urlEqualTo(&quot;/abc&quot; + INIT_URL))\n                .willReturn(aResponse()\n                        .withStatus(status)\n                        .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                        .withBody(JSON_RESPONSE)));\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n        headers.add(&quot;X-API-KEY&quot;, apiKey);\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(&quot;body&quot;, headers);\n        ResponseEntity&lt;String&gt; response = restTemplate.exchange(INIT_URL, HttpMethod.GET, entity, String.class);\n\n        System.out.println(response.getBody());\n       \n    }\n</code></pre>\n<p>I received this:</p>\n<pre><code>wiremock.org.apache.hc.client5.http.HttpHostConnectException: Connect to http://localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused\n\n    at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n    at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)\n    at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:751)\n    at wiremock.org.apache.hc.client5.http.socket.PlainConnectionSocketFactory$1.run(PlainConnectionSocketFactory.java:87)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)\n</code></pre>\n<p>i used <code>spring-cloud-contract-wiremock-4.3.0.jar</code> and <code>spring-boot-test-3.5.4.jar</code></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}