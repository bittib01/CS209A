{
  "question": {
    "tags": [
      "java",
      "google-chrome",
      "selenium-chromedriver",
      "webdrivermanager-java"
    ],
    "owner": {
      "account_id": 9992572,
      "reputation": 132,
      "user_id": 7501109,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/fdbc9ebfeaa0a0e13768e3752c7d92ad?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Deeepdigger",
      "link": "https://stackoverflow.com/users/7501109/deeepdigger"
    },
    "is_answered": true,
    "view_count": 1416,
    "accepted_answer_id": 78046119,
    "answer_count": 3,
    "score": 1,
    "last_activity_date": 1724407911,
    "creation_date": 1708604142,
    "last_edit_date": 1708607787,
    "question_id": 78040844,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78040844/using-multiple-chrome-versions-with-webdrivermanager-fails",
    "title": "Using multiple Chrome versions with webdrivermanager fails",
    "body": "<p><strong>My issue: chromedriver and chrome versions do not match in my test runs</strong></p>\n<p>I use a custom docker image for my test runs (RHEL Linux). In this I install the latest version of Google Chrome rpm, and another older version of Chrome for testing.\nThe main reason I am doing this is the Google Chrome RPM handles all the dependencies for me since the Chrome for testing only comes as a zip, but I also want to have a specific slightly older version for certain purposes (which Google chrome rpm package does not provide, it's always latest).</p>\n<p>Google Chrome (RPM) installs in</p>\n<pre><code>/usr/bin/google-chrome \n/usr/bin/google-chrome -&gt; /etc/alternatives/google-chrome\n/etc/alternatives/google-chrome -&gt; /usr/bin/google-chrome-stable\n</code></pre>\n<p>E.g. when I execute &quot;google-chrome --version&quot; in the docker image I get</p>\n<pre><code>122.0.6261.57\n</code></pre>\n<p>Chrome for testing (ZIP) gets installed in</p>\n<pre><code>/usr/local/opt/chrome-linux64\n</code></pre>\n<p>with:</p>\n<pre><code>/usr/local/bin/chrome -&gt; /usr/local/opt/chrome-linux64/chrome\n120.0.6099.109 \n</code></pre>\n<p>Furthermore, I install chromedriver for both versions in my</p>\n<pre><code>~/.cache/selenium/chromedriver/\n</code></pre>\n<p>so this has two subfolders with the respective versions mentioned above.\nAnd also /usr/local/bin/chromedriver is linked to the latest version (122)</p>\n<p>Now when I run selenium with webdrivermanager, trying to use &quot;just google-chrome&quot; I get the following result:</p>\n<pre><code>INFO  @ c.d.i.w.c.CustomChromeDriverCreator | Starting the initialization of 'chrome' WebDriver instance\nDEBUG @ i.g.b.w.WebDriverManager | Using WebDriverManager 5.5.3\nDEBUG @ i.g.b.w.c.ResolutionCache | Created new resolution cache file at /home/jenkins/.cache/selenium/resolution.properties\nTRACE @ i.g.b.w.v.VersionDetector | Reading online commands.properties to find out driver version\nDEBUG @ i.g.b.w.v.VersionDetector | Detecting chrome version using online commands.properties\nDEBUG @ i.g.b.w.v.Shell | Running command on the shell: [google-chrome, --version]\nDEBUG @ i.g.b.w.v.Shell | Result: Google Chrome 122.0.6261.57\nTRACE @ i.g.b.w.v.VersionDetector | Detected browser version is 122.0.6261.57\nINFO  @ i.g.b.w.WebDriverManager | Using chromedriver 122.0.6261.57 (resolved driver for Chrome 122)\nDEBUG @ i.g.b.w.c.ResolutionCache | Storing resolution chrome=122 in cache (valid until 11:49:24 22/02/2024 UTC)\nDEBUG @ i.g.b.w.c.ResolutionCache | Storing resolution chrome122=122.0.6261.57 in cache (valid until 10:49:24 23/02/2024 UTC)\nTRACE @ i.g.b.w.c.CacheHandler | Checking if chromedriver exists in cache\nTRACE @ i.g.b.w.c.CacheHandler | Filter cache by chromedriver -- input list [/home/jenkins/.cache/selenium/chromedriver/linux64/120.0.6099.109/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/120.0.6099.109/chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver, /home/jenkins/.cache/selenium/resolution.properties] -- output list [/home/jenkins/.cache/selenium/chromedriver/linux64/120.0.6099.109/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/120.0.6099.109/chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] \nTRACE @ i.g.b.w.c.CacheHandler | Filter cache by 122.0.6261.57 -- input list [/home/jenkins/.cache/selenium/chromedriver/linux64/120.0.6099.109/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/120.0.6099.109/chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] -- output list [/home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] \nTRACE @ i.g.b.w.c.CacheHandler | Filter cache by LINUX -- input list [/home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] -- output list [/home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] \nTRACE @ i.g.b.w.c.CacheHandler | Filter cache by 64 -- input list [/home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] -- output list [/home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/LICENSE.chromedriver, /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver] \nDEBUG @ i.g.b.w.WebDriverManager | Driver chromedriver 122.0.6261.57 found in cache\nINFO  @ i.g.b.w.WebDriverManager | Exporting webdriver.chrome.driver as /home/jenkins/.cache/selenium/chromedriver/linux64/122.0.6261.57/chromedriver\n</code></pre>\n<p>So webdrivermanager finds the right browser (google-chrome v122) and the matching chromedriver.</p>\n<p>But then my tests fail with an error:</p>\n<pre><code>1) Error in custom provider, org.openqa.selenium.SessionNotCreatedException: session not created: This version of ChromeDriver only supports Chrome version 122\nCurrent browser version is 120.0.6099.109 with binary path /usr/local/bin/chrome\n</code></pre>\n<p>But according to\n<a href=\"https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver/01fde32d0ed245141e24151f83b7c2db31d596a4\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver/01fde32d0ed245141e24151f83b7c2db31d596a4</a>\nthe default search path should be</p>\n<pre><code>/usr/bin/google-chrome\n</code></pre>\n<p>so why does it pick /usr/local/bin/chrome ?</p>\n<p>Same goes for\n<a href=\"https://github.com/bonigarcia/webdrivermanager/blob/7cb9dcf7ee66dec78230454aecac5533b5f7858a/src/main/resources/commands.properties#L11\" rel=\"nofollow noreferrer\">https://github.com/bonigarcia/webdrivermanager/blob/7cb9dcf7ee66dec78230454aecac5533b5f7858a/src/main/resources/commands.properties#L11</a></p>\n<p>Note:\nin my code I am just calling</p>\n<pre><code>WebDriverManager.chromedriver().setup();\n</code></pre>\n<p>I am not setting any binary path options in this case.</p>\n<p>If the chromedriver instance was set up with the latest version (122), should it not also start that browser when being used?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}