{
  "question": {
    "tags": [
      "python",
      "java",
      "pyspark",
      "runtime-error"
    ],
    "owner": {
      "account_id": 24172783,
      "reputation": 1322,
      "user_id": 21440243,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/YzROW.jpg?s=256",
      "display_name": "Starship",
      "link": "https://stackoverflow.com/users/21440243/starship"
    },
    "is_answered": false,
    "view_count": 1368,
    "answer_count": 0,
    "score": 2,
    "last_activity_date": 1740083150,
    "creation_date": 1736703706,
    "last_edit_date": 1740083150,
    "question_id": 79350396,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79350396/how-can-i-fix-the-error-java-gateway-process-exited-before-sending-its-port-num",
    "title": "How can I fix the error &quot;Java gateway process exited before sending its port number.&quot; in Python when running PySpark?",
    "body": "<p>I have some code I'm trying to run with PySpark in Python 3.13, here's the least amount of code needed to reproduce my problem:</p>\n<pre><code>from pyspark.sql import SparkSession\npyspark = SparkSession.builder.master(&quot;local[8]&quot;).appName(&quot;example&quot;).getOrCreate()\n</code></pre>\n<p>Whenever I run it, I get this error:</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;C:/Users/Example/test.py&quot;, line 6, in &lt;module&gt;\n    .getOrCreate()\n  File &quot;C:\\Users\\Example\\AppData\\Roaming\\Python\\Python313\\site-packages\\pyspark\\sql\\session.py&quot;, line 497, in getOrCreate\n    sc = SparkContext.getOrCreate(sparkConf)\n  File &quot;C:\\Users\\Example\\AppData\\Roaming\\Python\\Python313\\site-packages\\pyspark\\context.py&quot;, line 515, in getOrCreate\n    SparkContext(conf=conf or SparkConf())\n  File &quot;C:\\Users\\Example\\AppData\\Roaming\\Python\\Python313\\site-packages\\pyspark\\context.py&quot;, line 201, in __init__\n    SparkContext._ensure_initialized(self, gateway=gateway, conf=conf)\n  File &quot;C:\\Users\\Example\\AppData\\Roaming\\Python\\Python313\\site-packages\\pyspark\\context.py&quot;, line 436, in _ensure_initialized\n    SparkContext._gateway = gateway or launch_gateway(conf)\n  File &quot;C:\\Users\\Example\\AppData\\Roaming\\Python\\Python313\\site-packages\\pyspark\\java_gateway.py&quot;, line 107, in launch_gateway\n    raise PySparkRuntimeError(\npyspark.errors.exceptions.base.PySparkRuntimeError: [JAVA_GATEWAY_EXITED] Java gateway process exited before sending its port number.\n</code></pre>\n<p>I am expecting it to not give any errors. I am on Windows 11 using PySpark 3.5.4 (confirmed with <code>pip show pyspark</code> on Command Prompt) on Python 3.13 and have Java 17.0.13 installed (confirmed with <code>java -version</code> on Command Prompt) as well. I tried uninstalling all other versions of Python and Java. I have <code>JAVA_HOME</code> and <code>SPARK_HOME</code> added as a System Variable and added Java and PySpark to the Path variable. I tried increasing Java and PySpark memory allocation. I tried disabling my antivirus. I tried adjusting the log4j configuration by changing <code>pyspark = SparkSession.builder.master(&quot;local[8]&quot;).appName(&quot;example&quot;).getOrCreate()</code> to:</p>\n<pre><code>spark = SparkSession.builder \\\n    .master(&quot;local[8]&quot;) \\\n    .appName(&quot;test&quot;) \\\n    .config(&quot;spark.sql.warehouse.dir&quot;, &quot;file:///C:/tmp&quot;) \\\n    .getOrCreate()\n</code></pre>\n<p>I tried adding logging by replacing <code>pyspark = SparkSession.builder.master(&quot;local[8]&quot;).appName(&quot;example&quot;).getOrCreate()</code> with:</p>\n<pre><code>spark = SparkSession.builder \\\n    .appName(&quot;example&quot;) \\\n    .config(&quot;spark.ui.showConsoleProgress&quot;, &quot;false&quot;) \\\n    .config(&quot;spark.driver.extraJavaOptions&quot;, &quot;-Dlog4j.debug&quot;) \\\n    .getOrCreate()\n</code></pre>\n<p>but got nothing else.\nI tried uninstalling and reinstalling PySpark, Python, and Java as well as removing other versions of them I had installed. For PySpark I tried both <code>pip uninstall pyspark</code> and <code>pip uninstall pyspark py4j</code> (and then changed the uninstall to install to reinstall it, of course). None of these things or anything suggested in the questions below stopped the error or changed it whatsoever. What is happening and how can I fix it so it doesn't give me an error?</p>\n<hr />\n<sub>\nThis is not a duplicate of the following posts for the reasons listed below:\n<p><br> </p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/59533884/exception-java-gateway-process-exited-before-sending-its-port-number-pyspark\">Exception: Java gateway process exited before sending its port number pyspark</a>, <a href=\"https://stackoverflow.com/questions/72763025/java-error-java-gateway-process-exited-before-sending-its-port-number\">Java error Java gateway process exited before sending its port number</a>, or <a href=\"https://stackoverflow.com/questions/55292779/pyspark-error-java-gateway-process-exited-before-sending-its-port-number\">Pyspark error: Java gateway process exited before sending its port number</a> because they have a different traceback and the suggested solution(s) doesn't work.</li>\n<li><a href=\"https://stackoverflow.com/questions/62756531/init-exception-java-gateway-process-exited-before-sending-its-port-number\">init Exception: Java gateway process exited before sending its port number</a> because I don't have Hadoop and I am on a compatible version of Java.</li>\n<li><a href=\"https://stackoverflow.com/questions/31841509/pyspark-exception-java-gateway-process-exited-before-sending-the-driver-its-p\">PySpark: &quot;Exception: Java gateway process exited before sending the driver its port number&quot;</a> or <a href=\"https://stackoverflow.com/questions/77280183/pysparkruntimeerror-java-gateway-exited-java-gateway-process-exited-before-se\">PySparkRuntimeError: [JAVA_GATEWAY_EXITED] Java gateway process exited before sending its port number</a> because I'm not on a Macbook or Linux and none of the solutions work.</li>\n<li><a href=\"https://stackoverflow.com/questions/68243342/error-with-pyspark-java-gateway-process-exited-before-sending-its-port-number\">Error with pyspark &quot;Java gateway process exited before sending its port number&quot;</a> because I don't have Hadoop, the user encounters the error when they install not when they run, and because they are experiencing other errors I'm not.</li>\n<li><a href=\"https://stackoverflow.com/questions/70907105/structured-streaming-kafka-runtimeerror-java-gateway-process-exited-before-s\">Structured Streaming + Kafka: RuntimeError: Java gateway process exited before sending its port number + Failed to find data source: kafka</a> because I don't have kafka.</li>\n<li><a href=\"https://stackoverflow.com/questions/70548399/creating-sparkcontext-on-google-colab-gives-runtimeerror-java-gateway-process\">Creating sparkContext on Google Colab gives: `RuntimeError: Java gateway process exited before sending its port number`</a> because I'm not on Google Colab.</li>\n<li><a href=\"https://stackoverflow.com/questions/43863569/exception-java-gateway-process-exited-before-sending-the-driver-its-port-number\">Exception: Java gateway process exited before sending the driver its port number while creating a Spark Session in Python</a> or <a href=\"https://stackoverflow.com/questions/60230124/pyspark-sql-utils-analysisexception-failed-to-find-data-source-kafka\">pyspark.sql.utils.AnalysisException: Failed to find data source: kafka</a> because those questions have a different error.\n</sub></li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}