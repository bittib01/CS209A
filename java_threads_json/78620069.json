{
  "question": {
    "tags": [
      "java",
      "currency",
      "java-money"
    ],
    "owner": {
      "account_id": 32572746,
      "reputation": 39,
      "user_id": 25309994,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/91054777921b5ab8a45418abb78cc056?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Sergio Soria Olivares",
      "link": "https://stackoverflow.com/users/25309994/sergio-soria-olivares"
    },
    "is_answered": false,
    "view_count": 279639,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1758690290,
    "creation_date": 1718311007,
    "last_edit_date": 1724713794,
    "question_id": 78620069,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78620069/unknowncurrencyexception-unknown-currency-code-foo",
    "title": "UnknownCurrencyException: Unknown currency code: foo",
    "body": "<p>I am using <a href=\"https://javamoney.github.io/ri.html\" rel=\"nofollow noreferrer\"><em>Moneta</em></a> 1.4, and have included in my classpath :</p>\n<ul>\n<li>moneta-core-1.4.4.jar</li>\n<li>money-api-1.1.jar</li>\n</ul>\n<p>I was checking classpath, and I've seen (also in documentation) that Moneta uses <code>ServiceProviders</code> functionality from Java language, to extend money-api functionality.</p>\n<p>The thing is, randomly, and let's say in a 5% of the times, when I try to use <code>FastMoney.of()</code>, I get the exception below.</p>\n<p>Simple call that fails sometime:</p>\n<pre class=\"lang-java prettyprint-override\"><code>amount = FastMoney.of(\n    amount.value,\n    amount.currency,\n),\n</code></pre>\n<p>The exception (Mind the line numbers please)</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;exception&quot;: &quot;java.lang.ExceptionInInitializerError: Exception javax.money.UnknownCurrencyException: Unknown currency code: foo [in thread \\&quot;Thread-572\\&quot;]\n        at javax.money.spi.MonetaryCurrenciesSingletonSpi.getCurrency(MonetaryCurrenciesSingletonSpi.java:78)\n        at javax.money.Monetary.getCurrency(Monetary.java:382)\\n\\tat org.javamoney.moneta.FastMoney.&lt;clinit&gt;(FastMoney.java:119)\n</code></pre>\n<p>Any idea why this could be happening? I am concerned that it fails randomly so I can not control it.</p>\n<p>I've checked rhe code and I presume, as <code>DefaultMonetaryCurrenciesSingletonSpi::getDefaultProviderChain()</code> returns a list of providers in an ARBITRARY order, some provider I have may not recognize the &quot;no currency code&quot;, but sadly can not prove that.</p>\n<p>I expect <code>FastMoney.of(1, &quot;EUR&quot;)</code> to always work.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}