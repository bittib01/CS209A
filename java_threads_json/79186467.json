{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-annotations",
      "hibernate-validator"
    ],
    "owner": {
      "account_id": 9255465,
      "reputation": 758,
      "user_id": 6874531,
      "user_type": "registered",
      "profile_image": "https://lh6.googleusercontent.com/-tKs0WJTpN5U/AAAAAAAAAAI/AAAAAAAAABU/evA61jYST_E/s256-rj/photo.jpg",
      "display_name": "Chamod Pathirana",
      "link": "https://stackoverflow.com/users/6874531/chamod-pathirana"
    },
    "is_answered": true,
    "view_count": 54,
    "answer_count": 2,
    "score": -1,
    "last_activity_date": 1732883286,
    "creation_date": 1731527885,
    "question_id": 79186467,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79186467/access-message-parameters-in-controller-advice-passed-from-custom-validator",
    "title": "Access message parameters in controller advice passed from Custom validator",
    "body": "<p>I have a custom validator and need to include message parameters to construct the error message dynamically.</p>\n<pre><code>public class DescriptionLengthValidator\n    implements ConstraintValidator&lt;ValidTypeDescriptionLength, RequestDto&gt; {\n\n  @Override\n  public boolean isValid(RequestDto request, ConstraintValidatorContext context) {\n    int maxSize = request.getType().equals(&quot;Category1&quot;) ? 50 : 250;\n\n    boolean isValid = request.getDescription().length() &lt;= maxSize;\n    if (!isValid) {\n\n      HibernateConstraintValidatorContext hibernateContext =\n          context.unwrap(HibernateConstraintValidatorContext.class);\n\n      hibernateContext.disableDefaultConstraintViolation();\n      hibernateContext.addMessageParameter(&quot;0&quot;, &quot;0&quot;).addMessageParameter(&quot;1&quot;, maxSize)\n          .buildConstraintViolationWithTemplate(&quot;error.Size&quot;).addPropertyNode(&quot;description&quot;)\n\n          .addConstraintViolation();\n\n      return false;\n    }\n\n    return true;\n  }\n}\n</code></pre>\n<p>Annotation is defined as follows.</p>\n<pre><code>@Constraint(validatedBy = DescriptionLengthValidator.class)\n@Target({ElementType.FIELD, ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ValidTypeDescriptionLength {\n  String message() default &quot;error.Size&quot;;\n\n  Class&lt;?&gt;[] groups() default {};\n\n  Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>The Controller advice is as follows.</p>\n<pre><code>@ControllerAdvice\npublic class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\n  @Override\n  protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex,\n      HttpHeaders headers, HttpStatus status, WebRequest request) {\n\n    Map&lt;String, String&gt; fieldErrors = ex.getBindingResult().getFieldErrors().stream().collect(\n        Collectors.toMap(FieldError::getField, fe -&gt; getFieldErrorMessage(fe,\n            String.format(&quot;Invalid value [%s]&quot;, fe.getRejectedValue()))));\n\n\n    return handleFieldValidationErrors(ex, status, request, fieldErrors);\n  }\n\n  private String getFieldErrorMessage(FieldError error, String defaultMessage) {\n    Object[] args = error.getArguments();\n    if (args != null &amp;&amp; args.length &gt; 0 &amp;&amp; args[0] instanceof MessageSourceResolvable) {\n      args = Arrays.copyOfRange(args, 1, args.length);\n    }\n    List&lt;String&gt; errorCodes = new ArrayList&lt;&gt;();\n    if (error.getCodes() != null) {\n      Arrays.stream(error.getCodes()).map(s -&gt; &quot;error.&quot; + s).forEach(errorCodes::add);\n    }\n    if (error.getDefaultMessage() != null) {\n      errorCodes.add(error.getDefaultMessage());\n    }\n    return service.getMessage(args, defaultMessage);\n  }\n}\n</code></pre>\n<p>When accessing arguments by calling error.getArguments(), message parameters are not available. How can I modify custom validator/Controller advice to access massage parameters?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}