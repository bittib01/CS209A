{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "hibernate",
      "jpa"
    ],
    "owner": {
      "account_id": 8615399,
      "reputation": 499,
      "user_id": 6452448,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/e14d0e29579a711972d43f871751e8ce?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "BlackList96",
      "link": "https://stackoverflow.com/users/6452448/blacklist96"
    },
    "is_answered": true,
    "view_count": 4233,
    "accepted_answer_id": 79331057,
    "answer_count": 2,
    "score": 9,
    "last_activity_date": 1738185096,
    "creation_date": 1733997789,
    "last_edit_date": 1736013715,
    "question_id": 79274634,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79274634/hibernate-staleobjectstateexception-after-upgrading-to-6-6-3-row-was-updated-or",
    "title": "Hibernate StaleObjectStateException After Upgrading to 6.6.3: Row was updated or deleted by another transaction or unsaved-value mapping was incorrect",
    "body": "<p>I have two PostgreSQL tables: one for <strong>Product</strong> and another for <strong>gallery images with SEO details</strong>. Here are the schemas:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table if not exists test_product\n(\n    id      bigserial   not null,\n    version bigserial   not null,\n    name    text        not null,\n    sku     varchar(50) not null,\n    primary key (id)\n);\n\ncreate table if not exists test_product_image_gallery_seo\n(\n    id         bigserial not null,\n    version    bigserial not null,\n    product_id bigint    not null,\n    image      text      not null,\n    alt_text   text      not null,\n    primary key (id),\n    constraint fk_product_id foreign key (product_id) references test_product (id),\n    constraint test_unique_seo unique (product_id, image)\n);\n</code></pre>\n<p>In my Spring Boot application, I have two Hibernate ORM entities representing these tables. Below are their definitions:</p>\n<p><strong>TestProduct</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Entity(name = &quot;test_product&quot;)\n@Table(name = &quot;test_product&quot;)\npublic class TestProduct extends BehemothORM {\n\n    @Column(\n        name = ProductContract.NAME,\n        nullable = false,\n        unique = true,\n        columnDefinition = &quot;TEXT&quot;\n    )\n    private String name;\n\n    @Column(\n        name = ProductContract.SKU,\n        nullable = false,\n        unique = true,\n        columnDefinition = &quot;VARCHAR&quot;\n    )\n    private String sku;\n\n    @OneToMany(\n        mappedBy = &quot;product&quot;,\n        fetch = FetchType.EAGER,\n        targetEntity = TestProductImageGallerySEO.class,\n        cascade = CascadeType.ALL,\n        orphanRemoval = true\n    )\n    private List&lt;TestProductImageGallerySEO&gt; imageGallerySEOList;\n}\n</code></pre>\n<p><strong>TestProductGalleryImageSEO</strong></p>\n<pre><code>@Entity(name = &quot;test_product_gallery_image_seo&quot;)\n@Table(\n    name = &quot;test_product_gallery_image_seo&quot;,\n    uniqueConstraints = {\n        @UniqueConstraint(\n            name = &quot;test_unique_seo&quot;,\n            columnNames = {\n                ProductImageGallerySEOContract.PRODUCT_ID,\n                ProductImageGallerySEOContract.IMAGE\n            }\n        )\n    }\n)\npublic class TestProductImageGallerySEO extends BehemothORM {\n\n    @Column(\n        name = &quot;image&quot;, \n        columnDefinition = &quot;TEXT&quot;, \n        nullable = false\n    )\n    private String image;\n\n    @Column(\n        name = &quot;alt_text&quot;, \n        columnDefinition = &quot;TEXT&quot;, \n        nullable = false\n    )\n    private String altText;\n\n    @ToString.Exclude\n    @ManyToOne(\n        targetEntity = TestProduct.class,\n        fetch = FetchType.EAGER\n    )\n    @JoinColumn(\n        name = ProductImageGallerySEOContract.PRODUCT_ID,\n        columnDefinition = &quot;BIGSERIAL&quot;,\n        nullable = false,\n        foreignKey = @ForeignKey(\n            name = &quot;fk_product_id&quot;\n        )\n    )\n    @GsonExclude\n    private TestProduct product;\n    \n    @Transient\n    private boolean deleted = false;\n}\n</code></pre>\n<p>Here's the logic where I add or update gallery images for a product:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Transactional()\n    public int modifyGalleryImages(@NotNull TestProductImageGallerySEOPayload seoPayload) {\n\n        // gets the current product as entity from database\n        TestProduct product = this.testProductDAOController.retrieveEntity(seoPayload.getProductId());\n\n        for (TestProductImageGallerySEO imageGallerySEO : seoPayload.getGallerySEOList()) \n        {\n            imageGallerySEO.setProduct(product);\n            this.addNewEntity(imageGallerySEO);\n        }\n\n        return ActionCode.UPDATE_SUCCESS;\n    }\n</code></pre>\n<p>This code was working previously. However, after upgrading Hibernate versions this exact code is failing without any changes made.</p>\n<p>After upgrading Hibernate from version <code>6.3.1</code> to <code>6.6.3</code>, I'm getting the following error:</p>\n<pre><code>org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bloomscorp.loom.seo.orm.TestProductImageGallerySEO#0]\n</code></pre>\n<p>This error occurs when trying to save a new <code>TestProductImageGallerySEO</code> entity using <code>addNewEntity</code>. Here is the <code>seoPayload</code></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;productId&quot;: 37503,\n    &quot;gallerySEOList&quot;: [\n        {\n            &quot;id&quot;: 0,\n            &quot;version&quot;: 0,\n            &quot;image&quot;: &quot;uvw.jpg&quot;,\n            &quot;altText&quot;: &quot;&quot;,\n            &quot;deleted&quot;: false\n        },\n        {\n            &quot;id&quot;: 0,\n            &quot;version&quot;: 0,\n            &quot;image&quot;: &quot;https://abc.jpg&quot;,\n            &quot;altText&quot;: &quot;&quot;,\n            &quot;deleted&quot;: false\n        },\n        {\n            &quot;id&quot;: 0,\n            &quot;version&quot;: 0,\n            &quot;image&quot;: &quot;https://xyz.jpg&quot;,\n            &quot;altText&quot;: &quot;&quot;,\n            &quot;deleted&quot;: false\n        }\n    ]\n}\n</code></pre>\n<p><strong>Additional Context:</strong></p>\n<p>if anybody wants to know what <code>BehemothORM</code> and <code>addNewEntity</code> does, these are basically our own set of libraries that we use to speed up the development process. Here is the defination of these two</p>\n<p><strong>BehemothORM</strong>\n<code>BehemothORM</code> is a base class with common fields like <code>id</code> and <code>version</code></p>\n<p><strong>addNewEntity</strong>\n<code>addNewEntity</code> is a wrapper around <code>JpaRepository.save()</code></p>\n<p>Questions:</p>\n<ol>\n<li>Why does this error occur now after upgrading Hibernate?</li>\n<li>How can I fix this error while retaining the current logic?</li>\n</ol>\n<p>Thanks in advance!</p>\n<p>Edit</p>\n<p>As requested by @M.Deinum here is the complete stacktrace</p>\n<pre><code>jakarta.servlet.ServletException: Request processing failed: org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bloomscorp.loom.seo.orm.TestProductImageGallerySEO#0]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1022)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at com.bloomscorp.nverse.NVerseRequestFilter.doFilterInternal(NVerseRequestFilter.java:53)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at com.bloomscorp.nverse.NVerseExceptionHandlerFilter.doFilterInternal(NVerseExceptionHandlerFilter.java:58)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at com.bloomscorp.nverse.NVerseHttpRequestFilter.doFilterInternal(NVerseHttpRequestFilter.java:20)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:219)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)\n    at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)\n    at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)\n    at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)\n    at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)\n    at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bloomscorp.loom.seo.orm.TestProductImageGallerySEO#0]\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:304)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:232)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:243)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)\n    at jdk.proxy2/jdk.proxy2.$Proxy265.save(Unknown Source)\n    at com.bloomscorp.behemoth.dao.controller.AbstractAddEntityDAOController.addNewEntity(AbstractAddEntityDAOController.java:22)\n    at com.bloomscorp.loom.seo.dao.controller.TestProductImageGallerySEODAOController.modifyGalleryImages(TestProductImageGallerySEODAOController.java:78)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\n    at com.bloomscorp.loom.seo.dao.controller.TestProductImageGallerySEODAOController$$SpringCGLIB$$0.modifyGalleryImages(&lt;generated&gt;)\n    at com.bloomscorp.loom.seo.controller.ProductImageGallerySEOController.lambda$modifyGalleryImages$1(ProductImageGallerySEOController.java:126)\n    at com.bloomscorp.behemoth.controller.AbstractPostEntityController.post(AbstractPostEntityController.java:95)\n    at com.bloomscorp.behemoth.controller.AbstractPostEntityController.postEntityEnhancedResponse(AbstractPostEntityController.java:280)\n    at com.bloomscorp.behemoth.controller.AbstractPostEntityController.postEntity(AbstractPostEntityController.java:140)\n    at com.bloomscorp.behemoth.controller.AbstractPostEntityController.postEntity(AbstractPostEntityController.java:167)\n    at com.bloomscorp.loom.seo.controller.ProductImageGallerySEOController.modifyGalleryImages(ProductImageGallerySEOController.java:117)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\n    at com.bloomscorp.nverse.validator.NVerseValidationAspect.validateByDomainValidator(NVerseValidationAspect.java:67)\n    at com.bloomscorp.nverse.validator.NVerseValidationAspect.validateDomainContext(NVerseValidationAspect.java:123)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:751)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\n    at com.bloomscorp.loom.seo.controller.ProductImageGallerySEOController$$SpringCGLIB$$0.modifyGalleryImages(&lt;generated&gt;)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:892)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:798)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n    ... 61 more\n</code></pre>\n<p>Also below is the controller code which invokes the <code>modifyGalleryImages</code> function,</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ResponseBody\n    @PostMapping(\n        value = &quot;modify/test/gallery-images&quot;,\n        consumes = Constant.REQUEST_TYPE_APPLICATION_JSON,\n        produces = Constant.RESPONSE_TYPE_APPLICATION_JSON\n    )\n    public RainTreeResponse modifyGalleryImages(\n        NVerseHttpRequestWrapper request,\n        @RequestBody TestProductImageGallerySEOPayload gallerySEOPayload\n    ) {\n        return this.postEntity(\n            request,\n            &quot;modifyGalleryImages&quot;,\n            CODE_SUCU,\n            UNAUTH_GALLERY_IMAGE_REQUEST,\n            NEW_GALLERY_IMAGE_CREATED,\n            this.testValidator,\n            new TestProductImageGallerySEOPayloadSanitizer(),\n            gallerySEOPayload,\n            () -&gt; this.testSEODAOController.modifyGalleryImages(\n                this.getAuthorityResolver().resolveUserInformationFromAuthorizationToken(\n                    request.getHeader(Constant.REQUEST_HEADER_AUTHORIZATION)\n                ),\n                gallerySEOPayload\n            )\n        );\n    }\n</code></pre>\n<p>Please ignore the library level codes as those are already tested. The controller is invoking the <code>modifyGalleryImages</code> method once a request hits the controller.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}