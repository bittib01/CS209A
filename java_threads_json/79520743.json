{
  "question": {
    "tags": [
      "java",
      "google-maps",
      "javafx",
      "google-maps-api-3",
      "gluon"
    ],
    "owner": {
      "account_id": 6307417,
      "reputation": 347,
      "user_id": 4900107,
      "user_type": "registered",
      "accept_rate": 80,
      "profile_image": "https://lh4.googleusercontent.com/-p_cnwGamVeo/AAAAAAAAAAI/AAAAAAAAAAA/s9tDMCPkWWQ/s256-rj/photo.jpg",
      "display_name": "Max van Daalen",
      "link": "https://stackoverflow.com/users/4900107/max-van-daalen"
    },
    "is_answered": false,
    "view_count": 328,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1759224094,
    "creation_date": 1742400047,
    "question_id": 79520743,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79520743/javafx-21-0-6-webview-problem-loading-google-maps-v3-58-on-windows-11",
    "title": "JavaFX 21.0.6 WebView problem loading Google Maps v3.58+ on Windows 11",
    "body": "<p>Included below is a minimal application that attempts to load Google Maps using a JavaFX 21.0.6 application (compiled using the 21.0.5 JDK).</p>\n<p>On a Windows 10 machine the code works as expected, but it fails to display the map when running under Windows 11 and instead displays a &quot;Sorry, we have no imagery here&quot; message.</p>\n<p>The Java application code is show below:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.scene.Scene;\nimport javafx.scene.web.WebView;\nimport javafx.stage.Stage;\n\nimport netscape.javascript.JSObject;\n\npublic class GoogleMaps extends Application\n{\n    public static final void main(final String[] args)\n    {\n        Application.launch(args);\n    }\n\n    @Override\n    public final void start(final Stage stage) throws Exception\n    {\n        var webView = new WebView();\n        var webEngine = webView.getEngine();\n        webEngine.setJavaScriptEnabled(true);\n        webEngine.setOnAlert(event -&gt; {\n            if (&quot;inject:bridge&quot;.equals(event.getData()))\n            {\n                final var jsWindow = (JSObject)webEngine.executeScript(&quot;window&quot;);\n                jsWindow.setMember(&quot;javabridge&quot;, GoogleMaps.this);\n                webEngine.executeScript(&quot;console.log = (message) =&gt; javabridge.logConsole(message);&quot;);\n            }\n        });\n\n        Platform.runLater(() -&gt; webEngine.load(ClassLoader.getSystemClassLoader().getResource(&quot;maps.html&quot;).toString()));\n        stage.setScene(new Scene(webView));\n        stage.show();\n    }\n\n    public final void logConsole(final String message)\n    {\n        System.out.println(&quot;WebView: &quot; + message);\n    }\n}\n</code></pre>\n<p>The associated <code>maps.html</code> is shown below:</p>\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Google Maps&lt;/title&gt;\n        &lt;style&gt;\n            body {margin: 0; padding: 0;}\n            #canvas {width: 100%; height: 100%;}\n        &lt;/style&gt;\n        &lt;script&gt;\n            alert(&quot;inject:bridge&quot;);\n        &lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div id='canvas'&gt;&lt;/div&gt;\n        &lt;script&gt;\n            window.addEventListener('error', event =&gt; {\n                const {message, filename, lineno, colno, error} = event; \n                console.log('[Error] ' + message);\n            });\n\n            async function initMap()\n            {\n                console.log(&quot;Console logging is active&quot;);\n                const map = new google.maps.Map(document.getElementById('canvas'), {zoom: 5, center: {lat: 52.2, lng: -1.3}, mapTypeId: 'satellite'});\n            }\n        &lt;/script&gt;\n\n        &lt;!-- notes 1, version 3.58 or greater fails to display the map and shows the message 'Sorry, we have no imagery here', v3.57 works --&gt;\n        &lt;!--       2, the API key has been removed, add '?key=xxx' with an ampersand (although, it should work in 'development mode' without a key) --&gt;\n        &lt;!-- --&gt;\n        &lt;script async defer src=&quot;https://maps.googleapis.com/maps/api/js?v=3.58&amp;callback=initMap&amp;loading=async&quot;&gt;&lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Finally, in case anyone wants to build the application, I've included my Apache ant script:</p>\n<pre><code>&lt;project name=&quot;Google Maps&quot; default=&quot;jar&quot; basedir=&quot;.&quot;&gt;\n    &lt;description&gt;Google Maps Test&lt;/description&gt;\n\n    &lt;property environment=&quot;env&quot;/&gt;\n    &lt;property name=&quot;src&quot; location=&quot;src&quot;/&gt;\n    &lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;\n    &lt;property name=&quot;dist&quot; location=&quot;.&quot;/&gt;\n    &lt;property name=&quot;jarname&quot; value=&quot;googlemaps.jar&quot;/&gt;\n\n    &lt;target name=&quot;init&quot;&gt;\n        &lt;tstamp/&gt;\n        &lt;mkdir dir=&quot;${build}&quot;/&gt;\n    &lt;/target&gt;\n\n    &lt;target name=&quot;tidy&quot; description=&quot;Clean up, but leave the JAR file&quot;&gt;\n        &lt;delete dir=&quot;${build}&quot;/&gt;\n    &lt;/target&gt;\n\n    &lt;target name=&quot;clean&quot; description=&quot;Clean up&quot;&gt;\n        &lt;delete dir=&quot;${build}&quot;/&gt;\n        &lt;delete file=&quot;${dist}/${jarname}&quot;/&gt;\n    &lt;/target&gt;\n\n    &lt;target name=&quot;compile&quot; depends=&quot;clean,init&quot; description=&quot;Compile source files&quot;&gt;\n        &lt;echo&gt;JavaFX Library Path: ${env.PATH_TO_JAVAFX}&lt;/echo&gt;\n        &lt;javac includeantruntime=&quot;false&quot; srcdir=&quot;${src}&quot; destdir=&quot;${build}&quot; modulepath=&quot;${env.PATH_TO_JAVAFX}&quot;&gt;\n            &lt;compilerarg line=&quot;--add-modules ALL-MODULE-PATH&quot;/&gt;\n            &lt;compilerarg value=&quot;-version&quot;/&gt;\n        &lt;/javac&gt;\n    &lt;/target&gt;\n\n    &lt;target name=&quot;jar&quot; depends=&quot;compile&quot; description=&quot;Build the JAR file&quot;&gt;\n        &lt;jar jarfile=&quot;${dist}/${jarname}&quot;&gt;\n            &lt;fileset dir=&quot;${build}&quot;/&gt;\n            &lt;file name=&quot;maps.html&quot;/&gt;\n\n            &lt;manifest&gt;\n                &lt;attribute name=&quot;Main-Class&quot; value=&quot;GoogleMaps&quot;/&gt;\n                &lt;attribute name=&quot;Multi-Release&quot; value=&quot;true&quot;/&gt;\n            &lt;/manifest&gt;\n        &lt;/jar&gt;\n    &lt;/target&gt;\n\n    &lt;target name=&quot;run&quot; depends=&quot;jar&quot; description=&quot;Build execute the JAR&quot;&gt;\n        &lt;java jar=&quot;${dist}/${jarname}&quot; modulepath=&quot;${env.PATH_TO_JAVAFX}&quot; fork=&quot;true&quot;&gt;\n            &lt;jvmarg line=&quot;--add-modules ALL-MODULE-PATH&quot;/&gt;\n        &lt;/java&gt;\n    &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n<p>As far as I can tell no errors are being reported via <code>console.log()</code> or via the DOM window event handler. I'm hoping that done something silly, or perhaps someone else knows the answer or can suggest some things to try. I have already spent quite a bit of time experimenting, but with no success. This included building with JavaFX 24 (the latest release) and testing on other Windows 11 machines.</p>\n<p>Perhaps this is an issue with the associated version of WebKit running under Windows 11? Although, this seems unlikely as I imagine by now it would have been encountered and reported by others (I did attempt to look for related posts and bug reports).</p>\n<p>Any help or advice would be greatly appreciated!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}