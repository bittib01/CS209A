{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "testing",
      "mocking",
      "mockito"
    ],
    "owner": {
      "account_id": 1059597,
      "reputation": 24846,
      "user_id": 1061499,
      "user_type": "registered",
      "accept_rate": 84,
      "profile_image": "https://www.gravatar.com/avatar/9cc13546b8983844eaee1c6e5f384d46?s=256&d=identicon&r=PG",
      "display_name": "davioooh",
      "link": "https://stackoverflow.com/users/1061499/davioooh"
    },
    "is_answered": true,
    "view_count": 50,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1729676608,
    "creation_date": 1729676026,
    "question_id": 79117313,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79117313/cannot-mock-method-beavior-on-invocation-inside-configuration-class",
    "title": "Cannot mock method beavior on invocation inside configuration class",
    "body": "<p>In my Spring Boot project I have a configuration class like this:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor // ... using Lombok\npublic class MyConfigClass {\n    private final MyService myService;\n    \n    \n    @PostContruct\n    void setup(){\n        String s = myService.aMethod();\n        System.out.println(s.substring(0, 2));\n    }\n}\n</code></pre>\n<p>Now I need to test some features of my project and for these tests I need to mock <code>MyService</code> class:</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)\nclass SomeOtherServiceTest {\n    @MockBean\n    private MyService mockMyService;\n\n    @BeforeEach\n    void setup() {\n        when(mockMyService.aMethod()).thenReturn(&quot;blablabla&quot;); // ... using Mockito\n    }\n\n    @Test\n    void test() {\n        // test code\n    }\n}\n</code></pre>\n<p>When I run <code>test</code> I'm getting a <code>NullPointerException</code> on <code>s.substring(0, 2)</code> invocation in my configuration class. This means that the method has not been yet mocked at this point.</p>\n<p>How can I achieve this?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}