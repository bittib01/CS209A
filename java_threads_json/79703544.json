{
  "question": {
    "tags": [
      "java",
      "unit-testing",
      "itext7"
    ],
    "owner": {
      "account_id": 987434,
      "reputation": 12688,
      "user_id": 1005607,
      "user_type": "registered",
      "accept_rate": 64,
      "profile_image": "https://www.gravatar.com/avatar/784311347e657bc34c93a6b7cb7d3faf?s=256&d=identicon&r=PG",
      "display_name": "gene b.",
      "link": "https://stackoverflow.com/users/1005607/gene-b"
    },
    "is_answered": false,
    "view_count": 111,
    "answer_count": 1,
    "score": -3,
    "last_activity_date": 1752777387,
    "creation_date": 1752674818,
    "last_edit_date": 1752675182,
    "question_id": 79703544,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79703544/mock-itext-7-1-1-in-application-unit-tests-to-avoid-usage-of-commercial-license",
    "title": "Mock iText 7.1.1 in application unit tests to avoid usage of commercial license",
    "body": "<p>We are using iText 7.1.1 Commercial version for actual PDF generation in the application as follows,</p>\n<ol>\n<li><p>Activate License on app startup, in some kind of initialization bean:</p>\n<pre><code>LicenseKeyVolumeConfigurer.useLocalReporting(iTextLicenseLocalVolumeReportPath);\nLicenseKey.loadLicenseFile(iTextLicenseKeyPath);\n</code></pre>\n</li>\n<li><p>In the Java app's Service class,</p>\n<pre><code>// Returns byte[]\npublic byte[] createPdf(PdfData pdfData) throws Exception {\n   ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n   PdfWriter writer = new PdfWriter(byteArrayOutputStream);\n   PdfDocument pdfDocument = new PdfDocument(writer);\n   Document document = new Document(pdfDocument, PageSize.LETTER, false);     \n   //...\n   // Add PDF sections, e.g.:\n   Paragraph paragraphIntro = new Paragraph(String.format(INTRO_PARAGRAPH, StringUtils.defaultIfBlank(pdfData.getSomeStr(), &quot;&quot;)));\n   paragraphIntro.setFont(timesNormalFont);\n   paragraphIntro.setFontSize(BODY_FONT_SIZE);\n   paragraphIntro.setMarginTop(INTRO_PARAGRAPH_MARGIN_TOP);\n   document.add(paragraphIntro);\n   // etc.      \n   // ...\n   document.close();\n   pdfDocument.close();  \n   byte[] result = byteArrayOutputStream.toByteArray();\n   byteArrayOutputStream.close();\n   return result;\n}\n</code></pre>\n</li>\n</ol>\n<p>Now I need to add a unit test that provides coverage for the custom <code>createPdf</code> service method. But to avoid usage of the commercial license, I need to mock iText. I would need to mock everything related to <code>PdfWriter</code>, <code>PdfDocument</code>, <code>Document</code>, and all the other iText objects like <code>Paragraph</code> and <code>Div</code> in this method. The unit test should go through the custom service code and test that while mocking all the iText objects. Is this possible without a lot of effort?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}