{
  "question": {
    "tags": [
      "java",
      "unit-testing",
      "mocking",
      "mockito"
    ],
    "owner": {
      "account_id": 40774,
      "reputation": 29853,
      "user_id": 118228,
      "user_type": "registered",
      "accept_rate": 85,
      "profile_image": "https://i.sstatic.net/f2tOS.jpg?s=256",
      "display_name": "djangofan",
      "link": "https://stackoverflow.com/users/118228/djangofan"
    },
    "is_answered": false,
    "view_count": 86,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1747316637,
    "creation_date": 1745341131,
    "last_edit_date": 1745341904,
    "question_id": 79587072,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79587072/how-to-dont-mock-things-you-dont-own-with-jdbc",
    "title": "How to &quot;Don&#39;t Mock Things You Dont Own&quot; with JDBC",
    "body": "<p>This is a question about &quot;testing patterns&quot;.  How to &quot;Don't Mock Things You Dont Own&quot; with JDBC?</p>\n<p>I tried to Proof Of Concept a JDBC Adapter in the below link, and after trying a few things, this is as close as I could get to the Mockito.org commandment &quot;Don't mock things you don't own&quot; .  Is there another way I could achieve this? Does anyone have experience with this?  In this case, I want to test this adapter class without mocking behavior of ResultSet.class, which I don't own.</p>\n<p>My other idea was to import H2 DB lib into my project and test against a real DB with H2, so that I don't need to mock, but testing it that way doesn't necessarily prove a connection to Oracle DB, does it?</p>\n<p><a href=\"https://github.com/austenjt/jdbc-wrapper-and-test-double/blob/main/src/test/java/org/example/adapters/JdbcResultSetAdapterTest.java\" rel=\"nofollow noreferrer\">https://github.com/austenjt/jdbc-wrapper-and-test-double/blob/main/src/test/java/org/example/adapters/JdbcResultSetAdapterTest.java</a></p>\n<p>My adapter</p>\n<pre><code>public class JdbcResultSetAdapter implements DatabaseResultSet {\n\n    private final ResultSet resultSet;\n\n    public JdbcResultSetAdapter(ResultSet resultSet) {\n        if (resultSet == null) {\n            throw new NullPointerException(&quot;ResultSet cannot be null&quot;);\n        }\n        this.resultSet = resultSet;\n    }\n\n    @Override\n    public boolean next() throws SQLException {\n        return resultSet.next();\n    }\n\n    @Override\n    public String getString(String columnLabel) throws SQLException {\n        return resultSet.getString(columnLabel);\n    }\n\n    @Override\n    public void close() throws SQLException {\n        resultSet.close();\n    }\n\n}\n</code></pre>\n<p>And my resulting test code that is mocking things I don't own:</p>\n<pre><code>public class JdbcResultSetAdapterTest {\n\n    @Mock\n    private ResultSet resultSet;\n\n    private JdbcResultSetAdapter resultSetAdapter;\n\n    @BeforeEach\n    void setUp() {\n        resultSetAdapter = new JdbcResultSetAdapter(resultSet);\n    }\n\n    @Test\n    void testNext_DelegatesToResultSet() {\n        assertDoesNotThrow(() -&gt; {\n            when(resultSet.next()).thenReturn(true);\n            boolean hasNext = resultSetAdapter.next();\n            assertTrue(hasNext, &quot;next() should return true&quot;);\n            verify(resultSet).next();\n        });\n    }\n\n    @Test\n    void testGetString_DelegatesToResultSet() {\n        String columnLabel = &quot;name&quot;;\n        assertDoesNotThrow(() -&gt; {\n            when(resultSet.getString(columnLabel)).thenReturn(&quot;John Doe&quot;);\n            String value = resultSetAdapter.getString(columnLabel);\n            assertEquals(&quot;John Doe&quot;, value, &quot;getString() should return the correct value&quot;);\n            verify(resultSet).getString(columnLabel);\n        });\n    }\n   ....\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}