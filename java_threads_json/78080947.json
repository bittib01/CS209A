{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-security",
      "thymeleaf"
    ],
    "owner": {
      "account_id": 30656564,
      "reputation": 1,
      "user_id": 23501799,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocLBhoia2uMVzrjLfP9MGimTOsj06XFdNHOSzTWWFfSwRQ=k-s256",
      "display_name": "LuxusXc",
      "link": "https://stackoverflow.com/users/23501799/luxusxc"
    },
    "is_answered": false,
    "view_count": 157,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1733900930,
    "creation_date": 1709205274,
    "last_edit_date": 1709205421,
    "question_id": 78080947,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78080947/thymeleaf-extras-detects-that-the-spring-version-is-not-compatible",
    "title": "Thymeleaf extras detects that the spring version is not compatible",
    "body": "<p>I tried to build my spring boot web application and create jar file to deploy it on the dedicated server. When I build it using IDE (in my case Intellij Idea) all works fine. But when I try to execute jar and get pages which use thymeleaf extras tags (like sec:authorize) I recieve an exception like this</p>\n<pre><code>org.thymeleaf.exceptions.ConfigurationException: The Spring-version-specific infrastructure could not create utility for the specific version of Spring being used. Currently only Spring 6.x or newer is supported.\n        at org.thymeleaf.extras.springsecurity6.util.SpringVersionSpecificUtils.&lt;clinit&gt;(SpringVersionSpecificUtils.java:74) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.extras.springsecurity6.util.SpringSecurityContextUtils.getAuthenticationObject(SpringSecurityContextUtils.java:127) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.extras.springsecurity6.auth.AuthUtils.getAuthenticationObject(AuthUtils.java:102) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.extras.springsecurity6.dialect.processor.AuthorizeAttrProcessor.isVisible(AuthorizeAttrProcessor.java:67) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.standard.processor.AbstractStandardConditionalVisibilityTagProcessor.doProcess(AbstractStandardConditionalVisibilityTagProcessor.java:61) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.engine.OpenElementTag.beHandled(OpenElementTag.java:205) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.engine.TemplateModel.process(TemplateModel.java:136) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:661) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[pastebin.jar:1.0-SNAPSHOT]\n        at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[pastebin.jar:1.0-SNAPSHOT]\n...\n</code></pre>\n<p>As you can see spring considers that the version of some dependencies is lower than 6. But in my pom.xml I use spring-boot-starter-parent which should provide right versions and I believe it does.</p>\n<p>pom.xml</p>\n<pre><code>    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;pastebin&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;pastebin Maven Webapp&lt;/name&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;18&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;18&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-security-crypto&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n                &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n                &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n                &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n                &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\n                &lt;version&gt;9.37.3&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n                &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n                &lt;scope&gt;provided&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;version&gt;2.16.1&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n                &lt;artifactId&gt;guava&lt;/artifactId&gt;\n                &lt;version&gt;33.0.0-jre&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.firebase&lt;/groupId&gt;\n                &lt;artifactId&gt;firebase-admin&lt;/artifactId&gt;\n                &lt;version&gt;9.2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.30&lt;/version&gt;\n                &lt;scope&gt;provided&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n                &lt;version&gt;42.7.2&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n                &lt;version&gt;5.10.2&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n                &lt;version&gt;5.10.2&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n                &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\n                &lt;version&gt;2.2&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.12.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;18&lt;/source&gt;\n                    &lt;target&gt;18&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;addResources&gt;true&lt;/addResources&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.vladpochuev.config.PastebinApplication&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.2&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;finalName&gt;pastebin&lt;/finalName&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I checked maven build with<br />\n<code>mvn dependency:tree</code><br />\nand didn't find any conflicts. If I would remove thymeleaf extras dependency there wouldn't be any of issues except of losing some related functionality. So I think it leads to wrong execution.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}