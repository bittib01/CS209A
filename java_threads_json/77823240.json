{
  "question": {
    "tags": [
      "java",
      "oracle-database",
      "spring-boot",
      "migration",
      "hql"
    ],
    "owner": {
      "account_id": 1634116,
      "reputation": 161,
      "user_id": 1508072,
      "user_type": "registered",
      "accept_rate": 0,
      "profile_image": "https://www.gravatar.com/avatar/d9562ad19d4c458bd514f8768f1bd327?s=256&d=identicon&r=PG",
      "display_name": "user1508072",
      "link": "https://stackoverflow.com/users/1508072/user1508072"
    },
    "is_answered": true,
    "view_count": 3493,
    "accepted_answer_id": 77851632,
    "answer_count": 1,
    "score": 5,
    "last_activity_date": 1732356860,
    "creation_date": 1705373526,
    "last_edit_date": 1732356860,
    "question_id": 77823240,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77823240/query-execution-errors-after-upgrading-spring-boot-3-2-0-to-3-2-1-ora-00933",
    "title": "Query execution errors after upgrading spring boot 3.2.0 to 3.2.1 - ORA-00933 - command not properly ended",
    "body": "<p>I have a Java Spring application with lots of queries, which so far have worked until spring boot <strong>3.2.0</strong>.</p>\n<p>Recently, after simply changing to spring boot <strong>3.2.1</strong>, I started getting this kind of error:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing \nSQL [select \n        o1_0.org_id,\n        o1_0.name \n     from organizations o1_0 \n     where (\n            ? is null or \n            trim(BOTH from ?)='' or \n            lower(o1_0.name) like lower(trim(BOTH from ?))\n     ) \n     offset ? rows \n     fetch first ? rows only] \n[ORA-00933: comando SQL command not properly ended]\n</code></pre>\n<p>My pom dependencies look like this:</p>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc11&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n</code></pre>\n<p>My queries, with some code i cant disclose removed, but still giving errors, has simple conditions:</p>\n<pre><code>    \n    @Query(&quot;select org  &quot;\n         + &quot;  from Organization         org     &quot;\n         + &quot; where 1 = 1 &quot;\n         + &quot;   and ( &quot;\n         + &quot;         :#{#request.name} is null &quot;\n         + &quot;         or &quot;\n         + &quot;         trim(:#{#request.name}) = '' &quot;\n         + &quot;         or &quot;\n         + &quot;         lower(org.name) like lower(trim(:#{#request.name}))&quot;\n         + &quot;       ) &quot;\n    )\n    Page&lt;Organization&gt; getPageByCriteria(@Param(&quot;request&quot;) GetOrganizationsRequestDto request, Pageable pageable);\n</code></pre>\n<p>I am connecting to <strong>oracle database version 11g</strong></p>\n<p>Does anyone have this kind of problem or similar and can help me with it? I suspect it is related to ojdbc not having had an update since the last spring boot version.</p>\n<p>Thanks</p>\n<p><strong>Edit</strong>: added the pure SQL query performed on the database, according to error log</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}