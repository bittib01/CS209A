{
  "question": {
    "tags": [
      "java",
      "gradle",
      "guava",
      "intellij-14",
      "google-cloud-vertex-ai"
    ],
    "owner": {
      "account_id": 7235159,
      "reputation": 358,
      "user_id": 5520689,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/a02a8c5d573d234d179f8b8c60e07463?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Sachu",
      "link": "https://stackoverflow.com/users/5520689/sachu"
    },
    "is_answered": true,
    "view_count": 6232,
    "accepted_answer_id": 77746619,
    "answer_count": 3,
    "score": 5,
    "last_activity_date": 1713791987,
    "creation_date": 1704199320,
    "question_id": 77746136,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77746136/how-to-exclude-one-of-the-variants-of-com-google-guava-dependency-while-building",
    "title": "How to exclude one of the variants of com.google.guava dependency while building Gradle projects",
    "body": "<p>I have included the below dependency in the build.gradle file of my gradle project to work with VertexAi LLM Libraries.</p>\n<pre><code>implementation group: 'dev.langchain4j', name: 'langchain4j-vertex-ai', version: '0.22.0'\n</code></pre>\n<p>I am facing a problem while testing the main function.</p>\n<p>The Idea IntelliJ prompt says that it is unable to choose between two variants of com.google.guava:guava:32.1.2-jre (which is a dependency for the VertexAi dependency)</p>\n<p>I got the following error message</p>\n<pre><code>The consumer was configured to find an API of a library compatible with Java 11, preferably in the form of class files, and its dependencies declared externally.\n\nHowever we cannot choose between the following variants of com.google.guava:guava:32.1.2-jre\n      - androidApiElements\n      - jreApiElements\n</code></pre>\n<p>I think I need to use the jreApiElements variant since I am dealing only with a web application. It looks like the IDE is confused because both variants provided the same number of parameters.</p>\n<pre><code>All of them match the consumer attributes:\n  - Variant 'androidApiElements' capabilities com.google.collections:google-collections:32.1.2-jre and com.google.guava:guava:32.1.2-jre declares an API of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally:\n      - Unmatched attributes:\n          - Provides attribute 'org.gradle.jvm.environment' with value 'android' but the consumer didn't ask for it\n          - Provides release status but the consumer didn't ask for it\n  - Variant 'jreApiElements' capabilities com.google.collections:google-collections:32.1.2-jre and com.google.guava:guava:32.1.2-jre declares an API of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally:\n      - Unmatched attributes:\n          - Provides attribute 'org.gradle.jvm.environment' with value 'standard-jvm' but the consumer didn't ask for it\n          - Provides release status but the consumer didn't ask for it\n</code></pre>\n<p>Please let me know how to choose the jreApiElements variant while excluding the androidApiElements variant. Preferable to do it in build.gradle/project gradle settings since I want the code to be portable.</p>\n<p>I have tried the below solutions:</p>\n<ol>\n<li><p>Setting the right gradle version in the gradle wrapper properties\nfile</p>\n</li>\n<li><p>Adding the parameter applicationDefaultJvmArgs =\n[&quot;-org.gradle.jvm.environment=standard-jvm&quot;] to build.gradle file\n(This made the build fail so I removed it)</p>\n</li>\n<li><p>Adding the below 2 dependencies in build.gradle</p>\n<p>implementation group: 'com.google.cloud', name: 'google-cloud-aiplatform', version: '3.24.0'</p>\n<p>implementation group: 'com.google.guava', name: 'guava', version: '32.1.2-jre'</p>\n</li>\n</ol>\n<p>None of the above solutions worked. Please let me know how can exclude the the android variant of the guava dependency</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}