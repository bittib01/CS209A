{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "hibernate",
      "jakarta-migration"
    ],
    "owner": {
      "account_id": 22273499,
      "reputation": 33,
      "user_id": 16503075,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/88ca29cd0f42e14dbcd21d8f7f917fb1?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Kamalama",
      "link": "https://stackoverflow.com/users/16503075/kamalama"
    },
    "is_answered": true,
    "view_count": 1095,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1718697600,
    "creation_date": 1709163719,
    "question_id": 78078183,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78078183/entitymanagerfactory-interface-interface-org-hibernate-sessionfactory-seems-to",
    "title": "EntityManagerFactory interface [interface org.hibernate.SessionFactory] seems to conflict with Spring&#39;s EntityManagerFactoryInfo mixin",
    "body": "<p>Hello I have this problem with my spring boot application:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dbEntityManagerFactory' defined in class path resource ...: EntityManagerFactory interface [interface org.hibernate.SessionFactory] seems to conflict with Spring's EntityManagerFactoryInfo mixin - consider resetting the 'entityManagerFactoryInterface' property to plain [jakarta.persistence.EntityManagerFactory]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)\n    at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\n    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\n    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\n    at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)\n    at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\n    ... 17 more\n</code></pre>\n<p>My pom.xml connected dependencies are:</p>\n<pre><code> &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n        &lt;relativePath/&gt; \n  &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.2.0-M1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.activation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/parent&gt;\n</code></pre>\n<p>And this is my DatabaseConfiguration class:</p>\n<pre><code>\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;dbEntityManagerFactory&quot;, transactionManagerRef = &quot;dbTransactionManager&quot;, basePackages = {\n    &quot;...&quot;})\n@EntityScan(&quot;...&quot;)\n@RequiredArgsConstructor\npublic class DatabaseConfiguration {\n\n    private final YamlProperties yamlProperties;\n\n    @Bean(name = &quot;dbDataSourceProperties&quot;)\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\n    public DataSourceProperties dbDataSourceProperties() {\n\n        return new DataSourceProperties();\n    }\n\n    @Bean(name = &quot;dbDataSource&quot;)\n    public DataSource dataSource(@Qualifier(&quot;dbDataSourceProperties&quot;) DataSourceProperties dbDataSourceProperties) {\n\n        return dbDataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\n\n    }\n\n    @Bean(name = &quot;dbEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(\n        @Qualifier(&quot;dbDataSource&quot;) DataSource dbDataSource) {\n\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n        em.setDataSource(dbDataSource);\n        Properties properties = new Properties();\n        properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);\n        properties.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.H2Dialect&quot;);\n        properties.setProperty(&quot;hibernate.connection.url&quot;, getDatabaseUrl());\n        properties.setProperty(&quot;hibernate.default_schema&quot;, &quot;CCN2_SCHEMA&quot;);\n        em.setJpaProperties(properties);\n        em.setPackagesToScan(&quot;eu.europa.ec.taxud.ssv.earchiving_archiving_agent_kibana_pdf_recovery.repository.model&quot;);\n        em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        em.setPersistenceUnitName(&quot;dbDataSource&quot;);\n\n        return em;\n    }\n\n    @Bean(name = &quot;dbTransactionManager&quot;)\n    public PlatformTransactionManager dbTransactionManager(\n        @Qualifier(&quot;dbEntityManagerFactory&quot;) EntityManagerFactory dbEntityManagerFactory) {\n\n        return new JpaTransactionManager(dbEntityManagerFactory);\n    }\n\n    public String getDatabaseUrl() {\n\n        return String.format(\n            &quot;%s;USER=%s;PASSWORD=%s;DATABASE_TO_LOWER=true;INIT=CREATE SCHEMA IF NOT EXISTS CCN2_SCHEMA;&quot;,\n            yamlProperties.getAppProperties().getDatabaseProperties().getSpringDatasourceUrl(),\n            yamlProperties.getAppProperties().getDatabaseProperties().getSpringDatasourceUsername(),\n            yamlProperties.getAppProperties().getDatabaseProperties().getSpringDatasourcePassword());\n    }\n\n}\n\n</code></pre>\n<p>Is it the problem with versions of spring boot and jakarta dependencies? Right now they are both the newest I tried some conifugrations but it didn't work. Before i had older version of springboot and javax instead of jakarta and it was working pretty well, but now I need them to be relatively the newest</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}