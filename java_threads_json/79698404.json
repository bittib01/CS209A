{
  "question": {
    "tags": [
      "java",
      "xml",
      "xpath"
    ],
    "owner": {
      "account_id": 4639875,
      "reputation": 1839,
      "user_id": 3760049,
      "user_type": "registered",
      "accept_rate": 86,
      "profile_image": "https://www.gravatar.com/avatar/69ed405cd4036cdf27e003ca372c6d1c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "riskop",
      "link": "https://stackoverflow.com/users/3760049/riskop"
    },
    "is_answered": false,
    "view_count": 64,
    "closed_date": 1752245549,
    "answer_count": 0,
    "score": 2,
    "last_activity_date": 1752245580,
    "creation_date": 1752240350,
    "question_id": 79698404,
    "link": "https://stackoverflow.com/questions/79698404/how-to-use-xpath-in-java-when-namespace-prefixes-are-unstable",
    "closed_reason": "Duplicate",
    "title": "how to use xpath in java when namespace prefixes are unstable",
    "body": "<p>I need to extract small parts from xml files in Java. I would like to use xpath for it.</p>\n<p>The incoming xmls use namespaces but the prefixes for them are unstable. I mean sometimes I get &quot;&lt;s:Title&gt;...&quot; sometimes som:Title.</p>\n<p>I need to specify elements in the xpath with their namespaces to prevent mixup.</p>\n<p>I found a way to do it with xpath expressions like this:</p>\n<p>/<em>[local-name()='Doc' and namespace-uri()='http://www.my.hu/somethingo']/</em>[local-name()='Title' and namespace-uri()='http://www.my.hu/somethingo']/*[local-name()='Object' and namespace-uri()='http://www.my.hu/otherthingo']\n...</p>\n<p>However the paths are quite unreadable in this form.</p>\n<p>Is there no better way to specify namespaces in java xpath expressions?</p>\n<p>This is the code in question:</p>\n<pre><code>public String extractObjectInTitleInDoc(String xml) throws Exception {\n        DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n        builderFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n        builderFactory.setNamespaceAware(true);\n        DocumentBuilder builder = builderFactory.newDocumentBuilder();\n        Document xmlDocument = builder.parse(new ByteArrayInputStream(xml.getBytes()));\n        XPath xPath = XPathFactory.newInstance().newXPath();\n        String expression = &quot;&quot; +\n                &quot;/*[local-name()='Doc' and namespace-uri()='http://www.my.hu/somethingo']&quot; +\n                &quot;/*[local-name()='Title' and namespace-uri()='http://www.my.hu/somethingo']&quot; +\n                &quot;/*[local-name()='Object' and namespace-uri()='http://www.my.hu/otherthingo']&quot; +\n                &quot;/text()&quot; +\n                &quot;&quot;;\n        String title = (String) xPath.compile(expression).evaluate(xmlDocument, XPathConstants.STRING);\n\n        return title;\n    }\n</code></pre>\n<p>A minimal working example of the above is here:</p>\n<p><a href=\"https://github.com/riskop/java_xpath_localname_namespace_uri\" rel=\"nofollow noreferrer\">https://github.com/riskop/java_xpath_localname_namespace_uri</a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}