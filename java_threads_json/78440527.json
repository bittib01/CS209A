{
  "question": {
    "tags": [
      "java",
      "firebase-cloud-messaging"
    ],
    "owner": {
      "account_id": 31766498,
      "reputation": 11,
      "user_id": 24581592,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/d72f4e40bc2b1313aed1c241d91a6104?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Flower girl",
      "link": "https://stackoverflow.com/users/24581592/flower-girl"
    },
    "is_answered": true,
    "view_count": 1260,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1720288150,
    "creation_date": 1715063545,
    "last_edit_date": 1715089453,
    "question_id": 78440527,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78440527/how-to-migrate-from-fcm-legacy-api-to-http-v1-in-terms-of-code-in-java-for-andro",
    "title": "How to migrate from FCM Legacy API to Http V1 in terms of code in java for android?",
    "body": "<p>My app uses FCM legacy API to send notifications. But those APIs were deprecated on June 20, 2023, and will be removed in June 2024. In FCM Legacy Api I have used the following code to send notifications</p>\n<pre><code>private void sendPushNotification(String notificationTitle, String hisFcmToken, String notificationBody, String myUserID, String notificationPhotoUrl, String hisUserID) {        \n    try {\n        JSONObject jsonObject = new JSONObject();\n\n        JSONObject notificationObj = new JSONObject();\n        notificationObj.put(&quot;title&quot;, notificationTitle);\n        notificationObj.put(&quot;body&quot;, notificationBody);\n        notificationObj.put(&quot;image&quot;, notificationPhotoUrl);\n        notificationObj.put(&quot;priority&quot;, &quot;high&quot;);\n\n        JSONObject dataObj = new JSONObject();\n        dataObj.put(&quot;isNewUncheckedLikeNotification&quot;, &quot;true&quot;);\n        dataObj.put(&quot;likerUserID&quot;, myUserID);\n\n        jsonObject.put(&quot;notification&quot;, notificationObj);\n        jsonObject.put(&quot;data&quot;, dataObj);\n        jsonObject.put(&quot;to&quot;, hisFcmToken);\n\n        callApi(jsonObject, hisUserID);\n    } catch (Exception e) {\n        Log.d(&quot;sendLikePushNotification&quot;, &quot;Exception: &quot; + e.getMessage());\n    }\n}\n\nprivate void callApi(JSONObject jsonObject, String hisUserID) {\n    MediaType JSON = MediaType.get(&quot;application/json; charset=utf-8&quot;);\n    OkHttpClient client = new OkHttpClient();\n    String url = &quot;https://fcm.googleapis.com/fcm/send&quot;;\n    RequestBody body = RequestBody.create(jsonObject.toString(), JSON);\n    Request request = new Request.Builder().url(url).post(body).header(&quot;Authorization&quot;, &quot;Bearer Authorization_key&quot;).build();\n    client.newCall(request).enqueue(new Callback() {\n        @Override\n        public void onFailure(@NonNull Call call, @NonNull IOException e) {\n        }\n\n        @Override\n        public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n            if (response.isSuccessful()) {\n                Log.d(&quot;PushNotification&quot;, &quot;Notification successfully sent.&quot;);\n            } else {\n                Log.d(&quot;PushNotification&quot;, &quot;Failed to send notification: &quot; + response.code() + &quot; &quot; + response.message());\n            }\n        }\n    });\n}\n</code></pre>\n<p>I have read <a href=\"https://firebase.google.com/docs/cloud-messaging/migrate-v1#java\" rel=\"nofollow noreferrer\">this</a> documentation but unable to understand clearly. I need an example code snippet or tutorial where the send notification is implemented completely. Thanks anyways.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}