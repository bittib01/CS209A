{
  "question": {
    "tags": [
      "java",
      "discord",
      "discord-jda"
    ],
    "owner": {
      "account_id": 34439018,
      "reputation": 1,
      "user_id": 26569615,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/8850d6c37157e7eaea58c063566fc407?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Crazy_ Jimmy",
      "link": "https://stackoverflow.com/users/26569615/crazy-jimmy"
    },
    "is_answered": true,
    "view_count": 63,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1730656395,
    "creation_date": 1722328690,
    "last_edit_date": 1722330812,
    "question_id": 78810606,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78810606/discord-bot-not-realizing-it-has-command",
    "title": "Discord bot not realizing it has command",
    "body": "<p>My discord bot does not show the commands I have added to the Event listener. It only shows older ones and two that aren't even in my code.</p>\n<p>I have tried reinviting the bot to my server and turned off Slash commands on my server for a day\nas well as added a temp command.</p>\n<p>My Command manager looks like this:</p>\n<pre><code>package com.recon.commands;\n\nimport com.recon.services.DatabaseService;\nimport com.recon.services.MusicService;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport net.dv8tion.jda.api.entities.Guild;\nimport net.dv8tion.jda.api.events.interaction.command.SlashCommandInteractionEvent;\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Service;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport static com.recon.DiscordBot.jda;\n@Slf4j\n@RequiredArgsConstructor\n@Component\npublic class CommandManager extends ListenerAdapter {\n\n    private final AddTrack addTrack ;\n\n    private final DisplayQueue displayQueue ;\n\n    private final SkipTrack skipTrack ;\n\n    private final JoinChannel joinChannel;\n\n    private final SetBotChannel setBotChannel ;\n\n    private final ViewGameCards viewGameCards;\n\n    private final CreateGameCard createGameCard;\n\n     private final DeleteGameCard deleteGameCard;\n\n     private final GetWebLink getWebLink;\n\n\n\n    @Override\n    public void onSlashCommandInteraction(SlashCommandInteractionEvent event) {\n      String commandName = event.getName();\n      try {\n          switch (CommandNames.valueOf(commandName)) {\n              case addtrack:\n                  addTrack.execute(event);\n                  break;\n              case skiptrack:\n                  skipTrack.execute(event);\n                  break;\n              case displayqueue:\n                  displayQueue.execute(event);\n                  break;\n              case joinchannel:\n                  joinChannel.execute(event);\n                  break;\n              case setbotchannel:\n                  setBotChannel.execute(event);\n                  break;\n              case viewallgamecards:\n                  viewGameCards.execute(event);\n                  break;\n              case creategamecard:\n                   createGameCard.execute(event);\n                  break;\n              case deletegamecard:\n                  deleteGameCard.execute(event);\n                  break;\n              case getweblink:\n                  getWebLink.execute(event);\n                  break;\n          }\n      }catch (NullPointerException e){\n\n          log.info(&quot;Something went wrong wille executing command :&quot; + e.getMessage() );\n\n      }\n\n    }\n}\n\n\n</code></pre>\n<p>My command factory looks like this:</p>\n<pre><code>package com.recon.commands;\n\nimport com.recon.data.GuildDataMap;\nimport net.dv8tion.jda.api.interactions.commands.build.CommandData;\nimport net.dv8tion.jda.api.interactions.commands.build.Commands;\nimport org.springframework.stereotype.Component;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport static com.recon.DiscordBot.databaseService;\n\n@Component\npublic class CommandFactory {\n\n    public List&lt;CommandData&gt; commandData = new ArrayList&lt;&gt;();\n\n\n    public CommandFactory(AddTrack addTrack,DisplayQueue displayQueue,SkipTrack skipTrack,JoinChannel joinChannel,SetBotChannel setBotChannel,ViewGameCards viewGameCards,CreateGameCard createGameCard, DeleteGameCard deleteGameCard, GetWebLink getWebLink) {\n        commandData.add(Commands.slash(addTrack.name(), addTrack.description()).addOptions(addTrack.options()));\n        commandData.add(Commands.slash(skipTrack.name(), addTrack.description()));\n        commandData.add(Commands.slash(displayQueue.name(), displayQueue.description()));\n        commandData.add(Commands.slash(joinChannel.name(), joinChannel.description()));\n        commandData.add(Commands.slash(setBotChannel.name(), setBotChannel.description()));\n        commandData.add(Commands.slash(viewGameCards.name(), viewGameCards.description()));\n        commandData.add(Commands.slash(createGameCard.name(),createGameCard.description()).addOptions(createGameCard.options()));\n        commandData.add(Commands.slash(deleteGameCard.name(), deleteGameCard.description()).addOptions(deleteGameCard.options()));\n        commandData.add(Commands.slash(getWebLink.name(), getWebLink.description()));\n    }\n\n\n\n    public void add(ICommand command){\n        commandData.add(Commands.slash(command.name(), command.description()).addOptions(command.options()));\n    }\n\n}\n\n</code></pre>\n<p>I create my Jda Like this</p>\n<pre><code>package com.recon;\n\nimport com.recon.commands.CommandManager;\nimport com.recon.data.GuildDataMap;\nimport com.recon.def.BotChannel;\nimport com.recon.def.GuildData;\nimport com.recon.listeners.Listener;\nimport com.recon.repo.BotChannelRepo;\nimport com.recon.services.DatabaseService;\nimport com.recon.services.GameCardService;\nimport com.recon.services.ReactionListener;\nimport lombok.Data;\nimport lombok.RequiredArgsConstructor;\nimport lombok.SneakyThrows;\nimport net.dv8tion.jda.api.JDA;\nimport net.dv8tion.jda.api.JDABuilder;\nimport net.dv8tion.jda.api.OnlineStatus;\nimport net.dv8tion.jda.api.entities.Activity;\nimport net.dv8tion.jda.api.requests.GatewayIntent;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class DiscordBot {\n\n    public static JDA jda;\n    public static DatabaseService databaseService;\n\n    public static GuildDataMap guildDataMap;\n    private static ApplicationContext applicationContext;\n\n    @Bean\n    @SneakyThrows\n    public JDA createJDA(CommandManager commandManager, ReactionListener reactionListener) {\n        jda = JDABuilder.createDefault(&quot;Dont want to leak my token&quot;)\n                .addEventListeners(reactionListener)\n                .addEventListeners(commandManager)\n                .enableIntents(GatewayIntent.MESSAGE_CONTENT)\n                .enableIntents(GatewayIntent.GUILD_EMOJIS_AND_STICKERS)\n                .setStatus(OnlineStatus.ONLINE)\n                .setActivity(Activity.of(Activity.ActivityType.WATCHING, &quot;The Matrix&quot;))\n                .build();\n        guildDataMap = new GuildDataMap(databaseService);\n        return jda;\n    }\n\n    @SneakyThrows\n\n    public static void main(String[] args) {\n        SpringApplication.run(DiscordBot.class);\n    }\n\n\n    public static void displayAllBeans() {\n        String[] allBeanNames = applicationContext.getBeanDefinitionNames();\n        for (String beanName : allBeanNames) {\n            System.out.println(beanName);\n        }\n    }\n}\n</code></pre>\n<p>And the command interface looks like this:</p>\n<pre><code>package com.recon.commands;\n\nimport com.recon.services.MusicService;\nimport net.dv8tion.jda.api.events.interaction.command.SlashCommandInteractionEvent;\nimport net.dv8tion.jda.api.interactions.commands.SlashCommandInteraction;\nimport net.dv8tion.jda.api.interactions.commands.build.OptionData;\nimport net.dv8tion.jda.api.interactions.commands.build.SlashCommandData;\n\nimport java.util.List;\n\npublic interface ICommand {\n\n    String name();\n\n    String description();\n\n    List&lt;OptionData&gt; options();\n\n    void execute(SlashCommandInteractionEvent event);\n\n\n}\n\n</code></pre>\n<p>This is the command names Enum</p>\n<pre><code>package com.recon.commands;\n\npublic enum CommandNames {addtrack, skiptrack, displayqueue, joinchannel, setbotchannel, viewallgamecards, creategamecard, deletegamecard, getweblink\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}