{
  "question": {
    "tags": [
      "java",
      "generics"
    ],
    "owner": {
      "account_id": 28225556,
      "reputation": 1279,
      "user_id": 21575627,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b2afd85441f51657077abc0b4ce8b36c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "user129393192",
      "link": "https://stackoverflow.com/users/21575627/user129393192"
    },
    "is_answered": true,
    "view_count": 78,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1746709606,
    "creation_date": 1715144586,
    "last_edit_date": 1746709606,
    "question_id": 78446185,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78446185/why-is-listsubtype-able-to-be-assigned-to-listsupertype-here",
    "title": "Why is List&lt;Subtype&gt; able to be assigned to List&lt;Supertype&gt; here?",
    "body": "<p>I understand that Java is generally invariant since it does not want to deal with issues of co/contra-variance.</p>\n<p>So in general,</p>\n<pre><code>List&lt;Parent&gt; a = new ArrayList&lt;Child&gt;();\n</code></pre>\n<p>will require a type-erase-like cast via <code>(List)</code> to make work.</p>\n<p>However,</p>\n<pre><code>List&lt;Parent&gt; p = Collections.singletonList(&lt;Child&gt;);\n</code></pre>\n<p>works as is, without a cast, despite claiming to return a <code>List&lt;Child&gt;</code> via the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#singletonList-T-\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>I experimented a bit and found this is a property of generic returns in general, and is not specific to <code>Collections.singletonList</code>.</p>\n<p>There are a couple possibilities here:</p>\n<ul>\n<li>it's inferring the return type based on what it is being assigned to\n<ul>\n<li>it could, for example, pretend the <code>&lt;Child&gt;</code> parameter is <code>(&lt;Parent&gt;) &lt;Child&gt;</code>, with an implicit cast</li>\n<li>a good point to be made is something like <code>Vector&lt;String&gt; s = new Vector&lt;&gt;();</code> works at least somewhat like this, in terms of inference</li>\n</ul>\n</li>\n<li>it actually just returns <code>List</code>, type-erased, so the <code>List&lt;T&gt;</code> is a misnomer\n<ul>\n<li>this makes sense to me, but it's strange that this is an exception case for the compiler and not the first assignment I gave as an example</li>\n</ul>\n</li>\n</ul>\n<p>What exactly is going on here, and why is it okay in this scenario, upon a function return with generics, but not with assignment in general?</p>\n<p>Taking this one step further, how does Java implement and special-case this?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}