{
  "question": {
    "tags": [
      "java",
      "eclipse",
      "jar",
      "log4j2",
      "uberjar"
    ],
    "owner": {
      "account_id": 2296811,
      "reputation": 1313,
      "user_id": 2018059,
      "user_type": "registered",
      "accept_rate": 84,
      "profile_image": "https://i.sstatic.net/tt6Co.jpg?s=256",
      "display_name": "rainbow",
      "link": "https://stackoverflow.com/users/2018059/rainbow"
    },
    "is_answered": true,
    "view_count": 3677,
    "accepted_answer_id": 77792118,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1736078128,
    "creation_date": 1704811519,
    "last_edit_date": 1704842127,
    "question_id": 77787599,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77787599/is-log4j-compatible-with-jdk21",
    "title": "Is log4j compatible with jdk21?",
    "body": "<p>When I try to build with ant single jar file which uses <code>jar-in-jar-loader</code> everything inside looks as expected. The manifest content is</p>\n<pre><code>Manifest-Version: 1.0\nAnt-Version: Apache Ant 1.10.14\nCreated-By: 21+35-LTS-2513 (Oracle Corporation)\nMain-Class: org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader\nRsrc-Main-Class: a.b.MyApp\nMulti-Release: true\nRsrc-Class-Path: ./ lib/log4j/log4j-api-2.22.1.jar lib/log4j/log4j-cor\n e-2.22.1.jar lib/jdatepicker-1.3.4.jar\nClass-Path: .\n</code></pre>\n<p><code>jar-in-jar-loader.zip</code> is generated by eclipse 2023-12 which uses jdk21, all files seems to be in place in myApp.jar<br>\nHowever when I use <code>java -jar myApp.jar</code> I see</p>\n<pre><code>WARNING: Runtime environment or build system does not support multi-release JARs. This will impact location-based features.\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:118)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:62)\nCaused by: java.lang.UnsupportedOperationException: No class provided, and an appropriate one cannot be found.\n        at org.apache.logging.log4j.LogManager.callerClass(LogManager.java:585)\n        at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:610)\n        at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:597)\n        at a.b.log.Log.getLogger(Log.java:48)\n        at a.b.MyApp.handleInputParameters(MyApp.java:97)\n        at a.b.MyApp.main(MyApp.java:33)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n        ... 2 more\n</code></pre>\n<p>When I run the app under eclipse everything works properly.<br>\nIs that means log4j can't be used with jdk21 (I use Oracle version)?<br>\nHow to check it? I tried on log4j web page and I found nothing (especially in changelog). I also tried to downgrade project to jdk17, also nothing.<br>\nHow to solve this problem?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}