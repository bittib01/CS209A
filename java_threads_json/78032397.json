{
  "question": {
    "tags": [
      "java",
      "android",
      "ios",
      "objective-c",
      "react-native"
    ],
    "owner": {
      "account_id": 18411278,
      "reputation": 141,
      "user_id": 13411507,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiTsmuAlHEh5xWFV3ZqjJY2uj3J7WoqxsgE_t9q=k-s256",
      "display_name": "Haris Ahmad",
      "link": "https://stackoverflow.com/users/13411507/haris-ahmad"
    },
    "is_answered": false,
    "view_count": 1611,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1716534733,
    "creation_date": 1708502516,
    "question_id": 78032397,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78032397/react-native-app-size-is-too-large-in-both-ios-and-android-android-bundlereleas",
    "title": "React-Native app size is too large in both ios and android (android bundleRelease size is 283.3MB)",
    "body": "<p>I have a react-native app that I build a week ago, when I checked the app size in android it was initialiy 17MB, and that i supposed is okay, but now when i check my apk size its 638MB and the bundle size is 283.3MB. and the ios app size is 180MB</p>\n<p>the asset size for the app is 3.6MB and overall src where the assets is also located size is 4.7MB which means my code size is 1.1MB</p>\n<p>I haven't added any other libraries, all of the libraries are required for functionality.</p>\n<p>my <strong>package.json</strong> file is here</p>\n<pre><code>  {\n  &quot;name&quot;: &quot;salushealth&quot;,\n  &quot;version&quot;: &quot;1.0.2&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;android&quot;: &quot;react-native run-android&quot;,\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\n    &quot;lint&quot;: &quot;eslint .&quot;,\n    &quot;start&quot;: &quot;react-native start&quot;,\n    &quot;test&quot;: &quot;jest&quot;,\n    &quot;pregit&quot;: &quot;git status&quot;,\n    &quot;git&quot;: &quot;git add . &amp;&amp; git commit -m&quot;,\n    &quot;postgit&quot;: &quot;git push&quot;,\n    &quot;i-15&quot;: &quot;react-native run-ios --simulator='iPhone 15 Pro Max'&quot;,\n    &quot;iPad&quot;: &quot;react-native run-ios --simulator='iPad Pro (12.9-inch) (6th generation)'&quot;,\n    &quot;run-all&quot;: &quot;yarn iPad &amp;&amp; yarn i-15 &amp;&amp; yarn android&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;@apollo/client&quot;: &quot;^3.8.8&quot;,\n    &quot;@preact/signals-react&quot;: &quot;^2.0.0&quot;,\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.19.6&quot;,\n    &quot;@react-native-community/netinfo&quot;: &quot;^11.2.1&quot;,\n    &quot;@react-native-community/slider&quot;: &quot;^4.5.0&quot;,\n    &quot;@react-native-masked-view/masked-view&quot;: &quot;^0.3.0&quot;,\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.5.11&quot;,\n    &quot;@react-navigation/native&quot;: &quot;^6.1.9&quot;,\n    &quot;@react-navigation/native-stack&quot;: &quot;^6.9.17&quot;,\n    &quot;@reduxjs/toolkit&quot;: &quot;^2.0.1&quot;,\n    &quot;@stripe/stripe-react-native&quot;: &quot;0.19.0&quot;,\n    &quot;add&quot;: &quot;^2.0.6&quot;,\n    &quot;axios&quot;: &quot;^1.6.2&quot;,\n    &quot;camelize&quot;: &quot;^1.0.1&quot;,\n    &quot;eslint-plugin-react-hooks&quot;: &quot;^4.6.0&quot;,\n    &quot;formik&quot;: &quot;^2.4.5&quot;,\n    &quot;graphql&quot;: &quot;^16.8.1&quot;,\n    &quot;jsrsasign&quot;: &quot;^11.1.0&quot;,\n    &quot;lottie-react-native&quot;: &quot;^6.5.0&quot;,\n    &quot;moment&quot;: &quot;^2.29.4&quot;,\n    &quot;prop-types&quot;: &quot;^15.8.1&quot;,\n    &quot;react&quot;: &quot;18.2.0&quot;,\n    &quot;react-native&quot;: &quot;0.72.7&quot;,\n    &quot;react-native-calendars&quot;: &quot;^1.1303.0&quot;,\n    &quot;react-native-circular-progress&quot;: &quot;^1.3.9&quot;,\n    &quot;react-native-device-info&quot;: &quot;^10.11.0&quot;,\n    &quot;react-native-dropdown-picker&quot;: &quot;^5.4.6&quot;,\n    &quot;react-native-gifted-charts&quot;: &quot;^1.3.18&quot;,\n    &quot;react-native-gifted-chat&quot;: &quot;^2.4.0&quot;,\n    &quot;react-native-image-crop-picker&quot;: &quot;^0.40.2&quot;,\n    &quot;react-native-linear-gradient&quot;: &quot;^2.8.3&quot;,\n    &quot;react-native-otp-entry&quot;: &quot;^1.4.0&quot;,\n    &quot;react-native-paper&quot;: &quot;^5.11.1&quot;,\n    &quot;react-native-pie-chart&quot;: &quot;^3.0.1&quot;,\n    &quot;react-native-pure-jwt&quot;: &quot;^3.0.2&quot;,\n    &quot;react-native-raw-bottom-sheet&quot;: &quot;^2.2.0&quot;,\n    &quot;react-native-responsive-fontsize&quot;: &quot;^0.5.1&quot;,\n    &quot;react-native-safe-area-context&quot;: &quot;^4.7.4&quot;,\n    &quot;react-native-screens&quot;: &quot;^3.27.0&quot;,\n    &quot;react-native-select-dropdown&quot;: &quot;^3.4.0&quot;,\n    &quot;react-native-skeleton-placeholder&quot;: &quot;^5.2.4&quot;,\n    &quot;react-native-splash-screen&quot;: &quot;^3.3.0&quot;,\n    &quot;react-native-storage&quot;: &quot;^1.0.1&quot;,\n    &quot;react-native-store-version&quot;: &quot;^1.4.1&quot;,\n    &quot;react-native-svg&quot;: &quot;^14.1.0&quot;,\n    &quot;react-native-toast-message&quot;: &quot;^2.1.7&quot;,\n    &quot;react-native-track-player&quot;: &quot;^4.0.1&quot;,\n    &quot;react-native-url-polyfill&quot;: &quot;^2.0.0&quot;,\n    &quot;react-native-vector-icons&quot;: &quot;^10.0.2&quot;,\n    &quot;react-native-zoom-us&quot;: &quot;6.19.6&quot;,\n    &quot;react-redux&quot;: &quot;^9.0.4&quot;,\n    &quot;redux-persist&quot;: &quot;^6.0.0&quot;,\n    &quot;styled-components&quot;: &quot;^6.1.1&quot;,\n    &quot;validator&quot;: &quot;^13.11.0&quot;,\n    &quot;yarn&quot;: &quot;^1.22.21&quot;,\n    &quot;yup&quot;: &quot;^1.3.2&quot;,\n    &quot;yup-password&quot;: &quot;^0.2.2&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;@babel/core&quot;: &quot;^7.20.0&quot;,\n    &quot;@babel/preset-env&quot;: &quot;^7.20.0&quot;,\n    &quot;@babel/runtime&quot;: &quot;^7.20.0&quot;,\n    &quot;@react-native/eslint-config&quot;: &quot;^0.72.2&quot;,\n    &quot;@react-native/metro-config&quot;: &quot;^0.72.11&quot;,\n    &quot;@tsconfig/react-native&quot;: &quot;^3.0.0&quot;,\n    &quot;@types/react&quot;: &quot;^18.0.24&quot;,\n    &quot;@types/react-test-renderer&quot;: &quot;^18.0.0&quot;,\n    &quot;babel-jest&quot;: &quot;^29.2.1&quot;,\n    &quot;babel-plugin-inline-import&quot;: &quot;^3.0.0&quot;,\n    &quot;eslint&quot;: &quot;^8.19.0&quot;,\n    &quot;jest&quot;: &quot;^29.2.1&quot;,\n    &quot;metro-react-native-babel-preset&quot;: &quot;0.76.8&quot;,\n    &quot;prettier&quot;: &quot;^2.4.1&quot;,\n    &quot;react-native-svg-transformer&quot;: &quot;^1.3.0&quot;,\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;,\n    &quot;typescript&quot;: &quot;4.8.4&quot;\n  },\n  &quot;engines&quot;: {\n    &quot;node&quot;: &quot;&gt;=16&quot;\n  }\n}\n</code></pre>\n<p>here is my <strong>app.build.gradle</strong> file</p>\n<pre><code>apply plugin: &quot;com.android.application&quot;\napply plugin: &quot;com.facebook.react&quot;\n\n/**\n * This is the configuration block to customize your React Native Android app.\n * By default you don't need to apply any configuration, just uncomment the lines you need.\n */\nreact {\n    /* Folders */\n    //   The root of your project, i.e. where &quot;package.json&quot; lives. Default is '..'\n    // root = file(&quot;../&quot;)\n    //   The folder where the react-native NPM package is. Default is ../node_modules/react-native\n    // reactNativeDir = file(&quot;../node_modules/react-native&quot;)\n    //   The folder where the react-native Codegen package is. Default is ../node_modules/@react-native/codegen\n    // codegenDir = file(&quot;../node_modules/@react-native/codegen&quot;)\n    //   The cli.js file which is the React Native CLI entrypoint. Default is ../node_modules/react-native/cli.js\n    // cliFile = file(&quot;../node_modules/react-native/cli.js&quot;)\n\n    /* Variants */\n    //   The list of variants to that are debuggable. For those we're going to\n    //   skip the bundling of the JS bundle and the assets. By default is just 'debug'.\n    //   If you add flavors like lite, prod, etc. you'll have to list your debuggableVariants.\n    // debuggableVariants = [&quot;liteDebug&quot;, &quot;prodDebug&quot;]\n\n    /* Bundling */\n    //   A list containing the node command and its flags. Default is just 'node'.\n    // nodeExecutableAndArgs = [&quot;node&quot;]\n    //\n    //   The command to run when bundling. By default is 'bundle'\n    // bundleCommand = &quot;ram-bundle&quot;\n    //\n    //   The path to the CLI configuration file. Default is empty.\n    // bundleConfig = file(../rn-cli.config.js)\n    //\n    //   The name of the generated asset file containing your JS bundle\n    // bundleAssetName = &quot;MyApplication.android.bundle&quot;\n    //\n    //   The entry file for bundle generation. Default is 'index.android.js' or 'SessionCard.js'\n    // entryFile = file(&quot;../js/MyApplication.android.js&quot;)\n    //\n    //   A list of extra flags to pass to the 'bundle' commands.\n    //   See https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle\n    // extraPackagerArgs = []\n\n    /* Hermes Commands */\n    //   The hermes compiler command to run. By default it is 'hermesc'\n    // hermesCommand = &quot;$rootDir/my-custom-hermesc/bin/hermesc&quot;\n    //\n    //   The list of flags to pass to the Hermes compiler. By default is &quot;-O&quot;, &quot;-output-source-map&quot;\n    // hermesFlags = [&quot;-O&quot;, &quot;-output-source-map&quot;]\n}\n\n/**\n * Set this to true to Run Proguard on Release builds to minify the Java bytecode.\n */\ndef enableProguardInReleaseBuilds = false\n\n/**\n * The preferred build flavor of JavaScriptCore (JSC)\n *\n * For example, to use the international variant, you can use:\n * `def jscFlavor = 'org.webkit:android-jsc-intl:+'`\n *\n * The international variant includes ICU i18n library and necessary data\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\n * give correct results when using with locales other than en-US. Note that\n * this variant is about 6MiB larger per architecture than default.\n */\ndef jscFlavor = 'org.webkit:android-jsc:+'\n\nandroid {\n    ndkVersion rootProject.ext.ndkVersion\n\n    compileSdkVersion rootProject.ext.compileSdkVersion\n\n    namespace &quot;com.salus.health&quot;\n    defaultConfig {\n        applicationId &quot;com.salus.health&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 4\n        versionName &quot;1.0.2&quot;\n    }\n    signingConfigs {\n        release {\n            if (project.hasProperty('MYAPP_UPLOAD_STORE_FILE')) {\n                storeFile file(MYAPP_UPLOAD_STORE_FILE)\n                storePassword MYAPP_UPLOAD_STORE_PASSWORD\n                keyAlias MYAPP_UPLOAD_KEY_ALIAS\n                keyPassword MYAPP_UPLOAD_KEY_PASSWORD\n            }\n        }\n        debug {\n            storeFile file('debug.keystore')\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n    }\n    buildTypes {\n        debug {\n            signingConfig signingConfigs.debug\n        }\n        release {\n            // Caution! In production, you need to generate your own keystore file.\n            // see https://reactnative.dev/docs/signed-apk-android.\n            signingConfig signingConfigs.release\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\n        }\n    }\n}\n\ndependencies {\n    // The version of react-native is set by the React Native Gradle Plugin\n    implementation(&quot;com.facebook.react:react-android&quot;)\n\n    debugImplementation(&quot;com.facebook.flipper:flipper:${FLIPPER_VERSION}&quot;)\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:${FLIPPER_VERSION}&quot;) {\n        exclude group:'com.squareup.okhttp3', module:'okhttp'\n    }\n\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:${FLIPPER_VERSION}&quot;)\n    if (hermesEnabled.toBoolean()) {\n        implementation(&quot;com.facebook.react:hermes-android&quot;)\n    } else {\n        implementation jscFlavor\n    }\n}\n\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\napply from: file(&quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;)\n</code></pre>\n<p>here is my Podfile</p>\n<pre><code># Resolve react_native_pods.rb with node to allow for hoisting\nrequire Pod::Executable.execute_command('node', ['-p',\n  'require.resolve(\n    &quot;react-native/scripts/react_native_pods.rb&quot;,\n    {paths: [process.argv[1]]},\n  )', __dir__]).strip\n\nplatform :ios, min_ios_version_supported\nprepare_react_native_project!\n\n# If you are using a `react-native-flipper` your iOS build will fail when `NO_FLIPPER=1` is set.\n# because `react-native-flipper` depends on (FlipperKit,...) that will be excluded\n#\n# To fix this you can also exclude `react-native-flipper` using a `react-native.config.js`\n# ```js\n# module.exports = {\n#   dependencies: {\n#     ...(process.env.NO_FLIPPER ? { 'react-native-flipper': { platforms: { ios: null } } } : {}),\n# ```\nflipper_config = ENV['NO_FLIPPER'] == &quot;1&quot; ? FlipperConfiguration.disabled : FlipperConfiguration.enabled\n\nlinkage = ENV['USE_FRAMEWORKS']\nif linkage != nil\n  Pod::UI.puts &quot;Configuring Pod with #{linkage}ally linked Frameworks&quot;.green\n  use_frameworks! :linkage =&gt; linkage.to_sym\nend\n\ntarget 'SalusHealth' do\n  config = use_native_modules!\n\n  # Flags change depending on the env values.\n  flags = get_default_flags()\n\n  use_react_native!(\n    :path =&gt; config[:reactNativePath],\n    # Hermes is now enabled by default. Disable by setting this flag to false.\n    :hermes_enabled =&gt; flags[:hermes_enabled],\n    :fabric_enabled =&gt; flags[:fabric_enabled],\n    # Enables Flipper.\n    #\n    # Note that if you have use_frameworks! enabled, Flipper will not work and\n    # you should disable the next line.\n    :flipper_configuration =&gt; flipper_config,\n    # An absolute path to your application root.\n    :app_path =&gt; &quot;#{Pod::Config.instance.installation_root}/..&quot;\n  )\n\n  target 'SalusHealthTests' do\n    inherit! :complete\n    # Pods for testing\n  end\n\n  post_install do |installer|\n    # https://github.com/facebook/react-native/blob/main/packages/react-native/scripts/react_native_pods.rb#L197-L202\n    react_native_post_install(\n      installer,\n      config[:reactNativePath],\n      :mac_catalyst_enabled =&gt; false\n    )\n    __apply_Xcode_12_5_M1_post_install_workaround(installer)\n  end\nend\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}