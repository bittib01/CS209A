{
  "question": {
    "tags": [
      "java",
      "json",
      "jackson",
      "json-deserialization",
      "jsonserializer"
    ],
    "owner": {
      "account_id": 7537904,
      "reputation": 1823,
      "user_id": 5723609,
      "user_type": "registered",
      "accept_rate": 65,
      "profile_image": "https://i.sstatic.net/zsoe5.jpg?s=256",
      "display_name": "Guo",
      "link": "https://stackoverflow.com/users/5723609/guo"
    },
    "is_answered": false,
    "view_count": 66,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1750852879,
    "creation_date": 1750562944,
    "question_id": 79674867,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79674867/how-does-a-custom-jsonserializer-concat-multiple-fields-into-a-single-string-us",
    "title": "How does a custom JsonSerializer concat multiple fields into a single string, using each field&#39;s own serializer during the concatenation in Jackson?",
    "body": "<p>I am learning to use Jackson's custom <strong>serialization</strong> and <strong>deserialization</strong> capabilities to handle the <code>DatePair</code> class. I hope to concatenate the fields of <code>DatePair</code> into a single string.<br />\nHere is a <strong>MCVE</strong> code:<br />\n<code>DatePair</code> is a <strong>unmodifiable</strong> class within a third-party library:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport lombok.Data;\nimport java.util.Date;\n\n@Data\npublic class DatePair {\n    Date date1;\n    Date date2;\n}\n</code></pre>\n<p>My example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport com.fasterxml.jackson.annotation.JsonFormat;\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport lombok.Data;\n\nimport java.io.IOException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\n\n@Data\npublic class Example {\n\n    @Data\n    public static class Model1 {\n        @JsonFormat(pattern = &quot;yyyy/MM/dd HH:mm:ss.SSS&quot;, timezone = &quot;GMT+2&quot;)\n        DatePair datePair;\n    }\n\n    public static class DatePairJsonSerializer extends JsonSerializer&lt;DatePair&gt; {\n        @Override\n        public void serialize(DatePair value, JsonGenerator gen, SerializerProvider serializers) throws IOException {\n            gen.writeRaw(&quot;(&quot;);\n            serializers.defaultSerializeValue(value.date1, gen);\n            gen.writeRaw(&quot;, &quot;);\n            /*\n             When serialize Model1\n             will throw JsonGenerationException: Can not write a string, expecting field name (context: Object)\n             */\n            serializers.defaultSerializeValue(value.date2, gen);\n            gen.writeRaw(&quot;)&quot;);\n        }\n    }\n\n    public static void main(String[] args) {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.setDateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;));\n        SimpleModule simpleModule = new SimpleModule();\n        simpleModule.addSerializer(DatePair.class, new DatePairJsonSerializer());\n        mapper.registerModule(simpleModule);\n\n        DatePair datePair = new DatePair();\n        datePair.setDate1(new Date());\n        datePair.setDate2(new Date());\n\n        Model1 model1 = new Model1();\n        model1.setDatePair(datePair);\n        try {\n            /*\n             serialize  DatePair\n             */\n            String json = mapper.writeValueAsString(datePair);\n            System.out.println(json);   // output: (&quot;2025-06-22 10:02:48&quot;,  &quot;2025-06-22 10:02:48&quot;)\n\n            /*\n             serialize  Model1\n             will throw JsonGenerationException: Can not write a string, expecting field name (context: Object)\n             */\n            json = mapper.writeValueAsString(model1);       // expected output:    {&quot;datePair&quot;: &quot;(2025/06/22 10:02:48.000,  2025/06/22 10:02:48.000)&quot;}\n            System.out.println(json);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n\n</code></pre>\n<p>dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.18.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I encountered some issues:</p>\n<ol>\n<li>When serializing <code>DatePair</code> alone, I want the output <code>Date</code> to ​​not have quotes​​, like: <code>(2025-06-22 10:02:48, 2025-06-22 10:02:48)</code>, instead of <code>(&quot;2025-06-22 10:02:48&quot;, &quot;2025-06-22 10:02:48&quot;)</code></li>\n<li>When serializing <code>Model1</code>, I want <code>@JsonFormat</code> applied to the <code>date</code> fields in <code>DatePair</code></li>\n<li>Current serialization of <code>Model1</code> throws errors. How to resolve?</li>\n<li>Could you provide a deserialization example matching the serialization logic?</li>\n</ol>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}