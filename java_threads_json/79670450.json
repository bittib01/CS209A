{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-ai",
      "model-context-protocol"
    ],
    "owner": {
      "account_id": 36847666,
      "reputation": 11,
      "user_id": 27949630,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b2062bda8e2b91b10405cf7c946a567e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Abhijith G",
      "link": "https://stackoverflow.com/users/27949630/abhijith-g"
    },
    "is_answered": false,
    "view_count": 725,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1752335382,
    "creation_date": 1750242393,
    "question_id": 79670450,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79670450/how-to-get-sessionid-spring-boot-mcp-server-mcp-messagesessionid-63bb3566-bd1d",
    "title": "How to get sessionId Spring Boot MCP server /mcp/message?sessionId=63bb3566-bd1d-4315-a5ba-761d794714ee) and pass it to (@Tool) tool execution logic?",
    "body": "<p>I am currently developing an MCP Server using Spring AI. I have defined tools using the @Tool annotation and integrated them with Claude/Copilot.</p>\n<p>The issue I'm facing is: I want to uniquely identify users using a sessionId for login and authentication logic. This sessionId is passed as a query parameter in the request URL like:</p>\n<p>POST /mcp/message?sessionId=<strong>63bb3566-bd1d-4315-a5ba-761d794714ee</strong>\nI need to extract this sessionId and pass it into the tool function.</p>\n<p>I tried using ThreadLocal and RequestContextHolder to access the HttpServletRequest and extract the sessionId, but it doesnâ€™t work because the tool execution happens in a separate thread, and the context is lost.</p>\n<p>What I need:\nA reliable way to extract the sessionId from the query param in the /mcp/message endpoint.</p>\n<p>Ensure the sessionId is available inside the @Tool function, even when tool execution is asynchronous or handled in a different thread.</p>\n<p>Please suggest a proper solution or design pattern for passing this context value (like sessionId) across threads and into the tool logic in Spring AI.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}