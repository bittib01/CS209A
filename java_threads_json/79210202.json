{
  "question": {
    "tags": [
      "java",
      "json",
      "fastjson"
    ],
    "owner": {
      "account_id": 83889,
      "reputation": 26930,
      "user_id": 234901,
      "user_type": "registered",
      "accept_rate": 97,
      "profile_image": "https://www.gravatar.com/avatar/5d95dbec709c9c45e9fc325e750cdcdd?s=256&d=identicon&r=PG",
      "display_name": "Enno Shioji",
      "link": "https://stackoverflow.com/users/234901/enno-shioji"
    },
    "is_answered": false,
    "view_count": 78,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1732285128,
    "creation_date": 1732176058,
    "last_edit_date": 1732285128,
    "question_id": 79210202,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79210202/how-to-ask-fastjson2-to-deserialize-decimal-int-array-as-primitive-array-not-li",
    "title": "How to ask fastjson2 to deserialize decimal/int array as primitive array (not list of boxed numbers)",
    "body": "<p>Is it possible to have fastjson2 deserialize a JSON array into a primitive array of float/ints? Ideally without boxing/unboxing the numbers.</p>\n<p>I found that there is a option <code>JSONReader.Feature.UseDoubleForDecimals</code> which gets me half way there, but I can't figure out how to have it use primitive arrays instead of <code>List&lt;Integer&gt;</code> etc.</p>\n<p>It must use fastjson2 (so using Jackson is not an option).</p>\n<p>This code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void test() {\n    enum TestEnum {\n        A, B, C\n    }\n    // Prepare data\n    Map&lt;TestEnum, Object&gt; testData = Map.of(\n            TestEnum.A, &quot;test&quot;,\n            TestEnum.B, new String[]{&quot;test1&quot;, &quot;test2&quot;},\n            TestEnum.C, new float[]{1.0f, 2.0f, 3.0f}\n    );\n\n    // Serialize\n    String serialized = JSON.toJSONString(testData);\n    System.out.println(&quot;Serialized: &quot; + serialized);\n\n    JSONObject read = JSON.parseObject(serialized, JSONReader.Feature.UseDoubleForDecimals);\n    for (Map.Entry&lt;String, Object&gt; stringObjectEntry : read.entrySet()) {\n        System.out.println(stringObjectEntry.getKey() + &quot; &quot; + stringObjectEntry.getValue().getClass() + &quot; &quot; + (stringObjectEntry.getValue() instanceof List));\n    }\n    System.out.println(read);\n}\n</code></pre>\n<p>Prints:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Serialized: {&quot;A&quot;:&quot;test&quot;,&quot;C&quot;:[1.0,2.0,3.0],&quot;B&quot;:[&quot;test1&quot;,&quot;test2&quot;]}\nA class java.lang.String false\nC class com.alibaba.fastjson2.JSONArray true\nB class com.alibaba.fastjson2.JSONArray true\n{&quot;A&quot;:&quot;test&quot;,&quot;C&quot;:[1.0,2.0,3.0],&quot;B&quot;:[&quot;test1&quot;,&quot;test2&quot;]}\n</code></pre>\n<p>But I want it to use <code>float[]</code> for the key TestEnum.C when it's deserialized, not <code>JSONArray</code> (<code>List</code>).</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}