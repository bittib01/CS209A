{
  "question": {
    "tags": [
      "java",
      "json",
      "jackson"
    ],
    "owner": {
      "account_id": 3741438,
      "reputation": 12761,
      "user_id": 3111149,
      "user_type": "registered",
      "accept_rate": 87,
      "profile_image": "https://i.sstatic.net/ez4Kx.png?s=256",
      "display_name": "Matteo NNZ",
      "link": "https://stackoverflow.com/users/3111149/matteo-nnz"
    },
    "is_answered": true,
    "view_count": 51,
    "accepted_answer_id": 79014015,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1727087322,
    "creation_date": 1727082152,
    "last_edit_date": 1727087322,
    "question_id": 79013912,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79013912/how-can-i-recognise-undeclared-primitives-with-jackson",
    "title": "How can I recognise undeclared primitives with Jackson?",
    "body": "<p>I have the following Jackson class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class InspectArrayFormulaArgs {\n\n    private final int expectedColumns;\n\n    @JsonCreator\n    public InspectArrayFormulaArgs(@JsonProperty(value = &quot;expectedColumns&quot;, defaultValue = &quot;-1&quot;) int expectedColumns) {\n        this.expectedColumns = expectedColumns;\n    }\n\n}\n</code></pre>\n<p>I would expect Jackson to check whether the parsed Json contains the field <code>expectedColumns</code>, and:</p>\n<ul>\n<li>If the field is there, take it as is</li>\n<li>Else, use the <code>defaultValue</code> that I declared</li>\n</ul>\n<p>However, the value parsed by Jackson is still <code>0</code> when this pojo is parsed.</p>\n<p>I've thought it may be due to the fact that the JDK initialises an <code>int</code> as 0 and Jackson doesn't understand the field is not in the Json (even though I thought they were parsing the Json directly).</p>\n<p>So I've tried to use <code>Integer</code> instead of <code>int</code> as a parameter for the constructor, but this ends up into a <code>NullPointerException</code> because Jackson doesn't assign the value <code>-1</code> and so the JDK tries an unboxing of <code>null</code> into the field <code>int expectedColumns</code>.</p>\n<p>Any idea on how I should do this?</p>\n<p>Notes:</p>\n<ol>\n<li>I've tried annotating the class with <code>@JsonInclude(JsonInclude.Include.NON_DEFAULT)</code> but it didn't change anything</li>\n<li>I assume I may declare the field as being an <code>Integer</code> instead of <code>int</code>, but Jackson still leaves it as <code>null</code> (doesn't assign <code>-1</code>) and I wanted to avoid doing checks on my side such as <code>value != null ? value : -1</code>. Of course I'll do that if no solution, but I find it strange that Jackson is uncapable to understand what I'm asking so I'm wondering whether it's me asking it the wrong way</li>\n</ol>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}