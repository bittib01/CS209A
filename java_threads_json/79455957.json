{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "encryption",
      "couchbase"
    ],
    "owner": {
      "account_id": 1936854,
      "reputation": 159,
      "user_id": 1744110,
      "user_type": "registered",
      "accept_rate": 75,
      "profile_image": "https://www.gravatar.com/avatar/23a7713ea13fc5696ed60a8a7b6b9162?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Colin Schofield",
      "link": "https://stackoverflow.com/users/1744110/colin-schofield"
    },
    "is_answered": true,
    "view_count": 87,
    "accepted_answer_id": 79464641,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1750647474,
    "creation_date": 1740089803,
    "question_id": 79455957,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79455957/field-level-encryption-in-couchbase-db",
    "title": "Field Level Encryption in Couchbase DB",
    "body": "<p>I have followed the [documentation][1] and I cannot get <strong>FLE</strong> to work in my SpringBoot Java application..</p>\n<p>Whenever I attempt to use an <code>@Encrypted</code> annotation, it responds with the following Exception:</p>\n<p><code>Request processing failed: java.lang.IllegalArgumentException: cryptoManager needed to encrypt/decrypt but it is null. Override needed for cryptoManager() method of org.springframework.data.couchbase.core.convert.AbstractCouchbaseConverter</code></p>\n<p>Code is shown below:</p>\n<pre><code>@Configuration\n@EnableCouchbaseRepositories(&quot;my.repo.under.here&quot;)\npublic class EncryptionConfig extends AbstractCouchbaseConfiguration {\n\n        // Usual Setup\n        @Override public String getConnectionString() { return &quot;localhost&quot;; }\n        @Override public String getUserName() { return &quot;Administrator&quot;; }\n        @Override public String getPassword() { return &quot;admin123&quot;; }\n        @Override public String getBucketName() { return &quot;my_bucket&quot;; }\n\n        /* provide a cryptoManager */\n        @Override\n        protected CryptoManager cryptoManager() {\n            try {\n                // Load the Java KeyStore\n                KeyStore keyStore = KeyStore.getInstance(&quot;JCEKS&quot;);\n                FileInputStream keyStoreStream = new FileInputStream(&quot;/Users/asd1983/my-keystore.jceks&quot;);\n                keyStore.load(keyStoreStream, &quot;test123&quot;.toCharArray());\n\n                // Initialize the Keyring with the KeyStore\n                Keyring keyring = new KeyStoreKeyring(keyStore, alias -&gt; &quot;keypassword&quot;);\n\n                // AES-256 authenticated with HMAC SHA-512. Requires a 64-byte key.\n                AeadAes256CbcHmacSha512Provider provider = AeadAes256CbcHmacSha512Provider.builder().keyring(keyring).build();\n\n                CryptoManager cryptoManager = DefaultCryptoManager.builder().decrypter(provider.decrypter())\n                        .defaultEncrypter(provider.encrypterForKey(&quot;my-key&quot;)).build();\n\n                return cryptoManager;\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n    }\n}\n</code></pre>\n<pre><code>@Document\npublic class Data {\n  @Id\n  private String id;\n  @Encrypted\n  private String password;\n}\n</code></pre>\n<pre><code>package my.repo.under.here;\n\n@Repository\npublic interface DataRepository extends CouchbaseRepository&lt;Data, String&gt; { }\n\n\n  [1]: https://docs.spring.io/spring-data/couchbase/reference/couchbase/fieldlevelencryption.html\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}