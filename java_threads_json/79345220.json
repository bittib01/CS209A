{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "ssl",
      "spring-resttemplate"
    ],
    "owner": {
      "account_id": 4597208,
      "reputation": 53493,
      "user_id": 3728901,
      "user_type": "registered",
      "accept_rate": 58,
      "profile_image": "https://www.gravatar.com/avatar/8621a1f0563a46ea809098b960d7923f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Vy Do",
      "link": "https://stackoverflow.com/users/3728901/vy-do"
    },
    "is_answered": true,
    "view_count": 3819,
    "accepted_answer_id": 79345303,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1744341408,
    "creation_date": 1736501753,
    "last_edit_date": 1744341408,
    "question_id": 79345220,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79345220/spring-boot-3-4-new-feature-how-to-config-sslbundle-works-with-restclient",
    "title": "Spring Boot 3.4 new feature : How to config SSLBundle works with RestClient?",
    "body": "<p>I am using Spring Boot 3.4.1 , JDK 23, MySQL 9. I am excited with new feature <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestClient.html\" rel=\"nofollow noreferrer\">RestClient</a> inside new Spring Framework version . I can done mutualTLS with RestTemplate without any concern, now I want experience very new feature RestClient in context of SSLBundle (or if cannot, use SSLContext).</p>\n<p>File <code>application.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8001\n  ssl:\n      bundle: bar\n      client-auth: NEED\n      enabled: true\nspring:\n    datasource:\n        driver-class-name: com.mysql.cj.jdbc.Driver\n        url: jdbc:mysql://localhost:3306/fuu001?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\n        username: ggAABB\n        password: fg33435\n    ssl:\n        bundle:\n            jks:\n                foo:\n                    keystore:\n                        location: C:\\\\ssl\\\\server-identity.p12\n                        password: fdfd\n                        type: PKCS12\n                    truststore:\n                        location: C:\\\\ssl\\\\server-truststore.p12\n                        password: fg54533\n                        type: PKCS12\n                    reload-on-update: true\n                bar:\n                    keystore:\n                        location: C:\\\\ssl\\\\client-identity.p12\n                        password: dfdsfs\n                        type: PKCS12\n                    truststore:\n                        location: C:\\\\ssl\\\\client-truststore.p12\n                        password: 4573d@\n                        type: PKCS12\n                    reload-on-update: true\n    jpa:\n        hibernate:\n          ddl-auto: create-drop\n        properties:\n          hibernate:\n              format_sql: true\n        show-sql: true\n#    security:\n#      user:\n#          name: user\n#          password: g5643544\n</code></pre>\n<p>File <code>CallFooService.java</code> has content</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.client.RestClient;\nimport org.springframework.web.client.RestTemplate;\n\nimport java.util.Map;\n\n@Service\npublic class CallFooService {\n\n    @Autowired\n    private RestTemplate restTemplate;\n\n    public void testMethod(){\n        String response = restTemplate.getForObject(&quot;https://localhost:8001/user&quot;, String.class);\n        System.out.println(&quot;response = &quot; + response);\n\n        String response2 = restTemplate.getForObject(&quot;https://localhost:8002/user&quot;, String.class);\n        System.out.println(&quot;response2 = &quot; + response2);\n\n\n        RestClient defaultClient = RestClient.create();\n\n        RestClient customClient = RestClient.builder()\n                .requestFactory(new HttpComponentsClientHttpRequestFactory()) // I want inject SSLBundle or SSL Context at here or something else.\n                .messageConverters(converters -&gt; converters.add(null))\n                .baseUrl(&quot;https://example.com&quot;)\n                .defaultUriVariables(Map.of(&quot;variable&quot;, &quot;foo&quot;))\n                .defaultHeader(&quot;My-Header&quot;, &quot;Foo&quot;)\n                .defaultCookie(&quot;My-Cookie&quot;, &quot;Bar&quot;)\n                .requestInterceptor(null)\n                .requestInitializer(null)\n                  // I want inject SSLBundle or SSL Context at here or something else.\n                .build();\n    }\n\n}\n\n</code></pre>\n<p>Spring Boot 3.4.1 : How to config SSLBundle works with RestClient?</p>\n<p>Related:</p>\n<ul>\n<li><p><a href=\"https://spring.io/blog/2023/07/13/new-in-spring-6-1-restclient\" rel=\"nofollow noreferrer\">https://spring.io/blog/2023/07/13/new-in-spring-6-1-restclient</a></p>\n</li>\n<li><p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.4-Release-Notes#upgrading-from-spring-boot-33\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.4-Release-Notes#upgrading-from-spring-boot-33</a></p>\n</li>\n<li><p><a href=\"https://docs.spring.io/spring-framework/reference/integration/rest-clients.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/reference/integration/rest-clients.html</a></p>\n</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}