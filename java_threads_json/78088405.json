{
  "question": {
    "tags": [
      "java",
      "clipboard"
    ],
    "owner": {
      "account_id": 30665969,
      "reputation": 1,
      "user_id": 23509535,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/026ad6508cc71ee29437e94872529970?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "LemonTree",
      "link": "https://stackoverflow.com/users/23509535/lemontree"
    },
    "is_answered": false,
    "view_count": 125,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1715273699,
    "creation_date": 1709302850,
    "question_id": 78088405,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78088405/how-to-copy-images-and-text-to-clipboard-at-the-same-time",
    "title": "How to copy images and text to clipboard at the same time",
    "body": "<p>i need to copy a <code>Image</code> object and a <code>String</code> object to clipboard like this:<a href=\"https://i.sstatic.net/gFEHT.png\" rel=\"nofollow noreferrer\">Paste pictures and text at the same time</a>, but i can only copy texts or images.</p>\n<p>i have already read <a href=\"https://stackoverflow.com/questions/6091178\">how to copy image and text to clipboard using Java?</a> and <a href=\"http://www.coderanch.com/t/345580/GUI/java/Cut-copying-pasting-custom-object\" rel=\"nofollow noreferrer\">http://www.coderanch.com/t/345580/GUI/java/Cut-copying-pasting-custom-object</a>, but it did not solve my problem.</p>\n<p>by search on google, i only got the following code:</p>\n<pre><code>public class ClipboardTest {\n    public static void main(String[] args) throws IOException {\n        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n        Image image = ImageIO.read(new File(&quot;D:\\\\文件\\\\java\\\\BParser\\\\src\\\\test\\\\java\\\\icon.png&quot;));\n        String text = &quot;Hello world&quot;;\n        Transferable transferable = new Transferable() {\n            @Override\n            public DataFlavor[] getTransferDataFlavors() {\n                return new DataFlavor[] {DataFlavor.imageFlavor, DataFlavor.stringFlavor};\n            }\n\n            @Override\n            public boolean isDataFlavorSupported(DataFlavor flavor) {\n                return false;\n            }\n\n            @Override\n            public @NotNull Object getTransferData(DataFlavor dataFlavor) {\n                if(dataFlavor.equals(DataFlavor.imageFlavor)) {\n                    return image;\n                } else if(dataFlavor.equals(DataFlavor.stringFlavor)) {\n                    return text;\n                }\n                return image;\n            }\n        };\n        \n        clipboard.setContents(transferable, null);\n    }\n}\n</code></pre>\n<p>and i got these outputs:</p>\n<pre><code>java.io.IOException: Registered service providers failed to encode BufferedImage@6108b2d7: type = 6 ColorModel: #pixelBits = 32 numComponents = 4 color space = java.awt.color.ICC_ColorSpace@246ae04d transparency = 3 has alpha = true isAlphaPre = false ByteInterleavedRaster: width = 32 height = 33 #numDataElements 4 dataOff[0] = 3 to image/jpeg\n    at java.desktop/sun.awt.datatransfer.DataTransferer.imageToStandardBytesImpl(DataTransferer.java:1802)\n    at java.desktop/sun.awt.datatransfer.DataTransferer.imageToStandardBytes(DataTransferer.java:1716)\n    at java.desktop/sun.awt.windows.WDataTransferer.imageToPlatformBytes(WDataTransferer.java:353)\n    at java.desktop/sun.awt.datatransfer.DataTransferer.translateTransferable(DataTransferer.java:855)\n    at java.desktop/sun.awt.windows.WDataTransferer.translateTransferable(WDataTransferer.java:220)\n    at java.desktop/sun.awt.windows.WClipboard.setContentsNative(WClipboard.java:83)\n    at java.desktop/sun.awt.datatransfer.SunClipboard.setContents(SunClipboard.java:105)\n    at ClipboardTest.main(ClipboardTest.java:41)\n\n进程已结束，退出代码为 0\n\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}