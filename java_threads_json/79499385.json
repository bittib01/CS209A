{
  "question": {
    "tags": [
      "java",
      "sql",
      "spring",
      "spring-boot",
      "jpa"
    ],
    "owner": {
      "account_id": 467793,
      "reputation": 1343,
      "user_id": 873393,
      "user_type": "registered",
      "accept_rate": 45,
      "profile_image": "https://www.gravatar.com/avatar/7316c08303e3f311c7406ea9f47ca353?s=256&d=identicon&r=PG",
      "display_name": "ilaunchpad",
      "link": "https://stackoverflow.com/users/873393/ilaunchpad"
    },
    "is_answered": true,
    "view_count": 151,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1742445198,
    "creation_date": 1741650269,
    "last_edit_date": 1741650816,
    "question_id": 79499385,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79499385/using-jpa-with-java-spring-boot-having-issue-with-optional-parameter-jdbc-coul",
    "title": "Using JPA with Java Spring Boot. Having Issue with optional parameter. JDBC could not determine data type",
    "body": "<p>As stated in the title, I'm facing this issue when optional paramter(endDate) is null. It doesn't throw any error when both parameters are provided. I tried usin cast null as timestamp with time zone, cast as timestamp to both params in the query and it throws the same error. Please advise.</p>\n<pre><code>@Query(&quot;&quot;&quot;\nSELECT sets.companyId, COUNT(sets)\nFROM WarehouseSetsEntity sets\nWHERE (:endDate IS NULL AND sets.importDate &gt;= :beginDate)\nOR (:endDate  IS NOT NULL AND sets.importDate BETWEEN :beginDate  AND :endDate)\nGROUP BY sets.companyId&quot;&quot;&quot;)\nList&lt;Object[]&gt; fetchCompanyByDateRange(@Param(&quot;beginDate&quot;)  OffsetDateTime beginDate,  @ Param(&quot;endDate&quot;) @NullableOffsetDateTime endDate);\n</code></pre>\n<pre><code>Error:org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [select wse1_0.companyid,count(wse1_0.setid) from sets wse1_0 where (coalesce(?,'1970-01-01T00 00:00Z') is null and wse1_0.import_date&gt;=?) or (? is not null and wse1_0.import_date between ? and ?) group by wse1_0.companyid] [ERROR: could not determine data type of parameter $3] [n/a]; SQL [n/a]\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}