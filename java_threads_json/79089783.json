{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-mvc"
    ],
    "owner": {
      "account_id": 15236140,
      "reputation": 3,
      "user_id": 10993736,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/2a19b226bad4d37522c4c5c87ff4e8ce?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Ganiel24",
      "link": "https://stackoverflow.com/users/10993736/ganiel24"
    },
    "is_answered": false,
    "view_count": 226,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1729765854,
    "creation_date": 1728993008,
    "last_edit_date": 1729765854,
    "question_id": 79089783,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79089783/servlet-dispatcherservlet-in-context-with-path-threw-exception-circular-vi",
    "title": "servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [login]",
    "body": "<p>I am new to spring boot but I am trying to compile and run an old spring boot java code which is throwing the following error:</p>\n<blockquote>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [login]: would dispatch back to the current handler URL [/login] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause</p>\n</blockquote>\n<p>My login.jsp is as follows:</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot; %&gt;\n\n&lt;%@ include file=&quot;/WEB-INF/jsp/include/taglibs.jsp&quot; %&gt;\n\n&lt;c:url value=&quot;/login&quot; var=&quot;loginUrl&quot;/&gt;\n&lt;form action=&quot;${loginUrl}&quot; method=&quot;post&quot;&gt;\n    &lt;p&gt;\n        &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot;/&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;\n        &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot;/&gt;\n    &lt;/p&gt;\n    &lt;input type=&quot;hidden&quot;\n        name=&quot;${_csrf.parameterName}&quot;\n        value=&quot;${_csrf.token}&quot;/&gt;\n    &lt;button type=&quot;submit&quot; class=&quot;btn&quot;&gt;Log in&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n<p>and my WebSecurityConfig.java is as follows:</p>\n<pre><code>package elements.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.crypto.password.NoOpPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    private final PasswordEncoder passwordEncoder;\n\n    @Autowired\n    public WebSecurityConfig(PasswordEncoder passwordEncoder) {\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n            .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .permitAll()\n                .and()\n            .logout()\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n                .logoutSuccessUrl(&quot;/login&quot;);\n        return http.build();\n    }\n\n    @Bean\n    public InMemoryUserDetailsManager userDetailsService(PasswordEncoder encoder) {\n        var usr1 = User.builder()\n            .username(&quot;user1ka&quot;)\n            .password(encoder.encode(&quot;y445uri125&quot;))\n            .roles(&quot;USER&quot;)\n            .build();\n        var usr2 = User.builder()\n            .username(&quot;user2ka&quot;)\n            .password(encoder.encode(&quot;sa678sha769&quot;))\n            .roles(&quot;USER&quot;)\n            .build();\n        return new InMemoryUserDetailsManager(usr1, usr2);\n    }\n}\n</code></pre>\n<p>and my loginController.java is as follows:</p>\n<pre><code>package elements.controllers;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\n@Controller\npublic class LoginController {\n\n    @RequestMapping(\n            value = &quot;/login&quot;,\n            method = {RequestMethod.GET, RequestMethod.POST})\n    public String login() {\n        return &quot;login&quot;;\n    }\n\n}\n</code></pre>\n<p>what is causing the above error and how to resolve it?</p>\n<p>I have now updated the code in line with @M.Deinum's response as follows:</p>\n<pre><code>package elements.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests()\n                .requestMatchers(&quot;/error&quot;).permitAll() // Allow access to /error without authentication\n                .anyRequest().authenticated()\n                .and()\n            .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .permitAll()\n                .and()\n            .logout()\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n                .logoutSuccessUrl(&quot;/login&quot;);\n        return http.build();\n    }\n\n    @Bean\n    public InMemoryUserDetailsManager userDetailsService() {\n        var usr1 = User.builder()\n            .username(&quot;user1ka&quot;)\n            .password(&quot;y445uri125&quot;)\n            .roles(&quot;USER&quot;)\n            .build();\n        var usr2 = User.builder()\n            .username(&quot;user2ka&quot;)\n            .password(&quot;sa678sha769&quot;)\n            .roles(&quot;USER&quot;)\n            .build();\n        return new InMemoryUserDetailsManager(usr1, usr2);\n    }\n}\n</code></pre>\n<p>Unfortunately the issue still persist and some of the useful DEBUG logging is as follows:</p>\n<pre><code>2024-10-15 21:51:49.306 [main] INFO  elements.config.WebApplication - Started WebApplication in 12.548 seconds (process running for 14.262)\n2024-10-15 21:51:49.561 [main] DEBUG o.s.b.a.ApplicationAvailabilityBean - Application availability state LivenessState changed to CORRECT\n2024-10-15 21:51:49.583 [main] DEBUG o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed to ACCEPTING_TRAFFIC\n2024-10-15 21:52:00.111 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'\n2024-10-15 21:52:00.112 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'\n2024-10-15 21:52:00.112 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver\n2024-10-15 21:52:00.112 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver\n2024-10-15 21:52:00.112 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver\n2024-10-15 21:52:00.113 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@70047c84\n2024-10-15 21:52:00.113 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@a489205\n2024-10-15 21:52:00.115 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\n2024-10-15 21:52:00.116 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms\n2024-10-15 21:52:00.242 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login\n2024-10-15 21:52:00.314 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login\n2024-10-15 21:52:00.319 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET &quot;/login&quot;, parameters={}\n2024-10-15 21:52:00.323 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to elements.controllers.LoginController#login()\n2024-10-15 21:52:00.391 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/png, image/svg+xml, application/xml;q=0.9, */*;q=0.8]\n2024-10-15 21:52:00.392 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - View name [login], model {}\n2024-10-15 21:52:00.394 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.springframework.web.servlet.view.InternalResourceView: name [login]; URL [login]]\njakarta.servlet.ServletException: Circular view path [login]: would dispatch back to the current handler URL [/login] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)\n.\n.\n.\n2024-10-15 21:52:00.417 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: jakarta.servlet.ServletException: Circular view path [login]: would dispatch back to the current handler URL [/login] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)\n2024-10-15 21:52:00.419 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext\n2024-10-15 21:52:00.422 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [login]: would dispatch back to the current handler URL [/login] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause\njakarta.servlet.ServletException: Circular view path [login]: would dispatch back to the current handler URL [/login] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)\n</code></pre>\n<p>Thank you so much for all your help, this is much appreciated.</p>\n<p>My login.jsp file is as follows:</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot; %&gt;\n\n&lt;%@ include file=&quot;/WEB-INF/jsp/include/taglibs.jsp&quot; %&gt;\n\n&lt;c:url value=&quot;/login&quot; var=&quot;loginUrl&quot;/&gt;\n&lt;form action=&quot;${loginUrl}&quot; method=&quot;post&quot;&gt;\n    &lt;p&gt;\n        &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot;/&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;\n        &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot;/&gt;\n    &lt;/p&gt;\n    &lt;input type=&quot;hidden&quot;\n        name=&quot;${_csrf.parameterName}&quot;\n        value=&quot;${_csrf.token}&quot;/&gt;\n    &lt;button type=&quot;submit&quot; class=&quot;btn&quot;&gt;Log in&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n<p>My taglibs.jsp file is as follows:</p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt;\n&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt;\n&lt;%@ taglib prefix=&quot;form&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;\n\n&lt;%\nresponse.setHeader(&quot;Cache-Control&quot;,&quot;no-store&quot;); //HTTP 1.1\nresponse.setHeader(&quot;Pragma&quot;,&quot;no-cache&quot;); //HTTP 1.0\nresponse.setDateHeader (&quot;Expires&quot;, 0); //prevents caching at the proxy server\n%&gt;\n\n</code></pre>\n<p>My LoginController.java is as follows:</p>\n<pre><code>package elements.controllers;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\n@Controller\npublic class LoginController {\n\n    @RequestMapping(\n            value = &quot;/login&quot;,\n            method = {RequestMethod.GET, RequestMethod.POST})\n    public String login() {\n        return &quot;login&quot;;\n    }\n\n}\n</code></pre>\n<p>The error I am getting using the trace is as follows:</p>\n<pre><code>024-10-16 19:51:21.772 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext\n2024-10-16 19:51:21.819 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/?continue to session\n2024-10-16 19:51:21.820 [http-nio-8080-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8080/login\n2024-10-16 19:51:21.854 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login\n2024-10-16 19:51:21.877 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login\n2024-10-16 19:51:21.879 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET &quot;/login&quot;, parameters={}\n2024-10-16 19:51:21.887 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to elements.controllers.LoginController#login()\n2024-10-16 19:51:21.939 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/png, image/svg+xml, application/xml;q=0.9, */*;q=0.8]\n2024-10-16 19:51:21.941 [http-nio-8080-exec-1] DEBUG o.s.w.s.view.InternalResourceView - View name [login], model {}\n2024-10-16 19:51:21.955 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.springframework.web.servlet.view.InternalResourceView: name [login]; URL [login]]\njakarta.servlet.ServletException: Circular view path [login]: would dispatch back to the current handler URL [/login] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}