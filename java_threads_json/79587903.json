{
  "question": {
    "tags": [
      "java",
      "spring",
      "testing",
      "dependency-injection",
      "properties"
    ],
    "owner": {
      "account_id": 6714937,
      "reputation": 11,
      "user_id": 5177046,
      "user_type": "registered",
      "profile_image": "https://lh4.googleusercontent.com/-JXE2oVKwLCc/AAAAAAAAAAI/AAAAAAAAAAw/YZNdCwFNUTs/s256-rj/photo.jpg",
      "display_name": "0xff",
      "link": "https://stackoverflow.com/users/5177046/0xff"
    },
    "is_answered": false,
    "view_count": 57,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1745544407,
    "creation_date": 1745386361,
    "last_edit_date": 1745544407,
    "question_id": 79587903,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79587903/spring-configurationproperties-works-wierd-maybe-incorrect",
    "title": "Spring @ConfigurationProperties works wierd, maybe incorrect",
    "body": "<p>Was working on configuration classes and spotted strange behavior. Prepared small test to reproduce it:</p>\n<pre><code>@Slf4j\n@Configuration\n@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = TestInjectingProperties.class)\n@TestPropertySource(&quot;classpath:test.yml&quot;)\npublic class TestInjectingProperties\n{\n\n    @Getter\n    @Setter\n    @ToString\n    @Configuration\n    @ConditionalOnProperty(&quot;a.b&quot;)\n    @ConfigurationProperties(&quot;a.b&quot;)\n    public class AbOptionalProperties\n    {\n\n        private String id;\n\n    }\n\n    @Getter\n    @Setter\n    @ToString\n    @Configuration\n    @ConditionalOnProperty(&quot;c.d&quot;)\n    @ConfigurationProperties(&quot;c.d&quot;)\n    public class CdOptionalProperties\n    {\n\n        private String id;\n\n    }\n\n    @Getter\n    @Setter\n    @ToString\n    @Configuration\n    @ConditionalOnProperty(&quot;e.f&quot;)\n    @ConfigurationProperties(&quot;e.f&quot;)\n    public class EfOptionalProperties\n    {\n\n        private String g;\n        private String h;\n\n    }\n\n    @Getter\n    @Setter\n    @ToString\n    @Configuration\n    @ConditionalOnProperty(&quot;e.f&quot;)\n    @ConfigurationProperties(&quot;e.f&quot;)\n    public class EfgOptionalProperties\n    {\n\n        private String g;\n        private String h;\n\n    }\n\n    @Autowired(required = false)\n    private AbOptionalProperties abOptionalProperties;\n\n    @Autowired(required = false)\n    private CdOptionalProperties cdOptionalProperties;\n\n    @Autowired(required = false)\n    private CdOptionalProperties efOptionalProperties;\n\n    @Autowired(required = false)\n    private EfgOptionalProperties efgOptionalProperties;\n\n    @Test\n    void testProperties()\n    {\n        log.info(&quot;ab optional properties = {}&quot;, abOptionalProperties);\n        log.info(&quot;cd optional properties = {}&quot;, cdOptionalProperties);\n        log.info(&quot;ef optional properties = {}&quot;, efOptionalProperties);\n        log.info(&quot;efg optional properties = {}&quot;, efgOptionalProperties);\n    }\n\n}\n</code></pre>\n<p>Test yml file content:</p>\n<pre><code>a.b:\n\nc.d: null\n\ne.f.g: abc\n</code></pre>\n<p>Output is :</p>\n<pre><code>ab optional properties = TestInjectingProperties.AbOptionalProperties(id=null)\ncd optional properties = TestInjectingProperties.CdOptionalProperties(id=null)\nef optional properties = TestInjectingProperties.CdOptionalProperties(id=null)\nefg optional properties = null\n</code></pre>\n<p>As you can see conditional on property is able to find yml nodes which do not have any child nodes declared (like: 'a.b' or 'c.d') but it fails to do that for 'e.f' cause it have children in it.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}