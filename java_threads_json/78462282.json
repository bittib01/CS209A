{
  "question": {
    "tags": [
      "java",
      "android",
      "httpurlconnection",
      "pepper"
    ],
    "owner": {
      "account_id": 18146284,
      "reputation": 1,
      "user_id": 13199583,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gi4zuivCBVK_h5ULgraQgsBL40kzb-cE-dc3dctJQ=k-s256",
      "display_name": "Vincenzo Muolo",
      "link": "https://stackoverflow.com/users/13199583/vincenzo-muolo"
    },
    "is_answered": false,
    "view_count": 105,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1726480035,
    "creation_date": 1715370750,
    "last_edit_date": 1715370936,
    "question_id": 78462282,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78462282/pepper-robot-issues-while-retrieving-data-via-php-query-from-altervista",
    "title": "Pepper Robot, issues while retrieving data via php query from Altervista",
    "body": "<p>i'm a University student and i'm working on a project originally made in 2021 by my university group. The project is based on a website where users can write stories and an app where stories are listed and can be told by Pepper. Now i need to take this project again and add new functionalities, but i'm having troubles when i try to retrieve data from the PHP query. PHP queries are stored in Altervista shared space where is also stored and handled the project database (Altervista includes phpMyAdmin).\nIn the inithial development in 2021 we had no issue trying to retrieve query results from Altervista to the Pepper app, but now, using the same code, i'm having troubles.\nFollows one of the classes in the project, in this class I only need to get all the story titles in order to make them visible in the app story list.</p>\n<pre><code>import android.content.Context;\nimport android.os.AsyncTask;\nimport android.util.Log;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.util.ArrayList;\n\npublic class GetTitles extends AsyncTask&lt;Void, Void, String&gt; {\n    Context context;\n    protected static ArrayList&lt;String&gt; titleList = new ArrayList&lt;&gt;();\n\n    public GetTitles(Context context) {\n        this.context = context;\n    }\n\n    @Override\n    protected String doInBackground(Void... voids) {\n        try {\n            URL url = new URL (&quot;https://pepper4storytelling.altervista.org/Cartella%20temporanea%20GETTERS/story_list.php&quot;);\n            HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();\n            httpURLConnection.setRequestMethod(&quot;GET&quot;);\n            InputStream inputStream = httpURLConnection.getInputStream();\n            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream, &quot;iso-8859-1&quot;));\n            StringBuilder sb = new StringBuilder();\n            String line = &quot;&quot;;\n            while ((line = bufferedReader.readLine()) != null) {\n                sb.append(line).append('\\n');\n            }\n            JSONArray jsonArray = new JSONArray(sb.toString());\n            for (int i=0; i &lt; jsonArray.length(); i++ ) {\n                JSONObject ob = jsonArray.getJSONObject(i);\n                titleList.add(i, ob.get(&quot;Titolo&quot;).toString());\n            }\n            bufferedReader.close();\n            inputStream.close();\n            httpURLConnection.disconnect();\n            return sb.toString();\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    @Override\n    protected void onPreExecute() {\n        super.onPreExecute();\n    }\n\n    @Override\n    protected void onPostExecute(String s) {\n    }\n\n    @Override\n    protected void onProgressUpdate(Void... values) {\n        super.onProgressUpdate(values);\n    }\n\n}\n</code></pre>\n<p>As you can see, it doesn't seem to be a query issue, since the query effectively returns values in a JSON object.</p>\n<pre><code>[{&quot;Titolo&quot;:&quot;TESTVIDEOPICCOLO&quot;,&quot;Username&quot;:&quot;pieeerpaolo&quot;,&quot;Data pubblicazione&quot;:&quot;2024-03-24 22:54:42&quot;},{&quot;Titolo&quot;:&quot;PROVAVIDEO&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2024-02-08 14:34:48&quot;},{&quot;Titolo&quot;:&quot;Preparare lo zaino per la scuola&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2023-01-17 11:03:04&quot;},{&quot;Titolo&quot;:&quot;I tre porcellini&quot;,&quot;Username&quot;:&quot;Vincenzo&quot;,&quot;Data pubblicazione&quot;:&quot;2021-11-04 11:42:01&quot;},{&quot;Titolo&quot;:&quot;orientamento prova&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2022-04-26 11:49:06&quot;},{&quot;Titolo&quot;:&quot;Orientamento DIB&quot;,&quot;Username&quot;:&quot;giovill&quot;,&quot;Data pubblicazione&quot;:&quot;2022-04-26 14:43:18&quot;},{&quot;Titolo&quot;:&quot;Mangiare bene, Vivere meglio&quot;,&quot;Username&quot;:&quot;davide_46&quot;,&quot;Data pubblicazione&quot;:&quot;2023-05-09 16:48:29&quot;},{&quot;Titolo&quot;:&quot;La Piramide Alimentare&quot;,&quot;Username&quot;:&quot;Dav99ide&quot;,&quot;Data pubblicazione&quot;:&quot;2023-05-22 14:52:53&quot;},{&quot;Titolo&quot;:&quot;Scambio di Robot&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2023-09-29 16:14:49&quot;},{&quot;Titolo&quot;:&quot;Prova storia video&quot;,&quot;Username&quot;:&quot;Enzo&quot;,&quot;Data pubblicazione&quot;:&quot;2022-10-07 12:34:15&quot;},{&quot;Titolo&quot;:&quot;Prova audio&quot;,&quot;Username&quot;:&quot;Enzo&quot;,&quot;Data pubblicazione&quot;:&quot;2022-10-07 14:20:19&quot;},{&quot;Titolo&quot;:&quot;Antonino e il suo pentolino_1&quot;,&quot;Username&quot;:&quot;daniela71&quot;,&quot;Data pubblicazione&quot;:&quot;2023-05-06 20:10:49&quot;},{&quot;Titolo&quot;:&quot;Il re&quot;,&quot;Username&quot;:&quot;enzo&quot;,&quot;Data pubblicazione&quot;:&quot;2022-12-01 13:27:07&quot;},{&quot;Titolo&quot;:&quot;La storia della farfalla&quot;,&quot;Username&quot;:&quot;enzo&quot;,&quot;Data pubblicazione&quot;:&quot;2022-12-01 13:46:16&quot;},{&quot;Titolo&quot;:&quot;La Spesa&quot;,&quot;Username&quot;:&quot;enzo&quot;,&quot;Data pubblicazione&quot;:&quot;2022-12-01 14:04:30&quot;},{&quot;Titolo&quot;:&quot;Il mondo dei Verdotti&quot;,&quot;Username&quot;:&quot;Dav99ide&quot;,&quot;Data pubblicazione&quot;:&quot;2023-05-19 10:40:02&quot;},{&quot;Titolo&quot;:&quot;La Fata Smemorina&quot;,&quot;Username&quot;:&quot;Dav99ide&quot;,&quot;Data pubblicazione&quot;:&quot;2023-05-19 10:53:47&quot;},{&quot;Titolo&quot;:&quot;Io sono il Pepper Sbagliato&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2023-09-29 16:52:50&quot;},{&quot;Titolo&quot;:&quot;Antonino e il suo pentolino&quot;,&quot;Username&quot;:&quot;daniela71&quot;,&quot;Data pubblicazione&quot;:&quot;2023-10-21 11:14:12&quot;},{&quot;Titolo&quot;:&quot;GIORNATA ORIENTAMENTO DIB&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2024-02-06 12:33:02&quot;},{&quot;Titolo&quot;:&quot;Il Viaggio delle Forchette Magiche&quot;,&quot;Username&quot;:&quot;pieeerpaolo&quot;,&quot;Data pubblicazione&quot;:&quot;2024-02-06 12:33:34&quot;},{&quot;Titolo&quot;:&quot;Biancaneve&quot;,&quot;Username&quot;:&quot;Vincenzo&quot;,&quot;Data pubblicazione&quot;:&quot;2021-11-09 13:07:42&quot;},{&quot;Titolo&quot;:&quot;Il leone e lo scoiattolo&quot;,&quot;Username&quot;:&quot;Pepper123&quot;,&quot;Data pubblicazione&quot;:&quot;2021-11-17 15:30:34&quot;},{&quot;Titolo&quot;:&quot;Il Cavaliere Anticovid&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2022-01-13 16:21:41&quot;},{&quot;Titolo&quot;:&quot;Pepper dice no alla Guerra&quot;,&quot;Username&quot;:&quot;nadja65&quot;,&quot;Data pubblicazione&quot;:&quot;2022-02-28 13:27:46&quot;},{&quot;Titolo&quot;:&quot;Il bruco e la farfalla&quot;,&quot;Username&quot;:&quot;Vincenzo&quot;,&quot;Data pubblicazione&quot;:&quot;2021-10-06 12:45:38&quot;},{&quot;Titolo&quot;:&quot;Storia con Domande&quot;,&quot;Username&quot;:&quot;Vincenzo&quot;,&quot;Data pubblicazione&quot;:&quot;2024-05-06 16:52:21&quot;}]\n</code></pre>\n<p>App Manifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;esame.pepper&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n\n\n    &lt;application\n        android:usesCleartextTraffic=&quot;true&quot;\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@drawable/logo&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppTheme&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity android:name=&quot;.PepperStory&quot;\n            android:screenOrientation=&quot;landscape&quot; /&gt;\n        &lt;activity android:name=&quot;.GetStory&quot;\n            android:screenOrientation=&quot;landscape&quot; /&gt;\n    &lt;/application&gt;\n\n    &lt;uses-feature android:name=&quot;com.softbank.hardware.pepper&quot;/&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>build.gradle (:app)</p>\n<pre><code>\napply plugin: 'com.android.application'\n\nandroid {\ncompileSdkVersion 29\nbuildToolsVersion '29.0.3'\n\n    defaultConfig {\n        applicationId &quot;esame.pepper&quot;\n        minSdkVersion 23\n        targetSdkVersion 29\n        versionCode 1\n        versionName &quot;1.0&quot;\n    \n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n    \n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n}\n\ndependencies {\nimplementation fileTree(dir: &quot;libs&quot;, include: \\[&quot;\\*.jar&quot;\\])\nimplementation 'androidx.appcompat:appcompat:1.2.0'\nimplementation 'androidx.constraintlayout:constraintlayout:2.0.4'\nimplementation 'com.google.android.exoplayer:exoplayer:2.11.7'\ntestImplementation 'junit:junit:4.13.2'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.2'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\nimplementation 'com.aldebaran:qisdk:1.7.5'\nimplementation 'com.aldebaran:qisdk-design:1.7.5'\nimplementation 'com.github.bumptech.glide:glide:4.11.0'\nannotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\n\n}\n</code></pre>\n<p>I suspect that the issue lies with Pepper and the fact that it hasn't been updated in years. Both Pepper Emulator and real Pepper have this issue, but if i try to run the app on a different emulator, all the queries work fine, and I can retrieve all the required data.\nAs you can see in the following screenshots, when using the Pepper emulator, I'm unable to load the story titles.\n<a href=\"https://i.sstatic.net/iSPTGLj8.png\" rel=\"nofollow noreferrer\">Pepper Emulator</a>\nIn this case, the try-catch block fails, indicating that there is an issue with receiving the data from the query.</p>\n<p>But if I use another emulator created with the AVD Manager, the query work, and I can see the story titles.\n<a href=\"https://i.sstatic.net/M6rqdJrp.png\" rel=\"nofollow noreferrer\">Other Emulator not directly related to Pepper</a></p>\n<p>Note for Pepper Emulator, directly taken from the <a href=\"https://qisdk.softbankrobotics.com/sdk/doc/pepper-sdk/ch1_gettingstarted/installation.html\" rel=\"nofollow noreferrer\">official intallation guide</a>\n<em>Windows only\nTo ensure compatibility, Emulator.29.0.11 is automatically installed.</em></p>\n<p>Android Studio version</p>\n<ul>\n<li>Android Studio 4.0</li>\n<li>Build #AI-193.6911.18.40.6514223, built on May 20, 2020</li>\n<li>Runtime version: 1.8.0_412-412-b08 x86</li>\n<li>VM: OpenJDK Server VM by OpenLogic-OpenJDK</li>\n<li>Windows 11 10.0</li>\n<li>GC: ParNew, ConcurrentMarkSweep</li>\n<li>Memory: 742M</li>\n<li>Cores: 12</li>\n<li>Registry: ide.new.welcome.screen.force=true</li>\n<li>Non-Bundled Plugins: com.softbank.robot.sdkplugin</li>\n</ul>\n<p>Systems used</p>\n<ul>\n<li>Desktop with windows 11 and Intel i5-11400 CPU</li>\n<li>Laptop with Windows 10 and Intel i5-5200U CPU</li>\n</ul>\n<p>Both systems produce the same result. Additionally, in both systems, i can access Pepper Emulator only if i run the 32-bit executable. If I try to run the emulator in Android Studio 64-bit, it crashes instantly.\nHonestly, I don't know if the executable thing could be the cause of the whole issue, but when we created this project, I mostly worked on the website side, so I'm a bit lost right now.\nI apologize for this lengthy post, but I tried to include all the valuable information for understanding my issue.\nThanks in advance to anyone who will consider helping me.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}