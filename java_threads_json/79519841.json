{
  "question": {
    "tags": [
      "java",
      "spring",
      "logback",
      "spring-logback"
    ],
    "owner": {
      "account_id": 36461416,
      "reputation": 1,
      "user_id": 27753092,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/aa06914ce006b4fa5a20e8eeec3dc21c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Jie Liu",
      "link": "https://stackoverflow.com/users/27753092/jie-liu"
    },
    "is_answered": false,
    "view_count": 40,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1742430066,
    "creation_date": 1742378896,
    "last_edit_date": 1742430066,
    "question_id": 79519841,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79519841/how-to-put-archived-logs-into-sub-directories-which-are-created-per-month-basis",
    "title": "How to put archived logs into sub-directories which are created per month basis?",
    "body": "<p>On a RHEL server, the service generates logs files in /home/jliu2/logs/, and archived logs are put into /home/jliu2/logs/archive/.</p>\n<p>But I would not like to directly put archived logs under /home/jliu2/logs/archive/. I would like to have sub folder structure, like below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/home/jliu2/logs/archive/2025-03    -&gt; Save logs of March 2025\n/home/jliu2/logs/archive/2025-04    -&gt; Save logs of April 2025\n/home/jliu2/logs/archive/2025-05    -&gt; Save logs of May 2025\n</code></pre>\n<p>In the logback.xml of the service, setting is as below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;!-- Global debug log --&gt;\n&lt;appender name=&quot;DeviceServerDebug&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;/home/jliu2/logs/ds_debug.log&lt;/file&gt;\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n        &lt;!-- Hourly rollover, with size limit --&gt;\n        &lt;fileNamePattern&gt;/home/jliu2/logs/archive/%d{yyyy-MM}/service_debug_%d{yyyyMMdd_HH}.%i.log.gz&lt;/fileNamePattern&gt;\n        &lt;!-- keep N hours' worth of history --&gt;\n        &lt;maxHistory&gt;2160&lt;/maxHistory&gt;\n        &lt;cleanHistoryOnStart&gt;true&lt;/cleanHistoryOnStart&gt;\n        &lt;!-- or whenever the file size reaches 100MB --&gt;\n        &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;\n    &lt;/rollingPolicy&gt;\n    &lt;encoder class=&quot;ch.qos.logback.core.encoder.LayoutWrappingEncoder&quot;&gt;\n        &lt;layout class=&quot;com.myservice.filter.PatternFilter&quot;&gt;\n            &lt;!--receive regex for example (secretsAuthToken=)|(secretsKey=)--&gt;\n            &lt;patternsProperty&gt;(secretsAuthToken=|&quot;configurationKey\\&quot;:\\&quot;secretsAuthToken\\&quot;,\\&quot;configurationValue\\&quot;:)&lt;/patternsProperty&gt;\n            &lt;pattern&gt;${LOG_PATTERN}{short}&lt;/pattern&gt;\n        &lt;/layout&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n</code></pre>\n<p>But it seems not to work. The directory <code>/home/jliu2/logs/archive/2025-03</code> is not created when service is running.</p>\n<p>I find an example in <a href=\"https://logback.qos.ch/manual/appenders.html\" rel=\"nofollow noreferrer\">https://logback.qos.ch/manual/appenders.html</a>, which is to set like <code>/var/log/%d{yyyy/MM, aux}/myapplication.%d{yyyy-MM-dd}.log</code>. I tested. It did work. But it is to create 2-level folders like <code>/home/jliu2/logs/archive/2025/03/</code> which is not the preference of the project.</p>\n<p>How to organize archived logs into monthly sub-directory, but <strong>without creating 2-level folders</strong>?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}