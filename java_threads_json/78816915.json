{
  "question": {
    "tags": [
      "java",
      "spring",
      "docker",
      "atomikos",
      "transactionmanager"
    ],
    "owner": {
      "account_id": 10568765,
      "reputation": 59,
      "user_id": 7786228,
      "user_type": "registered",
      "profile_image": "https://graph.facebook.com/1400227430040107/picture?type=large",
      "display_name": "Gozar-Manu Ariana",
      "link": "https://stackoverflow.com/users/7786228/gozar-manu-ariana"
    },
    "is_answered": true,
    "view_count": 329,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1730277294,
    "creation_date": 1722436206,
    "last_edit_date": 1730277215,
    "question_id": 78816915,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78816915/failed-to-convert-atomikos-j2eetransactionmanager-to-required-type-jakarta-trans",
    "title": "Failed to convert atomikos J2eeTransactionManager to required type jakarta TransactionManager",
    "body": "<p>I have a Java application that runs in Docker using Tomcat and Maven.</p>\n<p>We are using docker-compose command to build/up the application. <code>build</code> works fine, but when I do the <code>up</code> an error is thrown:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in class path resource [applicationContext-core-infrastructure.xml]: Failed to convert property value of type 'com.atomikos.icatch.jta.J2eeTransactionManager' to required type 'jakarta.transaction.TransactionManager' for property 'transactionManager'; Cannot convert value of type 'com.atomikos.icatch.jta.J2eeTransactionManager' to required type 'jakarta.transaction.TransactionManager' for property 'transactionManager': no matching editors or conversion strategy found\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)\n        ... 126 more\nCaused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'com.atomikos.icatch.jta.J2eeTransactionManager' to required type 'jakarta.transaction.TransactionManager' for property 'transactionManager'; Cannot convert value of type 'com.atomikos.icatch.jta.J2eeTransactionManager' to required type 'jakarta.transaction.TransactionManager' for property 'transactionManager': no matching editors or conversion strategy found\n        at org.springframework.beans.AbstractNestablePropertyAccessor.convertIfNecessary(AbstractNestablePropertyAccessor.java:595)\n        at org.springframework.beans.AbstractNestablePropertyAccessor.convertForProperty(AbstractNestablePropertyAccessor.java:609)\n        at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:190)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1747)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1691)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1436)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n        ... 132 more\nCaused by: java.lang.IllegalStateException: Cannot convert value of type 'com.atomikos.icatch.jta.J2eeTransactionManager' to required type 'jakarta.transaction.TransactionManager' for property 'transactionManager': no matching editors or conversion strategy found\n        at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:273)\n        at org.springframework.beans.AbstractNestablePropertyAccessor.convertIfNecessary(AbstractNestablePropertyAccessor.java:590)\n        ... 138 more\nSEVERE [main] org.apache.catalina.core.StandardContext.startInternal One or more listeners failed to start. Full details will be found in the appropriate container log file\nSEVERE [main] org.apache.catalina.core.StandardContext.startInternal Context [] startup failed due to previous errors\nINFO [main] org.apache.catalina.core.ApplicationContext.log Closing Spring root WebApplicationContext\nWARNING [main] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesJdbc The web application [ROOT] registered the JDBC driver [org.postgresql.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.\nWARNING [main] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web application [ROOT] appears to have started a thread named [bitronix-task-scheduler] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.base/java.lang.Thread.sleep0(Native Method)\n java.base/java.lang.Thread.sleep(Thread.java:509)\n bitronix.tm.timer.TaskScheduler.run(TaskScheduler.java:245)\n</code></pre>\n<p>We use transaction manager XML configuration</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Atomikos properties are set in jta.properties --&gt;\n&lt;bean id=&quot;atomikosTransactionService&quot; class=&quot;com.atomikos.icatch.config.UserTransactionServiceImp&quot;\n    init-method=&quot;init&quot; destroy-method=&quot;shutdownWait&quot;&gt;\n&lt;/bean&gt;\n\n&lt;bean id=&quot;atomikosTransactionManager&quot; class=&quot;com.atomikos.icatch.jta.J2eeTransactionManager&quot; depends-on=&quot;atomikosTransactionService&quot;/&gt; \n\n&lt;bean id=&quot;atomikosUserTransaction&quot; class=&quot;com.atomikos.icatch.jta.J2eeUserTransaction&quot;/&gt; \n\n&lt;!-- Spring JtaTransactionManager --&gt;\n&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.transaction.jta.JtaTransactionManager&quot; &gt;\n    &lt;property name=&quot;transactionManager&quot; ref=&quot;atomikosTransactionManager&quot;/&gt;\n    &lt;property name=&quot;userTransaction&quot; ref=&quot;atomikosUserTransaction&quot;/&gt;\n    &lt;property name=&quot;defaultTimeout&quot; value=&quot;${jta.transaction.default.timeout}&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>The funny part is that the application works for my other two colleagues.</p>\n<p>I tried to make sure that the Maven dependencies are fine in Docker container and I even used <code>docker volume rm [volume-name]</code> and recreated everything, but it didn't fix the problem.</p>\n<p>I compared my colleague's Maven dependencies from their Docker container with mine: <code>Docker Desktop &gt; click on container name &gt; Exec Tab &gt; write bash (you should be in Tomcat after) &gt; cd webapps &gt; cd ROOT &gt; cd WEB-INF &gt; cd lib &gt; ls</code> and they are exactly the same.</p>\n<p>In this old post <a href=\"https://fogbugz.atomikos.com/default3c36.html?community.6.3158.2\" rel=\"nofollow noreferrer\">https://fogbugz.atomikos.com/default3c36.html?community.6.3158.2</a> is suggested to look for another transaction JAR that can cause conflicts. I'm trying to spot it.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}