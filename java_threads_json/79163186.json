{
  "question": {
    "tags": [
      "java",
      "algorithm"
    ],
    "owner": {
      "account_id": 31187804,
      "reputation": 794,
      "user_id": 23993901,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/7417aaad0c8ece3fac44f06d05a8ba8b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "CodeCrusader",
      "link": "https://stackoverflow.com/users/23993901/codecrusader"
    },
    "is_answered": true,
    "view_count": 406,
    "accepted_answer_id": 79307192,
    "answer_count": 4,
    "score": 8,
    "last_activity_date": 1735411677,
    "creation_date": 1730905799,
    "last_edit_date": 1735060106,
    "question_id": 79163186,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79163186/find-maximum-length-of-up-then-down-and-up-sequence-of-numbers",
    "title": "Find maximum length of up then down and up sequence of numbers",
    "body": "<p>I have a list of integers as input, the order of items in input is not important.</p>\n<p>I need to form a new list having size n with the below features.</p>\n<p>Here i, j represents the index position of the output list such that i &lt; j &lt; n</p>\n<pre><code>Items from 0 to i should be in increasing order strictly\n\nItems from i to j should be in decreasing order strictly\n\nItems from j to n should be in increasing order strictly\n</code></pre>\n<p>The new list must satisfy the above properties, and it need not have all the elements from the original input list.</p>\n<p><strong>Example 1:</strong></p>\n<pre><code>input  [2, 1, 3, 3, 1, 2, 1, 2, 3]\nvalid output sequence with max selected items is [1,2,3,2,1,2,3]\nsize of this output sequence is 7, so return the value 7\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<pre><code>increasing from position 0 to 2 =&gt; [1,2,3]\ndecreasing from position 2 to 4 =&gt; [3,2,1]\nagain increasing from position 4 to last index =&gt; [1,2,3]\n</code></pre>\n<p><strong>Example 2:</strong></p>\n<pre><code>input  [5, 5, 2, 1, 3, 4, 5]\nvalid output sequence with max selected items is [1, 3, 5, 4, 2, 5]\nsize of this output sequence is 6, so return the value 6\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<pre><code>increasing from position 0 to 2 =&gt; [1,3,5]\ndecreasing from position 2 to 4 =&gt; [5,4,2]\nagain increasing from position 4 to last index =&gt; [2,5]\n</code></pre>\n<p><strong>Example 3:</strong></p>\n<pre><code>input  [1, 3, 5, 4, 2, 6, 8, 7, 9]\n\nOutput: 9 \n</code></pre>\n<p><strong>Example 4:</strong></p>\n<pre><code>input = [1,100]\n\nfor this input we can get the updated sequence as [100, 1]\n\na) increasing part = [100], here i = 0\nb) decreasing part = [100, 1], here i=0, j=1\nc) increasing part = [1], here j to end, j = 1\n</code></pre>\n<p>Observations: The last item in increasing part is same as first item of decreasing part in above discussion (i.e (a) and (b) groups), similarly the last item of decreasing part is same as first item of increasing part (i.e. (b) and (c) groups)</p>\n<p><strong>Constraints:</strong><br />\n2 &lt;= input size &lt;= 10<sup>5</sup><br />\n1 &lt;= input element &lt;= 10<sup>9</sup><br />\ninput contains at least 2 unique elements.</p>\n<p>The program should return the size of the output sequence.</p>\n<p>I tried to solve this using a TreeMap:</p>\n<pre><code>public static int solve(List&lt;Integer&gt; list) {\n        int n = list.size();\n        TreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\n        int min = Integer.MAX_VALUE;\n        for(int e : list) {\n            min = Math.min(min, e);\n            map.put(e, map.getOrDefault(e, 0)+1);\n        }\n        int result = 1;\n        map.put(min, map.getOrDefault(min,0)-1);\n        if(map.get(min) &lt;=0) map.remove(min);\n        while(true) {\n            Integer key = map.higherKey(min);\n            if(key == null) break;\n            map.put(key, map.getOrDefault(key,0)-1);\n            if(map.get(key) &lt;=0) map.remove(key);\n            min = key;\n            result++;\n        }\n        int max = min;\n        while(true) {\n            Integer key = map.lowerKey(max);\n            if(key == null) break;\n            map.put(key, map.getOrDefault(key,0)-1);\n            if(map.get(key) &lt;=0) map.remove(key);\n            max = key;\n            result++;\n        }\n        \n        min = max;\n        while(true) {\n            Integer key = map.higherKey(min);\n            if(key == null) break;\n            map.remove(key);\n            min = key;\n            result++;\n        }\n        return result;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(solve(List.of(1, 3, 5, 4, 2, 6, 8, 7, 9))); // Expected output: 9\n\n        System.out.println(solve(List.of(5, 5, 2, 1, 3, 4, 5))); // Expected output: 6\n\n        System.out.println(solve(List.of(1, 100))); // Expected output: 2\n        \n        System.out.println(solve(List.of(2, 1, 3, 3, 1, 2, 1, 2, 3))); // Expected output: 7\n    }\n</code></pre>\n<p>The code fails for input <code>5, 5, 2, 1, 3, 4, 5</code>, it returns 5 as output instead of 6. This is due to my generated array becoming [1,2,3,4,5] with 5 items also not following increasing-decreasing-increasing pattern</p>\n<p>So I am using wrong approach to solve this problem, what is the correct approach to solve this problem.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}