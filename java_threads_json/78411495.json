{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "swagger",
      "springdoc-openapi-ui"
    ],
    "owner": {
      "account_id": 49543,
      "reputation": 20710,
      "user_id": 147530,
      "user_type": "registered",
      "accept_rate": 63,
      "profile_image": "https://www.gravatar.com/avatar/fb9f657e0b37fa483135635211e7d167?s=256&d=identicon&r=PG",
      "display_name": "morpheus",
      "link": "https://stackoverflow.com/users/147530/morpheus"
    },
    "is_answered": true,
    "view_count": 491,
    "accepted_answer_id": 79526789,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1742603623,
    "creation_date": 1714521785,
    "question_id": 78411495,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78411495/hosting-swagger-ui-behind-nginx-proxy",
    "title": "Hosting swagger-ui behind nginx proxy",
    "body": "<p>we have a setup where we have deployed <a href=\"https://springdoc.org/#getting-started\" rel=\"nofollow noreferrer\"><code>springdoc-openapi-starter-webmvc-ui</code></a> with Spring Boot 3.1.5. The spring boot server is running on port 8080. We have setup <code>nginx</code> so that all requests that start with <code>/api</code> are forwarded to spring boot:</p>\n<pre><code>location ~ ^/api(/|$) {\n        rewrite ^/api(/|$)(.*)$ /$2 break;\n        proxy_pass http://127.0.0.1:8080;  # Forward requests to backend server\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # per https://springdoc.org/index.html#how-can-i-deploy-springdoc-openapi-starter-webmvc-ui-behind-a-reverse-proxy\n    proxy_set_header X-Forwarded-proto https; # per https://springdoc.org/index.html#how-can-i-deploy-springdoc-openapi-starter-webmvc-ui-behind-a-reverse-proxy\n    proxy_set_header X-Forwarded-Prefix &quot;/api&quot;; # per https://springdoc.org/index.html#how-can-i-deploy-springdoc-openapi-starter-webmvc-ui-behind-a-reverse-proxy\n    }\n</code></pre>\n<p>The last 3 lines are per what we could gather from <a href=\"https://springdoc.org/index.html#how-can-i-deploy-springdoc-openapi-starter-webmvc-ui-behind-a-reverse-proxy\" rel=\"nofollow noreferrer\">this</a> link. In our <code>application.properties</code> we have set:</p>\n<pre><code>server.forward-headers-strategy=NATIVE\nserver.use-forward-headers=true\n</code></pre>\n<p>Our expectation is that with this setup we should see the swagger UI at <code>/api/swagger-ui/index.html</code>. However when we navigate to that URL we see following:</p>\n<p><a href=\"https://i.sstatic.net/8sgeiETK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/8sgeiETK.png\" alt=\"\" /></a></p>\n<p>and the developer tools in the browser show its trying to make request to <code>/v3/api-docs</code> to fetch the config whereas it should be making request to <code>/api/v3/api-docs</code> - we tested this URL works. <em>All requests that Swagger UI is making to the backend need to be prefixed with <code>/api</code></em>. This is our core problem.</p>\n<p>How can we fix this?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}