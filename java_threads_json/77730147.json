{
  "question": {
    "tags": [
      "java",
      "spring",
      "token",
      "gateway"
    ],
    "owner": {
      "account_id": 27663683,
      "reputation": 11,
      "user_id": 21115935,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/CqINw.jpg?s=256",
      "display_name": "Hilariouhiss",
      "link": "https://stackoverflow.com/users/21115935/hilariouhiss"
    },
    "is_answered": false,
    "view_count": 203,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1726021067,
    "creation_date": 1703821638,
    "last_edit_date": 1703831583,
    "question_id": 77730147,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77730147/sa-token-and-spring-gateway-conflict",
    "title": "Sa-Token and Spring Gateway Conflict",
    "body": "<p>Simultaneously using <code>Spring Gateway</code> and <code>Sa-Token</code> results in the service being unable to register with <code>Nacos</code>.</p>\n<p>Removing either <code>Gateway</code> or <code>Sa-Token</code> allows the application to successfully register with <code>Nacos</code>. Has anyone encountered and resolved this issue?</p>\n<p>Versionsï¼š</p>\n<ul>\n<li>java: 17</li>\n<li>spring-boot: 3.0.2</li>\n<li>spring-cloud-starter-alibaba-nacos-discovery: 2022.0.0.0-RC</li>\n<li>spring-cloud: 2022.0.0-RC</li>\n<li>sa-token-reactor-spring-boot3-starter: 1.37.0</li>\n</ul>\n<p>Removing the 'routes' section allows the application to register successfully, but the routing functionality is lost. What should I do?</p>\n<p>my <code>application.yml</code></p>\n<pre><code>spring:\n  application:\n    name: gateway-service\n  cloud:\n    nacos:\n      discovery:\n        group: vevss\n        username: nacos\n        password: nacos\n        server-addr: 127.0.0.1:8848\n        namespace: public\n    gateway:\n      discovery:\n        locator:\n          enabled: true\n          lower-case-service-id: true\n      # Removing the following section allows successful service registration\n      routes:\n        - id: auth-service\n          uri: lb://auth-service\n          predicates:\n            - Path=/login\n            - Path=/auth/doc.html\n          filters:\n            - RewritePath=/auth/doc.html, /doc.html\n\n        - id: user-service\n        # others ...\n\nsa-token:\n  token-name: satoken\n  timeout: 2592000\n  active-timeout: -1\n  is-concurrent: true\n  is-share: true\n  token-style: uuid\n  is-log: false\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}