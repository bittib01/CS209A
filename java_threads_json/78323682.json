{
  "question": {
    "tags": [
      "java",
      "bukkit",
      "spigot"
    ],
    "owner": {
      "account_id": 20461380,
      "reputation": 11,
      "user_id": 15013943,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/02154fbb4b90807bd8f4016dc8b367e5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "reiizl",
      "link": "https://stackoverflow.com/users/15013943/reiizl"
    },
    "is_answered": true,
    "view_count": 106,
    "accepted_answer_id": 78415346,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1714587907,
    "creation_date": 1713095370,
    "question_id": 78323682,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78323682/java-get-random-from-list-by-its-percentage-chance",
    "title": "java get random from list by its percentage chance",
    "body": "<p>i've have an list:</p>\n<pre><code>public List&lt;Map&lt;Integer, Rarity&gt;&gt; classes = Arrays.asList(\n  Collections.singletonMap(0, new Rarity(&quot;rarity_default&quot;, &quot;Default!&quot;, 55.0)),\n  // ...\n);\n</code></pre>\n<p>A 55.0 is a 55% chance in this list.</p>\n<p>I want to get a random Rarity class from this classes but get it by a chance of it.</p>\n<p>For example i got these chances:</p>\n<ul>\n<li>rarity_A: 55.00%</li>\n<li>rarity_B: 35.00%</li>\n<li>rarity_C: 12.00%</li>\n<li>rarity_D: 6.00%</li>\n<li>rarity_E: 3.00%</li>\n<li>rarity_F: 0.10%</li>\n</ul>\n<p>Also I don't want it to get a item always like I've tried to code it myself but it worked up to 12.00% and below it won't give me the rarity. And also it would give me the rarity with highest chance instead of nothing because I don't want to always get it.</p>\n<p>Currently here is my code:</p>\n<pre><code>  private final Map&lt;Integer, Rarity&gt; classes = new HashMap&lt;&gt;();\n\n  private final Random random = new Random();\n\n  public MobKillListener() {\n    for (Map&lt;Integer, Rarity&gt; rarityMap : SchemePlugin.getInstance().getSchemeConfig().classes) {\n      classes.putAll(rarityMap);\n    }\n  }\n\n  @EventHandler\n  public void onMobKill(EntityDeathEvent event) {\n    if (!(event.getEntity().getKiller() instanceof Player))\n      return;\n\n    Map&lt;Rarity, Double&gt; rarities = new HashMap&lt;&gt;();\n\n    for (Map.Entry&lt;Integer, Rarity&gt; entry : classes.entrySet()) {\n      rarities.put(entry.getValue(), entry.getValue().rarity); // i need to remake the map\n    }\n    \n    Rarity rarity = random(rarities);\n    if (rarity != null) {\n      // do my stuff\n    }\n  }\n\n  // i don't want to see this function ever again, this made me so mad..\n  public &lt;T&gt; T random(Map&lt;T, Double&gt; map) {\n    double rand = (double) new Random().nextInt(10000001) / 100000.0D;\n    double total = 0.0D;\n\n    for (T t : map.keySet()) {\n      double chance = map.get(t) / 4.0D;\n      total += chance;\n\n      if (total &gt;= rand) {\n        System.out.println(&quot;(&quot; + chance + &quot;) &quot; + &quot;Got &quot; + total + &quot;, rand: &quot; + rand);\n        return t;\n      }\n    }\n    System.out.println(&quot;Got &quot; + total + &quot;, rand: &quot; + rand);\n\n    return null;\n  }\n\n</code></pre>\n<p>Yes im doing this for Spigot plugin.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}