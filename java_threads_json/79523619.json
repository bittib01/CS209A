{
  "question": {
    "tags": [
      "java",
      "amazon-web-services",
      "classnotfoundexception",
      "noclassdeffounderror"
    ],
    "owner": {
      "account_id": 11118501,
      "reputation": 11,
      "user_id": 8162112,
      "user_type": "registered",
      "profile_image": "https://lh6.googleusercontent.com/--pJ2HNyLBRA/AAAAAAAAAAI/AAAAAAAAAAA/3_wdNt5Qm-s/s256-rj/photo.jpg",
      "display_name": "SRP",
      "link": "https://stackoverflow.com/users/8162112/srp"
    },
    "is_answered": false,
    "view_count": 384,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1742493964,
    "creation_date": 1742489707,
    "last_edit_date": 1742493964,
    "question_id": 79523619,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79523619/java-lang-noclassdeffounderror-software-amazon-awssdk-auth-credentials-awscrede",
    "title": "java.lang.NoClassDefFoundError: software.amazon.awssdk.auth.credentials.AwsCredentials",
    "body": "<p>I have no references to the above class in my code. I am using <code>software.amazon.awssdk.auth.credentials.AwsCredentialsProvider</code> class in my code. I still see the error.\nBackground: I am trying to establish a connection to DocDB Client. There are 2 different jars for the docdb client. One to establish a connection through test connection is in <code>Jar a.jar</code>. When I go through this logic it passes I am able to establish a connection. Same logic is call from <code>jar b.jar</code> which makes a call to the code in <code>a.jar</code> to establish the connection. It fails with class not found exception seen below.\nClass b from <code>b.jar</code> is just making a call to class a from <code>a.jar</code> to establish the connection.\nI am unable to figure this one out. Any help?</p>\n<p>I have below jars referenced in both the packages</p>\n<p>Call to below code fails when called from an external jar, call from within the same jar succeeds.</p>\n<pre><code>import software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\nAwsCredentialsProvider getAwsCredentialsProvider() throws Exception {\n        \n        AwsSecretsManagerConfig conf = null;\n        try {\n            conf = this.ds.getAwsSecretsManagerConfig();\n        } catch (Exception e) {\n            throw new Exception(&quot;failed Connection&quot;);               \n        }\n        String accessId = &quot;&quot;;\n        String secreteAccessKey = &quot;&quot;;\n        try {\n            accessId = conf.getDecryptedAccessId();\n        } catch (Exception e1) {\n            throw new throw new Exception(&quot;failed Connection&quot;);\n        }\n        try {\n            secreteAccessKey = conf.getDecryptedSecretAccessKey();\n        } catch (Exception e1) {\n            throw new Exception(&quot;failed Connection&quot;);\n        }\n        \n        //get aws connection configuration\n        AwsSecretManagerConnectionConfig connectConfig = new AwsSecretManagerConnectionConfig(accessId,secreteAccessKey,conf.getAuthType(),datasource.getRegionName(),conf.getRoleArn());\n        String awsVariables = &quot;accessId: &quot; + accessId + &quot; ,secreteAccessKey: &quot; + secreteAccessKey +\n                    &quot; ,conf.getAuthType(): &quot; + conf.getAuthType() + &quot; ,datasource.getRegionName(): &quot; \n                + datasource.getRegionName() + &quot; ,conf.getRoleArn(); &quot; + conf.getRoleArn(); \n        System.out.println(&quot;inside db class method getAwsCredentialsProvider awsVariables - &quot; + awsVariables);\n        return AWSAuthenticationUtil.buildAWSCredentialsProvider(connectConfig);\n    }\n</code></pre>\n<pre><code>Exception stacktrace :\nCaused by: java.lang.ClassNotFoundException: software.amazon.awssdk.auth.credentials.AwsCredentials\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:610) ~[?:1.8.0]\n        at java.lang.ClassLoader.loadClassHelper(ClassLoader.java:948) ~[?:2.9 (09-08-2023)]\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:893) ~[?:2.9 (09-08-2023)]\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:353) ~[?:1.8.0]\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:876) ~[?:2.9 (09-08-2023)]\n        ... 11 more\n</code></pre>\n<p>I verified the external jars being used by these jars. They are both identical lists.</p>\n<p>I added log statements before establish connection. when called directly to <code>a.jar</code> for connection it is successful, but when called through <code>b.jar</code> is it failing with above exception.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}