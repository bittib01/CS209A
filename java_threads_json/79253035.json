{
  "question": {
    "tags": [
      "java",
      "gradle",
      "guice"
    ],
    "owner": {
      "account_id": 4263829,
      "reputation": 1361,
      "user_id": 3487441,
      "user_type": "registered",
      "accept_rate": 86,
      "profile_image": "https://www.gravatar.com/avatar/361009477dca35ae0f3bb5db40dfe8e3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "gph",
      "link": "https://stackoverflow.com/users/3487441/gph"
    },
    "is_answered": true,
    "view_count": 41,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1741472889,
    "creation_date": 1733356159,
    "last_edit_date": 1733388172,
    "question_id": 79253035,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79253035/swapping-out-guice-modules-between-test-and-deployment",
    "title": "Swapping out Guice modules between test and deployment",
    "body": "<p>I have two implementations of a non-critical service that is injected by Guice. The implementations publish results to another system. When I'm running locally there is no way to connect to the other system. I have two classes that implement the publish interface: <code>RealPublisher</code> and <code>EchoPublisher</code>. EchoPublisher logs what it was passed and returns success.When I'm testing the application I use <code>EchoPublisher</code>. I need that to change to <code>RealPublisher</code> when I deploy.</p>\n<p>I can see doing this via an <code>@Provides</code> method that detects the environment and hands back the right implementation. Or swapping out the entire module when I construct the injector.</p>\n<p>My build system is Gradle which doesn't set any environment variables like Bazel when its used to kick off the app (as far as I know) so I'll need some other way to even detect the environment. Theres the <code>Guice.Stage</code>  value which might make this easy via the <code>@Provides</code> method. Of course I'll have to know when to switch that flag, too.</p>\n<p>Is there a good way to handle swapping out implementations without having to remember to do it manually each time?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}