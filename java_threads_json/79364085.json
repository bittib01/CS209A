{
  "question": {
    "tags": [
      "java",
      "flutter",
      "gradle"
    ],
    "owner": {
      "account_id": 3544179,
      "reputation": 1263,
      "user_id": 23548774,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/2884878f9bd975ad895ae087732f5266?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "rusty",
      "link": "https://stackoverflow.com/users/23548774/rusty"
    },
    "is_answered": true,
    "view_count": 433,
    "accepted_answer_id": 79364705,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1738110492,
    "creation_date": 1737102281,
    "last_edit_date": 1738110492,
    "question_id": 79364085,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79364085/new-problem-during-fixing-incompatibility-between-gradle-and-java-versions-in-fl",
    "title": "New problem during fixing incompatibility between Gradle and Java versions in Flutter",
    "body": "<p>I've tried the solution in <a href=\"https://stackoverflow.com/questions/76123807/my-projects-gradle-version-is-incompatible-with-the-java-version-that-flutter-i\">this stackoverflow QnA</a> and also followed web links: <a href=\"https://dev.to/javeedishaq/resolving-java-and-gradle-compatibility-issues-in-flutter-projects-3jfg\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://docs.flutter.dev/release/breaking-changes/android-java-gradle-migration-guide\" rel=\"nofollow noreferrer\">this</a>. Below is a summary of what I've tried:</p>\n<p>Steps:</p>\n<ol>\n<li><p>Checked my java version: My system had a java version 21.0.5, but this is not configured to be used as <code>JAVA_HOME</code> environment variable is not set. So, the default java shipped with Android studio is used which is <strong>version 21.0.4</strong> as stated in the output of <code>flutter doctor --verbose</code>.</p>\n</li>\n<li><p>Checked the <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">Compatibality Matrix</a> and used both Gradle versions <code>8.4</code> and <code>8.5</code> shown parallel to Java version <code>21</code> in the configuration process that follows.</p>\n</li>\n<li><p>Opened a terminal, and went to <code>&lt;project_root&gt;/android/</code> directory and executed the following commands:</p>\n<pre><code>./gradlew wrapper --gradle-version=8.4\n</code></pre>\n</li>\n</ol>\n<p>This resulted in following error:</p>\n<pre><code>Welcome to Gradle 7.6.3!\n\nHere are the highlights of this release:\n - Added support for Java 19.\n - Introduced `--rerun` flag for individual task rerun.\n - Improved dependency block for test suites to be strongly typed.\n - Added a pluggable system for Java toolchains provisioning.\n\nFor more details see https://docs.gradle.org/7.6.3/release-notes.html\n\nStarting a Gradle Daemon, 2 incompatible and 1 stopped Daemons could not be reused, use --status for details\n&gt; Task :gradle:compileGroovy FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':gradle:compileGroovy'.\n&gt; BUG! exception in phase 'semantic analysis' in source unit '/home/ajthapa/dev/tooling/flutter/packages/flutter_tools/gradle/src/main/groovy/app_plugin_loader.groovy' Unsupported class file major version 65\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 14s\n1 actionable task: 1 executed\n</code></pre>\n<p>The same thing happened with version <code>8.5</code>.</p>\n<ol start=\"4\">\n<li>Then I created a backup of <code>&lt;project_root&gt;/android/gradle/wrapper/gradle-wrapper.properties</code> in that directory, and changed the content of the original file from:</li>\n</ol>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.6.3-all.zip\n</code></pre>\n<p>to:</p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.5-all.zip\n</code></pre>\n<p>and then run the project which resulted in following error:</p>\n<pre><code>Launching lib/main.dart on sdk gphone64 x86 64 in debug mode...\nWarning: This version only understands SDK XML versions up to 3 but an SDK XML file of version 4 was encountered. This can happen if you use versions of Android Studio and the command-line tools that were released at different times.\nChecking the license for package Android SDK Build-Tools 30.0.3 in /home/ajthapa/Android/Sdk/licenses\nLicense for package Android SDK Build-Tools 30.0.3 accepted.\nPreparing &quot;Install Android SDK Build-Tools 30.0.3 (revision: 30.0.3)&quot;.\n&quot;Install Android SDK Build-Tools 30.0.3 (revision: 30.0.3)&quot; ready.\nInstalling Android SDK Build-Tools 30.0.3 in /home/ajthapa/Android/Sdk/build-tools/30.0.3\n&quot;Install Android SDK Build-Tools 30.0.3 (revision: 30.0.3)&quot; complete.\n&quot;Install Android SDK Build-Tools 30.0.3 (revision: 30.0.3)&quot; finished.\nwarning: [options] source value 8 is obsolete and will be removed in a future release\nwarning: [options] target value 8 is obsolete and will be removed in a future release\nwarning: [options] To suppress warnings about obsolete options, use -Xlint:-options.\n</code></pre>\n<p>(Above warnings also arose with new projects, but the projects run. The following may be of our current concern:)</p>\n<pre><code>3 warnings\nERROR:/home/ajthapa/dev/projects/flutter/MyAppName/00__Play_Store_builds/00__Closed_Test_version/update__feature_tests/MyAppName_v1.0.29__without_Admob_Ads/nepali_unit_conv/build/path_provider_android/intermediates/runtime_library_classes_jar/debug/classes.jar: D8: java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;&lt;parameter1&gt;&quot; is null\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:mergeLibDexDebug'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform classes.jar (project :path_provider_android) to match attributes {artifactType=android-dex, asm-transformed-variant=NONE, com.android.build.api.attributes.AgpVersionAttr=7.3.0, com.android.build.api.attributes.BuildTypeAttr=debug, com.android.build.gradle.internal.attributes.VariantAttr=debug, dexing-enable-desugaring=true, dexing-enable-jacoco-instrumentation=false, dexing-is-debuggable=true, dexing-min-sdk=21, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\n      &gt; Execution failed for DexingWithClasspathTransform: /home/ajthapa/dev/projects/flutter/MyAppName/00__Play_Store_builds/00__Closed_Test_version/update__feature_tests/MyAppName_v1.0.29__without_Admob_Ads/nepali_unit_conv/build/path_provider_android/intermediates/runtime_library_classes_jar/debug/classes.jar.\n         &gt; Error while dexing.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n&gt; Get more help at https://help.gradle.org.\n\nBUILD FAILED in 4m 10s\nError: Gradle task assembleDebug failed with exit code 1\n\nExited (1).\n</code></pre>\n<p>My project ran perfectly when I had Android Studio Koala installed, and now these errors have risen when I removed Koala version and installed Ladybug.</p>\n<p>How can I fix this?</p>\n<p>Update 01: Output of <code>flutter doctor --verbose</code> :</p>\n<pre><code>[âœ“] Flutter (Channel stable, 3.27.2, on Ubuntu 24.04.1 LTS 6.8.0-51-generic, locale en_GB.UTF-8)\n    â€¢ Flutter version 3.27.2 on channel stable at /home/ajthapa/dev/tooling/flutter\n    â€¢ Upstream repository https://github.com/flutter/flutter.git\n    â€¢ Framework revision 68415ad1d9 (4 days ago), 2025-01-13 10:22:03 -0800\n    â€¢ Engine revision e672b006cb\n    â€¢ Dart version 3.6.1\n    â€¢ DevTools version 2.40.2\n\n[âœ“] Android toolchain - develop for Android devices (Android SDK version 35.0.1)\n    â€¢ Android SDK at /home/ajthapa/Android/Sdk\n    â€¢ Platform android-35, build-tools 35.0.1\n    â€¢ Java binary at: /home/ajthapa/dev/tooling/android-studio/jbr/bin/java\n    â€¢ Java version OpenJDK Runtime Environment (build 21.0.4+-12422083-b607.1)\n    â€¢ All Android licenses accepted.\n\n[âœ“] Chrome - develop for the web\n    â€¢ Chrome at google-chrome\n\n[âœ“] Linux toolchain - develop for Linux desktop\n    â€¢ Ubuntu clang version 18.1.3 (1ubuntu1)\n    â€¢ cmake version 3.28.3\n    â€¢ ninja version 1.11.1\n    â€¢ pkg-config version 1.8.1\n\n[âœ“] Android Studio (version 2024.2)\n    â€¢ Android Studio at /home/ajthapa/dev/tooling/android-studio\n    â€¢ Flutter plugin version 83.0.3\n    â€¢ Dart plugin can be installed from:\n      ðŸ”¨ https://plugins.jetbrains.com/plugin/6351-dart\n    â€¢ Java version OpenJDK Runtime Environment (build 21.0.4+-12422083-b607.1)\n\n[âœ“] VS Code (version 1.96.4)\n    â€¢ VS Code at /usr/share/code\n    â€¢ Flutter extension version 3.102.0\n\n[âœ“] Connected device (3 available)\n    â€¢ sdk gphone64 x86 64 (mobile) â€¢ emulator-5554 â€¢ android-x64    â€¢ Android 15 (API 35) (emulator)\n    â€¢ Linux (desktop)              â€¢ linux         â€¢ linux-x64      â€¢ Ubuntu 24.04.1 LTS 6.8.0-51-generic\n    â€¢ Chrome (web)                 â€¢ chrome        â€¢ web-javascript â€¢ Google Chrome 131.0.6778.204\n\n[âœ“] Network resources\n    â€¢ All expected network resources are available.\n\nâ€¢ No issues found!\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}