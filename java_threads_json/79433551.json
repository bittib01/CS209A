{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "spring-webflux",
      "spring-boot-admin"
    ],
    "owner": {
      "account_id": 8702347,
      "reputation": 1611,
      "user_id": 6511727,
      "user_type": "registered",
      "accept_rate": 100,
      "profile_image": "https://www.gravatar.com/avatar/11df420107ef655ca63786fde3c91ddc?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "tero17",
      "link": "https://stackoverflow.com/users/6511727/tero17"
    },
    "is_answered": true,
    "view_count": 982,
    "accepted_answer_id": 79457092,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1740134736,
    "creation_date": 1739372783,
    "last_edit_date": 1740134736,
    "question_id": 79433551,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79433551/how-to-log-request-body-from-a-spring-webclient-request-using-an-instanceexchang",
    "title": "How to log request body from a Spring WebClient request using an InstanceExchangeFilterFunction in Spring Boot Admin?",
    "body": "<p>Issue: Unable to Read Request or Payload in Exchange SBA</p>\n<p>I'm facing an issue where I cannot read the request or payload within an exchange, apparently due to its basis in the Reactor stack. Unfortunately, the documentation is quite poor, and I need to intercept this request payload.</p>\n<p>Referenced Documentation:</p>\n<p><a href=\"https://docs.spring-boot-admin.com/3.4.2/docs/customize/customize_interceptors\" rel=\"nofollow noreferrer\">https://docs.spring-boot-admin.com/3.4.2/docs/customize/customize_interceptors</a></p>\n<p>I've tried using handmade Spring filters, but encountered an issue: it's impossible to read the request twice in a synchronous filter.</p>\n<p>Open Questions:</p>\n<p>Is there a way to read the request payload in a Reactor exchange in SBA ?\nAre there any code examples or tutorials that demonstrate how to intercept and read the request payload in a similar context? my paylaod is in json</p>\n<p><a href=\"https://i.sstatic.net/3Kw3OSFl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/3Kw3OSFl.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.sstatic.net/fze7P7y6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/fze7P7y6.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>@Configuration\npublic class AuditLogInterceptorReactorConfig {\n\n    private static final Logger log = LoggerFactory.getLogger(AuditLogInterceptorReactorConfig.class);\n\n    @Bean\n    public InstanceExchangeFilterFunction auditLog() {\n        return (instance, request, next) -&gt; next.exchange(request)\n                .doOnSubscribe(subscription -&gt; {\n                    if (HttpMethod.POST.equals(request.method())\n                            &amp;&amp; request.url().getPath().contains(&quot;/actuator/loggers/&quot;)) {\n\n                        request.body()\n                        // Récupérer le nom de l'application depuis l'instance enregistrée\n                        String appName = instance.getRegistration().getName();\n\n                        // Extraire le nom du logger depuis l'URL\n                        String path = request.url().getPath();\n                        String loggerName = path.substring(path.indexOf(&quot;/actuator/loggers/&quot;) + &quot;/actuator/loggers/&quot;.length());\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}