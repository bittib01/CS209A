{
  "question": {
    "tags": [
      "java",
      "android",
      "kotlin",
      "bluetooth-lowenergy",
      "android-bluetooth"
    ],
    "owner": {
      "account_id": 6941134,
      "reputation": 310,
      "user_id": 5327441,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/782642b3d1b6b6cc0a466c435ba3e9f6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Daniel D.",
      "link": "https://stackoverflow.com/users/5327441/daniel-d"
    },
    "is_answered": false,
    "view_count": 32,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1766154004,
    "creation_date": 1766154004,
    "question_id": 79851172,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79851172/android-ble-indication-response-fails",
    "title": "Android BLE indication response fails",
    "body": "<p>I created an Android app that connects to a Peripheral via BLE.</p>\n<p>The remote device eventually sends an Indication, which I process in <code>onCharacteristicChanged</code> and send a follow-up command via <code>gatt.writeCharacteristic</code> from within the callback.</p>\n<p>The code looks something like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onCharacteristicChanged(gatt: BluetoothGatt, ...) {\n    gatt.writeCharacteristic(...) # this sometimes returns 201\n}\n</code></pre>\n<p>The Issue is that <code>writeCharacteristic</code> sometimes returns 201, probably indicating that the BLE stack is busy with another operation.</p>\n<p>This makes sense, since the BLE stack is in the process of sending out an indication confirmation back to the peripheral.</p>\n<p>My question is: How can I determine when the BLE stack is free again, and I can send out another packet?</p>\n<p>I didn't find a callback to determine when the indication was successfully confirmed...</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}