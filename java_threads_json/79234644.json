{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "redis",
      "aerospike"
    ],
    "owner": {
      "account_id": 37970131,
      "reputation": 11,
      "user_id": 28525964,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/bf1e217794e31ba52713568ff94eaea3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Mohammad mahdi Esmaeili",
      "link": "https://stackoverflow.com/users/28525964/mohammad-mahdi-esmaeili"
    },
    "is_answered": true,
    "view_count": 127,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1739187840,
    "creation_date": 1732810545,
    "question_id": 79234644,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79234644/using-aerospike-and-redis-together-in-spring-boot",
    "title": "Using Aerospike and redis together in Spring Boot",
    "body": "<p>I want to use Redis and Aerospike together, in the sense that I want to use Aerospike  for Spring caching, but I want to use Redis as a memory that I only read a single value from(crud repository).\nI am getting an error in configuring Aerospike, the error is that when I am configuring the Aerospike cache management section, it is getting an error with the default value set for Redis in Spring.</p>\n<p>this is my Aerospike config:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(AerospikeProperties.class)\n@EnableAerospikeRepositories(basePackageClasses = {CacheableFileEntityRepository.class})\npublic class AerospikeConfig extends AbstractAerospikeDataConfiguration {\n    @Autowired\n    private AerospikeProperties aerospikeProperties;\n\n    @Override\n    protected Collection&lt;Host&gt; getHosts() {\n        return aerospikeProperties.getHosts() ;\n    }\n\n    @Override\n    protected String nameSpace() {\n        return aerospikeProperties.getNamespace();\n    }\n\n}\n</code></pre>\n<p>and this is my Aerospike Properties:</p>\n<pre><code>@Log4j2\n@Data\n@Profile(&quot;aerospike&quot;)\n@ConfigurationProperties(prefix = &quot;aerospike&quot;)\n@RequiredArgsConstructor(onConstructor_ ={@Autowired})\n\npublic class AerospikeProperties {\n\n    @Value(&quot;${spring.aerospike.host}&quot;)\n    private String host;\n\n    @Value(&quot;${spring.aerospike.port}&quot;)\n    private int port;\n\n    @Value(&quot;${spring.aerospike.namespace}&quot;)\n    private String namespace;\n\n    @Value(&quot;${spring.aerospike.policies.client.readTimeout}&quot;)\n    private int readTimeout;\n    @Value(&quot;${spring.aerospike.policies.client.writeTimeout}&quot;)\n    private int writeTimeout;\n    @Value(&quot;${spring.aerospike.policies.client.connectionTimeout}&quot;)\n    private int connectionTimeout;\n    @Value(&quot;${spring.aerospike.policies.client.maxSocketIdle}&quot;)\n    private int maxSocketIdle;\n    @Value(&quot;${spring.aerospike.policies.client.totalTimeout}&quot;)\n    private int totalTimeout;\n\n    @Bean(destroyMethod = &quot;close&quot;)\n    public AerospikeClient aerospikeClient() {\n\n        try {\n            ClientPolicy clientPolicy = new ClientPolicy();\n            clientPolicy.readPolicyDefault.replica = Replica.MASTER;\n            clientPolicy.readPolicyDefault.readModeAP = ReadModeAP.ONE;\n            clientPolicy.writePolicyDefault.commitLevel = CommitLevel.COMMIT_ALL;\n            clientPolicy.readPolicyDefault.socketTimeout = readTimeout;\n            clientPolicy.readPolicyDefault.totalTimeout = totalTimeout;\n            clientPolicy.writePolicyDefault.socketTimeout = writeTimeout;\n            clientPolicy.writePolicyDefault.totalTimeout = totalTimeout;\n            clientPolicy.maxSocketIdle=maxSocketIdle;\n            clientPolicy.timeout=connectionTimeout;\n            return new AerospikeClient(clientPolicy, host, port);\n        } catch (RuntimeException e) {\n            return null;\n        }\n    }\n\n    protected Collection&lt;Host&gt; getHosts() {\n        return Collections.singleton(new Host(host, port));\n    }\n\n    protected String getNamespace() {\n        return namespace;\n    }\n}\n</code></pre>\n<p>i want to add this code and have error:</p>\n<pre><code>@Bean\npublic AerospikeCacheManager cacheManager(AerospikeClient aerospikeClient) {\n    AerospikeCacheConfiguration defaultConfiguration = new AerospikeCacheConfiguration(&quot;tax_registration&quot;);\n    return new AerospikeCacheManager(aerospikeClient, mappingAerospikeConverter, defaultConfiguration);\n}\n</code></pre>\n<p>this is the error:</p>\n<pre><code>Parameter 1 of constructor in org.springframework.data.aerospike.convert.MappingAerospikeConverter required a single bean, but 2 were found:\n    - org.springframework.data.aerospike.convert.AerospikeCustomConversions: defined in unknown location\n    - redisCustomConversions: defined in unknown location\n</code></pre>\n<p>i use this annotations but not worked</p>\n<pre><code>@Qualifier\n@Primary\n</code></pre>\n<p>this is my spring boot and aerospike version :</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.aerospike&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-aerospike&lt;/artifactId&gt;\n    &lt;version&gt;$4.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}