{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "logging",
      "mapstruct"
    ],
    "owner": {
      "account_id": 32333078,
      "reputation": 1,
      "user_id": 25112351,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/14e69d05717b4260ad69084ec51d8d2f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "user25112351",
      "link": "https://stackoverflow.com/users/25112351/user25112351"
    },
    "is_answered": true,
    "view_count": 246,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1724596835,
    "creation_date": 1720076029,
    "last_edit_date": 1720092441,
    "question_id": 78705464,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78705464/list-to-set-transformation-seems-to-change-order-of-elements",
    "title": "List to set transformation seems to change order of elements",
    "body": "<p>I am creating a certificate and I can specify the transit countries in it, they must be saved in the order in which they were set by the user. But under some circumstances, countries may be saved in random order</p>\n<p>I looked at the logs and it turned out that the order changes somewhere while converting from a dto to an entity. All mapping takes place using the mapstruct library and I suspect that the countryDTOListToCountrySet method is to blame. But I can't find any information on whether the order may be confused when converting from list to set. Can this happen? And if not, how can I log the mapper class generated by mapstruct? So that I can see what happens with each step in mapping DTO to entity</p>\n<p>Im my case there is field in entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Set&lt;Country&gt; transitCountries = new HashSet&lt;&gt;();\n</code></pre>\n<p>Field in dto</p>\n<pre class=\"lang-java prettyprint-override\"><code>private List&lt;CountryDTO&gt; transitCountries;\n</code></pre>\n<p>Both classes use @Data from lombok if its matters</p>\n<p>And this is what mapstruct generates</p>\n<pre><code>protected Set&lt;Country&gt; countryDTOListToCountrySet(List&lt;CountryDTO&gt; list) {\n        if ( list == null ) {\n            return null;\n        }\n\n        Set&lt;Country&gt; set = new HashSet&lt;Country&gt;( Math.max( (int) ( list.size() / .75f ) + 1, 16 ) );\n        for ( CountryDTO countryDTO : list ) {\n            set.add( countryDTOToCountry( countryDTO ) );\n        }\n\n        return set;\n    }\n</code></pre>\n<p>I tried changing HashSet to LinkedHashSet but it doesnt seem to change anything. Idk if it doesnt work because of lombok or something else...</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}