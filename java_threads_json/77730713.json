{
  "question": {
    "tags": [
      "java",
      "minecraft",
      "minecraft-fabric"
    ],
    "owner": {
      "account_id": 26095928,
      "reputation": 11,
      "user_id": 19792059,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/c3e757d762509139978e656aee41752e?s=256&d=identicon&r=PG",
      "display_name": "Spamta Clause",
      "link": "https://stackoverflow.com/users/19792059/spamta-clause"
    },
    "is_answered": false,
    "view_count": 1137,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1742929270,
    "creation_date": 1703834510,
    "last_edit_date": 1703875284,
    "question_id": 77730713,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77730713/how-can-i-detect-a-players-death-and-what-killed-it-fabric-mc-1-20-4",
    "title": "How can I detect a player&#39;s death and what killed it - Fabric MC 1.20.4",
    "body": "<p>I've tried using a mixin yet it doesn't seem to run at all, the following is my code,</p>\n<pre><code>import net.minecraft.entity.damage.DamageSource;\nimport net.minecraft.entity.player.PlayerEntity;\nimport net.spamta.pvpoverhaul.PvPOverhaul;\nimport org.spongepowered.asm.mixin.Mixin;\nimport org.spongepowered.asm.mixin.injection.At;\nimport org.spongepowered.asm.mixin.injection.Inject;\nimport org.spongepowered.asm.mixin.injection.callback.CallbackInfo;\n\nimport net.fabricmc.fabric.api.event.lifecycle.v1.ServerTickEvents;\nimport net.minecraft.server.MinecraftServer;\nimport net.minecraft.server.network.ServerPlayerEntity;\nimport net.minecraft.text.Text;\n\n@Mixin(PlayerEntity.class)\npublic class GearKeeper {\n    \n    @Inject(method=&quot;onDeath&quot;, at=@At(&quot;TAIL&quot;))\n    private void died(DamageSource damageSource, CallbackInfo info){\n        PvPOverhaul.LOGGER.info(damageSource.getName().toString());\n\n        PlayerEntity player = (PlayerEntity) (Object) this;\n        sendDeathMessageToAllPlayers(player);\n    }\n\n    private void sendDeathMessageToAllPlayers(PlayerEntity player) {\n        MinecraftServer server = player.getServer();\n        if (server != null) {\n            server.getPlayerManager().getPlayerList().forEach(serverPlayer -&gt; {\n                serverPlayer.sendMessage(Text.literal(player.getName().toString() + &quot; has perished!&quot;), false);\n            });\n        }\n    }\n\n}\n</code></pre>\n<p>Tried detecting if a player was killed and expected it to say &quot;Piglin Brute&quot; or whatever was killing me at that time yet it didn't end up logging anything.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}