{
  "question": {
    "tags": [
      "java",
      "kubernetes",
      "shared-libraries",
      "native",
      "coredump"
    ],
    "owner": {
      "account_id": 39538506,
      "reputation": 11,
      "user_id": 29327068,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/22f139b1385c66bccda7e71257fc8730?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Lokesh P",
      "link": "https://stackoverflow.com/users/29327068/lokesh-p"
    },
    "is_answered": false,
    "view_count": 154,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1754637373,
    "creation_date": 1738065228,
    "last_edit_date": 1738736240,
    "question_id": 79393702,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79393702/generate-core-dump-when-native-library-crashes-in-java-application-running-in-ku",
    "title": "generate core dump when native library crashes in java application running in kubernetes",
    "body": "<p>I have a java service which is running in k8s,uses a native library (written in c++). I have set the core dump path to persistent mount NFS (with this command: <code>echo &quot;/nfs/core_dumps/core.%t.%p&quot; | tee /proc/sys/kernel/core_pattern</code>). The core dump was not generating when the native library crashes, the last logs are as follows,</p>\n<pre><code>&gt; &gt; #\n&gt; # A fatal error has been detected by the Java Runtime Environment:\n&gt; #\n&gt; #  SIGSEGV (0xb) at pc=0x00007efde450e688, pid=1, tid=103\n&gt; #\n&gt; # JRE version: OpenJDK Runtime Environment Temurin-17.0.13+11 (17.0.13+11) (build 17.0.13+11)\n&gt; # Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.13+11 (17.0.13+11, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc,\n&gt; linux-amd64)\n&gt; # Problematic frame:\n&gt; # C  [lib.Converter.so.1.0+0xee688]  SetConverterMode+0xc8\n&gt; #\n&gt; # Core dump will be written. Default location: /nfs/core_dumps/core.%t.1\n&gt; #\n&gt; # JFR recording file will be written. Location: //hs_err_pid1.jfr\n&gt; #\n&gt; # An error report file with more information is saved as:\n&gt; # /nfs/my-folder/core_dump_%t.log\n&gt; #\n&gt; # If you would like to submit a bug report, please visit:\n&gt; #   https://github.com/adoptium/adoptium-support/issues\n&gt; # The crash happened outside the Java Virtual Machine in native code.\n&gt; # See problematic frame for where to report the bug.\n&gt; #\n&gt; \n&gt; [error occurred during error reporting (), id 0xb, SIGSEGV (0xb) at\n&gt; pc=0x00007eff17d249a2]\n</code></pre>\n<p>I was calling a native method (that crashes with SIGSEGV signal), in this scenario the\nCore dump is expected to be generated (the logs says, core dump will be written at <code>/nfs/core_dumps</code>) but actually it is not generating (i could confirm this, as after the crash, pod restarted and I logged into the container shell and could see no core file under the nfs(persistent) folder)</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}