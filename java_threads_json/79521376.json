{
  "question": {
    "tags": [
      "java",
      "spring",
      "postgresql",
      "spring-boot",
      "hibernate"
    ],
    "owner": {
      "account_id": 32467947,
      "reputation": 43,
      "user_id": 25224125,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/331556bd2946bc085b33d2240d0c63b8?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Mike Sonarov",
      "link": "https://stackoverflow.com/users/25224125/mike-sonarov"
    },
    "is_answered": true,
    "view_count": 181,
    "accepted_answer_id": 79522592,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1742466047,
    "creation_date": 1742417735,
    "last_edit_date": 1742417788,
    "question_id": 79521376,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79521376/migrating-to-hibernate-6-and-spring-boot-3-try-save-enum",
    "title": "Migrating to hibernate 6 and spring boot 3 try save Enum[]",
    "body": "<p>I migrate my project to hibernate 6.5.3.Final and I can't write value in postgres database</p>\n<p>I have field in Entity:</p>\n<pre><code>@Nullable\n@Column(name = &quot;test_col&quot;, columnDefinition = &quot;test_enum_type[]&quot;)\n@Enumerated(EnumType.STRING)\n@JdbcTypeCode(SqlTypes.NAMED_ENUM)\n\nprivate TestEnum[] testEnum = new TestEnum[0];\n</code></pre>\n<p>Enum:</p>\n<pre><code>public enum TestEnum  {\n    AAA(&quot;fggh&quot;),\n    BBB(&quot;dffg&quot;),\n    CCC(&quot;dffg&quot;)\n}\n</code></pre>\n<p>Database structure:</p>\n<pre><code>create type test_enum_type as enum ('AA', 'BB', 'VV');\n\ncreate table test_table\n(\n    id                      integer                   default nextval('seq'::regclass) not null\n        primary key,\n    test_col          test_enum_type[]\n);\n</code></pre>\n<p>And method:</p>\n<pre><code>objTest.setReceivedData\n        .testEnum(new TestEnum[] {TestEnum.AA, TestEnum.BB})\n        .build()\n);\n    \n</code></pre>\n<p>I have error:\nCannot read the array length because &quot;values&quot; is null</p>\n<p>If I try:</p>\n<pre><code>@Nullable\n@Column(name = &quot;test_col&quot;, columnDefinition = &quot;test_enum_type[]&quot;)\n@Enumerated(EnumType.STRING)\n@JdbcTypeCode(SqlTypes.ARRAY)\n\nprivate TestEnum[] testEnum = new TestEnum[0];\n</code></pre>\n<p>Error:\nCaused by: org.postgresql.util.PSQLException: ERROR: column 'test_col' is of type test_enum_type[] and expression is of character varying[]\nHint: Rewrite the expression or convert its type.</p>\n<p>How it work? How I can save values in database?\nI found <a href=\"https://discourse.hibernate.org/t/hibernate-6-6-with-array-of-enum/10679/15\" rel=\"nofollow noreferrer\">https://discourse.hibernate.org/t/hibernate-6-6-with-array-of-enum/10679/15</a>, but without solved</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}