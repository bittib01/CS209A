{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "filter",
      "multipartform-data"
    ],
    "owner": {
      "account_id": 23953085,
      "reputation": 133,
      "user_id": 19083408,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/f57d5e094807d232feecdd72adf35754?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "RedBlue",
      "link": "https://stackoverflow.com/users/19083408/redblue"
    },
    "is_answered": false,
    "view_count": 458,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1728539171,
    "creation_date": 1707137715,
    "last_edit_date": 1707139707,
    "question_id": 77941120,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77941120/spring-boot-filter-with-form-data-or-x-www-form-urlencoded",
    "title": "Spring Boot Filter with form-data or x-www-form-urlencoded",
    "body": "<p>The actual request is with a Content-Type application/json then the request will go to filter to be modify, change the Content-Type to <code>multipart/form-data</code> then add a hardcoded key and value as a <code>form-data</code> but my current set up is not working. Any idea?</p>\n<pre><code>public class LogRequestResponseFilter implements Filter {\n\n   \n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n\n        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\n        HttpServletResponse httpServletResponse = (HttpServletResponse) servletResponse;\n\n\n       \n            \n            ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper(httpServletRequest);\n            ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(httpServletResponse);\n\n//            MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) wrappedRequest;\n//            multipartRequest.getParameterMap().put(&quot;scope&quot;, new String[]{&quot;read&quot;});\n\n            filterChain.doFilter(wrappedRequest, responseWrapper);\n\n            String responseBody = getStringValue(responseWrapper.getContentAsByteArray(),servletResponse.getCharacterEncoding());\n\n            generateTokenUriLog(responseBody,httpServletRequest,httpServletResponse);\n            responseWrapper.copyBodyToResponse();\n</code></pre>\n<p>Error\nThis is the error if im going to uncomment this code</p>\n<p><code>MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) wrappedRequest;</code></p>\n<p><code>multipartRequest.getParameterMap().put(&quot;scope&quot;, new String[]{&quot;read&quot;});</code></p>\n<pre><code>\nclass org.springframework.web.util.ContentCachingRequestWrapper cannot be cast to class org.springframework.web.multipart.MultipartHttpServletRequest\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}