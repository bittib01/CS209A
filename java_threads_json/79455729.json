{
  "question": {
    "tags": [
      "java",
      "spring-mvc",
      "openpdf"
    ],
    "owner": {
      "account_id": 60442,
      "reputation": 4197,
      "user_id": 180524,
      "user_type": "registered",
      "accept_rate": 59,
      "profile_image": "https://www.gravatar.com/avatar/5093d3948920a6dbc5148db9b36dbb74?s=256&d=identicon&r=PG",
      "display_name": "Jason",
      "link": "https://stackoverflow.com/users/180524/jason"
    },
    "is_answered": true,
    "view_count": 47,
    "accepted_answer_id": 79456030,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1740093376,
    "creation_date": 1740082325,
    "last_edit_date": 1740087050,
    "question_id": 79455729,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79455729/spring-mvc-controller-generates-pdf-but-doesnt-prompt-for-download",
    "title": "Spring MVC Controller Generates PDF but Doesn&#39;t Prompt for Download",
    "body": "<p>I have the following Spring MVC method that generates a PDF using OpenPDF:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(path = &quot;/report/**&quot;)\n    public ResponseEntity&lt;byte[]&gt; report(@RequestBody ReportRequest reportRequest) {\n        \n    \n        // get the media\n        try {\n            ApiReport report = reportRegistry.getReport(reportRequest.getReportId());\n            if (report == null) {\n                throw new ApiReportException(&quot;Report not found&quot;);\n            }\n            \n            byte[] reportBytes = report.processReport(reportRequest.getParameters());\n            if (reportBytes == null || reportBytes.length == 0) {\n                throw new ApiReportException(&quot;Report length was 0&quot;);\n            }\n            \n            HttpHeaders headers = new HttpHeaders();\n            headers.set(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=output.pdf&quot;);\n            headers.setContentType(MediaType.APPLICATION_PDF);\n            headers.setContentLength(reportBytes.length);\n            headers.setCacheControl(&quot;must-revalidate, post-check=0, pre-check=0&quot;);\n\n            ResponseEntity&lt;byte[]&gt; result = new ResponseEntity&lt;&gt;(reportBytes, headers, HttpStatus.OK);\n            return result;\n        } catch (ReportException e) {\n            throw new ApiReportException(e.getMessage(), e);\n        }\n\n    }\n</code></pre>\n<p>The report is generated, and bytes are returned to the browser. What does NOT happen is that I'm not prompted to download the file, nor does an application open to handle the PDF.</p>\n<p>This method is called from an Angular application:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    const response = this.$http.post(this.reportUrl, reportRequest, {headers:headers, responseType: &quot;blob&quot;});\n    return response;\n</code></pre>\n<p>I'm probably just making a very dumb mistake here. If anyone can point it out I would appreciate it.</p>\n<p>Edit: Response Headers.</p>\n<p><a href=\"https://i.sstatic.net/65sOc3TB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/65sOc3TB.png\" alt=\"Chrome Response Headers\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}