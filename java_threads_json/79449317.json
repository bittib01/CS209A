{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "validation",
      "spring-mvc",
      "thymeleaf"
    ],
    "owner": {
      "account_id": 27463649,
      "reputation": 21,
      "user_id": 20953758,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/AEdFTp4wldPovjrG7ShfJ0DkHqkq9GENAZUFP7Sd1GX4Kw=k-s256",
      "display_name": "PRAJWAL BHANARKAR",
      "link": "https://stackoverflow.com/users/20953758/prajwal-bhanarkar"
    },
    "is_answered": false,
    "view_count": 90,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1741343332,
    "creation_date": 1739904901,
    "last_edit_date": 1739970394,
    "question_id": 79449317,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79449317/spring-boot-form-validation-not-displaying-error-messages-properly",
    "title": "Spring Boot Form Validation Not Displaying Error Messages Properly",
    "body": "<p><strong>Spring Boot Form Validation Messages Not Displaying, Saving Data Despite Errors</strong></p>\n<p>And for the problem details:</p>\n<p>I am working on a Spring Boot application with form validation using <code>@Valid</code> and <code>BindingResult</code>. My form includes a name field with the following constraints:</p>\n<p><code>@NotBlank(message = &quot;Name field should be required&quot;)</code></p>\n<p><code>@Size(min = 2, max = 20, message = &quot;Min 2 characters and max 20 characters allowed&quot;)</code></p>\n<p><code>private String name;</code></p>\n<p>However, when I submit the form without entering a name, the validation messages are not displayed. Instead, the application proceeds with saving the data and throws the following error (see also <a href=\"https://i.sstatic.net/65KURR1B.png\" rel=\"nofollow noreferrer\">on the image</a>):</p>\n<p><code>Something went wrong! could not execute statement [Duplicate entry '' for key 'user.UKob8kqyqqgmefl0aco34akdtpe']</code></p>\n<p>Here is my controller method:</p>\n<pre><code>@RequestMapping(value = &quot;/do_register&quot;, method = RequestMethod.POST)\n    public String registerUser( @ModelAttribute(&quot;user&quot;)@Valid User user,BindingResult result,\n            @RequestParam(value = &quot;agreement&quot; ,\n            defaultValue = &quot;false&quot;)boolean agreement, \n            Model model,HttpSession session)\n    {\n        \n        try {\n            \n            if(result.hasErrors()) {\n                System.out.println(&quot;Error &quot;+result.toString());\n                model.addAttribute(&quot;user&quot;,user);\n                return &quot;signup&quot;;\n            }\n            \n            if(!agreement) {\n                System.out.println(&quot;You didn't accept the agreement&quot;);\n                throw new Exception(&quot;You didn't accept the agreement&quot;);\n            }\n            \n            \n            \n            \n            user.setRole(&quot;Role_User&quot;);\n            user.setEnabled(true);\n            user.setImageUrl(&quot;default.png&quot;);\n            \n            System.out.println(agreement);\n            System.out.println(user);\n            \n            User userResult = this.userRepository.save(user);\n            \n\n//          return blank user\n            model.addAttribute(&quot;user&quot;,new User());\n            session.setAttribute(&quot;message&quot;, new Message(&quot;User successfully registered ! &quot;,&quot;alert-success&quot;));\n            return &quot;signup&quot;;\n            \n//          handling error here\n        } catch (Exception e) {\n            // TODO: handle exception\n            e.printStackTrace();\n            model.addAttribute(&quot;user&quot;,user);\n            session.setAttribute(&quot;message&quot;, new Message(&quot;Something went wrong! &quot;+e.getMessage(),&quot;alert-danger&quot;));\n            return &quot;signup&quot;;\n            \n        }\n        \n    }\n</code></pre>\n<h3>What Iâ€™ve Tried:</h3>\n<ul>\n<li><p>Checked if <code>BindingResult</code> captures errors (it does).</p>\n</li>\n<li><p>Ensured the form field has <code>th:field=&quot;*{name}&quot;</code> in the Thymeleaf template.</p>\n</li>\n<li><p>Used <code>th:errors=&quot;*{name}&quot;</code> to display errors.</p>\n</li>\n<li><p>Verified the <code>@Valid</code> annotation is correctly used.</p>\n</li>\n</ul>\n<p>Front-End Code</p>\n<pre><code>&lt;!--Name Input Field  --&gt;\n                            &lt;div class=&quot;mb-3&quot;&gt;\n                                &lt;label for=&quot;name_field&quot; class=&quot;form-label&quot;&gt;Your Name&lt;/label&gt; &lt;input\n                                    name=&quot;name&quot; required type=&quot;text&quot; class=&quot;form-control&quot;\n                                    th:classappend=&quot;${#fields.hasErrors('name')} ? 'is-invalid' : ''&quot;\n                                    id=&quot;name_field&quot; th:value=&quot;${user.name}&quot;\n                                    placeholder=&quot;Enter your name here&quot; /&gt;\n\n                                &lt;!-- Display validation message --&gt;\n                                &lt;div class=&quot;invalid-feedback&quot;\n                                    th:if=&quot;${#fields.hasErrors('name')}&quot; th:errors=&quot;*{name}&quot;&gt;\n                                    Name error&lt;/div&gt;\n\n                            &lt;/div&gt;\n                            &lt;!--Name Input Field  End Here--&gt;\n</code></pre>\n<p>I tried adding validation annotations in my <strong>User</strong> entity and used <code>@Valid</code> with <code>BindingResult</code> in my controller. I expected that when submitting the form with an empty or invalid name, the validation messages would be displayed, and the form would not be submitted. However, instead of showing the error messages, the form proceeds with submission, and I get an SQL exception due to a duplicate entry for an empty name field.</p>\n<pre><code>package com.ninja.entity;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.validation.constraints.NotBlank;\nimport javax.validation.constraints.Size;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.Table;\n\n\n\n@Entity\n@Table(name = &quot;User&quot;)\npublic class User {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n    \n\n    @NotBlank(message = &quot;Name field should be required&quot;)\n    @Size(min = 2, max = 20, message = &quot;min 2 characters and max 20 characters allowed&quot;)\n    private String name;\n    \n    @Column(unique = true)\n    \n    private String email;\n\n    \n    private String password;\n    \n    \n    private String role;\n    private Boolean enabled;\n    private String imageUrl;\n    @Column(length = 500)\n    private String about;\n    \n    @OneToMany(cascade = CascadeType.ALL,fetch = FetchType.LAZY,mappedBy = &quot;user&quot;) //cascade: if user deleted then all related contact related to user will be delete\n    private List&lt;Contact&gt;contacts = new ArrayList&lt;&gt;();\n    \n    \n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}