{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "kotlin",
      "spring-boot-starter",
      "bucket4j"
    ],
    "owner": {
      "account_id": 27419468,
      "reputation": 1,
      "user_id": 20918149,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/c3e843ceaef8b03c7b242007ceaa7c5b?s=256&d=identicon&r=PG",
      "display_name": "user20918149",
      "link": "https://stackoverflow.com/users/20918149/user20918149"
    },
    "is_answered": false,
    "view_count": 1268,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1711437316,
    "creation_date": 1707571397,
    "question_id": 77973235,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77973235/why-is-bucket4j-not-working-with-caffeine",
    "title": "Why is bucket4j not working with caffeine",
    "body": "<p>I am trying to implement bucket4j and it is working on a default non customized cache (jCache I guess).</p>\n<pre><code>spring:\n...\n  cache:\n    cache-names: rate_limit_buckets\n\nbucket4j:\n  enabled: true\n  filters:\n    - cache-name: rate_limit_bucketss\n      url: /api/notification-admin/images\n      rate-limits:\n        - cache-key: getRemoteAddr()\n          bandwidths:\n            - capacity: 1\n              time: 100\n              unit: seconds\n</code></pre>\n<p>However when I try to use caffeine,</p>\n<pre><code>  cache:\n    type: caffeine\n    cache-names: rate_limit_buckets\n</code></pre>\n<p>the app starts, but the rate limiting does not work. It is even weirder that I can set cache-name to anything and the app starts.\n(If I do not use caffeine the app fails to start.)</p>\n<p>I tried different ways to config caffeine (in a class, coffee-boots) but the results are the same, usually it does not work at all or it seems to ignore the caffeine config.</p>\n<p>Thank you for your tips.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}