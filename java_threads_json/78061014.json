{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "docker",
      "paketo"
    ],
    "owner": {
      "account_id": 2417105,
      "reputation": 745,
      "user_id": 2110920,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/8bc42dad98325f35df3ef42e25405a63?s=256&d=identicon&r=PG",
      "display_name": "Tobi",
      "link": "https://stackoverflow.com/users/2110920/tobi"
    },
    "is_answered": true,
    "view_count": 1261,
    "accepted_answer_id": 78061078,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1737626496,
    "creation_date": 1708951504,
    "last_edit_date": 1708952094,
    "question_id": 78061014,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78061014/spring-boot-spring-bootbuild-image-how-to-configure-direct-memory-maxdirectme",
    "title": "Spring Boot spring-boot:build-image: how to configure direct memory (MaxDirectMemorySize)?",
    "body": "<p>I use the spring-boot:build-image maven target for building a docker image of my Spring Boot application. I have following setup in my pom.xml</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;image&gt;\n            &lt;builder&gt;paketobuildpacks/builder:full&lt;/builder&gt;\n            &lt;runImage&gt;gcr.io/paketo-buildpacks/run:full-cnb&lt;/runImage&gt;\n            &lt;env&gt;\n                &lt;BP_JVM_VERSION&gt;17&lt;/BP_JVM_VERSION&gt;\n                &lt;JAVA_TOOL_OPTIONS&gt;-XX:MaxDirectMemorySize=64M&lt;/JAVA_TOOL_OPTIONS&gt;\n            &lt;/env&gt;\n        &lt;/image&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>How can I change the MaxDirectMemorySize? The JAVA_TOOL_OPTIONS environment doesn't work. I still get following console log output on startup:</p>\n<pre><code>Calculated JVM Memory Configuration: -XX:MaxDirectMemorySize=10M -Xmx1310134K -XX:MaxMetaspaceSize=275017K -XX:ReservedCodeCacheSize=240M -Xss1M (Total Memory: 2G, Thread Count: 250, Loaded Class Count: 46141, Headroom: 0%)\nPicked up JAVA_TOOL_OPTIONS: -Djava.security.properties=/layers/paketo-buildpacks_bellsoft-liberica/java-security-properties/java-security.properties -XX:+ExitOnOutOfMemoryError -XX:ActiveProcessorCount=4 -XX:MaxDirectMemorySize=10M -Xmx1310134K -XX:MaxMetaspaceSize=275017K -XX:ReservedCodeCacheSize=240M -Xss1M -XX:+UnlockDiagnosticVMOptions -XX:NativeMemoryTracking=summary -XX:+PrintNMTStatistics -Dorg.springframework.cloud.bindings.boot.enable=true\n</code></pre>\n<p>How can I increase the max direct memory size? Thanks a lot!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}