{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "blaze-persistence"
    ],
    "owner": {
      "account_id": 45039731,
      "reputation": 11,
      "user_id": 32067230,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/a0fce731dcd22de7cc66e11df2cd8774?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "JustinG",
      "link": "https://stackoverflow.com/users/32067230/justing"
    },
    "is_answered": false,
    "view_count": 68,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1766003919,
    "creation_date": 1765973928,
    "question_id": 79849433,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79849433/classcastexception-when-using-blaze-persistence-entityviewspecificationexecutor",
    "title": "ClassCastException when using Blaze Persistence EntityViewSpecificationExecutor with Spring Data JPA findOne",
    "body": "<p>I’m trying to integrate <strong>Blaze Persistence</strong> with <strong>Spring Boot 3.5.5</strong> (Java 21, Hibernate 6.2). This is my first attempt to use Blaze in one of my projects, and I’m running into an incompatibility between <strong>Spring Data JPA</strong> and <strong>Blaze Persistence’s</strong> <code>EntityViewSpecificationExecutor</code> when calling <code>findOne</code>.</p>\n<p>Problem :<br />\nWhen I call <code>findOne</code>, Spring Data JPA expects to return an <code>Optional&lt;T&gt;</code>, but Blaze Persistence expects to return an <strong>Entity View</strong>. As a result, I get a <code>ClassCastException</code>:</p>\n<p><code>java.lang.ClassCastException: class java.util.Optional cannot be cast to class xx.xxx.xxx.prestation.views.PrestationStatusView </code></p>\n<p><code>(java.util.Optional is in module java.base of loader 'bootstrap'; </code></p>\n<p><code>xx.xxx.xxx.prestation.views.PrestationStatusView is in unnamed module of loader 'app')</code></p>\n<pre><code>\n@Transactional(readOnly = true)\npublic interface PrestationStatusRepository\n    extends EntityViewRepository&lt;PrestationStatusView, Long&gt;,\n            EntityViewSpecificationExecutor&lt;PrestationStatusView, Prestation&gt; {\n}\n</code></pre>\n<pre><code>Dependencies : \n\n&lt;!-- Core dependencies --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;\n    &lt;artifactId&gt;blaze-persistence-integration-hibernate-6.2&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;!-- Spring integration dependencies --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;\n    &lt;artifactId&gt;blaze-persistence-integration-entity-view-spring-6.0&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;\n    &lt;artifactId&gt;blaze-persistence-integration-spring-data-3.4&lt;/artifactId&gt;\n    &lt;version&gt;${blaze-persistence.version}&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.blazebit&lt;/groupId&gt;\n    &lt;artifactId&gt;blaze-persistence-integration-spring-data-base-4.0&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h4>Question</h4>\n<p>How can I properly configure Blaze Persistence with Spring Data JPA so that <code>findOne</code> works correctly with <code>EntityViewSpecificationExecutor</code>?</p>\n<ul>\n<li><p>Should I avoid using <code>findOne</code> directly on the repository?</p>\n</li>\n<li><p>Is there a specific Blaze Persistence API I should call instead?</p>\n</li>\n<li><p>Or is this a known incompatibility between Spring Data JPA’s <code>Optional</code> return type and Blaze’s Entity View handling?</p>\n</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}