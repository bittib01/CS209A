{
  "question": {
    "tags": [
      "java",
      "parsing",
      "antlr4"
    ],
    "owner": {
      "account_id": 35030879,
      "reputation": 9,
      "user_id": 26935403,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/652bd9bef164e61f8331b3818b962d22?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Slider",
      "link": "https://stackoverflow.com/users/26935403/slider"
    },
    "is_answered": false,
    "view_count": 79,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1724331363,
    "creation_date": 1724275025,
    "last_edit_date": 1724331363,
    "question_id": 78899031,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78899031/antlr4-class-parsetree-not-defined",
    "title": "ANTLR4: class ParseTree not defined",
    "body": "<p>I'm using Eclipse/Java with ANTLR4 version 4.13.2. I have followed the example from the tutorial series from Jackie Wang (Youtube). I'm stuck in the main program. I get an error with the class 'ParseTree', which seems to be undefined.</p>\n<p><a href=\"https://i.sstatic.net/DdYknea4.png\" rel=\"nofollow noreferrer\">Eclipse error message</a></p>\n<pre><code>package app;\n\nimport java.io.IOException;\n\n//import org.antlr.runtime.tree.ParseTree;\nimport org.antlr.v4.runtime.CharStream;\nimport org.antlr.v4.runtime.CharStreams;\nimport org.antlr.v4.runtime.CommonTokenStream;\n\nimport antlr.ExprLexer;\nimport antlr.ExprParser;\nimport antlr.ExprParser.ProgContext;\nimport expression.AntlrToProgram;\nimport expression.ExpressionProcessor;\nimport expression.Program;\n\npublic class ExpressionApp {\n\n    public static void main(String[] args) {\n        if(args.length != 1) {\n            System.err.print(&quot;Usage: file name&quot;);\n        }\n        else {\n            String fileName = args[0];\n            ExprParser parser = getParser(fileName);\n            \n            // Tell ANTLR to build a parse tree\n            // parse from the start symbol 'prog'\n            ParseTree xantlrAST = parser.prog();\n            // Create a visitor for converting the parse tree into Program/Expression object\n            AntlrToProgram progVisitor = new AntlrToProgram();\n            Program prog = progVisitor.visit(antlrAST);\n            \n            if (progVisitor.semanticErrors.isEmpty()) {\n                ExpressionProcessor ep = new ExpressionProcessor(prog.expressions);\n                for (String evaluation: ep.getEvaluationResults()) {\n                    System.out.println(evaluation);\n                }\n            }\n            else {\n                for (String err: progVisitor.semanticErrors) {\n                    System.out.println(err);\n                }\n            }\n                \n        }\n    }\n</code></pre>\n<p>The example from Jackie Wang has used the ANTLR4 version 4.8.</p>\n<p>Even after searching the internet for a long time, I haven't been able to find any solution to my problem. I don't have much experience with Java and Eclipse and don't know how to help myself.</p>\n<p>Thanks for any help</p>\n<p>The defined grammar is very simple and the start symbol is 'prog':</p>\n<pre><code>//\ngrammar Expr;\n\n/* The grammar name and file name must match */\n\n@header {\n    package antlr;\n}\n\n// 'prog' is the start variable\nprog: (decl | expr)+ EOF            # Program\n    ;\n\ndecl: ID ':' INT_TYPE '=' NUM       # Declaration\n    ;\n\n    /* ANTLR resolves ambiguities in favor of the alternative given first */\nexpr: expr '*' expr                 # Multiplication\n    | expr '+' expr                 # Addition\n    | ID                            # Variable\n    | NUM                           # Number\n    ;\n\n/* Tokens */\nID : [a-z][a-zA-Z0-9_]*; // identifiers\nNUM : '0' | '-'?[1-9][0-9]*;\nINT_TYPE : 'INT';\nCOMMENT : '--' ~[\\r\\n]* -&gt; skip;\nWS : [ \\t\\n]+ -&gt; skip;\n</code></pre>\n<p>The use IDE is Eclipse and the screenshot shows the structure in the Project Explorer:</p>\n<p><a href=\"https://i.sstatic.net/CbR1Hpir.png\" rel=\"nofollow noreferrer\">Structure in Eclipse Project Explorer</a></p>\n<p>All visitor classes are defined and are located within the package 'expression'. The two warnings in the generated Java classes in package 'antlr' are caused by &quot;@SuppressWarnings&quot; showing in the following screenshot:</p>\n<p><a href=\"https://i.sstatic.net/EGg73jZP.png\" rel=\"nofollow noreferrer\">SuppressWarnings</a></p>\n<p>The Build Path setup was made for Library and Source:</p>\n<p><a href=\"https://i.sstatic.net/jGG45xFd.png\" rel=\"nofollow noreferrer\">Build Path Library</a></p>\n<p><a href=\"https://i.sstatic.net/53Sy5B0H.png\" rel=\"nofollow noreferrer\">Build Path Source</a></p>\n<p>Are there any further information necessary which I shall provide?</p>\n<p>If necessary, I can also make the project available if there is a possibility to do so here.</p>\n<hr />\n<p>I would like to add one more piece of information:</p>\n<p>If I change the faulty program line to choose the returned parameter type as 'ProgContext', this error message disappears. The change looks now like this:</p>\n<pre><code>package app;\n\nimport java.io.IOException;\n\n//import org.antlr.runtime.tree.ParseTree;\nimport org.antlr.v4.runtime.CharStream;\nimport org.antlr.v4.runtime.CharStreams;\nimport org.antlr.v4.runtime.CommonTokenStream;\n\nimport antlr.ExprLexer;\nimport antlr.ExprParser;\nimport antlr.ExprParser.ProgContext;\nimport expression.AntlrToProgram;\n//import expression.Expression.*;\nimport expression.ExpressionProcessor;\nimport expression.Program;\n\npublic class ExpressionApp {\n\n    public static void main(String[] args) {\n        if(args.length != 1) {\n            System.err.print(&quot;Usage: file name&quot;);\n        }\n        else {\n            String fileName = args[0];\n            ExprParser parser = getParser(fileName);\n            \n            // Tell ANTLR to build a parse tree\n            // parse from the start symbol 'prog'\n//          ParseTree xantlrAST = parser.prog();\n            ProgContext antlrAST = parser.prog();\n            // Create a visitor for converting the parse tree into Program/Expression object\n            AntlrToProgram progVisitor = new AntlrToProgram();\n            Program prog = progVisitor.visit(antlrAST);\n            \n            if (progVisitor.semanticErrors.isEmpty()) {\n                ExpressionProcessor ep = new ExpressionProcessor(prog.expressions);\n                for (String evaluation: ep.getEvaluationResults()) {\n                    System.out.println(evaluation);\n                }\n            }\n            else {\n                for (String err: progVisitor.semanticErrors) {\n                    System.out.println(err);\n                }\n            }\n                \n        }\n    }\n\n    /* \n     * Here the types of parser and lexer are specific to the\n     * grammar name Expr.g4.\n     */\n    private static ExprParser getParser(String fileName) {\n        ExprParser parser = null;\n        \n        try {\n            CharStream input = CharStreams.fromFileName(fileName);\n            ExprLexer lexer = new ExprLexer(input);\n            CommonTokenStream tokens = new CommonTokenStream(lexer);\n            parser = new ExprParser(tokens);\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return parser;\n    }\n}\n</code></pre>\n<p>Now that the only error has disappeared, I can execute a RUN.</p>\n<p>In this case I get the following message in the console:</p>\n<p><strong>Fehler: Hauptklasse app.ExpressionApp kann nicht initialisiert werden\nUrsache: java.lang.NoClassDefFoundError: org/antlr/v4/runtime/tree ParseTree</strong></p>\n<p>Translation:</p>\n<p><strong>Error: Main class app.ExpressionApp cannot be initialized\nCause: java.lang.NoClassDefFoundError: org/antlr/v4/runtime/tree/ParseTree</strong></p>\n<p><a href=\"https://i.sstatic.net/2jEj2DM6.png\" rel=\"nofollow noreferrer\">Console error message</a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}