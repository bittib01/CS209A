{
  "question": {
    "tags": [
      "java",
      "maven",
      "javafx",
      "geotools"
    ],
    "owner": {
      "account_id": 9875097,
      "reputation": 633,
      "user_id": 7313173,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Alex",
      "link": "https://stackoverflow.com/users/7313173/alex"
    },
    "is_answered": true,
    "view_count": 219,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1755200935,
    "creation_date": 1754393602,
    "last_edit_date": 1754396856,
    "question_id": 79726043,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79726043/problems-at-running-application-with-java21-geotools-and-javafx",
    "title": "Problems at running application with Java21, Geotools and Javafx",
    "body": "<p>My target is to create an application, which uses <code>Java 21.0.7</code> (OpenJDK), <code>JavaFx 23.0.2</code> and <code>GeoTools 34-SNAPSHOT</code> to show S57 sea charts.</p>\n<p>As a prerequirement I have downloaded <code>javafx-sdk-23.0.2</code> as well and set the environment variable <code>FX-PATH=C:\\Git\\openjfx-23.0.2_windows-x64_bin-sdk\\javafx-sdk-23.0.2\\lib</code>.</p>\n<p>The application contains the <code>pom.xml</code> and two classes:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;GeoToolsTest&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;version.java&gt;21&lt;/version.java&gt;\n        &lt;maven.compiler.source&gt;${version.java}&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;${version.java}&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n\n        &lt;version.javafx&gt;23.0.2&lt;/version.javafx&gt;\n        &lt;version.geotools&gt;34-SNAPSHOT&lt;/version.geotools&gt;\n        &lt;maven.deploy.skip&gt;true&lt;/maven.deploy.skip&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;!-- Import the GeoTools BOM --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n                &lt;artifactId&gt;gt-bom&lt;/artifactId&gt;\n                &lt;version&gt;${version.geotools}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;osgeo&lt;/id&gt;\n            &lt;name&gt;OSGeo Release Repository&lt;/name&gt;\n            &lt;url&gt;https://repo.osgeo.org/repository/release/&lt;/url&gt;\n            &lt;snapshots&gt;&lt;enabled&gt;false&lt;/enabled&gt;&lt;/snapshots&gt;\n            &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;osgeo-snapshot&lt;/id&gt;\n            &lt;name&gt;OSGeo Snapshot Repository&lt;/name&gt;\n            &lt;url&gt;https://repo.osgeo.org/repository/snapshot/&lt;/url&gt;\n            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n            &lt;releases&gt;&lt;enabled&gt;false&lt;/enabled&gt;&lt;/releases&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/config&lt;/directory&gt;\n                &lt;targetPath&gt;${project.build.directory}&lt;/targetPath&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.14.0&lt;/version&gt;\n                &lt;configuration&gt;&lt;release&gt;${version.java}&lt;/release&gt;&lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;configuration&gt;&lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;&lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;!-- Build an executable JAR --&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.4.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                            &lt;mainClass&gt;org.example.Starter&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx&lt;/artifactId&gt;\n            &lt;version&gt;${version.javafx}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${version.javafx}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\n            &lt;version&gt;${version.javafx}&lt;/version&gt;\n        &lt;/dependency&gt;\n       &lt;dependency&gt;\n            &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n            &lt;artifactId&gt;gt-shapefile&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n            &lt;artifactId&gt;gt-swing&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n            &lt;artifactId&gt;gt-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>The class <code>org.example.Starter</code> (which acts as a wrapper class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\npublic class Starter {\n    //Wrapper class\n    public static void main(String[] args) {\n        Main.main(args);\n    }\n}\n</code></pre>\n<p>And the file: <code>org.example.Main</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport javafx.application.Application;\nimport javafx.embed.swing.SwingNode;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.BorderPane;\nimport javafx.stage.Stage;\n\nimport org.geotools.api.data.DataStore;\nimport org.geotools.api.data.DataStoreFinder;\nimport org.geotools.map.Layer;\nimport org.geotools.map.MapContent;\nimport org.geotools.swing.JMapPane;\n\nimport java.io.File;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        primaryStage.setTitle(&quot;S-57 seachart with GeoTools&quot;);\n        SwingNode swingNode = new SwingNode();\n        createAndSetMapPane(swingNode);\n\n        BorderPane root = new BorderPane();\n        root.setCenter(swingNode);\n\n        Scene scene = new Scene(root, 800, 600);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private void createAndSetMapPane(SwingNode swingNode) {\n        javafx.application.Platform.runLater(() -&gt; {\n              MapContent mapContent = new MapContent();\n              mapContent.setTitle(&quot;S-57 Sea chart&quot;);\n\n            try {\n                File s57File = new File(&quot;PathToS57Files\\\\file.000&quot;);\n                Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n                params.put(&quot;url&quot;, s57File.toURI().toURL());\n\n                DataStore dataStore = DataStoreFinder.getDataStore(params);\n                String typeName = dataStore.getTypeNames()[0];\n\n                Layer layer = new org.geotools.map.FeatureLayer(dataStore.getFeatureSource(typeName), null);\n                mapContent.addLayer(layer);\n\n                JMapPane mapPane = new JMapPane();\n                mapPane.setMapContent(mapContent);\n\n                swingNode.setContent(mapPane);\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>I start my application with the following command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java --module-path %FX-PATH% --add-modules javafx.controls,javafx.swing -jar GeoToolsTest-1.0-SNAPSHOT.jar Main\n</code></pre>\n<p>but it ends up with the following exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError:  org/geotools/api/data/FeatureSource\n        at org.example.Starter.main(Starter.java:7)\nCaused by: java.lang.ClassNotFoundException: org.geotools.api.data.FeatureSource\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\n        ... 1 more\n\n</code></pre>\n<p>Could someone explain, what is missing or wrong?</p>\n<p>Some notices:</p>\n<ul>\n<li><p>As far as i can see the class <code>FeatureSource</code> is part of <code>org.geotools.gt-api</code> and this dependency is included.</p>\n</li>\n<li><p>Even if i remove the <code>gt-bom</code>-pattern (which is introduced by version <code>34-SNAPSHOT</code>) and set all <code>geotools</code>-dependencies to the last stable version <code>33.2</code> this exception appears.</p>\n</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}