{
  "question": {
    "tags": [
      "java",
      "android",
      "xml",
      "android-layout",
      "activity-lifecycle"
    ],
    "owner": {
      "account_id": 6473621,
      "reputation": 1,
      "user_id": 5012965,
      "user_type": "registered",
      "profile_image": "https://lh5.googleusercontent.com/-1jVdSy1fSo0/AAAAAAAAAAI/AAAAAAAAEZs/oog6T3vSBaI/s256-rj/photo.jpg",
      "display_name": "myles",
      "link": "https://stackoverflow.com/users/5012965/myles"
    },
    "is_answered": true,
    "view_count": 55,
    "accepted_answer_id": 78785372,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1721764572,
    "creation_date": 1721423591,
    "last_edit_date": 1721762831,
    "question_id": 78771233,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78771233/button-setonclicklistener-crashes-android-app-on-device-rotation",
    "title": "button.setOnClickListener() Crashes Android App, on Device Rotation",
    "body": "<p>I'm working on a project that updates a textview with text when a button is pressed. For example, you press 0 and 0 displays on the textview. When the device changes orientation, such as when the user rotates their device, the application crashes.</p>\n<p>When I comment out the <code>button0.setOnClickListener(new Buttons(request, &quot;0&quot;));</code> line the application does not crash.</p>\n<p>I have verified that there is a Button with the id &quot;zero&quot; in both the portrait and landscape layouts.</p>\n<p>The layouts are stored in:</p>\n<p>res/layout/activity_main.xml<br />\nres/layout-land/activity_main.xml</p>\n<p>There are no warnings or error messages in either layout and (again) both layouts function when the &quot;.setOnclickListener()&quot; line of code is not included in the &quot;MainActivity&quot;.</p>\n<p>First Class. MainActivity.java:</p>\n<pre><code>package com.example.myapp;\n\nimport android.content.res.Configuration;\nimport android.os.Bundle;\nimport android.text.method.ScrollingMovementMethod;\nimport android.util.Log;\nimport android.widget.Button;\nimport android.widget.TextView;\n\nimport androidx.activity.EdgeToEdge;\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.graphics.Insets;\nimport androidx.core.view.ViewCompat;\nimport androidx.core.view.WindowInsetsCompat;\n\npublic class MainActivity extends AppCompatActivity {\n\n    Button button0;\n    \n    TextView request;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n        EdgeToEdge.enable(this);\n        setContentView(R.layout.activity_main);\n\n        request = findViewById(R.id.request);\n\n        // Number Buttons\n        button0 = findViewById(R.id.zero);\n        button0.setOnClickListener(new Buttons(request, &quot;0&quot;));\n\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\n            return insets;\n        });\n    }\n\n}\n\n\n</code></pre>\n<p>Second Class. Buttons.java:</p>\n<pre><code>\npackage com.example.myapp;\n\nimport android.view.View;\nimport android.widget.TextView;\n\nimport static androidx.core.content.res.TypedArrayUtils.getText;\n\npublic class Buttons implements View.OnClickListener {\n\n    TextView tv;\n    String text;\n\n\n    public Buttons(TextView tv, String input){\n        this.tv = tv;\n        this.text = input;\n    }\n\n    public Buttons(TextView tv){\n        this.tv = tv;\n        this.text = &quot;&quot;;\n    }\n\n\n    @Override\n    public void onClick(View view) {\n        if (tv.getText().toString().equals(&quot;Request&quot;)){\n            tv.setText(text);\n        }\n        else {\n            String response = tv.getText().toString() + text;\n            tv.setText(response);\n        }\n    }\n}\n\n</code></pre>\n<p>I've tried attaching this to the MainActivity.java class:</p>\n<pre><code>   @Override\n    protected void onDestroy() {\n      \n        button0.setOnClickListener(null);\n\n        super.onDestroy();}\n\n    @Override\n    public void onConfigurationChanged(@NonNull Configuration newConfig) {\n        super.onConfigurationChanged(newConfig);\n    }\n</code></pre>\n<p>Here is the Logcat:</p>\n<pre><code>FATAL EXCEPTION: main\n    Process: com.example.texascal, PID: 9311\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.texascal/com.example.texascal.MainActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4164)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4322)\n        at android.app.ActivityThread.handleRelaunchActivityInner(ActivityThread.java:6499)\n        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:6378)\n        at android.app.servertransaction.ActivityRelaunchItem.execute(ActivityRelaunchItem.java:76)\n        at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:139)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2685)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:230)\n        at android.os.Looper.loop(Looper.java:319)\n        at android.app.ActivityThread.main(ActivityThread.java:8919)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:578)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1103)\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at com.example.texascal.MainActivity.onCreate(MainActivity.java:82)\n        at android.app.Activity.performCreate(Activity.java:8975)\n        at android.app.Activity.performCreate(Activity.java:8944)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1456)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4146)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4322) \n        at android.app.ActivityThread.handleRelaunchActivityInner(ActivityThread.java:6499) \n        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:6378) \n        at android.app.servertransaction.ActivityRelaunchItem.execute(ActivityRelaunchItem.java:76) \n        at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45) \n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:139) \n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2685) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loopOnce(Looper.java:230) \n        at android.os.Looper.loop(Looper.java:319) \n        at android.app.ActivityThread.main(ActivityThread.java:8919) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:578) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1103) \n2024-07-23 15:21:58.653  9311-9311  Process                 com.example.texascal                 I  Sending signal. PID: 9311 SIG: 9\n---------------------------- PROCESS ENDED (9311) for package com.example.texascal ----------------------------\n\n\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}