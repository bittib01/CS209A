{
  "question": {
    "tags": [
      "java",
      "android",
      "android-mediaplayer",
      "surfaceview",
      "android-videoview"
    ],
    "owner": {
      "account_id": 5190495,
      "reputation": 4410,
      "user_id": 4153589,
      "user_type": "registered",
      "accept_rate": 38,
      "profile_image": "https://www.gravatar.com/avatar/5efea85f4e0c4c46389871664f2f1b44?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "amodkanthe",
      "link": "https://stackoverflow.com/users/4153589/amodkanthe"
    },
    "is_answered": false,
    "view_count": 150,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1721973125,
    "creation_date": 1721150723,
    "last_edit_date": 1721154299,
    "question_id": 78755962,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78755962/android-mediaplayer-surfaceview-video-restarts-on-resume",
    "title": "Android MediaPlayer SurfaceView video restarts on resume",
    "body": "<p>Following is my code to play a video from an url</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\nimport android.media.MediaPlayer;\nimport android.os.Bundle;\nimport android.view.SurfaceHolder;\nimport android.view.SurfaceView;\nimport java.io.IOException;\n\npublic class MainActivity extends AppCompatActivity {\n\n    MediaPlayer mp;\n    SurfaceView sv;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mp = new MediaPlayer();\n        \n        sv = (SurfaceView) findViewById(R.id.surfaceView);\n        SurfaceHolder holder = sv.getHolder();\n        holder.addCallback(new SurfaceHolder.Callback(){\n            @Override\n            public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) { }\n\n            @Override\n            public void surfaceCreated(SurfaceHolder holder) {\n                try {\n                    mp.setSurface(holder.getSurface());\n                    mp.setDataSource(&quot;https://v2.chartboost.com/videoads/636e2334a790a80850ecd48b_720-1668162356.mp4&quot;);\n                    mp.prepare();\n                    mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                        @Override\n                        public void onPrepared(MediaPlayer mediaPlayer) {\n                            mp.start();\n                        }\n                    });\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n\n            @Override\n            public void surfaceDestroyed(SurfaceHolder holder) { }\n        });\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        if(mp!= null) {\n             mp.start();\n        }\n    }\n\n    @Override\n    protected void onPause(){\n        super.onPause();\n        mp.pause();\n        mp.setSurface(null);\n    }\n}\n</code></pre>\n<p>The above code does not give me the expected result. When the app moves to the background and is brought to the foreground, the video restarts instead of resuming. I have tried many things, but it is still not working.</p>\n<p>Note: I can't use TextureView due to requirements.</p>\n<p>Update:\nI tried to seekTo method it works but screen appears black for a fraction of a second</p>\n<pre><code>mp.seekTo(currentPosition, SEEK_CLOSEST);\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}