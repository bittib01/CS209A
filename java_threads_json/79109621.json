{
  "question": {
    "tags": [
      "java",
      "switch-statement",
      "jep"
    ],
    "owner": {
      "account_id": 23646042,
      "reputation": 1006,
      "user_id": 18197654,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/dSgqg.png?s=256",
      "display_name": "xtay2",
      "link": "https://stackoverflow.com/users/18197654/xtay2"
    },
    "is_answered": true,
    "view_count": 178,
    "accepted_answer_id": 79114667,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1729670341,
    "creation_date": 1729506413,
    "last_edit_date": 1729670341,
    "question_id": 79109621,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79109621/why-did-jep-441-weaken-the-dominance-checking-of-guarded-patterns-compared-to-je",
    "title": "Why did JEP 441 weaken the dominance checking of guarded patterns compared to JEP 420",
    "body": "<p>This question addresses the difference between the different JEPs for &quot;Pattern Matching for <code>switch</code>&quot;</p>\n<p>In <a href=\"https://openjdk.org/jeps/420\" rel=\"nofollow noreferrer\">JEP 420</a> (second preview, Java 18-20), the conditions in guarded patterns are lightly checked for correct dominance order:</p>\n<blockquote>\n<p>Dominance checking now forces a constant case label to appear before a guarded pattern of the same type.</p>\n</blockquote>\n<blockquote>\n<p>The compiler checks all pattern labels. It is a compile-time error if a pattern label in a switch block is dominated by an earlier pattern label in that switch block.</p>\n</blockquote>\n<p>In <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">JEP 441</a> (release, Java 21), this check is removed.</p>\n<p>So while this raises a (valid) compiler error in Java (18 using <code>&amp;&amp;</code>), 19 and 20:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void dominanceExampleWithConstant(Object obj) {\n   switch (obj.toString()) {\n      case String str when str.length() &gt; 5 -&gt; System.out.println(str);\n      case &quot;Sophie&quot; -&gt; System.out.println(&quot;My lovely daughter&quot;);\n      //   ^^^^^^^ Dominated by the preceding case label //\n      default -&gt; System.out.println(&quot;FALLBACK&quot;);\n   }\n}\n</code></pre>\n<p>it no longer does in Java 21.</p>\n<h2>My question</h2>\n<blockquote>\n<p>Why was this compiler check removed?</p>\n</blockquote>\n<p>I'm unable to find an explanation in the JEP. Was there an official comment?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}