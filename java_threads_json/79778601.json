{
  "question": {
    "tags": [
      "java",
      "kubernetes",
      "istio",
      "istio-gateway"
    ],
    "owner": {
      "account_id": 26530398,
      "reputation": 1,
      "user_id": 20162691,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/842a7c8fea8816bcb61aea0c89e15186?s=256&d=identicon&r=PG",
      "display_name": "coderbd",
      "link": "https://stackoverflow.com/users/20162691/coderbd"
    },
    "is_answered": false,
    "view_count": 113,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1759910739,
    "creation_date": 1759188734,
    "question_id": 79778601,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79778601/layers-of-timeout-in-an-istiok8s-managed-cluster",
    "title": "Layers of timeout in an Istio+k8s managed cluster",
    "body": "<p>I have a cluster of microservices. UI calls API1 (assuming it goes through ingress gateway, correct me if I am wrong), API1 calls API2 via RestTemplate.</p>\n<p>The API2 process is bulky and takes roughly 1.5 minutes to complete, however there are no errors or exceptions in the process itself. For testing purposes, I called API2 directly via Bruno (whcih is set with a sufficiently large timeout value) which gives a socket hangup around 1 minute which is expected as the AWS LB connection idle timeout is 1 min. But from Chrome's network tab I see the timing of the call to succesfully complete with waiting for server time to be 1.5 minutes.</p>\n<p>I understand istio has a default of 2 retries for connection failures, and timeout is disabled. My question is that why when calling from the UI it is successful after 1.5 minutes rather than waiting for 3 minutes and failing. Are the pods behaving in a way that I don't understand? My understanding is that after 1 minute socket gets closed and a retry kicks off, but that should also fail and kickoff the 2nd retry. Again, that should also fail after the next minute. Is the socket somehow reopened within the total time of 3x1=3 minutes and the call is successful because it takes less than 3 minutes?</p>\n<p>P.S. I am a Junior developer who is just getting into the devops world of cluster orchestration, service mesh, etc. Any clarification is deeply appreciated.</p>\n<p>I changed the LB connection idle timeout to a higher value and the call was successful in Bruno as expected. I put arbritrarily large sleep times in the process and altered the idle time out values to get expected results.\nBut I don't understand the difference I am seeing in Chrome(UI-&gt;API1-&gt;API2) vs calling (Bruno-&gt;API2).\nI read the docs and scoured google with no satisfactory answer.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}