{
  "question": {
    "tags": [
      "java",
      "soft-references"
    ],
    "owner": {
      "account_id": 130873,
      "reputation": 22431,
      "user_id": 330457,
      "user_type": "registered",
      "accept_rate": 82,
      "profile_image": "https://i.sstatic.net/2JN6W.jpg?s=256",
      "display_name": "Jin Kwon",
      "link": "https://stackoverflow.com/users/330457/jin-kwon"
    },
    "is_answered": true,
    "view_count": 200,
    "answer_count": 4,
    "score": 1,
    "last_activity_date": 1761592361,
    "creation_date": 1760417515,
    "question_id": 79789816,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79789816/how-can-i-cache-a-single-object",
    "title": "How can I cache a single object?",
    "body": "<p>I have a class which initializes its internal data from a resource file and I want to give clients an opportunity to choose to use new instances or a cached instance.</p>\n<p>Here comes what it looks like.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Immutable, hence, thread-safe\nclass MyClass {\n\n    // Returns a new instance.\n    public static MyClass newInstance() {\n        // Loads resources, and constructs a new object\n    }\n\n    private MyClass() {\n    }\n}\n</code></pre>\n<p>And here comes what I'm adding for those clients want to use a cached instance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static volatile SoftReference&lt;MyClass&gt; INSTANCE;\n\n    // multiple instances may be created,\n    // in a timing manner,\n    // which is ok\n    private static MyClass getInstance() {\n        var result = INSTANCE;\n        if (result == null || result.get() == null) {\n            result = INSTANCE = new SoftReference&lt;&gt;(newInstance());\n        }\n        return result.get();\n    }\n\n    public static &lt;R&gt; R applyInstance(\n            final Function&lt;? super MyClass, ? extends R&gt; function) {\n        Objects.requireNonNull(function, &quot;function is null&quot;);\n        return function.apply(getInstance());\n    }\n</code></pre>\n<p>My questions are,</p>\n<ul>\n<li>Is it property implemented as what I'm intending to do?</li>\n<li>Is the way using the <code>SoftReference</code> right?</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}