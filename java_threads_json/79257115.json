{
  "question": {
    "tags": [
      "java",
      "android",
      "kotlin",
      "android-studio",
      "android-multiple-users"
    ],
    "owner": {
      "account_id": 1054420,
      "reputation": 667,
      "user_id": 3500826,
      "user_type": "registered",
      "accept_rate": 48,
      "profile_image": "https://www.gravatar.com/avatar/38558c095ed239bff1e75022c720ce2e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Star",
      "link": "https://stackoverflow.com/users/3500826/star"
    },
    "is_answered": false,
    "view_count": 72,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1735797695,
    "creation_date": 1733468596,
    "last_edit_date": 1735797695,
    "question_id": 79257115,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79257115/how-to-read-data-installed-in-user1-from-user-2-in-multi-user-android",
    "title": "How to read data installed in User1 from User 2 in multi user android",
    "body": "<p>Using multi user, I created two user profile:</p>\n<p>I have two apps. One is admin app and another is guest app.</p>\n<ol>\n<li>User1 profile [Admin app installed]</li>\n<li>User 2 profile[Guest app installed]</li>\n</ol>\n<p>In admin app, I have simple edittext(username and age) and inserting the data.[User1]</p>\n<p>Now i am switching to User2 and installing the guest app to read the inserted data from User1.</p>\n<p>Actual Behaviour:\nBut problem is, I am not able to read the inserted data in User2.\nExpected Behaviour:\nI need to read the inserted data in User1 profile.</p>\n<p>When I keep both app in same user profile[User1 profile], i can able to read the data.</p>\n<p>Below is code snippet:</p>\n<p>Admin:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private LinearLayout guestLayout;\n    private EditText adminUsernameEditText, adminAgeEditText;\n    private TextView displayTextView;\n    private int guestCount = 0;\n    private static final Uri SHARED_DATA_URI = Uri.parse(&quot;content://com.admin.guest.profile.provider/shared_data&quot;);\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        guestLayout = findViewById(R.id.guestLayout);\n        adminUsernameEditText = findViewById(R.id.adminUsernameEditText);\n        adminAgeEditText = findViewById(R.id.adminAgeEditText);\n        displayTextView = findViewById(R.id.displayTextView);\n\n        Button adminButton = findViewById(R.id.adminButton);\n        Button addGuestButton = findViewById(R.id.addGuestButton);\n\n        adminButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                saveAdminData();\n            }\n        });\n\n        addGuestButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                addGuestButton();\n            }\n        });\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    private void saveAdminData() {\n        String username = adminUsernameEditText.getText().toString().trim();\n        String ageText = adminAgeEditText.getText().toString().trim();\n\n        if (username.isEmpty()) {\n            adminUsernameEditText.setError(&quot;Username cannot be empty&quot;);\n            return;\n        }\n\n        if (ageText.isEmpty()) {\n            adminAgeEditText.setError(&quot;Age cannot be empty&quot;);\n            return;\n        }\n\n        int age;\n        try {\n            age = Integer.parseInt(ageText);\n        } catch (NumberFormatException e) {\n            adminAgeEditText.setError(&quot;Age must be a number&quot;);\n            return;\n        }\n\n        ContentValues values = new ContentValues();\n        values.put(&quot;username&quot;, username);\n        values.put(&quot;age&quot;, age);\n\n        getContentResolver().insert(SHARED_DATA_URI, values);\n        displayTextView.setText(&quot;Admin data saved: Username - &quot; + username + &quot;, Age - &quot; + age);\n    }\n\n    private void addGuestButton() {\n        guestCount++;\n        Button guestButton = new Button(this);\n        guestButton.setText(&quot;Guest &quot; + guestCount);\n        guestButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                displayAdminData();\n            }\n        });\n\n        guestLayout.addView(guestButton);\n    }\n\n    private void displayAdminData() {\n        ContentResolver contentResolver = getContentResolver();\n        StringBuilder displayText = new StringBuilder(&quot;Admin Data:\\n&quot;);\n\n        try (Cursor cursor = contentResolver.query(SHARED_DATA_URI, null, null, null, null)) {\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                do {\n                    @SuppressLint(&quot;Range&quot;) String username = cursor.getString(cursor.getColumnIndex(&quot;username&quot;));\n                    @SuppressLint(&quot;Range&quot;) int age = cursor.getInt(cursor.getColumnIndex(&quot;age&quot;));\n                    displayText.append(&quot;Username: &quot;).append(username)\n                            .append(&quot;, Age: &quot;).append(age).append(&quot;\\n&quot;);\n                } while (cursor.moveToNext());\n            } else {\n                displayText.append(&quot;No data found.&quot;);\n            }\n        }\n\n        displayTextView.setText(displayText.toString());\n    }\n}\n</code></pre>\n<p>I have successfully inserted data in Admin app for User 1 profile.</p>\n<p>Below is the Guest app to read the inserted data in Admin app for User 2 profile.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private TextView displayTextView;\n    private static final Uri SHARED_DATA_URI = Uri.parse(&quot;content://com.admin.guest.profile.provider/shared_data&quot;);\n    private static final String TAG = &quot;GuestActivity&quot;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        displayTextView = findViewById(R.id.displayTextView);\n\n        displayAdminData();\n    }\n\n    private void displayAdminData() {\n        ContentResolver contentResolver = getContentResolver();\n        StringBuilder displayText = new StringBuilder(&quot;Admin Data:\\n&quot;);\n\n        try (Cursor cursor = contentResolver.query(SHARED_DATA_URI, null, null, null, null)) {\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                do {\n                    @SuppressLint(&quot;Range&quot;) String username = cursor.getString(cursor.getColumnIndex(&quot;username&quot;));\n                    @SuppressLint(&quot;Range&quot;) int age = cursor.getInt(cursor.getColumnIndex(&quot;age&quot;));\n                    displayText.append(&quot;Username: &quot;).append(username)\n                            .append(&quot;, Age: &quot;).append(age).append(&quot;\\n&quot;);\n                    Log.d(TAG, &quot;Fetched data - Username: &quot; + username + &quot;, Age: &quot; + age);\n                } while (cursor.moveToNext());\n            } else {\n                displayText.append(&quot;No data found.&quot;);\n                Log.d(TAG, &quot;No data found in ContentProvider.&quot;);\n            }\n        }\n\n        displayTextView.setText(displayText.toString());\n    }\n}\n</code></pre>\n<p>Result:\nNot able to read the data from User 1 profile.</p>\n<p>In manifest, I gave this query for Android 12 but still I am not able to read.</p>\n<pre><code> &lt;queries&gt;\n        &lt;!-- Query App 1's which is nothing but Admin package for accessing the content provider --&gt;\n        &lt;package android:name=&quot;com.admin.guest.profile&quot; /&gt;\n    &lt;/queries&gt;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}