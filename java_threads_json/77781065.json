{
  "question": {
    "tags": [
      "java",
      "android-studio",
      "ssl-certificate"
    ],
    "owner": {
      "account_id": 12296207,
      "reputation": 2560,
      "user_id": 8971773,
      "user_type": "registered",
      "accept_rate": 25,
      "profile_image": "https://i.sstatic.net/tFcJU.png?s=256",
      "display_name": "Kira Resari",
      "link": "https://stackoverflow.com/users/8971773/kira-resari"
    },
    "is_answered": false,
    "view_count": 451,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1750877683,
    "creation_date": 1704723239,
    "last_edit_date": 1750860525,
    "question_id": 77781065,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77781065/how-to-add-custom-certificates-to-embedded-java-of-android-studio",
    "title": "How to add custom certificates to embedded Java of Android Studio",
    "body": "<p>I work in a company that uses its own repository for artifacts and has its own certificates for that repository which needs to be imported in Java so that Java can download its dependencies from there.</p>\n<p>Now, unmodified, whenever I try to run a project in Android Studio causes a list of errors like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not download gradle-7.2.0.jar (com.android.tools.build:gradle:7.2.0)\n      &gt; Could not get resource 'https://artifactory.tcloud.company.int/artifactory/maven-all/com/android/tools/build/gradle/7.2.0/gradle-7.2.0.jar'.\n         &gt; Could not GET 'https://artifactory.tcloud.company.int/artifactory/maven-all/com/android/tools/build/gradle/7.2.0/gradle-7.2.0.jar'.\n            &gt; The server may not support the client's requested TLS protocol versions: (TLSv1.2, TLSv1.3). You may need to configure the client to allow other protocols to be used. See: https://docs.gradle.org/7.4/userguide/build_environment.html#gradle_system_properties\n               &gt; PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n<p>Now, my current brute-force solution is to simply delete the content of the <code>Android Studio\\jbr</code> folder and replace it with my local JDK version that has the certificate. That works, and it is thus far the only thing that I have managed to get to work.</p>\n<p>What I also tried and what did not work was to import the certificate into the embedded Java version of Android Studio (the one in <code>Android Studio\\jbr</code>), and then restart Android Studio. That is what I would have considered to be the correct solution, but regrettably it did not work, and I don't know why.</p>\n<p>Another thing that I tried and which also did not work was set the <code>STUDIO_JDK</code> environment variable to point towards my local JDK version. That did affect the appearance of Android Studio, so I am reasonably certain that it loaded the correct version of Java, but strangely the error message remained unaffected.</p>\n<p>In the end, the only thing that worked was deleting the JBR and replacing it with a copy of the working JDK, which seems strange. It seems like there should be a better way to do that. Specifically, it seems strange that the importing of the certificate into the JBR did not fix this.</p>\n<p>What am I doing wrong here and what is the correct way?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}