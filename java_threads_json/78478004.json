{
  "question": {
    "tags": [
      "java",
      "android",
      "kotlin",
      "gradle",
      "mapbox"
    ],
    "owner": {
      "account_id": 32244748,
      "reputation": 13,
      "user_id": 25037741,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/fb974064122bb64fdbfdb9727daf0b35?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "johan.krrn",
      "link": "https://stackoverflow.com/users/25037741/johan-krrn"
    },
    "is_answered": true,
    "view_count": 352,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1727131793,
    "creation_date": 1715688590,
    "last_edit_date": 1715688883,
    "question_id": 78478004,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78478004/mapbox-kotlin-error-conflict-libc-shared-so",
    "title": "Mapbox Kotlin error conflict libc++_shared.so",
    "body": "<p>I have a problem with Mapbox implementation for my Kotlin application</p>\n<p>I followed the documentation: <a href=\"https://docs.mapbox.com/android/maps/guides/install/#add-the-dependency\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/maps/guides/install/#add-the-dependency</a></p>\n<p>Well almost, for step 2 is in my build.gradle (project) like this:</p>\n<pre><code>    allprojects {\n        repositories {\n            gradlePluginPortal()\n            google()\n            mavenCentral()\n            maven {\n                url = uri(&quot;https://api.mapbox.com/downloads/v2/releases/maven&quot;)\n                // Do not change the username below. It should always be &quot;mapbox&quot; (not your username).\n                credentials.username = &quot;mapbox&quot;\n                // Use the secret token stored in gradle.properties as the password\n                credentials.password = providers.gradleProperty(&quot;MAPBOX_DOWNLOADS_TOKEN&quot;).get()\n                authentication { basic(BasicAuthentication) }\n            }\n        }\n    }\n</code></pre>\n<p>Unfortunately during the build I have a conflict problem:</p>\n<p>2 files found with path 'lib/arm64-v8a/libc++_shared.so' from inputs:</p>\n<ul>\n<li>C:\\Users\\johanke.gradle\\caches\\transforms-3\\b8c059599cd20d9173eec748d219fd64\\transformed\\jetified-pdfium-android-1.9.0\\jni\\arm64-v8a\\libc++_shared.so</li>\n<li>C:\\Users\\johanke.gradle\\caches\\transforms-3\\1d2cd570d97102124d90dc5c2939e546\\transformed\\jetified-common-24.3.1\\jni\\arm64-v8a\\libc++_shared.so\nIf you are using jniLibs and CMake IMPORTED targets, see\n<a href=\"https://developer.android.com/r/tools/jniLibs-vs-imported-targets\" rel=\"nofollow noreferrer\">https://developer.android.com/r/tools/jniLibs-vs-imported-targets</a></li>\n</ul>\n<p>There appear to be two versions of the libc++_shared.so file.</p>\n<h1>To try to correct the problem I did this</h1>\n<p>Gemini advise me this</p>\n<pre><code>    android {\n        packagingOptions {\n            // Exclude the unnecessary library's architecture (e.g., arm64-v8a)\n            exclude 'lib/arm64-v8a/libc++_shared.so'\n        }\n    }\n</code></pre>\n<p>Without success, I also tried this with the help of ChatGPT</p>\n<pre><code>    android {\n        ...\n        packagingOptions {\n            exclude 'lib/arm64-v8a/libc++_shared.so'\n            exclude 'lib/x86_64/libc++_shared.so'\n            exclude 'lib/x86/libc++_shared.so'\n            exclude 'lib/armeabi-v7a/libc++_shared.so'\n        }\n        ...\n    }\n</code></pre>\n<p>So yes it builds well but the application crashes.</p>\n<p>This is probably a conflict problem with another implementation but I don't know how to resolve the problem while keeping the dependencies, could someone help me with this.</p>\n<p>Here is the list of dependencies:</p>\n<pre><code>    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.9.10&quot;\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'androidx.core:core-ktx:1.12.0'\n    implementation 'androidx.fragment:fragment-ktx:1.6.2'\n    implementation 'com.google.android.material:material:1.11.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation &quot;androidx.room:room-rxjava2:2.6.1&quot;\n    implementation &quot;androidx.gridlayout:gridlayout:1.0.0&quot;\n    implementation &quot;androidx.legacy:legacy-support-v4:1.0.0&quot;\n\n    // Compose\n    implementation &quot;androidx.compose.runtime:runtime:1.5.4&quot;\n    implementation &quot;androidx.compose.runtime:runtime-livedata:1.5.4&quot;\n    implementation &quot;androidx.compose.runtime:runtime-rxjava2:1.5.4&quot;\n\n    //Retrofit\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'\n    implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0'\n\n    //Lifecycle\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.2&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-livedata-ktx:2.6.2&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-common-java8:2.6.2&quot;\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n\n    //Kotlin Coroutines\n    implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.7.1&quot;\n    implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.1&quot;\n\n    //Hilt\n    implementation 'com.google.dagger:hilt-android:2.48.1'\n    implementation 'androidx.viewpager2:viewpager2:1.0.0'\n    kapt 'com.google.dagger:hilt-android-compiler:2.48.1'\n\n    //Room\n    implementation &quot;androidx.room:room-runtime:2.6.0&quot;\n    implementation &quot;androidx.room:room-ktx:2.6.0&quot;\n    kapt &quot;androidx.room:room-compiler:2.6.0&quot;\n\n    //Navigation\n    implementation &quot;androidx.navigation:navigation-fragment-ktx:2.7.4&quot;\n    implementation &quot;androidx.navigation:navigation-ui-ktx:2.7.4&quot;\n    implementation 'com.google.android.gms:play-services-maps:18.2.0'\n\n    //Glide\n    implementation 'com.github.bumptech.glide:glide:4.15.1'\n    kapt 'com.github.bumptech.glide:compiler:4.15.1'\n\n    //Timber\n    implementation 'com.jakewharton.timber:timber:5.0.1'\n\n    // okHttp3 pour télécharger des documents\n    implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)\n    implementation 'com.squareup.okhttp3:logging-interceptor:4.9.1'\n\n    // Google play service pour coords\n    implementation 'com.google.android.gms:play-services-location:21.0.1'\n\n    // JWT\n    implementation 'io.jsonwebtoken:jjwt-api:0.11.5'\n    implementation 'io.jsonwebtoken:jjwt-impl:0.11.5'\n    implementation 'io.jsonwebtoken:jjwt-jackson:0.11.5'\n\n    // PDF\n    implementation 'com.itextpdf:itextpdf:5.5.13.2'\n    implementation ('com.github.barteksc:android-pdf-viewer:3.2.0-beta.1')\n\n    // Dépendances Firebase\n    // Import the BoM for the Firebase platform\n    implementation platform('com.google.firebase:firebase-bom:31.2.3')\n    implementation 'com.google.firebase:firebase-crashlytics-ktx' // Crashlytics\n    implementation 'com.google.firebase:firebase-config-ktx' // Remote config\n    implementation 'com.google.firebase:firebase-analytics-ktx' // Analytics\n    implementation 'com.google.firebase:firebase-perf-ktx' // Performance\n\n    // Worker pour les notifications push\n    implementation &quot;androidx.work:work-runtime:2.8.1&quot;\n\n    // Picasso\n    implementation 'com.squareup.picasso:picasso:2.5.2'\n\n    // Carousel\n    implementation 'com.synnapps:carouselview:0.1.4'\n\n    // Skeleton loader\n    implementation &quot;com.facebook.shimmer:shimmer:0.5.0&quot;\n\n    // EncryptedSharedPreference\n    implementation &quot;androidx.security:security-crypto:1.1.0-alpha06&quot;\n\n    // Mapbox\n    implementation 'com.mapbox.maps:android:11.3.1'\n\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n</code></pre>\n<p>For more informations :</p>\n<p>Version Kotlin: 1.9.10<br>\nGradle JDK: JetBrains Runtime Version 17.0.10</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}