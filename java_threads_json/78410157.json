{
  "question": {
    "tags": [
      "java",
      "netty",
      "reactor-netty"
    ],
    "owner": {
      "account_id": 31996308,
      "reputation": 11,
      "user_id": 24804483,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/3bacb13bdeed5cbc0f28a3e87d459432?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Guilherme Debom",
      "link": "https://stackoverflow.com/users/24804483/guilherme-debom"
    },
    "is_answered": false,
    "view_count": 1036,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1727699830,
    "creation_date": 1714497555,
    "last_edit_date": 1714497790,
    "question_id": 78410157,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78410157/reactor-netty-http-client-prematurecloseexception-connection-prematurely-closed",
    "title": "reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response - After 90 seconds",
    "body": "<p>There is an issue when downloading a large file (which take some minutes to complete).</p>\n<p>The endpoint returns 200, but after around 90 seconds waiting the download the connection is prematurely closed.</p>\n<pre><code>DEBUG 6 --- [ctor-http-nio-5] r.n.r.DefaultPooledConnectionProvider    : [ecd64cf4-1, L:/* ! R:*] onStateChange(GET{uri=*, connection=PooledConnection{channel=[id: 0xecd64cf4, L:/*! R:*]}}, [response_incomplete])\nERROR 6 --- [ctor-http-nio-5] o.s.w.s.adapter.HttpWebHandlerAdapter    : [de66232f-2] Error [reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response] for HTTP GET &quot;*&quot;, but ServerHttpResponse already committed (200 OK)\nTRACE 6 --- [ctor-http-nio-5] o.s.h.s.r.ReactorHttpHandlerAdapter      : [de66232f-1, L:/*:3000 - R:/*:32383] Failed to complete: Connection prematurely closed DURING response\nERROR 6 --- [ctor-http-nio-5] r.n.http.server.HttpServerOperations     : [de66232f-1, L:/*:3000 - R:/*:32383] Error finishing response. Closing connection\n\nreactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response\n     Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \n Error has been observed at the following site(s):\n...\n[ExceptionHandlingWebHandler]\n</code></pre>\n<ul>\n<li>reactor-netty-http: 1.0.39</li>\n<li>spring-boot: 2.7.18</li>\n<li>Java 11 (Also happens with Java 17)</li>\n</ul>\n<p>I tried this config changes but had no success also:</p>\n<pre><code>  cloud:\n    gateway:\n      httpclient:\n        pool:\n          type: disabled\n          max-idle-time: 600000\n          max-life-time: 6000000\n</code></pre>\n<p>Also tried to upgrade Spring Boot and Java.\nNothing worked.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}