{
  "question": {
    "tags": [
      "java",
      "android"
    ],
    "owner": {
      "account_id": 11678640,
      "reputation": 103,
      "user_id": 8551203,
      "user_type": "registered",
      "accept_rate": 0,
      "profile_image": "https://www.gravatar.com/avatar/602c64d973cdd8dfb45f22304f09c2da?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Wrp Yuexia",
      "link": "https://stackoverflow.com/users/8551203/wrp-yuexia"
    },
    "is_answered": false,
    "view_count": 49,
    "answer_count": 1,
    "score": -2,
    "last_activity_date": 1719988219,
    "creation_date": 1719055409,
    "last_edit_date": 1719061079,
    "question_id": 78655894,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78655894/when-adding-imageview-programmatically-the-view-does-not-obey-layout-constraint",
    "title": "When adding ImageView programmatically, the view does not obey layout constraint",
    "body": "<p>I am developing an Android app page. This page will load images from a URL. However, the loaded images do not obey the layout constraint. The result has some unexpected blank space. Why, and how to solve this?</p>\n<p>Here is my code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/main&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.for_dynamic_add_img_and_desc&quot;&gt;\n\n    &lt;ScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;LinearLayout\n            android:id=&quot;@+id/LinearLayout_content&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;/LinearLayout&gt;\n    &lt;/ScrollView&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.emptyactivityjava;\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\nimport androidx.activity.EdgeToEdge;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.graphics.Insets;\nimport androidx.core.view.ViewCompat;\nimport androidx.core.view.WindowInsetsCompat;\nimport com.squareup.picasso.Picasso;\n\npublic class for_dynamic_add_img_and_desc extends AppCompatActivity {\n\n    LinearLayout LinearLayout_content;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        EdgeToEdge.enable(this);\n        setContentView(R.layout.activity_for_dynamic_add_img_and_desc);\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\n            return insets;\n        });\n\n        LinearLayout_content = findViewById(R.id.LinearLayout_content);\n\n        String[] imgs_url = {\n                &quot;https://amateurphotographer.com/wp-content/uploads/sites/7/2023/04/Paulina-Stopka-vertical-landscapes-Tryfan-Eryri-National-Park-Tatra-Mountains.jpg&quot;,\n                &quot;https://images.pexels.com/photos/247599/pexels-photo-247599.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=1260&amp;h=750&amp;dpr=1&quot;,\n                &quot;https://samuelearp.com/wp-content/uploads/2023/10/IMG_1512-1536x1273.jpeg&quot;,\n        };\n\n        String[] descs = {\n                &quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;,\n                &quot;bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&quot;,\n                &quot;cccccccccccccccccccccccccccccccccccccccccccccccc&quot;\n        };\n\n        for (int i = 0; i &lt; 3; i++) {\n            View view = LayoutInflater.from(for_dynamic_add_img_and_desc.this).inflate(R.layout.item_template, null);\n            Picasso.get().load(imgs_url[i]).into((ImageView) view.findViewById(R.id.img));\n            ((TextView) (view.findViewById(R.id.desc))).setText(descs[i]);\n            LinearLayout_content.addView(view);\n        }\n    }\n}\n</code></pre>\n<p>item_template.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/img&quot;\n        android:layout_width=&quot;200dp&quot;\n        android:layout_height=&quot;wrap_content&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/desc&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/img&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>The result has some unexpected blank space. How do I solve this?</p>\n<p><a href=\"https://i.sstatic.net/TMy5bWzJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/TMy5bWzJ.jpg\" alt=\"enter image description here\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}