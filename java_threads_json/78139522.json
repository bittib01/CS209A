{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "autowired",
      "lombok"
    ],
    "owner": {
      "account_id": 9735171,
      "reputation": 2413,
      "user_id": 7218656,
      "user_type": "registered",
      "accept_rate": 75,
      "profile_image": "https://i.sstatic.net/u87X2.jpg?s=256",
      "display_name": "Arun Sudhakaran",
      "link": "https://stackoverflow.com/users/7218656/arun-sudhakaran"
    },
    "is_answered": false,
    "view_count": 499,
    "answer_count": 1,
    "score": 3,
    "last_activity_date": 1747126922,
    "creation_date": 1710148644,
    "last_edit_date": 1747126922,
    "question_id": 78139522,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78139522/org-springframework-beans-beanutils-copypropertiesobject-source-object-target",
    "title": "org.springframework.beans.BeanUtils.copyProperties(Object source, Object target) throws error Could not copy property &#39;channel&#39; from source to target",
    "body": "<p>This is the source class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@AllArgsConstructor\n@NoArgsConstructor\n@Component\n@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\n@JsonSerialize(as = RequestContext.class)\npublic class RequestContext implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private String statusCode;\n\n    private String statusType;\n    \n    private String txnId;\n    \n    private int channelId;\n\n    private String channel;\n\n}\n</code></pre>\n<p>These are the target class and its parent classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@AllArgsConstructor\n@NoArgsConstructor\n@Component\n@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\n@JsonSerialize(as = Transaction.class)\npublic class Transaction extends TransactionBase implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private Actors actors = Actors.SENDER;\n    private PartnerMaster senderPartner;\n    private PartnerMaster receiverPartner;\n    private PartnerMaster userPartner;\n    private UserMaster senderUser;\n    private UserMaster receiverUser;\n\n    private WalletAction adjustmentType;\n    private BigDecimal netAmount = BigDecimal.ZERO;\n    private BigDecimal amount = BigDecimal.ZERO;\n    private BigDecimal rollbackAmount = BigDecimal.ZERO;\n\n    private Charges charges = new Charges();\n\n    private List&lt;SystemWalletMaster&gt; systemWallets = new ArrayList&lt;&gt;();\n    private List&lt;SystemCdrBean&gt; systemCdr = new ArrayList&lt;&gt;();\n\n    private List&lt;Items&gt; products;\n\n    /** generic params for dynamic values. **/\n    private HashMap&lt;String, Object&gt; genericParams = new HashMap&lt;&gt;();\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class TransactionBase extends TransactionFlags implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private int channelId;\n    private String channel;\n    private String mvnoId;\n\n    private ServiceMaster service = new ServiceMaster();\n\n    private String featureId;\n\n    private String statusCode;\n    private String statusCodeReceiver;\n    private String statusType;\n    private String txnType;\n    private String message;\n\n    private String txnId;\n    private String requestId;\n    private long duration;\n\n    private TransactionCommon transactionCommon;\n\n}\n</code></pre>\n<p>Beans copy:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Slf4j\npublic class RequestInterceptor implements HandlerInterceptor {\n\n    @Autowired\n    private Transaction transaction;\n\n    @Autowired\n    private RequestContext requestContext;\n\n    @Autowired\n    private UserContext userContext;\n\n    @Autowired\n    private CopyPropertyUtils copyPropertyUtils;\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\n            throws Exception {\n\n        copyPropertyUtils.copy(requestContext, transaction);\n        \n        ..............\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler,\n            ModelAndView modelAndView) throws Exception {\n        // No implementation is done in post handle of the intercepter\n    }\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)\n            throws Exception {\n\n        ..................\n    }\n\n}\n</code></pre>\n<p>When we try to copy <code>RequestContext</code> to <code>Transaction</code> we get this error</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalArgumentException: object is not an instance of declaring class\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765) ~[spring-aop-6.1.1.jar:6.1.1]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717) ~[spring-aop-6.1.1.jar:6.1.1]\n    at com.sixdee.mfs.base.beans.Transaction$$SpringCGLIB$$0.setChannel(&lt;generated&gt;) ~[classes/:?]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n</code></pre>\n<p>Followed by this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[2m2024-03-08T12:37:20.803+05:30[0;39m [31mERROR[0;39m [35m20264[0;39m [2m---[0;39m [2m${sys:LOGGED_APPLICATION_NAME}[nio-9110-exec-1][0;39m [36mc.s.d.b.e.ResponseErrorHandler          [0;39m [2m:[0;39m Resource Not Found : object is not an instance of declaring class CLASS jdk.internal.reflect.NativeMethodAccessorImpl LINE -2 \n[2m2024-03-08T12:37:20.836+05:30[0;39m [33m WARN[0;39m [35m20264[0;39m [2m---[0;39m [2m${sys:LOGGED_APPLICATION_NAME}[nio-9110-exec-1][0;39m [36m.m.m.a.ExceptionHandlerExceptionResolver[0;39m [2m:[0;39m Resolved [org.springframework.beans.FatalBeanException: Could not copy property 'channel' from source to target]\n[2m2024-03-08T12:37:20.836+05:30[0;39m [32mDEBUG[0;39m [35m20264[0;39m [2m---[0;39m [2m${sys:LOGGED_APPLICATION_NAME}[nio-9110-exec-1][0;39m [36mc.s.m.b.s.e.EventManager                [0;39m [2m:[0;39m Event management is in progress...\n[2m2024-03-08T12:37:20.836+05:30[0;39m [31mERROR[0;39m [35m20264[0;39m [2m---[0;39m [2m${sys:LOGGED_APPLICATION_NAME}[nio-9110-exec-1][0;39m [36mo.s.w.s.HandlerExecutionChain           [0;39m [2m:[0;39m HandlerInterceptor.afterCompletion threw exception\n\norg.springframework.aop.AopInvocationException: AOP configuration seems to be invalid: tried calling method [public java.lang.String com.sixdee.mfs.base.beans.Transaction.toString()] on target [RequestContext(statusCode=DFS100, statusType=F, txnId=168421046664246, channelId=1, channel=PORTAL)]\n</code></pre>\n<p>All the properties required in the target (<code>Transaction</code>) are extended from its parent <code>TransactionBase</code>.</p>\n<ol>\n<li>If we try to move those properties to <code>Transaction</code> there will be no error.</li>\n<li>When we tried to copy <code>new RequestContext()</code> to <code>new Transaction()</code> rather than the autowired beans there was no error.</li>\n<li>The copy worked when we removed the <code>@Scope</code> annotation.</li>\n<li>We decompiled the .class file of <code>Transaction</code> and found that there were no inherited methods.</li>\n<li>We gave all the annotations of <code>Transaction</code> to <code>TransactionBase</code> the error was still occurring.</li>\n</ol>\n<p>We are not able to find what is causing this issue, whether it is the issue with the source (<strong>Point-3</strong>) or the issue with the target (<strong>Point-1</strong>), all we can understand is one of the object isn't available, also the property names and types are the same. According to the comment by @M. Deinum in this <a href=\"https://stackoverflow.com/questions/74519437/beanutils-copyproperties-throws-org-springframework-beans-fatalbeanexception\">post</a> I believe the issue is with the <code>org.springframework.beans.BeanUtils</code> but the answer says something else.</p>\n<p>We are using <code>@Autowired</code> in some scenarios and <code>@AllArgsConstructor</code> in some other scenarios for dependency injection, would that be causing any issues? Also, the <code>RequestContext</code> is a bean in parent maven project and the others are in the child maven project which depends on the parent.</p>\n<p><strong>Versions</strong></p>\n<p>Java 17</p>\n<p>Spring Boot 3.2.0</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}