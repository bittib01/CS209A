{
  "question": {
    "tags": [
      "java",
      "kotlin",
      "jpa",
      "micronaut"
    ],
    "owner": {
      "account_id": 9355065,
      "reputation": 43,
      "user_id": 11894174,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/bfc271fb48787b93912a637dd19816a1?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "John Reese",
      "link": "https://stackoverflow.com/users/11894174/john-reese"
    },
    "is_answered": false,
    "view_count": 595,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1753098153,
    "creation_date": 1713337862,
    "last_edit_date": 1713339842,
    "question_id": 78339011,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78339011/specify-a-field-in-query-only-when-it-is-not-null-in-micronaut-data",
    "title": "Specify a field in query only when it is not-null in Micronaut Data",
    "body": "<p>Following is part of my Kotlin code written using Micronaut framework:</p>\n<pre><code>import io.micronaut.data.annotation.MappedEntity\nimport jakarta.persistence.GeneratedValue\nimport jakarta.persistence.Table\n\n@MappedEntity\n@Table(name = &quot;special&quot;, schema = &quot;abc&quot;)\ndata class SpecialEntity(\n    val uuid: Uuid,\n\n    @GeneratedValue\n    val createdAt: Instant? = null\n)\n</code></pre>\n<pre><code>import io.micronaut.data.jdbc.annotation.JdbcRepository\nimport io.micronaut.data.repository.kotlin.CoroutineCrudRepository\nimport java.util.UUID\n\n@JdbcRepository\ninterface SpecialEntityRepository : CoroutineCrudRepository&lt;SpecialEntity, UUID&gt; {\n    suspend fun saveAll(entities: Iterable&lt;SpecialEntity&gt;): ArrayList&lt;SpecialEntity&gt;\n}\n</code></pre>\n<p>The problem I am facing is that because of the <code>GeneratedValue</code> annotation, Micronaut omits this field from the query that is used to insert an entity to database. This was what I wanted initially. But now there is a use-case to set the value manually sometimes.</p>\n<p>I have checked out other annotations like <code>@DateCreated</code> which does not work because it always sets the current timestamp. <code>@Query</code> annotation also does not work because the query needs to be static but I need to do batch insert.</p>\n<p>Basically what I want is some way to include the field in the insert query when it is non-null. When it is null, it should be omitted from the query. What would be the best way to do that?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}