{
  "question": {
    "tags": [
      "java",
      "intellij-idea",
      "annotations",
      "static-analysis",
      "structural-search"
    ],
    "owner": {
      "account_id": 26384984,
      "reputation": 418,
      "user_id": 20037647,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/9nb18CcK.png?s=256",
      "display_name": "EarthTurtle",
      "link": "https://stackoverflow.com/users/20037647/earthturtle"
    },
    "is_answered": true,
    "view_count": 75,
    "accepted_answer_id": 78662835,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1719236242,
    "creation_date": 1718735311,
    "question_id": 78639077,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78639077/intellij-structural-replace-unwanted-behavior-based-on-target",
    "title": "Intellij structural replace unwanted behavior based on target",
    "body": "<p>I am trying to find and replace all usages of <code>@JsonCreator</code> on nonstatic methods by using an inspection to suggest a replacement for the method to make it static. I have the following template:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Search template\n\n@$Annotation$\n$MethodType$ $Method$($ParameterType$ $Parameter$)\n\n/** Modifiers\n* Annotation{count=[1, inf], text=JsonCreator}\n* Method{Script=!__context__.hasModifierProperty(&quot;static&quot;)}\n* Parameter{count=[0, inf]}\n*/ \n\n// Replace template\n\n@$Annotation$\nstatic $MethodType$ $Method$($ParameterType$ $Parameter$)\n\n/** Modifiers\n* Annotation{count=[1, inf], text=JsonCreator}\n* Method{Script=!__context__.hasModifierProperty(&quot;static&quot;)}\n* Parameter{count=[0, inf]}\n*/ \n</code></pre>\n<p>When the target for the search is <code>Complete Match</code> or <code>Method</code>, this works as desired, performing the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Before\n@JsonCreator\nBasicEnum fromString(String value) \n{\n  // ...\n}\n\n// After\n@JsonCreator\nstatic BasicEnum fromString(String value) \n{\n  // ...\n}\n</code></pre>\n<p>However, when the target is <code>Annotation</code>, it fails, performing the following instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Before\n@JsonCreator\nBasicEnum fromString(String value) \n{\n  // ...\n}\n\n//After\nBasicEnum fromString(String value) \n{\n  // ...\n}\n</code></pre>\n<p>It removes the annotation and does not add the static modifier.</p>\n<p>I'd like to have the target be <code>Annotation</code>, as getting the warning squiggles across the whole method feels clunky. Why does the replace fail when targeting <code>Annotation</code>? Is there a way around this such that the squiggles only show up on the annotation?</p>\n<p>To note, I'm aware that <code>@JsonCreator</code> can also be used on constructor methods, but managing those are not something I'm concerned about right now. I just want to find situations where <code>@JsonCreator</code> is used on a nonstatic method, and provide an inspection to replace.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}