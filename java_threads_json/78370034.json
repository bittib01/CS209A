{
  "question": {
    "tags": [
      "java",
      "metadata-extractor"
    ],
    "owner": {
      "account_id": 3729650,
      "reputation": 1150,
      "user_id": 3102471,
      "user_type": "registered",
      "accept_rate": 71,
      "profile_image": "https://www.gravatar.com/avatar/eb9223aa0145e88b0c66973b380f8b4e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "mbmast",
      "link": "https://stackoverflow.com/users/3102471/mbmast"
    },
    "is_answered": false,
    "view_count": 165,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1718232428,
    "creation_date": 1713849994,
    "question_id": 78370034,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78370034/getting-com-drew-imaging-imageprocessingexception-file-format-is-not-supported",
    "title": "Getting com.drew.imaging.ImageProcessingException: File format is not supported on MP4, MOV, QT and 3GP video files",
    "body": "<p>Using <code>metadata-extractor-2.19.0.jar</code>, this code:</p>\n<pre><code>Metadata metadata = null;\n\ntry {\n    metadata = ImageMetadataReader.readMetadata( pathSourceFile.toFile() );\n} \ncatch(ImageProcessingException ipe) {\n    System.out.println(&quot;The following exception occured while attempting to read metadata from &quot; + pathSourceFile.toString());\n    ipe.printStackTrace(System.out);\n    throw ipe;\n}\n</code></pre>\n<p>throws <code>ImageProcessingException: File format is not supported</code> when input is an MP4, QT, MOV or 3gp file.  Here's an example:</p>\n<pre><code>The following exception occured while attempting to read metadata from C:\\Test Input\\Borg.mp4\ncom.drew.imaging.ImageProcessingException: File format is not supported\n    at com.drew.imaging.ImageMetadataReader.readMetadata(ImageMetadataReader.java:146)\n    at com.drew.imaging.ImageMetadataReader.readMetadata(ImageMetadataReader.java:162)\n    at com.mbm.mediaorganizer.DirectoryNameBuilder.getTags(DirectoryNameBuilder.java:182)\n    at com.mbm.mediaorganizer.DirectoryNameBuilder.getDirectoryName(DirectoryNameBuilder.java:61)\n    at com.mbm.mediaorganizer.RelocateFileVisitor.relocateFile(RelocateFileVisitor.java:114)\n    at com.mbm.mediaorganizer.RelocateFileVisitor.visitFile(RelocateFileVisitor.java:96)\n    at com.mbm.mediaorganizer.RelocateFileVisitor.visitFile(RelocateFileVisitor.java:1)\n    at java.base/java.nio.file.Files.walkFileTree(Files.java:2811)\n    at java.base/java.nio.file.Files.walkFileTree(Files.java:2882)\n    at com.mbm.mediaorganizer.MediaOrganizer.run(MediaOrganizer.java:126)\n    at com.mbm.mediaorganizer.MediaOrganizer.main(MediaOrganizer.java:40)\n</code></pre>\n<p>And here's what Mediainfo says about the MP4 file:</p>\n<pre><code>General\nComplete name                            : C:\\Test Input\\Borg.mp4\nFormat                                   : MPEG-4\nFormat profile                           : Base Media / Version 2\nCodec ID                                 : mp42 (mp42/mp41)\nFile size                                : 171 MiB\nDuration                                 : 1 min 40 s\nOverall bit rate mode                    : Variable\nOverall bit rate                         : 14.3 Mb/s\nEncoded date                             : UTC 2017-07-28 20:50:07\nTagged date                              : UTC 2017-07-28 20:50:41\n©TIM                                     : 00:00:00:00\n©TSC                                     : 30000\n©TSZ                                     : 1001\n\nVideo\nID                                       : 1\nFormat                                   : AVC\nFormat/Info                              : Advanced Video Codec\nFormat profile                           : High@L4.2\nFormat settings                          : CABAC / 4 Ref Frames\nFormat settings, CABAC                   : Yes\nFormat settings, RefFrames               : 4 frames\nCodec ID                                 : avc1\nCodec ID/Info                            : Advanced Video Coding\nDuration                                 : 1 min 40 s\nBit rate mode                            : Variable\nBit rate                                 : 13.9 Mb/s\nMaximum bit rate                         : 16.0 Mb/s\nWidth                                    : 1 920 pixels\nHeight                                   : 1 080 pixels\nDisplay aspect ratio                     : 16:9\nFrame rate mode                          : Constant\nFrame rate                               : 29.970 (30000/1001) FPS\nStandard                                 : NTSC\nColor space                              : YUV\nChroma subsampling                       : 4:2:0\nBit depth                                : 8 bits\nScan type                                : Progressive\nBits/(Pixel*Frame)                       : 0.224\nStream size                              : 167 MiB (98%)\nLanguage                                 : English\nEncoded date                             : UTC 2017-07-28 20:50:07\nTagged date                              : UTC 2017-07-28 20:50:07\nColor range                              : Limited\nColor primaries                          : BT.709\nTransfer characteristics                 : BT.709\nMatrix coefficients                      : BT.709\n\nAudio\nID                                       : 2\nFormat                                   : AAC\nFormat/Info                              : Advanced Audio Codec\nFormat profile                           : LC\nCodec ID                                 : mp4a-40-2\nDuration                                 : 1 min 40 s\nSource duration                          : 1 min 40 s\nBit rate mode                            : Variable\nBit rate                                 : 317 kb/s\nMaximum bit rate                         : 349 kb/s\nChannel(s)                               : 2 channels\nChannel positions                        : Front: L R\nSampling rate                            : 48.0 kHz\nFrame rate                               : 46.875 FPS (1024 SPF)\nCompression mode                         : Lossy\nStream size                              : 3.80 MiB (2%)\nSource stream size                       : 3.80 MiB (2%)\nLanguage                                 : English\nEncoded date                             : UTC 2017-07-28 20:50:07\nTagged date                              : UTC 2017-07-28 20:50:07\n</code></pre>\n<p>Why am I getting <code>ImageProcessingException: File format is not supported</code>?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}