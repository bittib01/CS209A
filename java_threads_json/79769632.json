{
  "question": {
    "tags": [
      "java",
      "apache-spark",
      "amazon-s3",
      "hadoop"
    ],
    "owner": {
      "account_id": 7489950,
      "reputation": 5724,
      "user_id": 5692012,
      "user_type": "registered",
      "accept_rate": 50,
      "profile_image": "https://i.sstatic.net/a3FwR.gif?s=256",
      "display_name": "RobinFrcd",
      "link": "https://stackoverflow.com/users/5692012/robinfrcd"
    },
    "is_answered": true,
    "view_count": 177,
    "answer_count": 3,
    "score": 0,
    "last_activity_date": 1764526583,
    "creation_date": 1758292166,
    "last_edit_date": 1758367080,
    "question_id": 79769632,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79769632/how-to-connect-to-s3-without-the-large-aws-sdk-v2-bundle",
    "title": "How to connect to S3 without the large AWS SDK v2 bundle?",
    "body": "<p>I'm trying to read some file from S3 with PySpark 4.0.1 and the <code>S3AFileSystem</code>.</p>\n<p>The standard configuration using <a href=\"https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-aws/3.4.1\" rel=\"nofollow noreferrer\">hadoop-aws 3.4.1</a> works, but it requires the <a href=\"https://mvnrepository.com/artifact/software.amazon.awssdk/bundle/2.24.6\" rel=\"nofollow noreferrer\">AWS SDK Bundle</a>. This single dependency is over 530 MB, which significantly increases the size of my application's deployment.</p>\n<p>My goal is to find a minimal set of AWS SDK v2 dependencies required by the <code>hadoop-aws</code> library to connect to S3, without including the entire bundle. I'm aware of the <a href=\"https://issues.apache.org/jira/browse/SPARK-49508\" rel=\"nofollow noreferrer\">open issue on Spark's Jira</a>, but there is no resolution yet.</p>\n<p>I've tried to include <code>com.amazonaws:aws-java-sdk-s3</code> only, and others sub-dependencies but I always hit:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Py4JJavaError: An error occurred while calling o83.parquet.\n: java.lang.NoClassDefFoundError:\nsoftware/amazon/awssdk/utils/builder/ToCopyableBuilder\n</code></pre>\n<p>Has anyone successfully identified the minimum set of artifacts needed for a basic s3a:// read/write operation with Spark?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}