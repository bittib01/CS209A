{
  "question": {
    "tags": [
      "java",
      "spring",
      "testing",
      "intellij-idea",
      "junit-jupiter"
    ],
    "owner": {
      "account_id": 7234913,
      "reputation": 72,
      "user_id": 7375377,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/Qy7Mp.jpg?s=256",
      "display_name": "Tam&#225;s Horv&#225;th",
      "link": "https://stackoverflow.com/users/7375377/tam%c3%a1s-horv%c3%a1th"
    },
    "is_answered": false,
    "view_count": 43,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1735999116,
    "creation_date": 1733472268,
    "last_edit_date": 1735999116,
    "question_id": 79257250,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79257250/spring-load-testpropertysource-or-propertysource-but-not-both-based-on-conditi",
    "title": "Spring load TestPropertySource OR PropertySource (but not both) based on condition",
    "body": "<p>I have a TestBase class that is extended by all test classes. This class runs locally from IntelliJ if the <code>@PropertySource(&quot;classpath:/test.properties&quot;)</code> is used on it it runs properly in the CI pipeline, but if I want to run locally a test (Intellij, click, Run) then I have to replace this with <code>@TestPropertySource(&quot;classpath:/test.properties&quot;)</code> (Both do not work, the CI does not work with only <code>TestPropertySource</code> local does not work from IntelliJ as mentioned if <code>PropertySource</code> is used)</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.boot.test.context.TestConfiguration;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\n\n@ExtendWith(SpringExtension.class)\n@TestConfiguration\n@PropertySource(&quot;classpath:/test.properties&quot;) // This is the problematic line\n@EnableConfigurationProperties\n@ContextConfiguration(classes = {...})\n@ComponentScan(basePackageClasses = ...)\n@Slf4j\npublic class TestBase {\n  ...\n}\n</code></pre>\n<p>Currently the only workaround we have is to temporarily replace this while developing. We tried to use <code>ContextConfiguration</code> class with <code>ConditionalOnExpression</code> annotation etc.. Nothing works.</p>\n<p>The decision which one to use could be as simple as to check a System or Environment variable exists or not.</p>\n<p>Can someone help me how can I have this work on both local and CI env by loading one or the other way the same configuration file?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}