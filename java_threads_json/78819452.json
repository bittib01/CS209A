{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "option-type",
      "builder"
    ],
    "owner": {
      "account_id": 20401718,
      "reputation": 119,
      "user_id": 22818272,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/a9333dd6520664110a190668a19cc38b?s=256&d=identicon&r=PG",
      "display_name": "Al3x4ndru1",
      "link": "https://stackoverflow.com/users/22818272/al3x4ndru1"
    },
    "is_answered": true,
    "view_count": 197,
    "answer_count": 3,
    "score": -2,
    "last_activity_date": 1740381148,
    "creation_date": 1722494109,
    "question_id": 78819452,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78819452/builder-design-pattern-for-api-endpoint-spring-boot",
    "title": "Builder design pattern for API endpoint Spring Boot",
    "body": "<p>I tried to use a builder design pattern for a model class. I need to have some mandatory files and some optional fields; this design could help me in this scenario. I am using Spring Boot and Java 22 and created a model class for one of the endpoints. I also included the imports, and I removed a lot of the unnecessary code since the focus is the priority field. This is the class:</p>\n<pre><code>import java.sql.Date;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.Optional;\n\npublic class ConfigRequestModel {\n    private String id;\n    //other mandatory fields\n    private Optional&lt;Integer&gt; priority;\n    // other optional fields\n\n\n    public ConfigRequestModel(){}\n\n    public ConfigRequestModel(ConfigRequestModelBuilder builder) {\n        this.id = builder.id;\n        //other mandatory and optional fields\n        this.priority = builder.priority;\n    }\n\n\n    public static class ConfigRequestModelBuilder{\n        private final String id;\n        //other mandatory and optional fields\n        private Optional&lt;Integer&gt; priority;\n\n\n        public ConfigRequestModelBuilder(String id,\n                                         //other mandatory fields) {\n          //mandatory fields\n\n        }\n\n        public void map(HashMap&lt;String, String&gt; map) {\n            if(frequency.isEmpty()){\n                this.map = new HashMap&lt;&gt;();\n            }else {\n                this.map = map;\n            }\n        }\n\n        public void setPriority(Optional&lt;Integer&gt; priority) {\n\n            this.priority = priority.isPresent() ? priority : Optional.empty();\n\n//            if (priority.isPresent()) {\n//                this.priority = Optional.empty();\n//            }else {\n//                this.priority = priority;\n//            }\n        }\n\n        public void date(Optional&lt;String&gt; date) {\n            if (date.isPresent()){\n                this.date = Optional.empty();\n            }else {\n                this.date = date;\n            }\n        }\n    //rest of the setters\n\n    public String id() {\n        return id;\n    }\n   // rest of the getters\n   //equals\n   //hashCode\n   //toString\n</code></pre>\n<p>This is how I am using the priority:</p>\n<pre><code>if (configRequestModel.getPriority().isEmpty())\n</code></pre>\n<p>I got this error:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke &quot;java.util.Optional.isEmpty()&quot; because the return value of &quot;com.upload_manager.UploadManager.model.uploadManager.ConfigRequestModel.getPriority()&quot; is null] with root cause\n</code></pre>\n<p>It is bizarre because Jackson should call the builder by default since I have read that it can detect those patterns. Moreover, the <code>priority.isPresent()</code> should work and put <code>Optional.empty()</code>, not <code>null</code>.</p>\n<p>If you have any suggestions, please feel free to share them.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}