{
  "question": {
    "tags": [
      "java",
      "spring",
      "postgresql",
      "jdbc",
      "spring-jdbc"
    ],
    "owner": {
      "account_id": 12205819,
      "reputation": 305,
      "user_id": 8908951,
      "user_type": "registered",
      "profile_image": "https://lh6.googleusercontent.com/-rqQkreaFZWA/AAAAAAAAAAI/AAAAAAAAR3o/XXxb5Xcvugk/s256-rj/photo.jpg",
      "display_name": "Lucca Bibar",
      "link": "https://stackoverflow.com/users/8908951/lucca-bibar"
    },
    "is_answered": true,
    "view_count": 135,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1756211290,
    "creation_date": 1755888859,
    "question_id": 79743762,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79743762/check-if-a-jdbcclient-transaction-ran-successfully-in-java-spring",
    "title": "Check if a JdbcClient transaction ran successfully in Java Spring",
    "body": "<p>I need to insert one row of data in two different tables. Since the tables are related, i grouped the insert in a <code>TRANSACTION</code> in order to make them behave as an atomic operation.</p>\n<p>My code follows:</p>\n<pre><code>    String query = &quot;&quot;&quot;\n        BEGIN TRANSACTION;\n\n        INSERT INTO usuario (\n            email,\n            senha,\n            nome,\n            status\n        )\n        VALUES (\n            :email,\n            :senha,\n            :nome,\n            'Ativo'\n        );\n\n        INSERT INTO organizador (\n            id,\n            cpf_cnpj\n        )\n        VALUES (\n            (\n                SELECT us.id \n                FROM usuario AS us \n                WHERE us.email = :email AND us.senha = :senha\n            ),\n            :cpf\n        );\n\n        COMMIT;\n    &quot;&quot;&quot;;\n\n    int res = jdbcClient\n        .sql(query)\n        .param(&quot;email&quot;, email)\n        .param(&quot;senha&quot;, senha)\n        .param(&quot;nome&quot;, nome)\n        .param(&quot;cpf&quot;, cpf)\n        .update();\n\n        \n    System.out.println(&quot;result: &quot; + res);\n    \n    return res == 2;\n</code></pre>\n<p>After running, I can check pgAdmin and verify that the rows were correctly inserted.</p>\n<p>However, when checking the variable <code>res</code> in the code, to see how many rows were affected, it's value is always 0. i believe this is because its not a plain insert, but a transaction.</p>\n<p>How would I be able to check wether my transaction ran successfully or not?</p>\n<p>Note that I'm using the <strong>Spring</strong> framework and a <strong>PostgreSQL</strong> database, accessed through the <strong>JdbcClient</strong></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}