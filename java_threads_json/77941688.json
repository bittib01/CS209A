{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "jetty",
      "http3"
    ],
    "owner": {
      "account_id": 1590496,
      "reputation": 1274,
      "user_id": 1473907,
      "user_type": "registered",
      "accept_rate": 73,
      "profile_image": "https://www.gravatar.com/avatar/16cba8499bada37bc7a1f9b44ec39e64?s=256&d=identicon&r=PG",
      "display_name": "mcacorner",
      "link": "https://stackoverflow.com/users/1473907/mcacorner"
    },
    "is_answered": true,
    "view_count": 1584,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1731739014,
    "creation_date": 1707143600,
    "last_edit_date": 1731739014,
    "question_id": 77941688,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77941688/spring-boot-http3-secure-connection-failed",
    "title": "spring boot http3: Secure Connection Failed",
    "body": "<p>I have checkout <a href=\"https://github.com/murphye/spring-boot-http-3-jetty\" rel=\"nofollow noreferrer\">spring-boot-http-3-jetty</a> and run.\nIt's working as expected[http-3(h3) from 2nd request] furthermore, I want to test it with POST request with body so, I have added the following <strong>thymeleaf</strong> dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>To handle form request added Controller</strong></p>\n<pre><code>package com.example.demo;\n\nimport java.io.IOException;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport jakarta.servlet.ServletRequest;\n\n@Controller\npublic class UploadController {\n    @GetMapping(&quot;/upload&quot;)\n    public String displayUploadForm(ServletRequest request, Model model) throws IOException {\n        System.out.println(&quot;displayUploadForm:&quot; + request.getProtocol());\n        model.addAttribute(&quot;message&quot;, &quot;hello from upload controller...&quot;);\n        return &quot;uploadForm&quot;;\n    }\n\n    @PostMapping(&quot;/handleUpload&quot;)\n    public String handleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file, Model model) {\n        model.addAttribute(&quot;message&quot;, &quot;You successfully uploaded &quot; + file.getOriginalFilename() + &quot;!&quot;);\n        return &quot;uploadForm&quot;;\n    }\n}\n</code></pre>\n<p><strong>Added thymeleaf template</strong></p>\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n    &lt;div th:if=&quot;${message}&quot;&gt;\n        &lt;h2 th:text=&quot;${message}&quot;/&gt;\n    &lt;/div&gt;\n\n    &lt;div&gt;\n        &lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; action=&quot;/handleUpload&quot;&gt;\n            &lt;table&gt;\n                &lt;tr&gt;&lt;td&gt;File to upload:&lt;/td&gt;&lt;td&gt;&lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\n                &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Upload&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>While hitting <a href=\"https://demo.local:9002/upload\" rel=\"nofollow noreferrer\">https://demo.local:9002/upload</a>\nIt shows form like and getting response header</p>\n<pre><code>alt-svc h3=&quot;:9002&quot;; ma=86400; persist=1\n</code></pre>\n<p><a href=\"https://i.sstatic.net/gsJno.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/gsJno.png\" alt=\"upload form\" /></a></p>\n<p>But after submitting form getting below error\n<a href=\"https://i.sstatic.net/zm319.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/zm319.png\" alt=\"Secure Connection Failed\" /></a></p>\n<p>I have import certificate in firefox.\nAlso with <code>RestController</code> GET request working with http-3 after initial request served with (http-2 &amp; response header <code>alt-svc h3=&quot;:9002&quot;; ma=86400; persist=1</code></p>\n<p>also notice sometime its working http-2 for consecutive request.</p>\n<p>Note:</p>\n<ol>\n<li>checking with latest firefox</li>\n<li>java version 19 on windows os</li>\n</ol>\n<p>Its there any other config need to check to work with http-3(h3)?</p>\n<p>Thanks in advance :-)</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}