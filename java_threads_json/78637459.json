{
  "question": {
    "tags": [
      "java",
      "java-8",
      "java-stream",
      "lazy-evaluation"
    ],
    "owner": {
      "account_id": 28716483,
      "reputation": 9,
      "user_id": 21990989,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtfHtIGUJ5rPyCFPMbOAYfXsQSUmCwA3xo1ePlCX4Q=k-s256",
      "display_name": "shining",
      "link": "https://stackoverflow.com/users/21990989/shining"
    },
    "is_answered": true,
    "view_count": 87,
    "closed_date": 1718723800,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1728401426,
    "creation_date": 1718713955,
    "last_edit_date": 1728401426,
    "question_id": 78637459,
    "link": "https://stackoverflow.com/questions/78637459/why-are-the-results-of-the-2-streams-different",
    "closed_reason": "Duplicate",
    "title": "why are the results of the 2 streams different?",
    "body": "<p>The Stream API supports lazy operations, so I understand that it calculates vertically.</p>\n<p>However, the results are different depending on the location of the limit method. Why does the operation continue even after getting the limit amount of results when limit is used after filter?</p>\n<pre class=\"lang-java prettyprint-override\"><code>// code 1\nint sum = IntStream.range(1, 101)\n                .map(i -&gt; {\n                    System.out.format(&quot;map : %d \\n&quot;,i);\n                    return i * i;\n                })\n                .limit(5)\n                .filter(i -&gt; {\n                    System.out.format(&quot;filter : %d\\n&quot;,i);\n                    return i&lt;20;\n                })\n                .sum();\n        System.out.println(sum);\n\n// result\nmap : 1 \nfilter : 1\nmap : 2 \nfilter : 4\nmap : 3 \nfilter : 9\nmap : 4 \nfilter : 16\nmap : 5 \nfilter : 25\n30\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// code 2\nint sum = IntStream.range(1, 101)\n                .map(i -&gt; {\n                    System.out.format(&quot;map : %d \\n&quot;,i);\n                    return i * i;\n                })\n                .filter(i -&gt; {\n                    System.out.format(&quot;filter : %d\\n&quot;,i);\n                    return i&lt;20;\n                })\n                .limit(5)\n                .sum();\n        System.out.println(sum);\n\n// result\nmap : 1 \nfilter : 1\nmap : 2 \nfilter : 4\n...\nmap : 97 \nfilter : 9409\nmap : 98 \nfilter : 9604\nmap : 99 \nfilter : 9801\nmap : 100 \nfilter : 10000\n30\n</code></pre>\n<p>I thought the two results would be similar, but I wonder why there is a difference in the number of operations.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}