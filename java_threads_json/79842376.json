{
  "question": {
    "tags": [
      "java",
      "rest",
      "post"
    ],
    "owner": {
      "account_id": 19699166,
      "reputation": 1,
      "user_id": 14422362,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhMI5hMVs1TAvtGeZIUIcaASpcFBQpjVn9vMmfElQ=k-s256",
      "display_name": "Dmitrii Fedorov",
      "link": "https://stackoverflow.com/users/14422362/dmitrii-fedorov"
    },
    "is_answered": true,
    "view_count": 85,
    "accepted_answer_id": 79843032,
    "answer_count": 2,
    "score": -1,
    "last_activity_date": 1765375152,
    "creation_date": 1765315797,
    "question_id": 79842376,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79842376/httpclient-in-java-send-a-post-request",
    "title": "Httpclient in java send a POST request",
    "body": "<p>I want to make an API caller with all CRUD methods using java<br />\nI want to be able to get all the data with json then parse it and only get data with it's unique id</p>\n<p>The thing that I can't figure out is how do I send data using an API. I get that I can use an id but what if I need to modify not one but 2 or more fields how do I do it then while Parsing a json?</p>\n<p>So I have implemented the GET method but I can't think of how to implement the POST one</p>\n<p>Here is the code from my methods class where I have all the methods</p>\n<p>I'm using Jackson to parse json and Java's Httpclient</p>\n<pre><code>import com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;\n\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.time.Duration;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\n\npublic class methods extends link{\n\n    private final ObjectMapper mapper = new ObjectMapper();\n    private final String url = &quot;https://jsonplaceholder.typicode.com/todos&quot;;\n\n\n    public List&lt;dataGettingBack&gt; getAllMethod() throws IOException, InterruptedException {\n\n\n        HttpClient httpClientGet = HttpClient.newBuilder().connectTimeout(Duration.ofSeconds(10)).build();\n        HttpRequest httpGetReq = HttpRequest\n                .newBuilder(URI.create(url))\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .GET()\n                .build();\n\n        HttpResponse&lt;String&gt; res = httpClientGet.send(httpGetReq, HttpResponse.BodyHandlers.ofString());\n        return mapper.readValue(res.body(), new TypeReference&lt;List&lt;dataGettingBack&gt;&gt;(){});\n    }\n\n    public List&lt;dataGettingBack&gt; getOne(int id) throws IOException, InterruptedException, error {\n        HttpClient httpGetOne = HttpClient.newBuilder().connectTimeout(Duration.ofSeconds(10)).build();\n        HttpRequest httpOne = HttpRequest\n                .newBuilder(URI.create(url + &quot;/&quot;+ id))\n                .header(&quot;Content-Type&quot;,&quot;application/json&quot;)\n                .GET()\n                .build();\n\n        HttpResponse&lt;String&gt; responce = httpGetOne.send(httpOne, HttpResponse.BodyHandlers.ofString());\n\n        if (responce.statusCode() == 404) { throw new error(&quot;Not found &quot;+ responce.statusCode()); }\n\n\n        return Collections.singletonList(mapper.readValue(responce.body(), dataGettingBack.class));\n    }\n\n    public void putMethod(int id) throws IOException, InterruptedException, error\n    {\n        HttpClient httpClientPut = HttpClient.newBuilder().connectTimeout(Duration.ofSeconds(10)).build();\n        HttpRequest httpPutReq = HttpRequest\n                .newBuilder(URI.create(url+ &quot;/&quot; +id))\n                .PUT(HttpRequest.BodyPublishers.ofString(url))\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .build();\n\n        HttpResponse&lt;String&gt; response = httpClientPut.send(httpPutReq, HttpResponse.BodyHandlers.ofString());\n\n        \n    }\n\n    public void postMethod() {\n\n        HttpClient httpClientPost = HttpClient.newBuilder().connectTimeout(Duration.ofSeconds(10)).build();\n        HttpRequest httpPostReq = HttpRequest\n                .newBuilder(URI.create(url))\n                //.POST()\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .build();\n\n\n    }\n\n\n\n    public void deleteMethod(int id)\n    {\n\n        HttpClient httpClientDelete = HttpClient.newBuilder().connectTimeout(Duration.ofSeconds(10)).build();\n        HttpRequest httpDelReq = HttpRequest\n                .newBuilder(URI.create(url))\n                .DELETE()\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .build();\n\n\n    }\n\n}\n</code></pre>\n<p>Here is how I get my data back</p>\n<pre><code>public record dataGettingBack(Integer userId, Integer id, String title, boolean completed) {}\n</code></pre>\n<p>That's the output when I run it all</p>\n<pre><code>[dataGettingBack[userId=1, id=10, title=illo est ratione doloremque quia maiores aut, completed=true]]\n</code></pre>\n<p>I also have an error class</p>\n<pre><code>public class error extends Throwable\n{ public error(String massege) { super(massege); } }\n</code></pre>\n<p>as well as link class</p>\n<pre><code>abstract class link\n{\n    public String url;\n}\n</code></pre>\n<p>That's what I have in main</p>\n<pre><code>public static void main(String[] args) throws Exception, error\n{\n    methods methods  = new methods();\n\n    List&lt;dataGettingBack&gt; getAll = methods.getAllMethod();\n    List&lt;dataGettingBack&gt; one = methods.getOne(10);\n\n    System.out.println(one);\n}\n</code></pre>\n<p>I started my programming classes a few months ago and that's my first project on my own</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}