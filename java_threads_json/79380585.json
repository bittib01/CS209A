{
  "question": {
    "tags": [
      "java",
      "spring",
      "mapstruct"
    ],
    "owner": {
      "account_id": 3408319,
      "reputation": 11201,
      "user_id": 2858871,
      "user_type": "registered",
      "accept_rate": 79,
      "profile_image": "https://i.sstatic.net/GwUqu.jpg?s=256",
      "display_name": "Emilien Brigand",
      "link": "https://stackoverflow.com/users/2858871/emilien-brigand"
    },
    "is_answered": true,
    "view_count": 79,
    "accepted_answer_id": 79380684,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1737667760,
    "creation_date": 1737626711,
    "last_edit_date": 1737627093,
    "question_id": 79380585,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79380585/mapstruct-mapper-return-a-spring-bean-not-initialized",
    "title": "Mapstruct Mapper return a Spring Bean not initialized",
    "body": "<p>I have a Mapper class <code>WishListMapper</code> like this:</p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\npublic abstract class WishListMapper {\n\n    @Mappings ({\n       @Mapping(source = &quot;productCountDtos&quot;, target = &quot;productCounts&quot;, qualifiedByName = &quot;productCountDtosToProductCounts&quot;),\n       @Mapping(target = &quot;account&quot;, ignore = true),\n       @Mapping(target = &quot;id&quot;, ignore = true)\n    })\n    public abstract WishList mapToWishList(WishListDto wishListDto);\n\n    @Named(&quot;productCountDtosToProductCounts&quot;)\n    Set&lt;ProductCount&gt; productCountDtosToProductCounts(List&lt;ProductCountDto&gt; productCountDtos) {\n        return productCountDtos.stream().map(productCountDto -&gt; Mappers.getMapper(ProductCountMapper.class).mapToProductCount(productCountDto)).collect(Collectors.toSet());\n    }\n}\n</code></pre>\n<p>This is calling another Mapper class <code>ProductCountMapper</code> via <code>Mappers.getMapper(ProductCountMapper.class)</code></p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\npublic abstract class ProductCountMapper {\n\n    @Autowired\n    protected ProductService productService;\n\n    @Mappings({\n            @Mapping(source = &quot;productId&quot;, target = &quot;product&quot;, qualifiedByName = &quot;productIdToProduct&quot;),\n            @Mapping(target = &quot;wishList&quot;, ignore = true),\n            @Mapping(target = &quot;id&quot;, ignore = true)\n    })\n    public abstract ProductCount mapToProductCount(ProductCountDto ProductCountDto);\n\n    @Named(&quot;productIdToProduct&quot;)\n    Product productIdToProduct(Long productId) {\n        return productService.get(productId);\n    }\n}\n</code></pre>\n<p>And I get a <code>NullPointerException</code> on <code>productService</code>, when I inspect, the <code>Mappers.getMapper(ProductCountMapper.class)</code> return the mapper with <code>null</code> for <code>productService</code>.</p>\n<p><em>PS: if <code>ProductCountMapper</code> is used straight (without beeing called by <code>WishListMapper</code>) it's working fine.</em></p>\n<p>What is the solution?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}