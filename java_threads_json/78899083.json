{
  "question": {
    "tags": [
      "java",
      "bufferedreader",
      "graphics2d",
      "paintcomponent",
      "2d-games"
    ],
    "owner": {
      "account_id": 34981907,
      "reputation": 11,
      "user_id": 26897519,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/c68caccc8cd7e8f74b62962cad5096f7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Alan Morgan",
      "link": "https://stackoverflow.com/users/26897519/alan-morgan"
    },
    "is_answered": true,
    "view_count": 91,
    "accepted_answer_id": 78899629,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1728808347,
    "creation_date": 1724276283,
    "last_edit_date": 1724294548,
    "question_id": 78899083,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78899083/im-trying-to-draw-a-2d-tile-map-from-a-txt-file-in-java-but-it-is-only-using-o",
    "title": "I&#39;m trying to draw a 2d tile map from a .txt file in java but it is only using one of the tiles accross the map and not using whats in the .txt file",
    "body": "<p>I'm following a java 2d game tutorial from ryisnow on youtube. <a href=\"https://www.youtube.com/watch?v=ugzxCcpoSdE\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=ugzxCcpoSdE</a>\nI was able to display each tile on its own but I don't know why the .txt isnt working</p>\n<p>here is the map01.txt package</p>\n<pre><code>1001111111111111\n1000000000000001\n1000000000000001\n1000000000000001\n1000000000000001\n1000000000000001\n1000000000000001\n1000002222000001\n1000002222000001\n1000002222000001\n1000002222000001\n1111111111111111\n\n</code></pre>\n<p>this is my Tile.java package</p>\n<pre><code>package tile;\n\nimport java.awt.image.BufferedImage;\n\npublic class Tile {\n\n    public BufferedImage image;\n    public boolean collision = false;\n}\n\n</code></pre>\n<p>this is my TileManager.java</p>\n<pre><code>package tile;\n\nimport java.awt.Graphics2D;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\n\nimport javax.imageio.ImageIO;\n\nimport main.GamePanel;\n\npublic class TileManager {\n\n    GamePanel gp;\n    Tile[] tile;\n    int mapTileNum[][];\n    \n    public TileManager(GamePanel gp) {\n    \n        \n        this.gp = gp;\n        \n        tile = new Tile[10];\n        mapTileNum = new int[gp.maxScreenCol][gp.maxScreenRow];\n        \n        getTileImage();\n        loadMap();\n    }\n    \n    public void getTileImage() {\n        \n        try {\n            \n            tile[0] = new Tile();\n            tile[0].image = ImageIO.read(getClass ().getResourceAsStream(&quot;/tiles/Grass.png&quot;));\n            \n            tile[1] = new Tile();\n            tile[1].image = ImageIO.read(getClass ().getResourceAsStream(&quot;/tiles/Wall.png&quot;));\n            \n            tile[2] = new Tile();\n            tile[2].image = ImageIO.read(getClass ().getResourceAsStream(&quot;/tiles/Water.png&quot;));\n            \n        }catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n    public void loadMap() {\n        \n        try {\n            InputStream is = getClass().getResourceAsStream(&quot;/maps/map01.txt&quot;);\n            BufferedReader br = new BufferedReader( new InputStreamReader(is));\n            \n            int col = 0;\n            int row = 0;\n            \n            while(col &lt; gp.maxScreenCol &amp;&amp; row &lt; gp.maxScreenRow) {\n                 \n                String line = br.readLine();\n                \n                while(col &lt; gp.maxScreenCol) {\n                    \n                    String numbers[] = line.split(&quot; &quot;);\n                    \n                    int num = Integer.parseInt(numbers[col]);\n                    \n                    mapTileNum[col][row] = num;\n                    col++;\n                }\n                if(col == gp.maxScreenCol) {\n                    col = 0;\n                    row++;\n                }\n            }\n            br.close();\n            \n        }catch(Exception e) {\n            \n        }\n        \n        \n        \n        \n        \n        \n    }\n    public void draw(Graphics2D g2) {\n        \n        int col = 0;\n        int row = 0;\n        int x = 0;\n        int y = 0;\n        \n        while(col &lt; gp.maxScreenCol &amp;&amp; row &lt; gp.maxScreenRow) {\n            \n            int tileNum = mapTileNum[col][row];\n            \n            g2.drawImage(tile[tileNum].image, x, y, gp.tileSize, gp.tileSize, null);\n            col++;\n            x += gp.tileSize;\n            \n            if(col == gp.maxScreenCol) {\n                col = 0;\n                x = 0;\n                row++;\n                y += gp.tileSize;\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>and here is my GamePanel.java package</p>\n<pre><code>package main;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\n\nimport javax.swing.JPanel;\n\nimport entity.Player;\nimport tile.TileManager;\n\n\npublic class GamePanel extends JPanel implements Runnable{\n\n    \n    // SCREEN SETTINGS\n    final int originalTileSize = 16; // 16x16 tile\n    final int scale = 3;\n            \n    public final int tileSize = originalTileSize * scale; // 48x48 tile\n    public final int maxScreenCol = 16;\n    public final int maxScreenRow = 12;\n    public final int screenWidth = tileSize * maxScreenCol; // 768 pixels\n    public final int screenHeight = tileSize * maxScreenRow; // 576 pixels\n    \n    // FPS\n    int FPS = 60;\n    \n    \n    TileManager tileM = new TileManager(this);\n    KeyHandler keyH = new KeyHandler();\n    Thread gameThread;\n    Player player = new Player(this,keyH);\n    \n\n    public GamePanel() {\n        \n        this.setPreferredSize(new Dimension(screenWidth, screenHeight));\n        this.setBackground(Color.white);\n        this.setDoubleBuffered(true);\n        this.addKeyListener(keyH);\n        this.setFocusable(true);\n    }\n\n    public void startGameThread() {\n        \n        gameThread = new Thread(this);\n        gameThread.start();\n    }\n\n\n    @Override\n//  public void run() {     \n//      \n//      double drawInterval = 1000000000/FPS; //0.0166666 seconds\n//      double nextDrawTime = System.nanoTime() + drawInterval;\n//      \n//      while(gameThread != null) { \n//                      \n//\n//          \n//          // UPDATE: update information such as character positions\n//          update();\n//          \n//          // 2 DRAW: draw the screen with the update information\n//          repaint();\n//          \n//          \n//          try {\n//              double remainingTime = nextDrawTime - System.nanoTime();\n//              remainingTime = remainingTime/1000000;\n//              \n//              if(remainingTime &lt; 0) {\n//                  remainingTime = 0;\n//              }\n//              Thread.sleep((long) remainingTime);\n//              \n//              nextDrawTime += drawInterval;\n//              \n//          } catch (InterruptedException e) {\n//              e.printStackTrace();\n//          }\n//      }\n//      \n//  }\n    \n        \n    public void run() {\n        \n        double drawInterval = 1000000000/FPS;\n        double delta = 0;\n        long lastTime = System.nanoTime();\n        long currentTime;\n        long timer = 0;\n        int drawCount =0;\n        \n        while(gameThread != null) {\n            \n            currentTime = System.nanoTime();\n            \n            delta += (currentTime - lastTime) / drawInterval;\n            timer += (currentTime - lastTime);\n            lastTime = currentTime;\n            \n            if(delta &gt;= 1) {\n                update();\n                repaint();\n                delta--;\n                drawCount++;\n            }\n            \n            if(timer &gt;= 1000000000) {\n                System.out.println(&quot;FPS:&quot; + drawCount);\n                drawCount = 0;\n                timer = 0;\n            }\n            \n        }\n    }\n    \n        \n    public void update() {\n        \n        player.update();\n\n    }\n    public void paintComponent(Graphics g) {\n        \n        super.paintComponent(g);\n        \n        Graphics2D g2= (Graphics2D)g;\n        \n        tileM.draw(g2);\n        \n        player.draw(g2);\n        \n        g2.dispose();\n    }\n\n    \n    \n    \n    \n    \n    \n    \n    \n}\n</code></pre>\n<p>I thought I had followed the tutorial correctly but its not following the text file.</p>\n<p>what it should look like:</p>\n<p><a href=\"https://i.sstatic.net/xFSMJ92i.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/xFSMJ92i.jpg\" alt=\"https://i.sstatic.net/xFSMJ92i.jpg\" /></a></p>\n<p>what mine looks like:</p>\n<p><a href=\"https://i.sstatic.net/8RLgGZTK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/8RLgGZTK.jpg\" alt=\"https://i.sstatic.net/8RLgGZTK.jpg\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}