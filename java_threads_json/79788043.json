{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "jpa"
    ],
    "owner": {
      "account_id": 14878684,
      "reputation": 873,
      "user_id": 10744028,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/-XAzkrkEpit0/AAAAAAAAAAI/AAAAAAAAAEg/AWErc7qYyNI/s256-rj/photo.jpg",
      "display_name": "Fizik26",
      "link": "https://stackoverflow.com/users/10744028/fizik26"
    },
    "is_answered": true,
    "view_count": 111,
    "accepted_answer_id": 79788057,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1760255845,
    "creation_date": 1760189963,
    "last_edit_date": 1760255845,
    "question_id": 79788043,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79788043/jpa-join-table-that-contains-2-pk-but-only-one-of-this-two-is-used",
    "title": "Jpa - Join table that contains 2 PK but only one of this two is used",
    "body": "<p>I'm running a Spring Boot app.</p>\n<p>I have these two tables in my database.\nI fill an example of data that contains these tables.</p>\n<p>Table <code>user</code>\nHere column <code>id</code> is a PK and column <code>state_id</code> is a FK from table <code>state</code> with a reference of column <code>id</code></p>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">id</th>\n<th style=\"text-align: center;\">name</th>\n<th style=\"text-align: center;\">state_id</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">33</td>\n<td style=\"text-align: center;\">John Doe</td>\n<td style=\"text-align: center;\">1</td>\n</tr>\n</tbody>\n</table></div>\n<p>Table <code>state</code>\nHere, columns <code>id</code> and <code>century</code> are both primary keys of the table</p>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">id</th>\n<th style=\"text-align: center;\">century</th>\n<th style=\"text-align: center;\">label</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\">21</td>\n<td style=\"text-align: center;\">1</td>\n</tr>\n</tbody>\n</table></div>\n<p>I want to model these two tables as JPA entities, so I did it like that :</p>\n<p>StatePK.java :</p>\n<pre><code>public class StatePK implements Serializable {\n     private Long id;\n     private Integer century;\n}\n</code></pre>\n<p>State.java :</p>\n<pre><code>@Entity\n@Table(name = &quot;state&quot;)\n@IdClass(StatePK.class)\npublic class State {\n\n       @Id\n       private Long id;\n\n       @Id\n       private Integer century;\n\n       private String label;\n}\n</code></pre>\n<p>User.java :</p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;)\npublic class User implements Serializable {\n\n       @Id\n       private Long id;\n\n       private String name;\n\n       @ManyToOne\n       @JoinColumn(name = &quot;state_id&quot;)\n       private State state;\n}\n</code></pre>\n<p>But when I compile with Maven, it's ok, but when I start my app, I have this error :</p>\n<blockquote>\n<p>Error creating bean with name 'entityManagerFactory' defined in class\npath resource\n[org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]:\nAn association that targets entity\n'fr..infrastructure.provider.jpa.model.State' from entity\n'fr.infrastructure.provider.jpa.model.User' has 1 '@JoinColumn's but\nthe primary key has 2 columns&quot;</p>\n</blockquote>\n<p>Can someone help me with that issue, please?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}