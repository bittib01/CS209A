{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "dependency-injection",
      "microservices"
    ],
    "owner": {
      "account_id": 8056132,
      "reputation": 401,
      "user_id": 6073219,
      "user_type": "registered",
      "accept_rate": 80,
      "profile_image": "https://www.gravatar.com/avatar/e746f335363b80c443a3b206851f4970?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Ryley38",
      "link": "https://stackoverflow.com/users/6073219/ryley38"
    },
    "is_answered": false,
    "view_count": 75,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1755076938,
    "creation_date": 1755009865,
    "last_edit_date": 1755076938,
    "question_id": 79733339,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79733339/mongorepository-bean-not-found-when-repository-is-in-external-jar-dependency",
    "title": "MongoRepository bean not found when repository is in external JAR dependency",
    "body": "<p>My microservice uses an external dependency which is a JAR build by my company.\nI can't figure why the bean is not found.</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\\00\\00\\00\\00\\00\\00\nDescription:\nParameter 1 of constructor in my.package.service.AuthorizationService required a bean of type 'my.package.repository.I2b2QueryRepository' that could not be found.\nAction:\nConsider defining a bean of type 'my.package.repository.I2b2QueryRepository' in your configuration.\n</code></pre>\n<p><strong>Repository</strong></p>\n<pre><code>public interface I2b2QueryRepository extends MongoRepository&lt;I2b2Query, String&gt; {\n    I2b2Query findOneById(String queryId);\n}\n</code></pre>\n<p><strong>Service</strong></p>\n<pre><code>private final ProjectMicroserviceFeignClient projectMicroserviceFeignClient;\nprivate final I2b2QueryRepository i2b2QueryRepository;\n\npublic AuthorizationService(ProjectMicroserviceFeignClient projectMicroserviceFeignClient, I2b2QueryRepository i2b2QueryRepository) {\n    this.projectMicroserviceFeignClient = projectMicroserviceFeignClient;\n    this.i2b2QueryRepository = i2b2QueryRepository;\n}\n</code></pre>\n<p><strong>My package</strong></p>\n<pre><code>@SpringBootApplication\n@EnableMongoRepositories(basePackageClasses = I2b2QueryRepository.class)\npublic class MyPackage {\n\n    public static void main(String[] args) {\n    }\n}\n</code></pre>\n<p>I tried :</p>\n<ul>\n<li>with and without the <code>@SPringBootApplication</code> and <code>@EnableMongoRepositories</code> annotations</li>\n<li>adding <code>@componentScan(&quot;my.package&quot;)</code> to the main class of the package</li>\n<li>adding <code>@componentScan(scanBasePackages = ...)</code> to the main class of parent project</li>\n<li>with or without <code>@Repository</code> annotation on the repository</li>\n<li><code>@autowired</code> and constructor injection in AuthorizationService</li>\n<li>Adding <code>@EnableMongoRepositories</code> to the main class of parent project but it leads to other errors and I am not sure this is the proper solution</li>\n</ul>\n<p><strong>Package structure of the external dependency: (Edited)</strong></p>\n<pre><code>src/\n├── main/\n│   └── java/\n│       └── com/\n│           └── example/\n│               ├── MyPackage.java\n│               └── authorization/\n│                   ├── service/\n│                   │   └── AuthorizationService.java\n│                   └── repository/\n│                       ├── ProjectMicroserviceFeign.java\n│                       └── I2b2QueryRepository.java\n│           ├── META-INF/\n│           ├── application.properties\n</code></pre>\n<p>Globally I have tried solutions from <a href=\"https://stackoverflow.com/questions/40384056/consider-defining-a-bean-of-type-package-in-your-configuration-spring-boot\">this question</a>, without success for now.</p>\n<p><strong>UPDATE 1</strong></p>\n<p><strong>Main project class</strong></p>\n<pre><code>@SpringBootApplication(scanBasePackages = { &quot;main.project.path&quot;, &quot;my.package.path&quot;}\n@EnableMangoRepositories(basePackageClasses = {I2b2QueryRepository.class}\n@EnableElasticSearchRepositories(basePackageClasses = {MyESRepo.class}\n@EnableJpaRepositories(basePackageClasses = {MyJpaRepo.class},\npublic class MainProjectApp {\n}\n</code></pre>\n<p><strong>UPDATE 2</strong></p>\n<p><strong>Main project's package structure</strong></p>\n<pre><code>src/\n└── main/\n    └── java/\n        └── com/\n            └── example/\n                ├── MainProjectApp.java\n                └── repository/\n                    ├── I2b2QueryRepository.java    (Mango)\n                    ├── UserRepository.java         (JPA)\n                    ├── UserSearchRepository.java   (Elasticsearch)\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}