{
  "question": {
    "tags": [
      "java",
      "jpackage"
    ],
    "owner": {
      "account_id": 13881877,
      "reputation": 69,
      "user_id": 10022053,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/SxHHa.jpg?s=256",
      "display_name": "sblantipodi",
      "link": "https://stackoverflow.com/users/10022053/sblantipodi"
    },
    "is_answered": true,
    "view_count": 488,
    "answer_count": 1,
    "score": 6,
    "last_activity_date": 1720008859,
    "creation_date": 1707071465,
    "question_id": 77937092,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77937092/restarting-a-java-program-does-not-work-with-the-new-jdk-21-02-13",
    "title": "Restarting a Java program does not work with the new JDK 21.02_13",
    "body": "<p>my Java app experienced a very weird regression when switching from JDK\nOpenJDK21U-jdk_x64_windows_hotspot_21.0.1_12\nto\nOpenJDK21U-jdk_x64_windows_hotspot_21.0.2_13</p>\n<p>This small snippet should start a third party software (in this case Notepad++.exe but it's just an example) and after 30 seconds, close the java app that launched it.</p>\n<pre><code>public static void main(String... args) throws IOException {\n        String[] cmdToRunUsingArgs = {&quot;cmd.exe&quot;, &quot;/C&quot;, &quot;C:\\\\Program Files\\\\Notepad++\\\\notepad++.exe&quot;};\n        Runtime.getRuntime().exec(cmdToRunUsingArgs);\n        Executors.newSingleThreadScheduledExecutor().schedule(() -&gt; {\n            System.exit(0);\n        }, 30, TimeUnit.SECONDS);\n    }\n</code></pre>\n<p>It works well with all previous JDK versions but it stopped working from java 21.0.2 and later.</p>\n<p>With JDK 21.0.1, the program launches the third party app correcly, after 30 seconds, it kills itself by leaving the third app running.<br />\nWith JDK 21.0.2, the program launches the third party app correcly, after 30 seconds, it kills itself AND the third party app.</p>\n<p>this makes even impossible to restart a java app from the app itself.</p>\n<p>The problems happens if you create the exe file with JPackage and then you launch the program using the exe file,<br />\nif you run the jar file with java -jar does not occur.</p>\n<p>Any idea why the new JDK introduced this regression?</p>\n<h3>Expected Results</h3>\n<p>Program should start the third party app and then close itself after 30 seconds by leaving the third party app running.</p>\n<h3>Actual Results</h3>\n<p>Program start the third party app but after 30 seconds it kills both the third party app and itself.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}