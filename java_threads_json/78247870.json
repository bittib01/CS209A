{
  "question": {
    "tags": [
      "java",
      "wiremock",
      "artifact"
    ],
    "owner": {
      "account_id": 30701797,
      "reputation": 307,
      "user_id": 23539854,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/31cf10e56fad24e988ec3cf1f176ce60?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Powet",
      "link": "https://stackoverflow.com/users/23539854/powet"
    },
    "is_answered": true,
    "view_count": 215,
    "accepted_answer_id": 78252276,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1736467055,
    "creation_date": 1711800897,
    "last_edit_date": 1711802799,
    "question_id": 78247870,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78247870/why-do-non-stand-alone-artifacts-exist",
    "title": "Why do &quot;non-stand-alone&quot; artifacts exist?",
    "body": "<p>I started to learn WireMock. My first experience is not very positive. Here's a failing MRE:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.github.tomakehurst.wiremock.WireMockServer;\nimport org.junit.jupiter.api.Test;\n\npublic class GenericTest {\n    @Test\n    void test() {\n        new WireMockServer(8090);\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.wiremock&lt;/groupId&gt;\n            &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\n            &lt;version&gt;3.5.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.NoClassDefFoundError: org/eclipse/jetty/util/thread/ThreadPool\n</code></pre>\n<p>I debugged it a little:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public WireMockServer(int port) {\n    this(/* -&gt; this */ wireMockConfig() /* &lt;- throws */.port(port));\n  }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// WireMockConfiguration\n\n  // ↓ throwing inline\n  private ThreadPoolFactory threadPoolFactory = new QueuedThreadPoolFactory();\n\n  public static WireMockConfiguration wireMockConfig() {\n    return /* implicit no-args constructor */ new WireMockConfiguration();\n  }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.github.tomakehurst.wiremock.jetty;\n\nimport com.github.tomakehurst.wiremock.core.Options;\nimport com.github.tomakehurst.wiremock.http.ThreadPoolFactory;\n// ↓ package org.eclipse does not exist, these lines are in red\nimport org.eclipse.jetty.util.thread.QueuedThreadPool;\nimport org.eclipse.jetty.util.thread.ThreadPool;\n\npublic class QueuedThreadPoolFactory implements ThreadPoolFactory {\n\n  @Override\n  public ThreadPool buildThreadPool(Options options) {\n    return new QueuedThreadPool(options.containerThreads());\n  }\n}\n</code></pre>\n<p>My conclusions:</p>\n<ol>\n<li>WireMock has a dependency on <code>org.eclipse</code></li>\n<li>WireMock doesn't include this dependency in its artifact</li>\n<li>I have to provide it manually</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- like so --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n    &lt;artifactId&gt;jetty-util&lt;/artifactId&gt;\n    &lt;version&gt;12.0.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I even visited their <a href=\"https://github.com/wiremock/wiremock/tree/master\" rel=\"nofollow noreferrer\">GitHub</a> to see for myself if the dependency is marked as <code>provided</code>, but they use Gradle, and I don't know Gradle</p>\n<p>But that's not all! You'll also have to include (at least) <code>com.github.jknack.handlebars</code> and <code>com.google.common.cache</code> (see <code>com.github.tomakehurst.wiremock.extension.responsetemplating.TemplateEngine</code>)</p>\n<p>Luckily, I found this &quot;stand-alone&quot; artifact that doesn't require any manual props</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.wiremock&lt;/groupId&gt;\n            &lt;artifactId&gt;wiremock-standalone&lt;/artifactId&gt;\n            &lt;version&gt;3.5.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>My question:\nWhy aren't all artifacts &quot;stand-alone&quot;? Why do artifacts that don't work unless propped up by manually declared dependencies even exist, what are their advantages?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}