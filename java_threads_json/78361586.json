{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-security",
      "oauth-2.0"
    ],
    "owner": {
      "account_id": 13569713,
      "reputation": 149,
      "user_id": 9788789,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/-_x9a7aFkxgk/AAAAAAAAAAI/AAAAAAAACHs/DYxFkFBvtAU/s256-rj/photo.jpg",
      "display_name": "Kunal Nk",
      "link": "https://stackoverflow.com/users/9788789/kunal-nk"
    },
    "is_answered": true,
    "view_count": 5684,
    "answer_count": 6,
    "score": 3,
    "last_activity_date": 1735644475,
    "creation_date": 1713703365,
    "last_edit_date": 1714547464,
    "question_id": 78361586,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78361586/how-to-customise-error-handling-in-jwt-authentication-with-spring-security-6",
    "title": "How to Customise Error Handling in JWT Authentication with Spring Security 6?",
    "body": "<p>I have implemented a simple resource server with Spring Boot using the following dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;version&gt;2.4.12&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Most of my requirements are satisfied with the built-in, default workflow. However, it would be nice if I could customise the error handling part.</p>\n<p>Currently, when I make an unauthorised request, I just get a blank response with a 401 status code.</p>\n<p><a href=\"https://i.sstatic.net/qOPpO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/qOPpO.png\" alt=\"enter image description here\" /></a></p>\n<p>Instead of an empty response with just a 401 code, I want to send custom error messages like &quot;Invalid access token&quot;, &quot;Access token missing&quot;, &quot;Access token expired&quot;, etc. It would help a lot while debugging.</p>\n<p>I have tried implementing the interfaces <code>AuthenticationEntryPoint</code> and\n<code>AuthenticationFailureHandler</code>. But, I haven't been successful.</p>\n<p>I have referred the following article from the Spring Security docs:</p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html</a></p>\n<p>Also, this is my Web Security Configuration:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .authorizeHttpRequests((authz) -&gt; authz\n                        .requestMatchers(&quot;/public/**&quot;).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>Can someone provide a way to customise error messages in the JWT Authentication workflow?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}