{
  "question": {
    "tags": [
      "java",
      "android",
      "telegram-bot",
      "telegram-api"
    ],
    "owner": {
      "account_id": 30035762,
      "reputation": 34,
      "user_id": 23017769,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocI0Qu1zqon2Nu9ES5d63Jocg87WNaJNN0_I4uo9-dq1=k-s256",
      "display_name": "Progromatic World",
      "link": "https://stackoverflow.com/users/23017769/progromatic-world"
    },
    "is_answered": false,
    "view_count": 41,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1735357154,
    "creation_date": 1714965538,
    "last_edit_date": 1735357154,
    "question_id": 78434410,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78434410/android-java-error-on-replying-to-telegram-chat-commands",
    "title": "android java error on replying to telegram chat commands",
    "body": "<p>i created app that communicate with telegram chat commands like /start\nif users send messages equals &quot;/start&quot; then app send a reply</p>\n<p>here is my code</p>\n<pre><code>private void respondToCommand() {\n\n        botTokens = (EditText) findViewById(R.id.botToken);\n        chatId = (EditText) findViewById(R.id.chatId);\n        String botTokenStr = botTokens.getText().toString();\n        String chatIdStr = chatId.getText().toString();\n\n        if (botTokenStr.isEmpty()){\n            Toast.makeText(getApplicationContext(), &quot;bot token is empty!&quot;, Toast.LENGTH_LONG).show();\n        }else {\n\n            telegramApiUrl = &quot;https://api.telegram.org/bot&quot;+botTokens.getText().toString()+&quot;/getUpdates?limit=1&amp;offset=-1&quot;;\n\n            JsonObjectRequest request = new JsonObjectRequest(com.android.volley.Request.Method.GET, telegramApiUrl, null, new Response.Listener&lt;JSONObject&gt;() {\n                @Override\n                public void onResponse(JSONObject response) {\n                    try {\n\n                        JSONArray resultArr = response.getJSONArray(&quot;result&quot;);\n                        if (resultArr.length() == 0) {\n                            Toast.makeText(getApplicationContext(), &quot;Try to send command in group chat.&quot;, Toast.LENGTH_LONG).show();\n                        } else {\n                            for (int i = 0; i &lt; resultArr.length(); i++) {\n                                JSONObject c = resultArr.getJSONObject(i).getJSONObject(&quot;message&quot;);\n                                String msgText = c.getString(&quot;text&quot;);\n\n                                String firstname = c.getString(&quot;chat&quot;);\n                                Gson gson = new Gson();\n                                Data data = gson.fromJson(firstname, Data.class);\n                                if(data.id.equals(chatIdStr))\n                                {\n                                    if(msgText.equals(&quot;/start&quot;)){\n                                        //sending reply\n                                        new RetrieveFeedTask().execute(botTokenStr, chatIdStr, &quot;Started&quot;+ UUID.randomUUID());\n                                        resultToken.setText(&quot;reply to command : &quot;+msgText);\n                                    }else{\n                                        resultToken.setText(&quot;it's a message : &quot;+msgText);\n                                    }\n                                }else{\n                                    resultToken.setText(&quot;not chat&quot;);\n                                }\n                            }\n                        }\n\n                    } catch (Exception e) {\n                        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();\n                    }\n                }\n            }, new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError volleyError) {\n                    Toast.makeText(getApplicationContext(), volleyError.toString(), Toast.LENGTH_LONG).show();\n                }\n            });\n\n            Volley.newRequestQueue(this).add(request);\n\n        }\n\n    }\n</code></pre>\n<p>the error i get that application when get command it send a reply continuously until user send other message not contains command</p>\n<p><a href=\"https://i.sstatic.net/tR5FL0yf.png\" rel=\"nofollow noreferrer\">error showed in telegram group chat</a></p>\n<p>i want to reply to command once every user send command to group.</p>\n<p>any help.</p>\n<p>i searched all question and tried most github java telegrambotapi libs and i found nothing.</p>\n<p>i solved it by using this app opensource <a href=\"https://github.com/telegram-sms/telegram-sms\" rel=\"nofollow noreferrer\">https://github.com/telegram-sms/telegram-sms</a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}