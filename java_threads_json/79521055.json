{
  "question": {
    "tags": [
      "java",
      "hibernate",
      "caching",
      "hazelcast",
      "ttl"
    ],
    "owner": {
      "account_id": 40845888,
      "reputation": 1,
      "user_id": 29991768,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/c0701a5fddc5b1eddf6a5c43f1c4beac?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Nandini Gupta",
      "link": "https://stackoverflow.com/users/29991768/nandini-gupta"
    },
    "is_answered": false,
    "view_count": 95,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1742408213,
    "creation_date": 1742408009,
    "last_edit_date": 1742408213,
    "question_id": 79521055,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79521055/configuring-ttl-for-hibernate-query-cache",
    "title": "Configuring TTL for hibernate query cache",
    "body": "<p>I don't want to rely upon the default TTL of 1 hour provided by hibernate so I am configuring custom TTL for my hibernate query cache region.</p>\n<p>My application is using hibernate on DAO level and we are using hazelcast in client server mode as second level cache provider for hibernate.</p>\n<p>This is how I am using the hibernate query cache - refer below code snippet</p>\n<pre><code>Criteria criteria = getSession().createCriteria(MyClass.java);\ncriteria.setCacheable(true);\ncriteria.setCacheRegion(&quot;my.query.cache.region&quot;);\ncriteria.list();\n</code></pre>\n<p>Below is the hibernate configuration -</p>\n<pre><code>&lt;property name=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;hibernate.cache.use_query_cache&quot;&gt;true&lt;/property&gt;\n</code></pre>\n<p>Below is the map config for &quot;my.query.cache.region&quot; in hazelcast.xml residing on hazelcast server</p>\n<pre><code>&lt;map name=&quot;default&quot;&gt;\n   &lt;time-to-live-seconds&gt;180&lt;/time-to-live-seconds&gt;\n&lt;/map&gt;\n</code></pre>\n<p>After doing all this I am checking the stats of the &quot;my.query.cache.region&quot;</p>\n<pre><code>getSession().getSessionFactory().getStatistics().getSecondLevelCacheStatistics(&quot;my.query.cache.region&quot;)\n</code></pre>\n<p>I am observing that 180 seconds ~ 3 mins of TTL is not having any impact, the cache is expiring after an hour only - means picking the default hibernate TTL of 1 hour.</p>\n<p>Please guide me where i am going wrong.\nhow can i configure the TTL for hibernate query cache regions?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}