{
  "question": {
    "tags": [
      "java",
      "maven",
      "maven-compiler-plugin"
    ],
    "owner": {
      "account_id": 8597210,
      "reputation": 1433,
      "user_id": 6439899,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/4d9390025c6c64ad34e5ed8bb8f03a64?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Coding thermodynamist",
      "link": "https://stackoverflow.com/users/6439899/coding-thermodynamist"
    },
    "is_answered": true,
    "view_count": 4185,
    "accepted_answer_id": 78088954,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1721224503,
    "creation_date": 1707304798,
    "question_id": 77954301,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77954301/maven-compiler-plugin-enforce-source-compatibility-with-older-jdk-but-compile-in",
    "title": "maven-compiler-plugin enforce source compatibility with older JDK but compile in newer version",
    "body": "<p>I am trying to keep my java project compatible with java 17 but actually compile and ships the jars with Java 21 compatibility level.</p>\n<p>The rationale being that I am releasing a new major version and I would like to have Java 21 for baseline, but it might be a problem for some users. So the idea is to ship in Java 21 but keep the sources compatible with 17 in order to be able to bring back Java 17 build in a minor release if a user cannot upgrade with a valid reason. If all the users can migrate to Java 21 without issue, I will be able to use Java 21 only features without having to wait for a new major version of my software.</p>\n<p>I am puzzled when configuring <code>maven-compiler-plugin</code>.</p>\n<p>To ensure compatibility, the plan is:</p>\n<ul>\n<li>Have jdk 21 installed</li>\n<li>have the following configuration <code>maven-compiler-plugin</code>:</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;source&gt;  17  &lt;/source&gt;\n    &lt;target&gt;  21  &lt;/target&gt;\n    &lt;release&gt; 17  &lt;/release&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>However, after reading <a href=\"https://stackoverflow.com/questions/43102787/what-is-the-release-flag-in-the-java-9-compiler\">What is the --release flag in the Java 9 compiler?</a>, I am wondering if there will be a conflict between the <code>release</code> flag and the others.</p>\n<ul>\n<li>I also intend to actually build and run in nightly CI runs on JDK 17, with only a JDK\n17 installed:</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profile&gt;\n  &lt;id&gt;test-nightly&lt;/id&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;  17  &lt;/source&gt;\n          &lt;target&gt;  17  &lt;/target&gt;\n          &lt;release&gt; 17  &lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n<p>Am I configuring the <code>maven-compiler-plugin</code> correctly ?</p>\n<p>Thanks in advance</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}