{
  "question": {
    "tags": [
      "java",
      "spring",
      "influxdb",
      "micrometer"
    ],
    "owner": {
      "account_id": 18652297,
      "reputation": 61,
      "user_id": 13595487,
      "user_type": "registered",
      "profile_image": "https://lh4.googleusercontent.com/-lTSMfttDthE/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucn8KTHxzFqvpaFqD0v3jvjTe2dSnA/s256-rj/photo.jpg",
      "display_name": "Михаил Воробьев",
      "link": "https://stackoverflow.com/users/13595487/%d0%9c%d0%b8%d1%85%d0%b0%d0%b8%d0%bb-%d0%92%d0%be%d1%80%d0%be%d0%b1%d1%8c%d0%b5%d0%b2"
    },
    "is_answered": true,
    "view_count": 334,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1764064724,
    "creation_date": 1736942854,
    "last_edit_date": 1737017368,
    "question_id": 79358157,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79358157/micrometer-cannot-send-metrics-of-spring-applications-to-influxdb",
    "title": "Micrometer cannot send metrics of spring applications to influxdb",
    "body": "<p>I'm triing to add monitoring to my Spring application. A added dependencies</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-registry-influx&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And edited the application.properties file:</p>\n<pre><code>spring.application.name=Mock\nserver.port=9090\n\n# SpringBoot Actuator Endpoints configuration\nmanagement.endpoints.web.exposure.include=health,info,metrics\n\nmanagement.metrics.export.influx.api-version=v1\nmanagement.metrics.export.influx.uri=https://monhost:8086\nmanagement.metrics.export.influx.user-name=name\nmanagement.metrics.export.influx.password=pass\nmanagement.metrics.export.influx.db=TSA_Mon_LT\n</code></pre>\n<p>But when the app tries to send metrics to influx, I get errors:</p>\n<pre><code>2025-01-15T13:17:11.042+03:00 ERROR 1448 --- [Mock] [trics-publisher] i.micrometer.influx.InfluxMeterRegistry : unable to create database 'mydb': {&quot;code&quot;:&quot;unauthorized&quot;,&quot;message&quot;:&quot;unauthorized access&quot;}\n2025-01-15T13:17:11.363+03:00 ERROR 1448 --- [Mock] [trics-publisher] i.micrometer.influx.InfluxMeterRegistry : failed to send metrics to influx: {&quot;code&quot;:&quot;unauthorized&quot;,&quot;message&quot;:&quot;unauthorized access&quot;}\n2025-01-15T13:17:27.151+03:00 ERROR 1448 --- [Mock] [ionShutdownHook] i.micrometer.influx.InfluxMeterRegistry : unable to create database 'mydb': {&quot;code&quot;:&quot;unauthorized&quot;,&quot;message&quot;:&quot;unauthorized access&quot;}\n2025-01-15T13:17:27.185+03:00 ERROR 1448 --- [Mock] [ionShutdownHook] i.micrometer.influx.InfluxMeterRegistry : failed to send metrics to influx: {&quot;code&quot;:&quot;unauthorized&quot;,&quot;message&quot;:&quot;unauthorized access&quot;}\n</code></pre>\n<p>The username and password are correct, so I have 2 problems:</p>\n<ol>\n<li>Why the app cannot get access to influxdb?</li>\n<li>Why the app tries to create DB &quot;mydb&quot; when it's &quot;TSA_Mon_LT&quot; in <code>application.properties</code></li>\n</ol>\n<p>Influxdb version is 1.8.9. I tried to add <code>management.metrics.export.influx.auto-create-db=false</code> but the app still tries to create DB &quot;mydb&quot;</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}