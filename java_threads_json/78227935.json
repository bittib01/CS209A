{
  "question": {
    "tags": [
      "java",
      "docker",
      "jenkins",
      "continuous-integration"
    ],
    "owner": {
      "account_id": 157768,
      "reputation": 5059,
      "user_id": 1306402,
      "user_type": "registered",
      "accept_rate": 57,
      "profile_image": "https://www.gravatar.com/avatar/f3a3f4c0ccea767808e02ea5d7fa8884?s=256&d=identicon&r=PG",
      "display_name": "Madu",
      "link": "https://stackoverflow.com/users/1306402/madu"
    },
    "is_answered": false,
    "view_count": 216,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1732121099,
    "creation_date": 1711484075,
    "question_id": 78227935,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78227935/incorrect-java-version-on-jenkins-agent",
    "title": "Incorrect java version on Jenkins agent",
    "body": "<p>I have setup a basic jenkins agent as docker container connected with jenkins controller. I want to setup Java a different java version (<code>jdk-21.0.2</code>) on agent when by default has <code>Temurin-17.0.8.1</code>.\nI setup a different java but when check Java with a simple job script like</p>\n<pre><code>pipeline {\n    agent { label 'docker-agent1' }\n    tools { \n        jdk 'jdk-21.0.2' \n    }\n    stages {\n        stage('Java test') {\n            steps {\n                sh '''\n                    env | grep -e PATH -e JAVA_HOME\n                    which java\n                    java -version\n                '''\n            }\n        }\n    }\n}\n</code></pre>\n<p>It gives me the following output. Notice the output of <code>java -version</code> command. It gives me java version which is by default setup on the agent.</p>\n<pre><code> Started by user admin\n[Pipeline] Start of Pipeline\n[Pipeline] node\nRunning on docker-agent1 in /home/jenkins/workspace/java-test-agent1\n[Pipeline] {\n[Pipeline] stage\n[Pipeline] { (Declarative: Tool Install)\n[Pipeline] tool\nUnpacking https://download.java.net/java/GA/jdk21.0.2/f2283984656d49d69e91c558476027ac/13/GPL/openjdk-21.0.2_linux-x64_bin.tar.gz to /home/jenkins/tools/hudson.model.JDK/jdk-21.0.2 on docker-agent1\n[Pipeline] envVarsForTool\n[Pipeline] }\n[Pipeline] // stage\n[Pipeline] withEnv\n[Pipeline] {\n[Pipeline] stage\n[Pipeline] { (Java test)\n[Pipeline] tool\n[Pipeline] envVarsForTool\n[Pipeline] withEnv\n[Pipeline] {\n[Pipeline] sh\n+ env\n+ grep -e PATH -e JAVA_HOME\nLD_LIBRARY_PATH=/opt/java/openjdk/lib/server:/opt/java/openjdk/lib:/opt/java/openjdk/../lib\nPATH=/home/jenkins/tools/hudson.model.JDK/jdk-21.0.2/jdk-21.0.2/bin:/home/jenkins/tools/hudson.model.JDK/jdk-21.0.2/jdk-21.0.2/bin:/opt/java/openjdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nJAVA_HOME=/home/jenkins/tools/hudson.model.JDK/jdk-21.0.2/jdk-21.0.2\n+ which java\n/home/jenkins/tools/hudson.model.JDK/jdk-21.0.2/jdk-21.0.2/bin/java\n+ java -version\nopenjdk version &quot;17.0.8.1&quot; 2023-08-24\nOpenJDK Runtime Environment Temurin-17.0.8.1+1 (build 17.0.8.1+1)\nOpenJDK 64-Bit Server VM Temurin-17.0.8.1+1 (build 17.0.8.1+1, mixed mode)\n[Pipeline] }\n[Pipeline] // withEnv\n[Pipeline] }\n[Pipeline] // stage\n[Pipeline] }\n[Pipeline] // withEnv\n[Pipeline] }\n[Pipeline] // node\n[Pipeline] End of Pipeline\nFinished: SUCCESS\n</code></pre>\n<p>Any idea why Java -version is not findding <code>jdk-21.0.2</code></p>\n<p>Additional information:\nHere is how i have setup <code>jdk-21.0.2</code> in <code>Manage Jenkins -&gt; Tools</code></p>\n<p><a href=\"https://i.sstatic.net/8fWPo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/8fWPo.png\" alt=\"enter image description here\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}