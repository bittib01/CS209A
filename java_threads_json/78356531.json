{
  "question": {
    "tags": [
      "java",
      "jpa",
      "jakarta-ee",
      "ejb",
      "jta"
    ],
    "owner": {
      "account_id": 1375839,
      "reputation": 57,
      "user_id": 1309858,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b145a8c39c3310dbb0c2510f5b659d2d?s=256&d=identicon&r=PG",
      "display_name": "Chatis",
      "link": "https://stackoverflow.com/users/1309858/chatis"
    },
    "is_answered": false,
    "view_count": 92,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1716833521,
    "creation_date": 1713568517,
    "last_edit_date": 1713781305,
    "question_id": 78356531,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78356531/jakarta-ee-8-jta-transaction-aborded-after-2-minutes",
    "title": "Jakarta EE 8 JTA transaction aborded after 2 minutes",
    "body": "<p>I'm developping with Apach Netbeans 16 and Glassfish 6.2.5 and everytime when I have a transaction that take more thant 2 minutes, the transaction is aborded  with this error :</p>\n<pre><code>A system exception occurred during an invocation on EJB PaiementreservationFacade, method: public java.util.List dao.PaiementreservationFacade.getPaiementreservationPortemonnaieByPersonne(java.lang.Integer,int)|#]\n  jakarta.ejb.TransactionRolledbackLocalException: Client's transaction aborted\n    at com.sun.ejb.containers.EJBContainerTransactionManager.useClientTx(EJBContainerTransactionManager.java:334)\n    at com.sun.ejb.containers.EJBContainerTransactionManager.preInvokeTx(EJBContainerTransactionManager.java:228)\n    at com.sun.ejb.containers.BaseContainer.preInvokeTx(BaseContainer.java:4001)\n    at com.sun.ejb.containers.BaseContainer.preInvoke(BaseContainer.java:1767)\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:186)\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:64)\n    at jdk.proxy60/jdk.proxy60.$Proxy1268.getPaiementreservationPortemonnaieByPersonne(Unknown Source)\n    at BusinessService.FactureManager.create(FactureManager.java:931)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.glassfish.exousia.AuthorizationService.lambda$invokeBeanMethod$6(AuthorizationService.java:501)\n    at org.glassfish.exousia.AuthorizationService.runInScope(AuthorizationService.java:577)\n    at org.glassfish.exousia.AuthorizationService.invokeBeanMethod(AuthorizationService.java:501)\n    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:295)\n    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:4241)\n    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:603)\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:805)\n    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:552)\n    at org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:72)\n    at org.jboss.weld.module.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:52)\n    at jdk.internal.reflect.GeneratedMethodAccessor199.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:867)\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:804)\n    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:552)\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCall(SystemInterceptorProxy.java:136)\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:113)\n    at jdk.internal.reflect.GeneratedMethodAccessor200.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:867)\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:804)\n    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:348)\n    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:4216)\n    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:4206)\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:188)\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:64)\n    at jdk.proxy60/jdk.proxy60.$Proxy1444.create(Unknown Source)\n</code></pre>\n<p>I search everywhere how to increase this time, but impossible.</p>\n<p>I know that the exception is send by <code>jakarta.ejb.EJBTransactionRolledbackException</code></p>\n<p>I also have this persistence.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\n             version=&quot;3.0&quot;&gt;\n    &lt;persistence-unit name=&quot;myApp&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;jta-data-source&gt;jdbc/MyApp&lt;/jta-data-source&gt;\n\n    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n   &lt;properties&gt;\n       &lt;property name=&quot;hibernate.transaction.jta.platform&quot; value=&quot;org.hibernate.service.jta.platform.internal.SunOneJtaPlatform&quot;/&gt;\n       &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5InnoDBDialect&quot;/&gt;\n       &lt;property name=&quot;hibernate.dialect.storage_engine&quot; value=&quot;innodb&quot;/&gt;\n       &lt;!--&lt;property name = &quot;hibernate.show_sql&quot; value = &quot;true&quot; /&gt;--&gt;\n       &lt;!--&lt;property name=&quot;hibernate.jdbc.time_zone&quot; value=&quot;CET&quot;/&gt;--&gt;\n   &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>I have try to add this properties in my persistence.xml :</p>\n<pre><code>&lt;property name=&quot;jakarta.persistence.lock.timeout&quot; value=&quot;1&quot;/&gt;\n&lt;property name=&quot;jakarta.persistence.query.timeout&quot; value=&quot;1&quot;/&gt;\n</code></pre>\n<p>but no change... Also tried with javax and still nothing...</p>\n<p>What can I do ? anyone has an idea ?</p>\n<p>Thank you for your help</p>\n<p><em><strong>EDIT</strong></em></p>\n<p>I also try to make a pause at the begining of my RESTFull request :</p>\n<pre><code>try {\n       System.out.println(&quot;Sleep starts&quot;);\n       Thread.sleep(125000);\n       System.out.println(&quot;Sleep ends&quot;);\n   } catch (InterruptedException e) {\n       e.printStackTrace();\n   }\n</code></pre>\n<p>And it's stopping during 125 second and at the first time my code try to do something with the database. I receive the same error... I really don't know what I need to change to continus my program.. Any one has an idea ?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}