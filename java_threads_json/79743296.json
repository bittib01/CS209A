{
  "question": {
    "tags": [
      "java",
      "swing"
    ],
    "owner": {
      "account_id": 10187542,
      "reputation": 2735,
      "user_id": 20692967,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name": "Sergey Zolotarev",
      "link": "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered": false,
    "view_count": 104,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1755868220,
    "creation_date": 1755859138,
    "last_edit_date": 1755868220,
    "question_id": 79743296,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79743296/dynamically-determining-foreground-based-on-its-actual-background",
    "title": "Dynamically determining foreground based on its actual background",
    "body": "<p>Here's a problem.</p>\n<p>With Windows L&amp;F, whose default selection background is white, selected text snippets that are highlighted with yellow are going to be hard to read (see the second screenshot).</p>\n<p>We have logic for dynamically determining the best foreground color based on the background's luminosity. I can pass any color to that utility method, not necessarily something stored in a <code>background</code> property.</p>\n<p>The important consideration is the highlight color is <strong>not</strong> the same as the background (which stays the same â€” blue in my case).</p>\n<p>Basically, it seems I need to dynamically determine the foreground color based on its <em>actual</em> background (and <em>not</em> the <code>background</code> property). Even if I override <code>getForeground()</code>, I still need to somehow access that information. Which is tricky since I don't know which exact portion of the text Swing is about to paint (whether it's highlighted or not).</p>\n<p>How do I solve this problem?</p>\n<p>Java 8.</p>\n<p><a href=\"https://i.sstatic.net/19wGyMg3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/19wGyMg3.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.sstatic.net/26ca2OhM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/26ca2OhM.png\" alt=\"enter image description here\" /></a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package demos.text;\n\nimport com.sun.java.swing.plaf.windows.WindowsLookAndFeel;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JTextArea;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\nimport javax.swing.WindowConstants;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.DefaultHighlighter;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Container;\nimport java.awt.Font;\n\npublic class HighlighterDemo {\n\n    private static final DefaultHighlighter.DefaultHighlightPainter painter = new DefaultHighlighter.DefaultHighlightPainter(Color.YELLOW);\n\n    public static void main(String[] args) throws BadLocationException, UnsupportedLookAndFeelException, ClassNotFoundException, InstantiationException, IllegalAccessException {\n        UIManager.setLookAndFeel(WindowsLookAndFeel.class.getName());\n        Container mainPanel = createMainPanel();\n        JFrame frame = new JFrame(&quot;Highlighter Demo&quot;);\n        frame.setContentPane(mainPanel);\n        frame.setLocationRelativeTo(null);\n        frame.pack();\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n\n    private static JPanel createMainPanel() throws BadLocationException {\n        JPanel panel = new JPanel(new BorderLayout());\n        panel.add(createTextArea());\n        return panel;\n    }\n\n    private static JTextArea createTextArea() throws BadLocationException {\n        JTextArea textArea = new JTextArea();\n        textArea.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 20)); // the default font in nonsensically small\n        String text = &quot;Some sample text&quot;;\n        textArea.setText(text);\n        textArea.getHighlighter().addHighlight(text.indexOf(&quot;sample&quot;), text.indexOf(&quot;text&quot;), painter);\n        return textArea;\n    }\n}\n</code></pre>\n<p><strong>P.S.:</strong> In case you're interested, <a href=\"https://codereview.stackexchange.com/questions/297520/textsearchfield-search-field-for-jtextarea\">here's</a> what I use highlights for.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}