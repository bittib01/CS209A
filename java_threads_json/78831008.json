{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "datasource"
    ],
    "owner": {
      "account_id": 6488524,
      "reputation": 1127,
      "user_id": 5023303,
      "user_type": "registered",
      "accept_rate": 40,
      "profile_image": "https://www.gravatar.com/avatar/e1c27c8cbdcb6e4d62e7beca6c8f6fbc?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "ivoronline",
      "link": "https://stackoverflow.com/users/5023303/ivoronline"
    },
    "is_answered": false,
    "view_count": 51,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1729766396,
    "creation_date": 1722772443,
    "last_edit_date": 1729766396,
    "question_id": 78831008,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78831008/spring-boot-multiple-datasources-is-there-a-simpler-way",
    "title": "Spring Boot multiple datasources - Is there a simpler way?",
    "body": "<p>I am trying to learn how to use multiple Datasources in Spring Boot and the examples I am seeing are so complex. From &quot;Spring Boot&quot; autoconfiguration you now suddenly have to manually configure everything: you have to define packages with Entities and Packages with Repositories and you have to manually create TransactionManager &amp; EntityManagerFactoryBuilder.</p>\n<p>So now I have to constantly update Package Paths for</p>\n<ul>\n<li>basePackages in @EnableJpaRepositories</li>\n<li>packages() in return\nentityManagerFactoryBuilder</li>\n</ul>\n<p>and these can't be refactored automatically if I decide to rearange Classes.</p>\n<p>Is there a simpler way? Like defining different Datasources and then using Annotations on Entities to specify where they should be saved.</p>\n<p>Or maybe even manually configuring EntityManager for every Datasource but then using Annotations on Entities to specify which EntityManager should be used.</p>\n<p>And can I avoid separately specifying Packages for Entities &amp; repositories? Suddenly there is so much overhead configuration.</p>\n<p>Here is the example Application I am currently using\n<a href=\"https://github.com/ivoronline/springboot_db_datasource_SaveDifferentEntitiesInDifferentSchemas\" rel=\"nofollow noreferrer\">https://github.com/ivoronline/springboot_db_datasource_SaveDifferentEntitiesInDifferentSchemas</a></p>\n<p>Schema1Config.java</p>\n<pre><code>@Configuration\n@EnableJpaRepositories(\n  basePackages      = &quot;com.ivoronline.springboot_db_datasource_diffentitiesdiffschemas.schema1.repository&quot;,\n  entityManagerFactoryRef = &quot;schema1EntityManagerFactoryBean&quot;,\n  transactionManagerRef   = &quot;schema1TransactionManager&quot;\n)\npublic class Schema1Config {\n\n  //=========================================================================================================\n  // DATA SOURCE PROPERTIES\n  //=========================================================================================================\n  @Bean\n  @ConfigurationProperties(&quot;schema1.spring.datasource&quot;)\n  public DataSourceProperties schema1DataSourceProperties() {\n    return new DataSourceProperties();\n  }\n  \n  //=========================================================================================================\n  // DATA SOURCE\n  //=========================================================================================================\n  @Bean\n  @Primary\n  public DataSource schema1DataSource() {\n    return schema1DataSourceProperties().initializeDataSourceBuilder().build();\n  }\n  \n  //=========================================================================================================\n  // ENTITY MANAGER FACTORY BEAN\n  //=========================================================================================================\n  @Bean\n  LocalContainerEntityManagerFactoryBean schema1EntityManagerFactoryBean (\n    EntityManagerFactoryBuilder entityManagerFactoryBuilder,\n    DataSource                  dataSource\n  ) {\n    return entityManagerFactoryBuilder\n          .dataSource(dataSource)\n          .packages(&quot;com.ivoronline.springboot_db_datasource_diffentitiesdiffschemas.schema1.entity&quot;)\n          .build();\n  }\n\n  //=========================================================================================================\n  // SCHEMA 1 TRANSACTION MANAGER\n  //=========================================================================================================\n  @Bean\n  PlatformTransactionManager schema1TransactionManager(@Qualifier(&quot;schema1EntityManagerFactoryBean&quot;) LocalContainerEntityManagerFactoryBean emfb) {\n    return new JpaTransactionManager(emfb.getObject());\n  }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}