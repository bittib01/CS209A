{
  "question": {
    "tags": [
      "java",
      "docker",
      "selenium-webdriver",
      "selenium-chromedriver"
    ],
    "owner": {
      "account_id": 1171454,
      "reputation": 456,
      "user_id": 1148552,
      "user_type": "registered",
      "accept_rate": 67,
      "profile_image": "https://i.sstatic.net/yQ58B.jpg?s=256",
      "display_name": "Gehan",
      "link": "https://stackoverflow.com/users/1148552/gehan"
    },
    "is_answered": true,
    "view_count": 750,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1719337556,
    "creation_date": 1706088549,
    "question_id": 77871824,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77871824/having-an-issue-running-the-selenium-application-inside-the-docker",
    "title": "Having an issue running the Selenium application inside the docker",
    "body": "<p>To run the Java Selenium application on a separate server I am attempting to build a Dockerfile install Chrome and use a headless way to run a browser. (This application provides a desired output when executed locally.) But when attempting to run the docker I receive this error.</p>\n<p>Am I missing something in the docker build or the Java-based configurations provided.? How should chrome driver-related configurations be added?</p>\n<p><strong>Update:</strong> There also seems to be another way to run Chrome using selenium/standalone-chrome. Is it possible to integrate Chrome/selenium with another docker using this method? which is the preferred option of these two methods?</p>\n<pre><code>OS - Ubuntu 22.04 LTS\nDocker version - Docker version 24.0.2, build cb74dfc\nJava version - java version &quot;17.0.4&quot; 2022-07-19 LTS\nSelenium version - 4.11.0\nChrome version - Google Chrome 120.0.6099.199\n</code></pre>\n<blockquote>\n<p>FAILED CONFIGURATION: u/BeforeClass openBrowser</p>\n<p>org.openqa.selenium.remote.NoSuchDriverException: Unable to obtain:\nCapabilities {browserName: chrome, goog:chromeOptions: {args:\n[--remote-allow-origins=*, --headless], extensions: [], prefs:\n{download.default_directory: report/}}}, error Command failed with\ncode: 65, executed:\n[/tmp/selenium-manager246697546082813077936780283589629/selenium-manager,\n--browser, chrome, --output, json] request or response body error: operation timed out Build info: version: '4.11.0', revision:\n'040bc5406b' System info: os.name: 'Linux', os.arch: 'amd64',\nos.version: '5.4.0-150-generic', java.version: '17.0.6' Driver info:\ndriver.version: ChromeDriver</p>\n<p>at\norg.openqa.selenium.remote.service.DriverFinder.getPath(DriverFinder.java:25)\nat\norg.openqa.selenium.remote.service.DriverFinder.getPath(DriverFinder.java:13)\nat\norg.openqa.selenium.chrome.ChromeDriver.generateExecutor(ChromeDriver.java:99)\nat\norg.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:88)\nat\norg.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:83)\nat\norg.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:72)\nat Infra.BasePage.openBrowser(BasePage.java:108)</p>\n<p>Caused by: org.openqa.selenium.WebDriverException: Command failed with\ncode: 65, executed:\n[/tmp/selenium-manager246697546082813077936780283589629/selenium-manager,\n--browser, chrome, --output, json] request or response body error: operation timed out Build info: version: '4.11.0', revision:\n'040bc5406b' System info: os.name: 'Linux', os.arch: 'amd64',\nos.version: '5.4.0-150-generic', java.version: '17.0.6' Driver info:\ndriver.version: ChromeDriver at\norg.openqa.selenium.manager.SeleniumManager.runCommand(SeleniumManager.java:151)\nat\norg.openqa.selenium.manager.SeleniumManager.getDriverPath(SeleniumManager.java:273)\nat\norg.openqa.selenium.remote.service.DriverFinder.getPath(DriverFinder.java:22)</p>\n</blockquote>\n<p><strong>This is the docker file used</strong></p>\n<pre><code> FROM maven:3.9.6-eclipse-temurin-17-alpine AS builder\n    \n    WORKDIR /app\n    RUN chmod -R 777 /app\n    \n    RUN apt update -y &amp; apt install -y wget unzip\n    ARG DEBIAN_FRONTEND=noninteractive\n    RUN apt-get install -y tzdata\n    \n    RUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -\n    RUN sh -c 'echo &quot;deb http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;&gt; /etc/apt/sources.list.d/google-chrome.list'\n    RUN apt-get update\n    RUN apt-get install -y google-chrome-stable\n    \n    RUN apt-get install -yqq unzip\n    RUN wget -O /tmp/chromedriver.zip http://chromedriver.storage.googleapis.com/`curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE`/chromedriver_linux64.zip\n    RUN unzip /tmp/chromedriver.zip chromedriver -d /usr/local/bin/\n    \n    COPY . .\n    \n    RUN mvn package -DskipTests\n    \n    FROM eclipse-temurin:17.0.6_10-jdk@sha256:13817c2faa739c0351f97efabed0582a26e9e6745a6fb9c47d17f4365e56327d\n    \n    WORKDIR /app\n    \n    COPY report-automation.jar /app/report-automation.jar\n    COPY src/main/resources/META-INF/MANIFEST.MF /app/META-INF/MANIFEST.MF\n    COPY src /app/src\n    COPY src/main/resources/META-INF/MANIFEST.MF /app/META-INF/MANIFEST.MF\n    COPY src/main/resources/config.properties /app/config.properties\n    COPY pom.xml /app/pom.xml\n    COPY testng.xml /app/testng.xml\n    COPY application.properties /app/application.properties\n    COPY Configuration.xlsm /app/Configuration.xlsm\n    COPY apache-maven-3.9.6/ /app/apache-maven-3.9.6/\n    COPY Downloads /app/Downloads\n    COPY Logs /app/Logs\n    COPY report /app/report\n    COPY Reports /app/Reports\n    \n    EXPOSE 8080\n    \n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;report-automation.jar&quot;]\n</code></pre>\n<p><strong>Code level configurations as below</strong></p>\n<pre><code>@Listeners(ExtentReportListener.class)\npublic class BasePage {\n    protected WebDriver driver;\n    private final Properties config = new Properties();\n    public static Logger logger = LogManager.getLogger(BasePage.class);\n\n    public ChromeOptions getOptions() {\n        ChromeOptions options = new ChromeOptions();\n        Map&lt;String, String&gt; prefs = new HashMap&lt;&gt;();\n        prefs.put(&quot;download.default_directory&quot;, config.getProperty(&quot;absoluteDownloadLocation&quot;));\n        options.setExperimentalOption(&quot;prefs&quot;, prefs);\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n        options.addArguments(&quot;--headless&quot;);\n\n        return options;\n    }\n\n    @BeforeClass\n    public void openBrowser() throws InterruptedException {\n        Thread.sleep(2000);\n        driver = new ChromeDriver(getOptions());\n        driver.manage().window().maximize();\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n    }\n\n    @BeforeTest\n    public void ClearFolders() throws IOException {\n        File dictionary = new File(config.getProperty(&quot;absoluteDownloadLocation&quot;));\n        FileUtils.cleanDirectory(dictionary);\n    }\n\n    @AfterClass\n    public void closeBrowser() throws InterruptedException {\n        Thread.sleep(2000);\n        driver.quit();\n        createBackUpFile();\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}