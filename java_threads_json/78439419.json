{
  "question": {
    "tags": [
      "java",
      "android-studio",
      "youtube-dl",
      "yt-dlp"
    ],
    "owner": {
      "account_id": 31660965,
      "reputation": 11,
      "user_id": 24479322,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/269be623698ead6366686aa28994d43a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Amaan Sajina",
      "link": "https://stackoverflow.com/users/24479322/amaan-sajina"
    },
    "is_answered": true,
    "view_count": 1406,
    "accepted_answer_id": 78645267,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1718850596,
    "creation_date": 1715035520,
    "question_id": 78439419,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78439419/yt-dlp-and-youtube-dl-command-in-android-studiojava-code",
    "title": "yt-dlp and youtube-dl command in Android Studio(Java code)",
    "body": "<p>I am trying to use yt-dlp command in my java code to extract audio from youtube videos. Basically, I am trying to develop one audio playing application(for better understanding on working with API) where I am using Youtube API. I search any music in my app and it will show youtube video in listview. At this time, audio should extracted from youtube vidoes as I am passing my command in updateListView method. It should return URL(storing in model) which will be used in other class files to play mp3 files.\nI am trying this thing for more than 1 week now. I tried several ways to do this thing but everytime I got only one same error which image I attached.</p>\n<pre><code> private String getAudioUrl(String videoId)\n    {\n        File cacheDir = getCacheDir();\n        File audioDir = new File(cacheDir, &quot;audio&quot;);\n        if (!audioDir.exists())\n        {\n            audioDir.mkdirs(); // Create the directory if it doesn't exist\n        }\n        try {\n            ProcessBuilder processBuilder = new ProcessBuilder(\n                    &quot;~/.yt-dlp&quot;,\n                    &quot;-x&quot;,\n                    &quot;--audio-format&quot;, &quot;mp3&quot;,\n                    &quot;-P&quot;, audioDir.getAbsolutePath() + &quot;/%(title)s.%(ext)s&quot;,\n                    &quot;https://www.youtube.com/watch?v=&quot; + videoId\n            );\n            Process process = processBuilder.start();\n            BufferedReader read = new BufferedReader(new InputStreamReader(process.getInputStream()));\n            String audioUrl = read.readLine();\n            read.close();\n            Toast.makeText(MainActivity.this, &quot;Playing!!!&quot;, Toast.LENGTH_SHORT).show();\n            return audioUrl;\n        } catch (IOException e)\n        {\n            e.printStackTrace();\n            Toast.makeText(MainActivity.this, &quot;Sorry, Error in playing audio!!!&quot;, Toast.LENGTH_SHORT).show();\n        }\n        return null;\n    }\n</code></pre>\n<p>I am trying to call this method in below mentioned method.</p>\n<pre><code> private void updateSearchResultsList(List&lt;SearchResult&gt; results)\n    {\n        searchResults.clear();\n        for (SearchResult result : results)\n        {\n            String videoTitle = result.getSnippet().getTitle();\n            String videoImageUrl = result.getSnippet().getThumbnails().getDefault().getUrl();\n            selectedVideoId = result.getId().getVideoId();\n\n            //for testing\n            // Log.d(&quot;Video ID&quot;, &quot;Video ID: &quot; + videoId);\n\n            String audioUrl = getAudioUrl(selectedVideoId);\n            YoutubeModel youtubeModel = new YoutubeModel(videoTitle, videoImageUrl, audioUrl);\n            searchResults.add(youtubeModel);\n        }\n        adapter.notifyDataSetChanged();\n    }//end of method\n</code></pre>\n<p>Error :</p>\n<pre><code>java.io.IOException: Cannot run program &quot;~/.yt-dlp&quot;: error=2, No such file or directory\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at java.lang.ProcessBuilder.start(ProcessBuilder.java:1050)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at com.example.audio_player.Activity.MainActivity.getAudioUrl(MainActivity.java:196)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at com.example.audio_player.Activity.MainActivity.updateSearchResultsList(MainActivity.java:170)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at com.example.audio_player.Activity.MainActivity.access$400(MainActivity.java:31)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at com.example.audio_player.Activity.MainActivity$YouTubeSearchTask.onPostExecute(MainActivity.java:146)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at com.example.audio_player.Activity.MainActivity$YouTubeSearchTask.onPostExecute(MainActivity.java:121)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at android.os.AsyncTask.finish(AsyncTask.java:771)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at android.os.AsyncTask.-$$Nest$mfinish(Unknown Source:0)\n2024-05-06 18:19:45.118 24092-24092 System.err              com.example.audio_player             W      at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:788)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at android.os.Handler.dispatchMessage(Handler.java:106)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at android.os.Looper.loopOnce(Looper.java:230)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at android.os.Looper.loop(Looper.java:319)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at android.app.ActivityThread.main(ActivityThread.java:8919)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at java.lang.reflect.Method.invoke(Native Method)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:578)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1103)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W  Caused by: java.io.IOException: error=2, No such file or directory\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at java.lang.UNIXProcess.forkAndExec(Native Method)\n2024-05-06 18:19:45.119 24092-24092 System.err              com.example.audio_player             W      at java.lang.UNIXProcess.&lt;init&gt;(UNIXProcess.java:133)\n2024-05-06 18:19:45.120 24092-24092 System.err              com.example.audio_player             W      at java.lang.ProcessImpl.start(ProcessImpl.java:141)\n2024-05-06 18:19:45.120 24092-24092 System.err              com.example.audio_player             W      at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)\n</code></pre>\n<p>So far I tried so many methods those I mentioned below:</p>\n<ol>\n<li>Installed yt-dlp with pip and wihtout pip.(same for youtube-dl)</li>\n<li>Set path of yt-dlp in environment variables. I tried both path, default python path and by making new folder, put file(yt-dlp.exe) in that folder and then set the path.</li>\n<li>I tried to find which path my code navigating and somehow got the path which is &quot;data/user/0/com.example.audio_player/files&quot; . I copied my yt-dlp.exe file here as well but still same error.</li>\n<li>Manually set the file in assests folder in android studio and used that path but still no output.</li>\n<li>I used both ways to call command -&gt; &quot;~/.yt-dlp&quot; and &quot;yt-dlp&quot;.</li>\n<li>Somehow I got new error when I used copying file from assets folder to internal directory(which is data/user/0/com.example.audio_player/files) logic, that time I got new error and that says &quot;Permission Denied&quot;. I tried to give permission by coding and from manifest as well but still permission denied error I got. I put INTERNET, READ_EXTERNAL_STORAGE, WRITE_EXTERNAL_STORAGE permissions as well as some new permissions such READ_MEDIA_IMAGES, etc... still no response.</li>\n<li>After searhing on we, I found two repo of yt-dlp java and yt-dlp android. I used both repo but it still now working.  Here are those repositories: <a href=\"https://github.com/sapher/youtubedl-java\" rel=\"nofollow noreferrer\">https://github.com/sapher/youtubedl-java</a> and<br />\n<a href=\"https://github.com/yausername/youtubedl-android\" rel=\"nofollow noreferrer\">https://github.com/yausername/youtubedl-android</a>.</li>\n</ol>\n<p>What more I can try to extract audio from youtube video using yt-dlp command or Is there any other way to do this???</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}