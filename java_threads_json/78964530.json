{
  "question": {
    "tags": [
      "java",
      "azure-application-insights",
      "open-telemetry",
      "open-telemetry-java"
    ],
    "owner": {
      "account_id": 5390170,
      "reputation": 21,
      "user_id": 4292950,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/SkEhN.png?s=256",
      "display_name": "lhn_dk",
      "link": "https://stackoverflow.com/users/4292950/lhn-dk"
    },
    "is_answered": false,
    "view_count": 403,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1728295377,
    "creation_date": 1725870081,
    "last_edit_date": 1725885145,
    "question_id": 78964530,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78964530/filter-out-dependency-telemetry-with-applicationinsights-javaagent-3-5-4",
    "title": "Filter out dependency telemetry with applicationinsights javaagent 3.5.4",
    "body": "<p>I have an EAP7 application running in OpenShift with a javaagent attached with application insights (Azure). I have followed the guide for filtering telemetry and configuring the agent with the guide: <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-standalone-config\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-standalone-config</a> and <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-standalone-sampling-overrides\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-standalone-sampling-overrides</a></p>\n<p>My applicationinsights.json file looks like this:</p>\n<pre><code>    {\n        &quot;sampling&quot;: {\n           &quot;percentage&quot;: 100,\n            &quot;overrides&quot;: [\n                {\n                    &quot;telemetryType&quot;: &quot;request&quot;,\n                    &quot;attributes&quot;: [\n                        {\n                            &quot;key&quot;: &quot;http.url&quot;,\n                            &quot;value&quot;: &quot;https?://[^/]+/health.*&quot;,\n                            &quot;matchType&quot;: &quot;regexp&quot;\n                        }\n                    ],\n                    &quot;percentage&quot;: 0\n                },\n                {\n                    &quot;telemetryType&quot;: &quot;request&quot;,\n                    &quot;attributes&quot;: [\n                        {\n                            &quot;key&quot;: &quot;http.url&quot;,\n                            &quot;value&quot;: &quot;https?://[^/]+/metrics.*&quot;,\n                            &quot;matchType&quot;: &quot;regexp&quot;\n                        }\n                    ],\n                    &quot;percentage&quot;: 0\n                },\n                {\n                    &quot;telemetryType&quot;: &quot;request&quot;,\n                    &quot;attributes&quot;: [\n                        {\n                            &quot;key&quot;: &quot;http.request.method&quot;,\n                            &quot;value&quot;: &quot;HEAD&quot;,\n                            &quot;matchType&quot;: &quot;strict&quot;\n                        }\n                    ],\n                    &quot;percentage&quot;: 0\n                },\n                {\n                    &quot;telemetryType&quot;: &quot;trace&quot;,\n                    &quot;percentage&quot;: 0\n                },\n                \n            ]\n        },\n        &quot;instrumentation&quot;: {\n            &quot;jdbc&quot;: {\n                &quot;masking&quot;: {\n                    &quot;enabled&quot;: false\n                }\n            }\n        }\n    }\n</code></pre>\n<p>Which works for the metrics and health endpoints.\nHowever i am facing an issue with a certain dependency:</p>\n<p><a href=\"https://i.sstatic.net/8fsscRTK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/8fsscRTK.png\" alt=\"Dependency in application insights\" /></a></p>\n<p>I have tried with numerous of filters like:</p>\n<pre><code>{\n    &quot;notWorkingFilters&quot;: [\n        {\n            &quot;telemetryType&quot;: &quot;dependency&quot;,\n            &quot;attributes&quot;: [\n                {\n                    &quot;key&quot;: &quot;message&quot;,\n                    &quot;value&quot;: &quot;GET \\/&quot;,\n                    &quot;matchType&quot;: &quot;strict&quot;\n                }\n            ],\n            &quot;percentage&quot;: 0\n        },\n        {\n            &quot;telemetryType&quot;: &quot;dependency&quot;,\n            &quot;attributes&quot;: [\n                {\n                    &quot;key&quot;: &quot;message&quot;,\n                    &quot;value&quot;: &quot;.*localhost:5778.*&quot;,\n                    &quot;matchType&quot;: &quot;regexp&quot;\n                }\n            ],\n            &quot;percentage&quot;: 0\n        },\n        {\n            &quot;telemetryType&quot;: &quot;dependency&quot;,\n            &quot;attributes&quot;: [\n                {\n                    &quot;key&quot;: &quot;name&quot;,\n                    &quot;value&quot;: &quot;GET \\/&quot;,\n                    &quot;matchType&quot;: &quot;strict&quot;\n                }\n            ],\n            &quot;percentage&quot;: 0\n        },\n        {\n            &quot;telemetryType&quot;: &quot;dependency&quot;,\n            &quot;attributes&quot;: [\n                {\n                    &quot;key&quot;: &quot;name&quot;,\n                    &quot;value&quot;: &quot;.*localhost:5778.*&quot;,\n                    &quot;matchType&quot;: &quot;regexp&quot;\n                }\n            ],\n            &quot;percentage&quot;: 0\n        },\n        {\n            &quot;telemetryType&quot;: &quot;dependency&quot;,\n            &quot;attributes&quot;: [\n                {\n                    &quot;key&quot;: &quot;http.url&quot;,\n                    &quot;value&quot;: &quot;http://localhost:5778.*&quot;,\n                    &quot;matchType&quot;: &quot;regexp&quot;\n                }\n            ],\n            &quot;percentage&quot;: 0\n        },\n        {\n            &quot;telemetryType&quot;: &quot;dependency&quot;,\n            &quot;attributes&quot;: [\n                {\n                    &quot;key&quot;: &quot;http.url&quot;,\n                    &quot;value&quot;: &quot;.*5778.*&quot;,\n                    &quot;matchType&quot;: &quot;regexp&quot;\n                }\n            ],\n            &quot;percentage&quot;: 0\n        }\n    ]\n}\n</code></pre>\n<p>IT is just for formatting reasons i have added the &quot;notWorkingFilters&quot; :-)</p>\n<p>None of them filters out this dependency. Any idea what i am missing and what i can do in order to remove this?</p>\n<p>I have also tried with adding them as telemetryType &quot;request&quot; and specified it on HTTP level, without luck.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}