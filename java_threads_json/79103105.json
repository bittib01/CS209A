{
  "question": {
    "tags": [
      "java",
      "jakarta-mail",
      "jakarta-migration"
    ],
    "owner": {
      "account_id": 2544458,
      "reputation": 446,
      "user_id": 2209562,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/9d7f69285cf71e57bfa44cc1dbe8f28c?s=256&d=identicon&r=PG",
      "display_name": "skin27",
      "link": "https://stackoverflow.com/users/2209562/skin27"
    },
    "is_answered": true,
    "view_count": 2938,
    "accepted_answer_id": 79125216,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1729850992,
    "creation_date": 1729272489,
    "question_id": 79103105,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79103105/after-migration-to-jakarta-java-lang-noclassdeffounderror-javax-activation-dat",
    "title": "After migration to Jakarta: java.lang.NoClassDefFoundError: javax/activation/DataContentHandler",
    "body": "<p>I have a module that used <code>javax.mail</code> and <code>javax.activation</code>. Now I moved to Jakarta. I updated the dependencies and all the imports.</p>\n<p>When I run it locally it runs fine, but when running it in Docker container I have the following error:</p>\n<pre><code>java.lang.NoClassDefFoundError: javax/activation/DataContentHandler\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1027)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1027)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\n    at jakarta.activation.MailcapCommandMap.getDataContentHandler(MailcapCommandMap.java:594)\n    at jakarta.activation.MailcapCommandMap.createDataContentHandler(MailcapCommandMap.java:572)\n    at jakarta.activation.CommandMap.createDataContentHandler(CommandMap.java:205)\n    at jakarta.activation.DataHandler.getDataContentHandler(DataHandler.java:587)\n    at jakarta.activation.DataHandler.getContent(DataHandler.java:514)\n    at jakarta.mail.internet.MimeMessage.getContent(MimeMessage.java:1504)\n    at org.assimbly.mail.component.mail.MailBinding.extractBodyFromMail(MailBinding.java:302)\n    at org.assimbly.mail.component.mail.MailMessage.createBody(MailMessage.java:93)\n    at org.apache.camel.support.MessageSupport.getBody(MessageSupport.java:68)\n    at org.assimbly.mail.component.mail.MailConsumer.createExchange(MailConsumer.java:406)\n    at org.assimbly.mail.component.mail.MailConsumer.retrieveMessages(MailConsumer.java:328)\n    at org.assimbly.mail.component.mail.MailConsumer.poll(MailConsumer.java:164)\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:205)\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:119)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: java.lang.ClassNotFoundException: javax.activation.DataContentHandler\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\n    ... 38 common frames omitted\n</code></pre>\n<p>In the error there is a reference to Jakarta classes that are called, but at the end it refers to javax.activation not found. I checked the dependency tree, and there are no references outside of Jakarta. I also try to force to use Jakarta in Gradle, but with the same result.</p>\n<p>How can I find out what causing it to still call javax?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}