{
  "question": {
    "tags": [
      "java",
      "azure-functions"
    ],
    "owner": {
      "account_id": 3915897,
      "reputation": 167,
      "user_id": 3239722,
      "user_type": "registered",
      "accept_rate": 100,
      "profile_image": "https://www.gravatar.com/avatar/35bbb5e67e6f7f962c566df0a8e7e023?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "kanchan",
      "link": "https://stackoverflow.com/users/3239722/kanchan"
    },
    "is_answered": true,
    "view_count": 293,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1713799757,
    "creation_date": 1708698414,
    "question_id": 78048064,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78048064/azure-function-to-raiseevent-is-throwing-exception-java",
    "title": "Azure Function to raiseEvent is throwing Exception (Java)",
    "body": "<p>I am trying to use raiseEvent feature in azure function, but I am getting an Exception in log. Here is the code snippet below , the ctx.instanceId is TaskOrchestrationContext.instanceId . The raiseEvent is called from with an Orchestrator function</p>\n<p>Can anyone point me what I am doing wrong here</p>\n<pre><code>durableClientContext.getClient().raiseEvent(ctx.getInstanceId(), &quot;PUBLISH_EVENTS&quot;,\n                                        new KafkaPublisherNotifierEvent(input.getActualRequest().getProcessId(), input.getActualRequest().getCconsol()));\n</code></pre>\n<hr />\n<h2>Exception I see in Log</h2>\n<pre><code>\nERROR 12368 --- [ool-2-thread-22] i.g.i.ManagedChannelOrphanWrapper        : *~*~*~ Channel ManagedChannelImpl{logId=85, target=localhost:4001} was not shutdown properly!!! ~*~*~*\n    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.\njava.lang.RuntimeException: ManagedChannel allocation site\n    at io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.&lt;init&gt;(ManagedChannelOrphanWrapper.java:93) ~[grpc-core-1.46.0.jar:1.46.0]\n    at io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:53) ~[grpc-core-1.46.0.jar:1.46.0]\n    at io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:44) ~[grpc-core-1.46.0.jar:1.46.0]\n    at io.grpc.internal.ManagedChannelImplBuilder.build(ManagedChannelImplBuilder.java:630) ~[grpc-core-1.46.0.jar:1.46.0]\n    at io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:297) ~[grpc-core-1.46.0.jar:1.46.0]\n    at com.microsoft.durabletask.DurableTaskGrpcClient.&lt;init&gt;(DurableTaskGrpcClient.java:51) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.DurableTaskGrpcClientBuilder.build(DurableTaskGrpcClientBuilder.java:61) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.azurefunctions.DurableClientContext.getClient(DurableClientContext.java:59) ~[durabletask-azure-functions-1.4.0.jar:na]\n    at com.kgtest.engine.functions.orchestrator.MyTestOrchestrator.customTrialOrchestrator(customTrialOrchestrator.java:92) ~[test-app-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n    at jdk.internal.reflect.GeneratedMethodAccessor156.invoke(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at com.microsoft.azure.functions.worker.broker.JavaMethodInvokeInfo.invoke(JavaMethodInvokeInfo.java:22) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.broker.EnhancedJavaMethodExecutorImpl.execute(EnhancedJavaMethodExecutorImpl.java:22) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.chain.FunctionExecutionMiddleware.invoke(FunctionExecutionMiddleware.java:19) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.chain.InvocationChain.doNext(InvocationChain.java:21) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.durabletask.azurefunctions.internal.middleware.OrchestrationMiddleware.lambda$invoke$0(OrchestrationMiddleware.java:37) ~[durabletask-azure-functions-1.4.0.jar:na]\n    at com.microsoft.durabletask.OrchestrationRunner.lambda$loadAndRun$0(OrchestrationRunner.java:65) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.TaskOrchestrationExecutor$ContextImplTask.processEvent(TaskOrchestrationExecutor.java:821) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.TaskOrchestrationExecutor$ContextImplTask.access$1300(TaskOrchestrationExecutor.java:74) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.TaskOrchestrationExecutor$ContextImplTask$OrchestrationHistoryIterator.moveNext(TaskOrchestrationExecutor.java:930) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.TaskOrchestrationExecutor$ContextImplTask.processNextEvent(TaskOrchestrationExecutor.java:790) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.TaskOrchestrationExecutor$ContextImplTask.access$000(TaskOrchestrationExecutor.java:74) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.TaskOrchestrationExecutor.execute(TaskOrchestrationExecutor.java:52) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.OrchestrationRunner.loadAndRun(OrchestrationRunner.java:135) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.OrchestrationRunner.loadAndRun(OrchestrationRunner.java:69) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.OrchestrationRunner.loadAndRun(OrchestrationRunner.java:42) ~[durabletask-client-1.4.0.jar:na]\n    at com.microsoft.durabletask.azurefunctions.internal.middleware.OrchestrationMiddleware.invoke(OrchestrationMiddleware.java:34) ~[durabletask-azure-functions-1.4.0.jar:na]\n    at com.microsoft.azure.functions.worker.chain.InvocationChain.doNext(InvocationChain.java:21) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.broker.JavaFunctionBroker.invokeMethod(JavaFunctionBroker.java:125) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:37) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:12) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.handler.MessageHandler.handle(MessageHandler.java:44) ~[azure-functions-java-worker.jar:2.8.1]\n    at com.microsoft.azure.functions.worker.JavaWorkerClient$StreamingMessagePeer.lambda$onNext$0(JavaWorkerClient.java:93) ~[azure-functions-java-worker.jar:2.8.1]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}