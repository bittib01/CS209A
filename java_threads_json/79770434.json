{
  "question": {
    "tags": [
      "java",
      "database",
      "spring-boot",
      "spring-data-jpa"
    ],
    "owner": {
      "account_id": 39060352,
      "reputation": 1,
      "user_id": 29086289,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/6fc1df1cb5b999abfb79fc0551df3063?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Tadi",
      "link": "https://stackoverflow.com/users/29086289/tadi"
    },
    "is_answered": false,
    "view_count": 124,
    "answer_count": 2,
    "score": -1,
    "last_activity_date": 1759129152,
    "creation_date": 1758387050,
    "last_edit_date": 1758728957,
    "question_id": 79770434,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79770434/how-to-create-a-optimal-join-with-proper-cascade-between-two-entities-in-springb",
    "title": "How to create a optimal join with proper cascade between two entities in springboot for a movie db",
    "body": "<p>Hi i am making a content management system for an awards night company.</p>\n<p><a href=\"https://i.sstatic.net/AzUNLv8J.png\" rel=\"nofollow noreferrer\">My current entity relation design</a></p>\n<p>I have these base entities Content, Crew, Country, Genre, Language and then the joins of these like ContentCountry, ContentGenre etc.\nI want to make a service and controller to add new content and also edit it. The problem occurs when i want to add ContentCrew as in this i have an extra column by Enum.</p>\n<p>ContentCrew Entity</p>\n<pre><code>@Entity\n@Data\npublic class ContentCrew {\n    @Id\n    @GeneratedValue\n    private Long contentCrewId;\n    @ManyToOne\n    @JoinColumn\n    private Content content;\n    @ManyToOne\n    @JoinColumn\n    private Crew crew;\n    @Enumerated\n    private CrewRole role;\n}\n</code></pre>\n<p>Controller for this</p>\n<pre><code>@GetMapping({&quot;/admin/content/add&quot;, &quot;/admin/content/add/&quot;})\n    public String getContentAdd(Model model){\n        model.addAttribute(&quot;contentForm&quot;, new NewContentForm());\n        model.addAttribute(&quot;contentTypes&quot;, contentTypeService.getAllContentTypes());\n        model.addAttribute(&quot;countries&quot;, countryService.getAllCountries());\n        model.addAttribute(&quot;genres&quot;, genreService.getAllGenres());\n        model.addAttribute(&quot;languages&quot;, languageService.getAllLanguages());\n        model.addAttribute(&quot;crewList&quot;, crewService.getAllCrew());\n        model.addAttribute(&quot;crewRoles&quot;, CrewRole.values());\n        return &quot;/admin/content/add&quot;;\n    }\n</code></pre>\n<p>NewContentForm DTO:</p>\n<pre><code>@Data\npublic class NewContentForm {\n    private Content content;\n    private Long contentTypeId;\n    private Set&lt;String&gt; countryCodes;\n    private Set&lt;Long&gt; genreIds;\n    private Set&lt;String&gt; languageCodes;\n}\n</code></pre>\n<p>My thymeleaf form\n\n\n</p>\n<pre><code>&lt;body th:replace=&quot;fragments/layout :: body(~{::content})&quot;&gt;\n&lt;div th:fragment=&quot;content&quot;&gt;\n    &lt;div class=&quot;row justify-content-center&quot;&gt;\n        &lt;div class=&quot;col-md-6&quot;&gt;\n            &lt;h2 class=&quot;mb-4&quot;&gt;Add New Content&lt;/h2&gt;\n            &lt;form th:action=&quot;@{/admin/content/add}&quot; th:object=&quot;${contentForm}&quot; method=&quot;post&quot;&gt;\n                &lt;div class=&quot;&quot;&gt;\n                    &lt;h4&gt;Add Content Details&lt;/h4&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;label for=&quot;title&quot; class=&quot;form-label&quot;&gt;Title&lt;/label&gt;\n                            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;title&quot; name=&quot;title&quot;\n                                   th:field=&quot;*{content.contentName}&quot;\n                                   placeholder=&quot;Enter title&quot; required&gt;\n                        &lt;/div&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;label for=&quot;synopsis&quot; class=&quot;form-label&quot;&gt;Synopsis&lt;/label&gt;\n                            &lt;textarea th:field=&quot;*{content.synopsis}&quot; id=&quot;synopsis&quot; class=&quot;form-control&quot; rows=&quot;4&quot; placeholder=&quot;Enter bio&quot;&gt;&lt;/textarea&gt;\n                        &lt;/div&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;div class=&quot;row&quot;&gt;\n                                &lt;div class=&quot;col&quot;&gt;\n                                    &lt;label for=&quot;portraitUrl&quot; class=&quot;form-label&quot;&gt;Portrait Url&lt;/label&gt;\n                                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;portraitUrl&quot;\n                                           th:field=&quot;*{content.portraitUrl}&quot;\n                                           placeholder=&quot;Enter portrait image url&quot;/&gt;\n                                &lt;/div&gt;\n                                &lt;div class=&quot;col&quot;&gt;\n                                    &lt;label for=&quot;landscapeUrl&quot; class=&quot;form-label&quot;&gt;Landscape Url&lt;/label&gt;\n                                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;landscapeUrl&quot;\n                                           th:field=&quot;*{content.landscapeUrl}&quot;\n                                           placeholder=&quot;Enter landscape image url&quot;/&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;label for=&quot;contentType&quot; class=&quot;form-label&quot;&gt;Select Content Type&lt;/label&gt;\n                            &lt;select class=&quot;form-select&quot; id=&quot;contentType&quot; name=&quot;contentType&quot;\n                                    th:field=&quot;*{contentTypeId}&quot;&gt;\n                                &lt;option th:each=&quot;contenttype : ${contentTypes}&quot;\n                                        th:value=&quot;${contenttype.contentTypeId}&quot;\n                                        th:text=&quot;${contenttype.contentTypeName}&quot;&gt;\n                                &lt;/option&gt;\n                            &lt;/select&gt;\n                        &lt;/div&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;div class=&quot;row&quot;&gt;\n                                &lt;div class=&quot;col&quot;&gt;\n                                    &lt;label for=&quot;countries&quot; class=&quot;form-label&quot;&gt;Countries&lt;/label&gt;\n                                    &lt;select class=&quot;form-select choices-multi&quot; id=&quot;countries&quot; name=&quot;countryCodes&quot; th:field=&quot;*{countryCodes}&quot; multiple&gt;\n                                        &lt;option th:each=&quot;country : ${countries}&quot;\n                                                th:value=&quot;${country.countryCode}&quot;\n                                                th:text=&quot;${country.countryName}&quot;&gt;\n                                        &lt;/option&gt;\n                                    &lt;/select&gt;\n                                    &lt;small class=&quot;form-text text-light&quot;&gt;Hold Ctrl (Windows) or Cmd (Mac) to select multiple.&lt;/small&gt;\n                                &lt;/div&gt;\n                                &lt;div class=&quot;col&quot;&gt;\n                                    &lt;label for=&quot;genres&quot; class=&quot;form-label&quot;&gt;Genres&lt;/label&gt;\n                                    &lt;select class=&quot;form-select choices-multi&quot; id=&quot;genres&quot; name=&quot;genres&quot; th:field=&quot;*{genreIds}&quot; multiple&gt;\n                                        &lt;option th:each=&quot;genre : ${genres}&quot;\n                                                th:value=&quot;${genre.genreId}&quot;\n                                                th:text=&quot;${genre.genreName}&quot;&gt;\n                                        &lt;/option&gt;\n                                    &lt;/select&gt;\n                                    &lt;small class=&quot;form-text text-light&quot;&gt;Hold Ctrl (Windows) or Cmd (Mac) to select multiple.&lt;/small&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=&quot;row&quot;&gt;\n                                &lt;div class=&quot;col&quot;&gt;\n                                    &lt;label for=&quot;languages&quot; class=&quot;form-label&quot;&gt;Languages&lt;/label&gt;\n                                    &lt;select class=&quot;form-select text-dark choices-multi&quot; id=&quot;languages&quot; name=&quot;languages&quot; th:field=&quot;*{languageCodes}&quot; multiple&gt;\n                                        &lt;option th:each=&quot;language : ${languages}&quot;\n                                                th:value=&quot;${language.languageCode}&quot;\n                                                th:text=&quot;${language.languageName}&quot;&gt;\n                                        &lt;/option&gt;\n                                    &lt;/select&gt;\n                                    &lt;small class=&quot;form-text text-light&quot;&gt;Hold Ctrl (Windows) or Cmd (Mac) to select multiple.&lt;/small&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n\n                &lt;/div&gt;\n                &lt;div class=&quot;d-flex justify-content-between&quot;&gt;\n                    &lt;a th:href=&quot;@{/admin/content}&quot; class=&quot;btn btn-secondary&quot;&gt;Back&lt;/a&gt;\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Save&lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;/div&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>How can I add new stuff into here also i dont have nay entity which holds all the fields like Content, all of its metadata. So I will have to use the join services to get all stuff by the content which might be inefficient. Any better way to do this?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}