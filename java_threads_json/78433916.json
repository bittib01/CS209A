{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "eclipse",
      "runnable-jar"
    ],
    "owner": {
      "account_id": 9423890,
      "reputation": 1,
      "user_id": 7009510,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/6a3989f23f12aceeccb7e5399e9aa610?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "swan",
      "link": "https://stackoverflow.com/users/7009510/swan"
    },
    "is_answered": false,
    "view_count": 216,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1717756084,
    "creation_date": 1714947935,
    "last_edit_date": 1717756084,
    "question_id": 78433916,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78433916/spring-boot-runnable-jar-cant-connect-to-database-returns-datasource-url-erro",
    "title": "spring boot runnable jar cant connect to database returns DataSource: &#39;url&#39; error",
    "body": "<p>I am building my own hobby project in spring boot and wanted to export the project as a runnable <code>jar</code> file. For this project and <code>jre</code> I use <code>java 17</code></p>\n<p>In <code>Eclipse</code> the application works without errors and I can connect to the database without issues, but when I export the application as a <code>runnable jarfile</code> it does not work and I get error below.</p>\n<pre><code>&gt;&gt;java -jar Runnable_tracker.jar\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.2.3)\n\n2024-05-05T23:59:53.729+02:00  INFO 30180 --- [           main] c.e.T.TopicArchiverApplication           : Starting TopicArchiverApplication using Java 17.0.2 with PID 30180 (C:\\Users\\johan\\eclipse-workspace\\Topic_archiver\\Runnable_tracker.jar started by johan in C:\\Users\\johan\\eclipse-workspace\\Topic_archiver)\n2024-05-05T23:59:53.732+02:00  INFO 30180 --- [           main] c.e.T.TopicArchiverApplication           : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2024-05-05T23:59:54.277+02:00  INFO 30180 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2024-05-05T23:59:54.326+02:00  INFO 30180 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 3 JPA repository interfaces.\n2024-05-05T23:59:54.790+02:00  INFO 30180 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\n2024-05-05T23:59:54.800+02:00  INFO 30180 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2024-05-05T23:59:54.801+02:00  INFO 30180 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]\n2024-05-05T23:59:54.842+02:00  INFO 30180 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2024-05-05T23:59:54.844+02:00  INFO 30180 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1075 ms\n2024-05-05T23:59:54.892+02:00  WARN 30180 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class\n2024-05-05T23:59:54.895+02:00  INFO 30180 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2024-05-05T23:59:54.910+02:00  INFO 30180 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger :\n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2024-05-05T23:59:54.926+02:00 ERROR 30180 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :\n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n        If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n        If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\n</code></pre>\n<p>My application.properity file looks fine as it shows below and these &quot;parameter nameings works&quot;</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/topicusers\nspring.datasource.username=postgres\nspring.datasource.password=Galaxy2022\nspring.datasource.driverClassName=org.postgresql.Driver\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.properites.hibernate.format_sql=true\n\nlogging.level.org.springframework.web: DEBUG\nlogging.level.org.springframework.security=TRACE\nlogging.level.org.hibernate: ERROR\nspring.mvc.log-request-details=true\n\nspring.main.web-application-type= SERVLET\n\nserver.error.include-message=always\n#disabling security to test posting\n</code></pre>\n<p>I know that sometimes when you run a <code>Springboot</code> application in <code>eclipse</code> not all configuration are reed correctly, something to do with <code>spring</code> to read <code>halv</code> the configuration at a time (If I remember correctly) and these configuration stay until one restart eclipse or <code>pc</code>.</p>\n<p>The issue is that the configuration work inside <code>eclipse</code>, when I run the application, but not when running the <code>jar</code> file.</p>\n<p><a href=\"https://i.sstatic.net/H37k57fO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/H37k57fO.png\" alt=\"enter image description here\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}