{
  "question": {
    "tags": [
      "java",
      "android",
      "google-cloud-platform",
      "gmsmapview"
    ],
    "owner": {
      "account_id": 30424179,
      "reputation": 323,
      "user_id": 23314859,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJsns1nlPD0a2q89LIIA_39fc65Erko_PqvtbAZTigu5w=k-s256",
      "display_name": "Jonathan Kalush",
      "link": "https://stackoverflow.com/users/23314859/jonathan-kalush"
    },
    "is_answered": false,
    "view_count": 19970,
    "answer_count": 3,
    "score": 31,
    "last_activity_date": 1764151600,
    "creation_date": 1707041221,
    "last_edit_date": 1708174659,
    "question_id": 77935326,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77935326/failed-to-get-service-from-broker-unknown-calling-package-name-com-google-andr",
    "title": "Failed to get service from broker. Unknown calling package name &#39;com.google.android.gms&#39;",
    "body": "<p>Every time i run my code i get the error:</p>\n<p>Failed to get service from broker.\njava.lang.SecurityException: Unknown calling package name 'com.google.android.gms'.\nat android.os.Parcel.createExceptionOrNull(Parcel.java:3057)\nat android.os.Parcel.createException(Parcel.java:3041)\nat android.os.Parcel.readException(Parcel.java:3024)\nat android.os.Parcel.readException(Parcel.java:2966)\nat m.cqy.q(:com.google.android.gms.policy_maps_core_dynamite@234210309@234210304072.587101654.587101654:180)\nat m.cpk.run(:com.google.android.gms.policy_maps_core_dynamite@234210309@234210304072.587101654.587101654:54)\nat android.os.Handler.handleCallback(Handler.java:958)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loopOnce(Looper.java:205)\nat android.os.Looper.loop(Looper.java:294)\nat android.os.HandlerThread.run(HandlerThread.java:67)</p>\n<p>my code:</p>\n<pre><code>package il.co.jonathan.monstercatch.ACTIVITIES;\n\nimport android.Manifest;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.location.Location;\nimport android.os.Bundle;\nimport android.widget.FrameLayout;\nimport android.widget.ImageView;\n\nimport androidx.annotation.NonNull;\nimport androidx.core.app.ActivityCompat;\nimport androidx.fragment.app.FragmentActivity;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.LocationCallback;\nimport com.google.android.gms.location.LocationResult;\nimport com.google.android.gms.location.LocationServices;\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport com.google.android.gms.maps.model.LatLng;\nimport com.google.android.gms.maps.model.MarkerOptions;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.android.gms.tasks.Task;\n\nimport il.co.jonathan.monstercatch.R;\n\npublic class Game_Activity extends FragmentActivity implements OnMapReadyCallback {\n\n    private Location currentLocation;\n    private LocationCallback locationCallback;\n\n    private FusedLocationProviderClient fusedClient;\n    private static final int REQUEST_CODE = 101;\n    private FrameLayout map;\n    private ImageView menuIcon;\n\n    private void initializeViews() {\n        map = findViewById(R.id.map);\n        menuIcon = findViewById(R.id.menuIcon);\n    }\n\n    private void setAdapters() {\n    }\n\n    private void setListeners() {\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_game);\n        initializeViews();\n        setAdapters();\n        setListeners();\n        getLocation();\n    }\n\n    private void getLocation() {\n        if (ActivityCompat.checkSelfPermission(\n                this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED\n                &amp;&amp; ActivityCompat.checkSelfPermission(\n                this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION},\n                    REQUEST_CODE);\n            return;\n        }\n\n        fusedClient = LocationServices.getFusedLocationProviderClient(this);\n        Task&lt;Location&gt; task = fusedClient.getLastLocation();\n\n        task.addOnSuccessListener(new OnSuccessListener&lt;Location&gt;() {\n            @Override\n            public void onSuccess(Location location) {\n                if (location != null) {\n                    currentLocation = location;\n                    SupportMapFragment supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\n                    if (supportMapFragment != null) {\n                        supportMapFragment.getMapAsync(Game_Activity.this);\n                    } else {\n                        Intent intent = getIntent();\n                        finish();\n                        startActivity(intent);\n                    }\n                }\n            }\n        });\n    }\n\n    @Override\n    public void onMapReady(GoogleMap googleMap) {\n        googleMap.getUiSettings().setScrollGesturesEnabled(false);\n        LatLng latLng = new LatLng(currentLocation.getLatitude(), currentLocation.getLongitude());\n        MarkerOptions markerOptions = new MarkerOptions().position(latLng).title(&quot;Player&quot;);\n        googleMap.animateCamera(CameraUpdateFactory.newLatLng(latLng));\n        googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng, 10));\n        googleMap.addMarker(markerOptions);\n    }\n\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                getLocation();\n            }\n        }\n    }\n}\n</code></pre>\n<p>my gradle:</p>\n<pre><code>plugins {\n    id(&quot;com.android.application&quot;) version &quot;8.2.2&quot;\n    id(&quot;com.google.gms.google-services&quot;) version &quot;4.4.0&quot;\n    id(&quot;com.google.android.libraries.mapsplatform.secrets-gradle-plugin&quot;) version &quot;2.0.0&quot;\n}\n\n\nandroid {\n    namespace = &quot;il.co.jonathan.monstercatch&quot;\n    compileSdk = 34\n\n    defaultConfig {\n        applicationId = &quot;il.co.jonathan.monstercatch&quot;\n        minSdk = 27\n        targetSdk = 34\n        versionCode = 1\n        versionName = &quot;1.0&quot;\n\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n    secrets {\n        propertiesFileName = &quot;secrets.properties&quot;\n\n\n        defaultPropertiesFileName = &quot;local.defaults.properties&quot;\n\n        // Configure which keys should be ignored by the plugin by providing regular expressions.\n        // &quot;sdk.dir&quot; is ignored by default.\n        ignoreList.add(&quot;keyToIgnore&quot;) // Ignore the key &quot;keyToIgnore&quot;\n        ignoreList.add(&quot;sdk.*&quot;)       // Ignore all keys matching the regexp &quot;sdk.*&quot;\n    }\n\n    buildTypes {\n        release {\n            isMinifyEnabled = false\n            proguardFiles(\n                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),\n                &quot;proguard-rules.pro&quot;\n            )\n        }\n    }\n\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n    buildFeatures {\n        viewBinding = true\n    }\n}\n\ndependencies {\n\n    implementation(&quot;androidx.appcompat:appcompat:1.6.1&quot;)\n    implementation(&quot;com.google.android.material:material:1.11.0&quot;)\n    implementation(&quot;androidx.constraintlayout:constraintlayout:2.1.4&quot;)\n    implementation(project(&quot;:VIEWMODEL&quot;))\n    implementation(project(&quot;:MODEL&quot;))\n    implementation(project(&quot;:HELPER&quot;))\n    implementation(&quot;androidx.navigation:navigation-fragment:2.7.6&quot;)\n    implementation(&quot;androidx.navigation:navigation-ui:2.7.6&quot;)\n    implementation(&quot;com.google.android.gms:play-services-maps:18.2.0&quot;)\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\n    androidTestImplementation(&quot;androidx.test.ext:junit:1.1.5&quot;)\n    androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.5.1&quot;)\n    implementation(&quot;com.google.android.gms:play-services-location:21.1.0&quot;)\n    implementation(&quot;com.google.android.gms:play-services-gcm:17.0.0&quot;)\n\n}\n</code></pre>\n<p>my manifest:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;il.co.jonathan.monstercatch&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.location.gps&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MonsterCatch&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.android.geo.API_KEY&quot;\n            android:value=&quot;my api&quot; /&gt;\n\n        &lt;activity\n            android:name=&quot;.ACTIVITIES.Game_Activity&quot;\n            android:exported=&quot;false&quot;\n            android:label=&quot;@string/title_activity_game&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.ACTIVITIES.SignUpActivity2&quot;\n            android:exported=&quot;false&quot;\n            android:label=&quot;@string/title_activity_sign_up2&quot;\n            android:theme=&quot;@style/Theme.MonsterCatch&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.ACTIVITIES.LogInActivity2&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.ACTIVITIES.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>a solution to my problem</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}