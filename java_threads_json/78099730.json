{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "spring-webflux",
      "spring-webclient"
    ],
    "owner": {
      "account_id": 1625899,
      "reputation": 367,
      "user_id": 1501468,
      "user_type": "registered",
      "accept_rate": 10,
      "profile_image": "https://i.sstatic.net/PgYcG.png?s=256",
      "display_name": "Piyush Srivastava",
      "link": "https://stackoverflow.com/users/1501468/piyush-srivastava"
    },
    "is_answered": true,
    "view_count": 298,
    "accepted_answer_id": 78099955,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1744652351,
    "creation_date": 1709539537,
    "question_id": 78099730,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78099730/how-to-block-reactor-http-thread-while-calling-third-party-api-using-spring-bo",
    "title": "How to block() Reactor Http thread while calling third party api using Spring boot webclient?",
    "body": "<p>I am writing a generic method to call third party API from my micro-service.</p>\n<pre><code>private &lt;R,P&gt; R processRequest(String url, Class&lt;R&gt; type, HttpEntity&lt;P&gt; requestEntity, HttpMethod method) {\n\n    HttpHeaders httpHeaders = requestEntity.getHeaders();\n\n    Mono&lt;R&gt; result =  getResult(method, url, httpHeaders, type);\n    R  responseBody =  result.block();\n\n    return responseBody;\n}\n\nprivate &lt;R&gt; Mono&lt;R&gt; getResult(HttpMethod method, String url, HttpHeaders httpHeaders, Class&lt;R&gt; type) {\n    return webClient.method(method)\n            .uri(url)\n            .accept(MediaType.ALL)\n            .contentType(MediaType.APPLICATION_JSON)\n            .headers(headers -&gt; headers.putAll(httpHeaders))\n            .retrieve()\n            .onStatus(HttpStatusCode::is4xxClientError,\n                    clientResponse -&gt; Mono.error(new RuntimeException(&quot;Client error&quot;)))\n            .onStatus(HttpStatusCode::is5xxServerError,\n                    clientResponse -&gt; Mono.error(new RuntimeException(&quot;Server error&quot;)))\n            .bodyToMono(type);\n}\n</code></pre>\n<p>But, when I am calling processRequest() method, I am getting the below error.</p>\n<pre><code>java.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3\n</code></pre>\n<p>Can anyone please help to solve this issue.</p>\n<p>Tech stack :\nJava : 17\nspring-boot-starter-parent : 3.1.1\nspring-boot-starter-webflux : 3.1.1</p>\n<p><strong>P.S.</strong> I need a blocking call and I am aware that it is not good to use blocking operations in reactive code</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}