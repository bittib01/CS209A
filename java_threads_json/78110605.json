{
  "question": {
    "tags": [
      "java",
      "config",
      "neovim",
      "neovim-plugin",
      "nvim-lspconfig"
    ],
    "owner": {
      "account_id": 23082014,
      "reputation": 29,
      "user_id": 17194158,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/80567593be16a13ceb987f45e899a505?s=256&d=identicon&r=PG",
      "display_name": "Zyenns",
      "link": "https://stackoverflow.com/users/17194158/zyenns"
    },
    "is_answered": false,
    "view_count": 1323,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1733167315,
    "creation_date": 1709673454,
    "question_id": 78110605,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78110605/nvim-jdtls-doenst-work-for-a-big-java-project",
    "title": "Nvim-jdtls doens&#39;t work for a big java project",
    "body": "<p>I'm working on a big Java project. The project uses Java 1.8 but I have installed Java 20 for jdtls.\nThe projects uses only an and build and tomcat. I'm currently using eclipse for the project but I want to change to Neovim. I used vim for other languages but Java is my arch enemy. :)).\nThe problem is that the jdtls doesn't seem to work, the &quot;go to definition&quot; function takes me to the import statement and nothing works.\nIn eclipse I only have a few folders in build path and I tried to add them to the configuration also but it doesn't seem to work.\nI have a few errors in the console as well but they shouldn't interfere with the &quot;go to definition&quot; function. I'm using Neovim on windows 10.\nHere's my console:</p>\n<pre><code>[ERROR][2024-03-04 01:13:37] .../vim/lsp/rpc.lua:734    &quot;rpc&quot;   &quot;C:\\\\Users\\\\myName\\\\jdk-20.0.2\\\\bin\\\\java.exe&quot;  &quot;stderr&quot;    &quot;WARNING: Using incubator modules: jdk.incubator.vector, jdk.incubator.concurrent\\r\\n&quot;\n[ERROR][2024-03-04 01:13:38] .../vim/lsp/rpc.lua:734    &quot;rpc&quot;   &quot;C:\\\\Users\\\\myName\\\\jdk-20.0.2\\\\bin\\\\java.exe&quot;  &quot;stderr&quot;    &quot;Mar 04, 2024 1:13:38 AM org.apache.aries.spifly.BaseActivator log\\r\\nINFO: Registered provider ch.qos.logback.classic.servlet.LogbackServletContainerInitializer of service jakarta.servlet.ServletContainerInitializer in bundle ch.qos.logback.classic\\r\\n&quot;\n[ERROR][2024-03-04 01:13:38] .../vim/lsp/rpc.lua:734    &quot;rpc&quot;   &quot;C:\\\\Users\\\\myName\\\\jdk-20.0.2\\\\bin\\\\java.exe&quot;  &quot;stderr&quot;    &quot;Mar 04, 2024 1:13:38 AM org.apache.aries.spifly.BaseActivator log\\r\\nINFO: Registered provider ch.qos.logback.classic.spi.LogbackServiceProvider of service org.slf4j.spi.SLF4JServiceProvider in bundle ch.qos.logback.classic\\r\\n&quot;\n[WARN][2024-03-04 01:13:40] ...lsp/handlers.lua:137 &quot;The language server jdtls triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless&quot;\n[ERROR][2024-03-04 01:13:40] ...lsp/handlers.lua:535    &quot;4 Mar 2024, 01:13:40 Command _java.reloadBundles.command not supported on client&quot;\n</code></pre>\n<p>And here's my config:</p>\n<pre><code>return {\n    { 'mfussenegger/nvim-dap' },\n    { \n        'mfussenegger/nvim-jdtls',\n        config = function() \n\n            local jdtls = require('jdtls')\n            local root_markers = {'gui.bat', '.git', 'bin'}\n            local root_dir = require('jdtls.setup').find_root(root_markers)\n            local workspace_folder = &quot;C:\\\\Users\\\\myName\\\\Workspace\\\\&quot; .. vim.fn.fnamemodify(root_dir, &quot;:p:h:t&quot;)\n            function nnoremap(rhs, lhs, bufopts, desc)\n                bufopts.desc = desc\n                vim.keymap.set(&quot;n&quot;, rhs, lhs, bufopts)\n            end\n\n            local on_attach = function(client, bufnr)\n                local bufopts = { noremap=true, silent=true, buffer=bufnr }\n                nnoremap('gD', vim.lsp.buf.declaration, bufopts, &quot;Go to declaration&quot;)\n                nnoremap('gd', vim.lsp.buf.definition, bufopts, &quot;Go to definition&quot;)\n                nnoremap('gi', vim.lsp.buf.implementation, bufopts, &quot;Go to implementation&quot;)\n                nnoremap('K', vim.lsp.buf.hover, bufopts, &quot;Hover text&quot;)\n                nnoremap('&lt;C-k&gt;', vim.lsp.buf.signature_help, bufopts, &quot;Show signature&quot;)\n                nnoremap('&lt;space&gt;wa', vim.lsp.buf.add_workspace_folder, bufopts, &quot;Add workspace folder&quot;)\n                nnoremap('&lt;space&gt;wr', vim.lsp.buf.remove_workspace_folder, bufopts, &quot;Remove workspace folder&quot;)\n                nnoremap('&lt;space&gt;wl', function()\n                    print(vim.inspect(vim.lsp.buf.list_workspace_folders()))\n                    end, bufopts, &quot;List workspace folders&quot;)\n                nnoremap('&lt;space&gt;D', vim.lsp.buf.type_definition, bufopts, &quot;Go to type definition&quot;)\n                nnoremap('&lt;space&gt;rn', vim.lsp.buf.rename, bufopts, &quot;Rename&quot;)\n                nnoremap('&lt;space&gt;ca', vim.lsp.buf.code_action, bufopts, &quot;Code actions&quot;)\n                vim.keymap.set('v', &quot;&lt;space&gt;ca&quot;, &quot;&lt;ESC&gt;&lt;CMD&gt;lua vim.lsp.buf.range_code_action()&lt;CR&gt;&quot;,\n                    { noremap=true, silent=true, buffer=bufnr, desc = &quot;Code actions&quot; })\n                nnoremap('&lt;space&gt;f', function() vim.lsp.buf.format { async = true } end, bufopts, &quot;Format file&quot;)\n                nnoremap(&quot;&lt;C-o&gt;&quot;, jdtls.organize_imports, bufopts, &quot;Organize imports&quot;)\n                nnoremap(&quot;&lt;space&gt;ev&quot;, jdtls.extract_variable, bufopts, &quot;Extract variable&quot;)\n                nnoremap(&quot;&lt;space&gt;ec&quot;, jdtls.extract_constant, bufopts, &quot;Extract constant&quot;)\n                vim.keymap.set('v', &quot;&lt;space&gt;em&quot;, [[&lt;ESC&gt;&lt;CMD&gt;lua require('jdtls').extract_method(true)&lt;CR&gt;]],\n                    { noremap=true, silent=true, buffer=bufnr, desc = &quot;Extract method&quot; })\n            end\n\n            local config = {\n                flags = {\n                    debounce_text_changes = 80,\n                },\n                on_attach = on_attach,  \n                root_dir = root_dir, \n                settings = {\n                    java = {\n                        format = {\n                            settings = {\n                                url = &quot;C:\\\\Users\\\\myName\\\\Downloads\\\\eclipse-java-google-style.xml&quot;,\n                                profile = &quot;GoogleStyle&quot;,\n                            },\n                        },\n                        signatureHelp = { enabled = true },\n                        contentProvider = { preferred = 'fernflower' },\n                        -- Specify any completion options\n--                      completion = {\n--                          favoriteStaticMembers = {\n--                              &quot;org.hamcrest.MatcherAssert.assertThat&quot;,\n--                              &quot;org.hamcrest.Matchers.*&quot;,\n--                              &quot;org.hamcrest.CoreMatchers.*&quot;,\n--                              &quot;org.junit.jupiter.api.Assertions.*&quot;,\n--                              &quot;java.util.Objects.requireNonNull&quot;,\n--                              &quot;java.util.Objects.requireNonNullElse&quot;,\n--                              &quot;org.mockito.Mockito.*&quot;\n--                          },\n--                          filteredTypes = {\n--                              &quot;com.sun.*&quot;,\n--                              &quot;io.micrometer.shaded.*&quot;,\n--                              &quot;java.awt.*&quot;,\n--                              &quot;jdk.*&quot;, &quot;sun.*&quot;,\n--                          },\n--                      },\n                        -- Specify any options for organizing imports\n                        sources = {\n                            organizeImports = {\n                                starThreshold = 9999;\n                                staticStarThreshold = 9999;\n                            },\n                        },\n                        -- How code generation should act\n                        codeGeneration = {\n                            toString = {\n                                template = &quot;${object.className}{${member.name()}=${member.value}, ${otherMembers}}&quot;\n                            },\n                            hashCodeEquals = {\n                                useJava7Objects = true,\n                            },\n                            useBlocks = true,\n                        },\n                        configuration = {\n                            runtimes = {\n                                {\n                                    name = &quot;JavaSE-1.8&quot;,\n                                    path = &quot;C:\\\\jdk_1.8&quot;,\n                                }\n                            }\n                        },\n         -- I have tried do add the full paths and the relative paths but they don't seem to work at all.\n                        build = {\n                            sources = {\n                                root_dir .. &quot;path/in/my/project&quot;,\n                                root_dir .. &quot;another_path/in/my/project&quot;,\n                                root_dir .. &quot;more/path/in/my/project/src&quot;,\n                                &quot;path/in/my/project&quot;,\n                                &quot;another_path/in/my/project&quot;,\n                                &quot;more/path/in/my/project/src&quot;,\n                            }\n                        }\n                    }\n                },\n                cmd = {\n                    &quot;C:\\\\Users\\\\myName\\\\jdk-20.0.2\\\\bin\\\\java.exe&quot;,\n                    '-Declipse.application=org.eclipse.jdt.ls.core.id1',\n                    -- '-Dosgi.bundles.defaultStartLevel=4',\n                    '-Declipse.product=org.eclipse.jdt.ls.core.product',\n                    '-Dlog.protocol=true',\n                    '-Dlog.level=ALL',\n                    '-Xmx4g',\n                    '--add-modules=ALL-SYSTEM',\n                    '--add-opens', 'java.base/java.util=ALL-UNNAMED',\n                    '--add-opens', 'java.base/java.lang=ALL-UNNAMED',\n                    '-jar', vim.fn.glob('C:\\\\Users\\\\myName\\\\Downloads\\\\jdtls\\\\plugins\\\\org.eclipse.equinox.launcher_*.jar'),\n                                       '-configuration', 'C:\\\\Users\\\\myName\\\\Downloads\\\\jdtls\\\\config_win',\n                                       '-data', workspace_folder,\n                },\n            }\n                        jdtls.start_or_attach(config)\n        end\n\n    },\n    { 'nvim-lua/plenary.nvim' }\n}\n\n</code></pre>\n<p>I'm sorry but I don't really know how to give a little example.\nAny help is welcomed, thank you!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}