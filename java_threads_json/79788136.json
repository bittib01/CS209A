{
  "question": {
    "tags": [
      "java",
      "eclipse",
      "swt"
    ],
    "owner": {
      "account_id": 319201,
      "reputation": 166,
      "user_id": 636840,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/dWADh.png?s=256",
      "display_name": "Eric Bergman-Terrell",
      "link": "https://stackoverflow.com/users/636840/eric-bergman-terrell"
    },
    "is_answered": false,
    "view_count": 166,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1765050150,
    "creation_date": 1760202194,
    "last_edit_date": 1760247378,
    "question_id": 79788136,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79788136/app-built-with-eclipse-4-37-components-run-from-jar-gets-libraries-for-platfo",
    "title": "App built with Eclipse 4.37 Components, Run From Jar, gets &quot;Libraries for platform win32 cannot be loaded because of incompatible environment&quot; error",
    "body": "<p>I am updating an app that uses the Eclipse components (SWT, JFace, etc) to use the Eclipse version 4.37 components.</p>\n<p>The old version didn't use Maven, the new version does.</p>\n<p>My problem is, while I can run and debug the app, I can't run it from the .jar that I'm building, which is how users will run the app.</p>\n<p>I run it from the jar file as follows:</p>\n<p>java --enable-native-access=ALL-UNNAMED -verbose:jni -jar {jar file path}</p>\n<p>This command gets this error message:</p>\n<blockquote>\n<p>&quot;Libraries for platform win32 cannot be loaded because of incompatible\nenvironment&quot;</p>\n</blockquote>\n<p>I am running on 64-bit Windows.</p>\n<p>When I debug the jar, it stops on breakpoints in my main method. But it terminates the moment I access the Display class. The app terminates. If I put the Display access in a try/catch, the catch is never executed.</p>\n<p>My pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.ericbt&lt;/groupId&gt;\n    &lt;artifactId&gt;vault3&lt;/artifactId&gt;\n    &lt;version&gt;1&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;eclipse-platform&gt;org.eclipse.platform&lt;/eclipse-platform&gt;\n        &lt;osgi.platform&gt;win32.win32.x86_64&lt;/osgi.platform&gt;\n        &lt;maven.compiler.release&gt;24&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;${project.basedir}/src/mainPackage/resources&lt;/directory&gt;\n                &lt;targetPath&gt;resources&lt;/targetPath&gt; &lt;!-- Optional: Specify the path inside the JAR --&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*&lt;/include&gt; &lt;!-- Include all files and subfolders --&gt;\n                &lt;/includes&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;artwork&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;sourceDirectory&gt;${project.basedir}/src&lt;/sourceDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.14.1&lt;/version&gt; &lt;!-- Use a recent version --&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${maven.compiler.release}&lt;/source&gt;\n                    &lt;target&gt;24&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.1&lt;/version&gt; &lt;!-- Use a recent version --&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;mainPackage.MainApplicationWindow&lt;/mainClass&gt; &lt;!-- Replace with your main class --&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.1&lt;/version&gt; &lt;!-- Use a recent version --&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;!-- Eclipse 4.37 components, released 2025-09-05 --&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.swt.${osgi.platform}&lt;/artifactId&gt;\n            &lt;version&gt;3.131.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.swt.svg&lt;/artifactId&gt;\n            &lt;version&gt;3.130.100&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.e4.core.commands&lt;/artifactId&gt;\n            &lt;version&gt;1.1.600&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.core.runtime&lt;/artifactId&gt;\n            &lt;version&gt;3.34.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.equinox.common&lt;/artifactId&gt;\n            &lt;version&gt;3.20.200&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.jface.text&lt;/artifactId&gt;\n            &lt;version&gt;3.28.100&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.jface&lt;/artifactId&gt;\n            &lt;version&gt;3.38.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.osgi&lt;/artifactId&gt;\n            &lt;version&gt;3.23.200&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;${eclipse-platform}&lt;/groupId&gt;\n            &lt;artifactId&gt;org.eclipse.text&lt;/artifactId&gt;\n            &lt;version&gt;3.14.400&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.weisj&lt;/groupId&gt;\n            &lt;artifactId&gt;jsvg&lt;/artifactId&gt;\n            &lt;version&gt;1.7.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        --&gt;\n\n        &lt;!-- local .jar files --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;imgscalr-lib&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;common-code&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;perf4j&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Note: The com.github.weisj is commented out, but I still see it in the jar. Maven must be picking it up as a transitive dependency.</p>\n<p>Do you have any suggestions for how I can troubleshoot?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}