{
  "question": {
    "tags": [
      "java",
      "dictionary",
      "collections",
      "nullpointerexception",
      "java-stream"
    ],
    "owner": {
      "account_id": 28809594,
      "reputation": 282,
      "user_id": 22064614,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtffdmv3Zbtv2NMHzaIECU4VqCqcX1hylXQujxepx8o=k-s256",
      "display_name": "Preet Bista",
      "link": "https://stackoverflow.com/users/22064614/preet-bista"
    },
    "is_answered": true,
    "view_count": 192,
    "closed_date": 1753108267,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1753106500,
    "creation_date": 1753088939,
    "last_edit_date": 1753106500,
    "question_id": 79708820,
    "link": "https://stackoverflow.com/questions/79708820/why-does-collectors-tomap-throw-nullpointerexception-when-mapping-to-null-valu",
    "closed_reason": "Duplicate",
    "title": "Why does Collectors.toMap() throw NullPointerException when mapping to null values?",
    "body": "<p>I'm trying to convert a List of Products to a Map&lt;Long, String&gt; using Java streams. My goal is to collect the DTOs into a map where the key is getId() and the value is getLogoPath(). The logoPath can be null in some cases, and I'm okay with having null values in the resulting map.</p>\n<p>Here's the relevant code:</p>\n<pre><code>Map&lt;Long, String&gt; result = products.stream()\n    .filter(pt -&gt; pt.getId() != null)\n    .collect(Collectors.toMap(Products::getId, Products::getLogoPath));\n</code></pre>\n<p>I know this solution works by creating a Map</p>\n<pre><code>Map&lt;Long, String&gt; productMap = new HashMap&lt;&gt;();\n        for (Products product : products) {\n            if (product.getId() != null) {\n                productMap.put(product.getId(), product.getLogoPath());\n            }\n        }\n        return productMap;\n</code></pre>\n<p><strong>My Question</strong> <br>\nWhy does <strong>Collectors.toMap()</strong> throw a <strong>NullPointerException</strong> when some values are null, even though HashMap allows null values?</p>\n<p>Is there something I'm missing about how Collectors.toMap() is implemented?</p>\n<p>What I want: <br></p>\n<pre><code>{\n   1L=someUrl,\n   2L=null,\n   3L=anotherUrl\n}\n</code></pre>\n<br>\nHow can I safely achieve this without manually iterating over the list and putting entries into the map?\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}