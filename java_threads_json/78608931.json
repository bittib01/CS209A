{
  "question": {
    "tags": [
      "java",
      "android",
      "gradle"
    ],
    "owner": {
      "account_id": 16900524,
      "reputation": 70,
      "user_id": 13781067,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/cd7ad085779ace2d3a4efda9f2e5d591?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "HubbleCommander",
      "link": "https://stackoverflow.com/users/13781067/hubblecommander"
    },
    "is_answered": true,
    "view_count": 1584,
    "accepted_answer_id": 79003698,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1735838114,
    "creation_date": 1718125964,
    "question_id": 78608931,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78608931/compiler-exception-when-using-java-21-pattern-matching-in-android",
    "title": "Compiler exception when using Java 21 pattern matching in Android",
    "body": "<p>I saw Java 21 introduced pattern matching in Switch statements. This was ideal for some code I had, and I wanted to use it instead of a bunch of if-if-else.</p>\n<p>Here's a test class I made:</p>\n<pre><code>public class Test {\n    static &lt;T&gt; void checkType(T value) {\n        switch (value) {\n            case Integer i -&gt; System.out.println(&quot;Integer&quot;);\n            case String s -&gt; System.out.println(&quot;String&quot;);\n            default -&gt; throw new IllegalArgumentException(&quot;Unsupported type: &quot; + value.getClass());\n        }\n    }\n\n    public static void main(String[] args) {\n        checkType(&quot;Some string&quot;);\n        checkType(21);\n    }\n}\n</code></pre>\n<p><code>java Test.java</code> has the following output:</p>\n<pre><code>String\nInteger\n</code></pre>\n<p>When I try to do the same thing in Android, I get the following compile error:</p>\n<pre><code>An exception has occurred in the compiler (21.0.3). Please file a bug against the Java compiler via the Java bug reporting page (https://bugreport.java.com) after checking the Bug Database (https://bugs.java.com) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.\ncom.sun.tools.javac.code.Symbol$CompletionFailure: class file for java.lang.runtime.SwitchBootstraps not found\n</code></pre>\n<p>Both are using Java 21.0.3, and I have tried with 22.0.1. I have tried both with the Oracle JDK as well as OpenJDK from Microsoft.</p>\n<p>I have set the appropriate parameters in my <code>build.gradle.kts</code>as well (<code>compileOptions</code>&amp; <code>kotlinOptions</code>).</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}