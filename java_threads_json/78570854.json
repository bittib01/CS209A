{
  "question": {
    "tags": [
      "java",
      "android",
      "azure",
      "onedrive",
      "msal"
    ],
    "owner": {
      "account_id": 2020103,
      "reputation": 819,
      "user_id": 1806493,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/50880563246aff3a801e6e6ef5f80f9d?s=256&d=identicon&r=PG",
      "display_name": "GGK stands for Ukraine",
      "link": "https://stackoverflow.com/users/1806493/ggk-stands-for-ukraine"
    },
    "is_answered": false,
    "view_count": 309,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1719213609,
    "creation_date": 1717424276,
    "last_edit_date": 1719213609,
    "question_id": 78570854,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78570854/android-java-msal-error-failed-to-acquire-token-with-interactive-browser-authen",
    "title": "Android java MSAL Error: Failed to acquire token with Interactive Browser Authentication",
    "body": "<p>In my Anroid Java app, I would like to offer users the option of searching for and downloading their files from Onedrive.\nI use the Android Java example from official <a href=\"https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-mobile-app-android-sign-in\" rel=\"nofollow noreferrer\">documentation</a>.\nThe example works, I receive the access token.</p>\n<p>It's not clear to me what happens next.\nI can't find in the documentation how to pass the access token to the GraphServiceClient or the AuthProvider.</p>\n<p><strong>Creating the GraphServiceClient Object</strong>:</p>\n<pre><code>final InteractiveBrowserCredential interactiveBrowserCredential = new InteractiveBrowserCredentialBuilder()\n     .clientId(CLIENT_ID)\n     .redirectUrl(REDIRECT_URL)\n     .build();\n\nfinal TokenCredentialAuthProvider authProvider = new TokenCredentialAuthProvider(SCOPES, interactiveBrowserCredential);\nfinal GraphServiceClient graphClient = GraphServiceClient.builder().authenticationProvider(authProvider).buildClient();\n</code></pre>\n<p><strong>buidling DriveItem:</strong></p>\n<pre><code>DriveItem rootItem = graphClient\n    .me()\n    .drive()\n    .root()\n    .buildRequest()\n    .get();\n</code></pre>\n<p><strong>causes to this Exception:</strong></p>\n<p>ExecutionException: com.azure.core.exception.ClientAuthenticationException: Failed to acquire token with Interactive Browser Authentication.</p>\n<pre><code>implementation 'com.microsoft.identity.client:msal:5.1.0'\nimplementation 'com.microsoft.graph:microsoft-graph:5.77.0'\nimplementation 'com.microsoft.graph:microsoft-graph-core:2.0.21'\nimplementation 'com.azure:azure-identity:1.11.0'\n</code></pre>\n<p>I'm in a bit of a pickle now.\nCan someone please help me, thank you\nGGK</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}