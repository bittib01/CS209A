{
  "question": {
    "tags": [
      "java",
      "maven",
      "jacoco-maven-plugin"
    ],
    "owner": {
      "account_id": 2707688,
      "reputation": 868,
      "user_id": 2336934,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/498027338a55f0d67a3641ec5d5d808c?s=256&d=identicon&r=PG",
      "display_name": "dan",
      "link": "https://stackoverflow.com/users/2336934/dan"
    },
    "is_answered": false,
    "view_count": 1170,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1722255853,
    "creation_date": 1721332358,
    "last_edit_date": 1721669331,
    "question_id": 78766420,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78766420/jacoco-always-generates-aggregate-report-in-a-non-module-project-wont-display",
    "title": "JaCoCo always generates aggregate report in a non-module project, won&#39;t display coverage in Maven Site",
    "body": "<p>I have a single Java 11 library (jar) project whose Maven pom refers to a parent pom for common properties and configuration.  There are no submodules and the parent pom doesn't have any submodules.  The parent pom contains a <code>&lt;pluginManagement&gt;</code> section.  Both the parent pom and the project pom contain configuration for Jacoco, and as expected, the project pom overrides the parent.  My parent pom doesn't have a Jacoco entry in the <code>&lt;reporting&gt;</code> section.</p>\n<h3>What I'm trying to do:</h3>\n<p>Generate the link to the Jacoco report in the project's Maven Site.</p>\n<h3>What's happening:</h3>\n<p>Running <code>mvn clean test site</code> generates a complete Jacoco coverage report against the project's unit tests in <code>target/site/jacoco</code> directory but isn't linked in the <strong>Project Reports</strong>.  Instead a <em>Jacoco Aggregate</em> link always appears and displays an empty report.  The Jacoco data file is being generated in the correct location.  The <code>target/site/jacoco-aggregate</code> folder contains only a few files including an index.html.</p>\n<h3>What I've attempted</h3>\n<p>I've tried a number of things to create the link, and from reading various articles (e.g. <a href=\"https://groups.google.com/g/jacoco/c/FpdLbxsXSTY\" rel=\"nofollow noreferrer\">empty aggregate report with parent pom</a>, and <a href=\"https://stackoverflow.com/questions/30132164/jacoco-report-are-not-generated-in-the-site?rq=4\">Jacoco Report are not generated in the site</a>) and the <a href=\"https://www.eclemma.org/jacoco/trunk/doc/maven.html\" rel=\"nofollow noreferrer\">JaCoCo documentation</a> , I've learned that all of the Jacoco reports will generate automatically unless a specific report is configured in the <code>&lt;reporting&gt;</code> section, which was only the <code>report</code> report.  I also moved the Jacoco plugin from the <code>&lt;build&gt;&lt;pluginManagement&gt;</code> section in the parent pom into the <code>&lt;build&gt;</code> section (of the parent pom), since that can supposedly cause the plugin to think this is a module project but that didn't solve it.  I've also tried commenting out various tags that customize the plugin but removing them hasn't enabled the <code>report</code> report.  The only customization I can't turn off is the <code>prepare-agent</code> and <code>report</code> goals.</p>\n<p><em>Console output</em><br>\nThe console does show this warning but I see it in projects even when it's working correctly.</p>\n<pre><code>[INFO] Skipping JaCoCo execution due to missing execution data file.\n</code></pre>\n<p><em>Parent pom</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n  &lt;pluginManagement&gt;\n    ...\n  &lt;/pluginManagement&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;0.8.11&lt;/version&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;id&gt;default-prepare-agent&lt;/id&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n          &lt;/goals&gt;\n          &lt;configuration&gt;\n            &lt;skip&gt;${jacoco.skip}&lt;/skip&gt;\n            &lt;propertyName&gt;argline.jacoco&lt;/propertyName&gt;\n            &lt;destFile&gt;${project.build.directory}/code-coverage/data/jacoco.exec&lt;/destFile&gt;\n            &lt;includes&gt;\n              &lt;include&gt;${jacoco.include}&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;excludes&gt;\n              &lt;exclude&gt;${jacoco.exclude}&lt;/exclude&gt;\n            &lt;/excludes&gt;\n          &lt;/configuration&gt;\n        &lt;/execution&gt;\n      &lt;execution&gt;\n        &lt;id&gt;default-report&lt;/id&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;report&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;phase&gt;test&lt;/phase&gt;\n        &lt;configuration&gt;\n          &lt;skip&gt;${jacoco.skip}&lt;/skip&gt;\n          &lt;dataFile&gt;${project.build.directory}/code-coverage/data/jacoco.exec&lt;/dataFile&gt;\n          &lt;outputDirectory&gt;${project.build.directory}/code-coverage/report&lt;/outputDirectory&gt;\n          &lt;includes&gt;\n            &lt;include&gt;${jacoco.include}&lt;/include&gt;\n          &lt;/includes&gt;\n          &lt;excludes&gt;\n            &lt;exclude&gt;${jacoco.exclude}&lt;/exclude&gt;\n          &lt;/excludes&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n  ...\n&lt;/build&gt;\n</code></pre>\n<p><em>Project pom</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;reporting&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;0.8.11&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;outputDirectory&gt;${project.build.directory}/site/jacoco&lt;/outputDirectory&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  ...\n  &lt;/plugins&gt;\n&lt;/reporting&gt;\n&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;${version.jacoco}&lt;/version&gt;\n      &lt;executions&gt;\n        &lt;!-- first execution : for preparing JaCoCo runtime agent --&gt;\n        &lt;execution&gt;\n          &lt;id&gt;default-prepare-agent&lt;/id&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n          &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;!-- second execution : for creating code coverage reports --&gt;\n        &lt;execution&gt;\n          &lt;id&gt;default-report&lt;/id&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;report&lt;/goal&gt;\n          &lt;/goals&gt;\n          &lt;phase&gt;test&lt;/phase&gt;\n          &lt;configuration&gt;\n            &lt;skip&gt;${jacoco.skip}&lt;/skip&gt;\n            &lt;dataFile&gt;${project.build.directory}/code-coverage/data/jacoco.exec&lt;/dataFile&gt;\n            &lt;outputDirectory&gt;${project.build.outputDirectory}/site/jacoco&lt;/outputDirectory&gt;\n            &lt;includes&gt;\n              &lt;include&gt;${jacoco.include}&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;excludes&gt;\n              &lt;exclude&gt;${jacoco.exclude}&lt;/exclude&gt;\n            &lt;/excludes&gt;\n          &lt;/configuration&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n    ...\n&lt;/build&gt;\n\n</code></pre>\n<p>I could configure the <code>maven-site-plugin</code> to manually add a &quot;Jacoco&quot; link but I shouldn't have to do that.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}