{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "maven",
      "tomcat"
    ],
    "owner": {
      "account_id": 4059813,
      "reputation": 131,
      "user_id": 3336647,
      "user_type": "registered",
      "accept_rate": 0,
      "profile_image": "https://www.gravatar.com/avatar/ebc8dae9931906be35c3a31718b48a7b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "DpkTheJavaCoder",
      "link": "https://stackoverflow.com/users/3336647/dpkthejavacoder"
    },
    "is_answered": true,
    "view_count": 76,
    "accepted_answer_id": 78796381,
    "answer_count": 1,
    "score": -2,
    "last_activity_date": 1721972666,
    "creation_date": 1721288052,
    "question_id": 78762988,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78762988/issue-in-spring-boot-war-startup-in-external-tomcat-due-to-unwanted-spring-jar",
    "title": "Issue in spring-boot war startup in external tomcat due to unwanted spring jar",
    "body": "<p>I am trying to run an spring-boot web application war file in external tomcat where many other applications (Spring and not spring-boot) are already running. There are some dependencies at some shared location on same server which is loaded into application at runtime which is configured in catalina.properties file common.loader</p>\n<p>While staring my spring-boot application I am getting below error:</p>\n<pre><code>        java.lang.IllegalStateException: Error starting child\n                at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\n                at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n                at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\n                at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1023)\n                at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1910)\n                at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n                at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n                at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n                at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n                at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:824)\n                at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:474)\n                at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1617)\n                at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:318)\n                at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:114)\n                at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:402)\n                at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:345)\n                at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:893)\n                at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:794)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)\n                at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)\n                at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)\n                at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n                at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n                at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n                at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)\n                at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:248)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)\n                at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)\n                at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)\n                at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.lang.reflect.Method.invoke(Method.java:498)\n                at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\n                at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\n        Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myservice]]\n                at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:419)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:186)\n                at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n                ... 37 more\n        Caused by: org.springframework.cglib.core.CodeGenerationException: java.lang.NoSuchMethodException--&gt;org.springframework.ws.config.annotation.DelegatingWsConfiguration$$EnhancerBySpringCGLIB$$47de5974.CGLIB$SET_THREAD_CALLBACKS([Lorg.springframework.cglib.proxy.Callback;)\n                at org.springframework.cglib.proxy.Enhancer$EnhancerFactoryData.&lt;init&gt;(Enhancer.java:513)\n                at org.springframework.cglib.proxy.Enhancer.wrapCachedClass(Enhancer.java:806)\n                at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:111)\n                at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:108)\n                at org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54)\n                at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n                at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61)\n                at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)\n                at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:134)\n                at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:319)\n                at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:572)\n                at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:419)\n                at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:137)\n                at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:109)\n                at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:447)\n                at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:268)\n                at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:325)\n                at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:147)\n                at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:748)\n                at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n                at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\n                at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n                at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n                at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n                at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4904)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)\n                ... 38 more\n        Caused by: java.lang.NoSuchMethodException: org.springframework.ws.config.annotation.DelegatingWsConfiguration$$EnhancerBySpringCGLIB$$47de5974.CGLIB$SET_THREAD_CALLBACKS([Lorg.springframework.cglib.proxy.Callback;)\n                at java.lang.Class.getDeclaredMethod(Class.java:2130)\n                at org.springframework.cglib.proxy.Enhancer.getCallbacksSetter(Enhancer.java:912)\n                at org.springframework.cglib.proxy.Enhancer.access$000(Enhancer.java:93)\n                at org.springframework.cglib.proxy.Enhancer$EnhancerFactoryData.&lt;init&gt;(Enhancer.java:502)\n                ... 67 more\n</code></pre>\n<p>After some investigation I found that this error is coming because of <strong>spring-ws-core</strong> jar while is coming from shared location. In my application this jar is never included or required. If I remove this jar from shared location then I am not getting this error but other applications require this jar so I can't remove this from shared location.</p>\n<p>Is there any way to not load some of shared location specific jars for this particular application.</p>\n<p>Any help is appreciated!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}