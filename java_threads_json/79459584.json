{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "hibernate"
    ],
    "owner": {
      "account_id": 4870647,
      "reputation": 6882,
      "user_id": 4480180,
      "user_type": "registered",
      "accept_rate": 70,
      "profile_image": "https://www.gravatar.com/avatar/c3c64f141431f5e9068b506446ff5829?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "justHelloWorld",
      "link": "https://stackoverflow.com/users/4480180/justhelloworld"
    },
    "is_answered": true,
    "view_count": 127,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1740340833,
    "creation_date": 1740226403,
    "last_edit_date": 1740267511,
    "question_id": 79459584,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79459584/empty-table-when-using-jparepository",
    "title": "Empty table when using JpaRepository?",
    "body": "<p>I'm doing my first Spring project, where I initialize the table:</p>\n<p><code>pom.xml:</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.4.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;testcodechallenge&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;testcodechallenge&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-boot.version&gt;3.1.5&lt;/spring-boot.version&gt;\n        &lt;lombok.version&gt;1.18.30&lt;/lombok.version&gt;\n        &lt;springdoc.version&gt;2.2.0&lt;/springdoc.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.application.name=testcodechallenge\n\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n\nspring.sql.init.mode=always\n\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2-console\n</code></pre>\n<p><code>schema.sql</code>:</p>\n<pre><code>\nDROP TABLE IF EXISTS PRICES;\n\nCREATE TABLE PRICES (\n    ID BIGINT AUTO_INCREMENT PRIMARY KEY,\n    BRAND_ID INT NOT NULL,\n    START_DATE TIMESTAMP NOT NULL,\n    END_DATE TIMESTAMP NOT NULL,\n    PRICE_LIST INT NOT NULL,\n    PRODUCT_ID INT NOT NULL,\n    PRIORITY INT NOT NULL,\n    PRICE DECIMAL(10,2) NOT NULL,\n    CURR VARCHAR(3) NOT NULL\n);\n</code></pre>\n<p><code>data.sql</code>:</p>\n<pre><code>INSERT INTO PRICES (BRAND_ID, START_DATE, END_DATE, PRICE_LIST, PRODUCT_ID, PRIORITY, PRICE, CURR)\nVALUES\n    (1, '2020-06-14 00:00:00', '2020-12-31 23:59:59', 1, 35455, 0, 35.50, 'EUR'),\n    (1, '2020-06-14 15:00:00', '2020-06-14 18:30:00', 2, 35455, 1, 25.45, 'EUR'),\n    (1, '2020-06-15 00:00:00', '2020-06-15 11:00:00', 3, 35455, 1, 30.50, 'EUR'),\n    (1, '2020-06-15 16:00:00', '2020-12-31 23:59:59', 4, 35455, 1, 38.95, 'EUR');\n\n</code></pre>\n<p><code>TestcodechallengeApplication.java:</code></p>\n<pre><code>package com.test.testcodechallenge;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TestcodechallengeApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(TestcodechallengeApplication.class, args);\n    }\n}\n</code></pre>\n<p>So far so good: if I run <code>./mvnw spring-boot:run</code> and then visit <code>http://localhost:8080/h2-console</code> and do a <code>SELECT * FROM PRICES</code> I get all 4 rows.</p>\n<p>However, if I had the JPA repository, the above query returns empty:</p>\n<p><code>PriceController.java</code>:</p>\n<pre><code>@RestController\npublic class PriceController {\n\n    @Autowired\n    private PriceService priceService;\n\n    @GetMapping(&quot;/prices&quot;)\n    public List&lt;Price&gt; getAllPrices() {\n        return priceService.getAllPrices();\n    }\n\n    @GetMapping(&quot;/prices/{id}&quot;)\n    public Price getPriceById(@PathVariable Long id) {\n        return priceService.getPriceById(id);\n    }\n}\n</code></pre>\n<p><code>Price.java</code>:</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;PRICES&quot;)\npublic class Price {\n\n    @Id\n    private Long id;\n    private Long brandId;\n    private LocalDateTime startDate;\n    private LocalDateTime endDate;\n    private Long priceList;\n    private Long productId;\n    private BigDecimal price;\n    private String currency;\n}\n</code></pre>\n<p><code>PriceRepository.java</code>:</p>\n<pre><code>@Repository\npublic interface PriceRepository extends JpaRepository&lt;Price, Long&gt; {\n    // Custom query methods can be added here if needed\n}\n</code></pre>\n<p><code>PriceService.java</code>:</p>\n<pre><code>@Service\npublic class PriceService {\n    @Autowired\n    private PriceRepository priceRepository;\n\n    public List&lt;Price&gt; getAllPrices() {\n        return priceRepository.findAll();\n    }\n\n    public Price getPriceById(Long id) {\n        return priceRepository.findById(id).orElse(null);\n    }\n}\n</code></pre>\n<p><em><strong>What is missed here?</strong></em></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}