{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "amazon-s3"
    ],
    "owner": {
      "account_id": 27022021,
      "reputation": 1,
      "user_id": 20579864,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/SpCk2.jpg?s=256",
      "display_name": "heh",
      "link": "https://stackoverflow.com/users/20579864/heh"
    },
    "is_answered": false,
    "view_count": 132,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1737981427,
    "creation_date": 1737131415,
    "question_id": 79365454,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79365454/how-to-get-rid-of-the-warning-not-all-bytes-were-read-from-the-s3objectinputstr",
    "title": "How to get rid of the warning &quot;Not all bytes were read from the S3ObjectInputStream, aborting HTTP connection.&quot;",
    "body": "<p>I have the following code, which is used by the s3 object, but perhaps there will be a wait after the return:\nNot all bytes were read from the S3ObjectInputStream, aborting HTTPconnection. This is likely an error and may result in suboptimal behavior. Request only the bytes you need is a ranged GET or drain the input stream after use.\nHow do I get rid of this warning? As you can see, I have already tried to use ranged get</p>\n<pre><code>public CheckMimeTypeResult isValidObjectInQuarantineBucket(String bucket, String key) {\n    GetObjectRequest request = new GetObjectRequest(bucket, key)\n        .withRange(0, 1);\n    try (S3Object s3Object = s3client.getObject(request)) {\n        String mimeType = getMimeType(s3Object);\n        CheckMimeTypeResult result = isSupportedMimeType(mimeType) ?\n            checkMimeType(key, mimeType) : new CheckMimeTypeResult(false, false, mimeType);\n\n        log.debug(&quot;isValidObjectInQuarantineBucket() - end: key = {}, result = {}&quot;, key, result);\n        return result;\n    } catch (Exception ex) {\n        log.warn(&quot;Could not detect mime type for key {}. ex = {}&quot;, key, ex.getMessage(), ex);\n        CheckMimeTypeResult result = new CheckMimeTypeResult(false, false, null);\n\n        log.debug(&quot;isValidObjectInQuarantineBucket() - end: key = {}, result = {}&quot;, key, result);\n        return result;\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}