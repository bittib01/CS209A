{
  "question": {
    "tags": [
      "java",
      "amazon-web-services",
      "aws-lambda"
    ],
    "owner": {
      "account_id": 33107755,
      "reputation": 11,
      "user_id": 25666339,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/20d4b197275100d7c093c4114be127a9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "prathamesh",
      "link": "https://stackoverflow.com/users/25666339/prathamesh"
    },
    "is_answered": false,
    "view_count": 28,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1732261881,
    "creation_date": 1732189926,
    "last_edit_date": 1732261881,
    "question_id": 79211019,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79211019/unable-to-create-rtmp-medialive-channel-through-aws-lambda-function",
    "title": "Unable to create RTMP MediaLive channel through AWS Lambda function",
    "body": "<p>I was trying to create mediaLive channel. I have created a input as well as media package channel, but when I try to create mediaLive, It is giving following error:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; software.amazon.awssdk.services.medialive.model.UnprocessableEntityException: Object references undefined destination &quot;media-package-channel&quot; (Service: MediaLive, Status Code: 422, Request ID: ec05c59a-5f0d-4eed-bc6d-85fcd15400c5)</p>\n</blockquote>\n<p>Below is code snippet:</p>\n<pre><code>\n    public static CreateChannelResponse createMediaLiveChannel5(\n            MediaLiveClient mediaLiveClient, String channelName, String inputId, String mediaPackageChannel) {\n\n        // Define Encoder Settings\n        EncoderSettings encoderSettings = EncoderSettings.builder()\n                .timecodeConfig(TimecodeConfig.builder()\n                        .source(TimecodeConfigSource.EMBEDDED)\n                        .build())\n                .videoDescriptions(\n                        VideoDescription.builder()\n                                .name(&quot;video_q7t5tl&quot;)\n                                .width(1280)\n                                .height(720)\n                                .sharpness(50)\n                                .scalingBehavior(&quot;DEFAULT&quot;)\n                                .respondToAfd(&quot;NONE&quot;)\n                                .codecSettings(VideoCodecSettings.builder()\n                                        .h264Settings(H264Settings.builder()\n                                                .adaptiveQuantization(H264AdaptiveQuantization.AUTO)\n                                                .afdSignaling(AfdSignaling.NONE)\n                                                .colorMetadata(H264ColorMetadata.INSERT)\n                                                .entropyEncoding(H264EntropyEncoding.CABAC)\n                                                .flickerAq(H264FlickerAq.ENABLED)\n                                                .forceFieldPictures(H264ForceFieldPictures.DISABLED)\n                                                .framerateControl(&quot;SPECIFIED&quot;)\n                                                .framerateNumerator(30000)\n                                                .framerateDenominator(1001)\n                                                .gopBReference(H264GopBReference.DISABLED)\n                                                .gopClosedCadence(1)\n                                                .gopSize(90.0)\n                                                .gopSizeUnits(H264GopSizeUnits.FRAMES)\n                                                .level(H264Level.H264_LEVEL_AUTO)\n                                                .lookAheadRateControl(H264LookAheadRateControl.MEDIUM)\n                                                .numRefFrames(1)\n                                                .parControl(H264ParControl.SPECIFIED)\n                                                .profile(H264Profile.MAIN)\n                                                .rateControlMode(H264RateControlMode.CBR)\n                                                .scanType(H264ScanType.PROGRESSIVE)\n                                                .sceneChangeDetect(H264SceneChangeDetect.ENABLED)\n                                                .spatialAq(H264SpatialAq.ENABLED)\n                                                .subgopLength(&quot;FIXED&quot;)\n                                                .syntax(H264Syntax.DEFAULT)\n                                                .temporalAq(H264TemporalAq.ENABLED)\n                                                .timecodeInsertion(&quot;DISABLED&quot;)\n                                                .build())\n                                        .build())\n                                .build(),\n                        VideoDescription.builder()\n                                .name(&quot;video_d6yva3&quot;)\n                                .width(1920)\n                                .height(720)\n                                .sharpness(50)\n                                .scalingBehavior(&quot;DEFAULT&quot;)\n                                .respondToAfd(&quot;NONE&quot;)\n                                .codecSettings(VideoCodecSettings.builder()\n                                        .h264Settings(H264Settings.builder()\n                                                .adaptiveQuantization(H264AdaptiveQuantization.AUTO)\n                                                .afdSignaling(AfdSignaling.NONE)\n                                                .colorMetadata(H264ColorMetadata.INSERT)\n                                                .entropyEncoding(H264EntropyEncoding.CABAC)\n                                                .flickerAq(H264FlickerAq.ENABLED)\n                                                .forceFieldPictures(H264ForceFieldPictures.DISABLED)\n                                                .framerateControl(&quot;SPECIFIED&quot;)\n                                                .framerateNumerator(30000)\n                                                .framerateDenominator(1001)\n                                                .gopBReference(H264GopBReference.DISABLED)\n                                                .gopClosedCadence(1)\n                                                .gopSize(90.0)\n                                                .gopSizeUnits(H264GopSizeUnits.FRAMES)\n                                                .level(H264Level.H264_LEVEL_AUTO)\n                                                .lookAheadRateControl(H264LookAheadRateControl.MEDIUM)\n                                                .numRefFrames(1)\n                                                .parControl(H264ParControl.SPECIFIED)\n                                                .profile(H264Profile.MAIN)\n                                                .rateControlMode(H264RateControlMode.CBR)\n                                                .scanType(H264ScanType.PROGRESSIVE)\n                                                .sceneChangeDetect(H264SceneChangeDetect.ENABLED)\n                                                .spatialAq(H264SpatialAq.ENABLED)\n                                                .subgopLength(&quot;FIXED&quot;)\n                                                .syntax(H264Syntax.DEFAULT)\n                                                .temporalAq(H264TemporalAq.ENABLED)\n                                                .timecodeInsertion(&quot;DISABLED&quot;)\n                                                .build())\n                                        .build())\n                                .build())\n                .audioDescriptions(\n                        AudioDescription.builder()\n                                .name(&quot;audio_82lool&quot;)\n                                .audioSelectorName(&quot;default&quot;)\n                                .build(),\n                        AudioDescription.builder()\n                                .name(&quot;audio_l1c2h&quot;)\n                                .audioSelectorName(&quot;default&quot;)\n                                .build())\n                .outputGroups(\n                        OutputGroup.builder()\n                                .name(&quot;LiveStream&quot;)\n                                .outputGroupSettings(\n                                        OutputGroupSettings.builder()\n                                                .mediaPackageGroupSettings(\n                                                        MediaPackageGroupSettings.builder()\n                                                                .destination(\n                                                                        OutputLocationRef.builder()\n                                                                                .destinationRefId(mediaPackageChannel)\n                                                                                .build())\n//                                                                .mediaPackageSettings(\n//                                                                        MediaPackageSettings.builder()\n//                                                                                .channelId(mediaPackageChannelArn)\n//                                                                                .build())\n                                                                .build())\n                                                .build())\n                                .outputs(\n                                        Output.builder()\n                                                .outputName(&quot;7iwvon&quot;)\n                                                .audioDescriptionNames(&quot;audio_82lool&quot;)\n                                                .videoDescriptionName(&quot;video_q7t5tl&quot;)\n                                                .outputSettings(\n                                                        OutputSettings.builder()\n                                                                .mediaPackageOutputSettings(MediaPackageOutputSettings.builder().build())\n                                                                .build())\n                                                .build(),\n                                        Output.builder()\n                                                .outputName(&quot;nhgtaj&quot;)\n                                                .audioDescriptionNames(&quot;audio_l1c2h&quot;)\n                                                .videoDescriptionName(&quot;video_d6yva3&quot;)\n                                                .outputSettings(\n                                                        OutputSettings.builder()\n                                                                .mediaPackageOutputSettings(MediaPackageOutputSettings.builder().build())\n                                                                .build())\n                                                .build())\n                                .build())\n                .build();\n\n        // Create MediaLive Channel\n        return mediaLiveClient.createChannel(\n                CreateChannelRequest.builder()\n                        .name(channelName)\n                        .inputAttachments(\n                                InputAttachment.builder()\n                                        .inputId(inputId)\n                                        .inputAttachmentName(&quot;LiveStream2&quot;)\n                                        .inputSettings(\n                                                InputSettings.builder()\n                                                        .sourceEndBehavior(InputSourceEndBehavior.CONTINUE)\n                                                        .filterStrength(1)\n                                                        .inputFilter(InputFilter.AUTO)\n                                                        .deblockFilter(&quot;DISABLED&quot;)\n                                                        .denoiseFilter(&quot;DISABLED&quot;)\n                                                        .build())\n                                        .build())\n                        .encoderSettings(encoderSettings)\n                        .inputSpecification(\n                                InputSpecification.builder()\n                                        .codec(InputCodec.AVC)\n                                        .maximumBitrate(InputMaximumBitrate.MAX_20_MBPS)\n                                        .resolution(InputResolution.HD)\n                                        .build())\n                      //  .destinations(OutputDestination.builder().id(&quot;mediaPackageChannel&quot;).build())\n                        .destinations(\n                                OutputDestination.builder()\n                                        .mediaPackageSettings(\n                                                MediaPackageOutputDestinationSettings.builder()\n                                                      //  .copy().build())\n                                                        .channelId(mediaPackageChannel)\n                                                        .build())\n                                        .id(&quot;media-package-destination&quot;)\n                                        .build())\n                        .channelClass(ChannelClass.SINGLE_PIPELINE)\n                        .roleArn(&quot;arn:aws:iam::************:role/MediaLiveAccessRole&quot;)\n                        .build());\n    }\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}