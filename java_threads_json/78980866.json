{
  "question": {
    "tags": [
      "java",
      "jasper-reports"
    ],
    "owner": {
      "account_id": 4255606,
      "reputation": 155,
      "user_id": 3481377,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/eFGO7.jpg?s=256",
      "display_name": "Artemoon",
      "link": "https://stackoverflow.com/users/3481377/artemoon"
    },
    "is_answered": false,
    "view_count": 185,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1727081505,
    "creation_date": 1726208334,
    "last_edit_date": 1726251691,
    "question_id": 78980866,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78980866/jasper-reports-how-to-pass-json-as-inputstream-using-rest-api",
    "title": "Jasper Reports: how to pass JSON as InputStream using REST API",
    "body": "<p>I'm trying to pass JSON string as InputStream to Jasper Reports template using its REST API and can't make it work: sometimes template is just empty (no data), sometimes has null values, sometimes I get error while printing.</p>\n<p>Important thing that we don't use any JasperReports library, just their <a href=\"https://community.jaspersoft.com/documentation/jasperreports-server/tibco-jasperreports-server-rest-api-reference/vv900/jasperreports-server-rest-api-reference-_-reportexecutions/\" rel=\"nofollow noreferrer\">REST API</a>.</p>\n<p>Here what I have.</p>\n<p>Parameters in request to Jasper server (Java side):</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonString = &quot;{\\&quot;name\\&quot;:\\&quot;One\\&quot;, \\&quot;age\\&quot;:Two, \\&quot;car\\&quot;:Three}&quot;;\nInputStream iostream = new ByteArrayInputStream(jsonString.getBytes(StandardCharsets.UTF_8));\nreportData.put(&quot;data&quot;, iostream);\n</code></pre>\n<p>Request payload to Jasper Server:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;reportUnitUri&quot;: &quot;/reports/***/v1/***&quot;,\n    &quot;outputFormat&quot;: &quot;pdf&quot;,\n    &quot;async&quot;: false,\n    &quot;freshData&quot;: true,\n    &quot;saveDataSnapshot&quot;: false,\n    &quot;interactive&quot;: true,\n    &quot;allowInlineScripts&quot;: true,\n    &quot;ignorePagination&quot;: false,\n    &quot;pages&quot;: null,\n    &quot;attachmentsPrefix&quot;: null,\n    &quot;parameters&quot;:\n    {\n        &quot;reportParameter&quot;:\n        [\n            {\n                &quot;name&quot;: &quot;data&quot;,\n                &quot;value&quot;:\n                [\n                    &quot;java.io.ByteArrayInputStream@7f8e1831&quot;\n                ]\n            }\n        ]\n    }\n}\n</code></pre>\n<p>Jasper template:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parameter name=&quot;data&quot; class=&quot;java.io.InputStream&quot;/&gt;\n&lt;field name=&quot;name&quot; class=&quot;java.lang.String&quot;&gt;\n    &lt;property name=&quot;net.sf.jasperreports.json.field.expression&quot; value=&quot;data.name&quot;/&gt;\n...also tried...\n    &lt;property name=&quot;net.sf.jasperreports.json.field.expression&quot; value=&quot;name&quot;/&gt;\n&lt;/field&gt;\n</code></pre>\n<p>Result: empty report.\nTried to use fake mock values - it works, prints, but can't grab anything from &quot;data&quot; parameter:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;parameter name=&quot;mock&quot; class=&quot;java.lang.String&quot;&gt;\n        &lt;defaultValueExpression&gt;&lt;![CDATA[&quot;{\\&quot;mock\\&quot;:[{\\&quot;mockId\\&quot;: \\&quot;1\\&quot;}]}&quot;]]&gt;&lt;/defaultValueExpression&gt;\n    &lt;/parameter&gt;\n    &lt;parameter name=&quot;JSON_INPUT_STREAM&quot; class=&quot;java.io.InputStream&quot;&gt;\n        &lt;defaultValueExpression&gt;&lt;![CDATA[new java.io.ByteArrayInputStream($P{mock}.getBytes(&quot;UTF-8&quot;))]]&gt;&lt;/defaultValueExpression&gt;\n    &lt;/parameter&gt;\n    &lt;parameter name=&quot;data&quot; class=&quot;java.io.InputStream&quot;/&gt;\n    &lt;queryString language=&quot;json&quot;&gt;\n        &lt;![CDATA[]]&gt;\n    &lt;/queryString&gt;\n    &lt;field name=&quot;mockId&quot; class=&quot;java.lang.String&quot;&gt;\n        &lt;fieldDescription&gt;&lt;![CDATA[mockId]]&gt;&lt;/fieldDescription&gt;\n    &lt;/field&gt;\n</code></pre>\n<p>Tried to use JsonDatasource type - <code>&lt;parameter name=&quot;data&quot; class=&quot;net.sf.jasperreports.engine.data.JsonDataSource&quot;/&gt;</code> - result: broken report.</p>\n<p>Tried to use <code>JSON_INPUT_STREAM</code> parameter name and pass it from Java code, but it breaks report too.</p>\n<p>Overall, after printing report with different combinations of parameters I got either blank page and &quot;No data&quot; section filled (for test purposes), or filled page, but null value for parameter.</p>\n<p>The only variant that works is:</p>\n<ol>\n<li>Pass report parameter as JSON string</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>String datasetJson = objectMapper.writeValueAsString(dataSet.getData());\nreportData.put(&quot;reportData&quot;, datasetJson);\n</code></pre>\n<ol start=\"2\">\n<li>In report template process it this way:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;parameter name=&quot;reportData&quot; class=&quot;java.lang.String&quot;/&gt;\n    &lt;parameter name=&quot;JSON_INPUT_STREAM&quot; class=&quot;java.io.InputStream&quot;&gt;\n        &lt;defaultValueExpression&gt;&lt;![CDATA[new java.io.ByteArrayInputStream($P{reportData}.getBytes(&quot;UTF-8&quot;))]]&gt;&lt;/defaultValueExpression&gt;\n    &lt;/parameter&gt;\n</code></pre>\n<p>And this works. But as you can see, I cast my string to <code>new java.io.ByteArrayInputStream</code> which is not good. Why not to read stream from parameter map?</p>\n<p>So my question is: how to pass data stream to report template correctly? If data stream is not easy to use, I can try to switch to passing object, insted of stream. Please, help me to find what am I doing wrong.</p>\n<p>Thanks in advance!</p>\n<p>Also tried this answers:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/33300592/how-to-fill-report-using-json-datasource-without-getting-null-values\">How to fill report using JSON datasource without getting null values?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/36447399/filling-reports-from-json-using-jasperreports\">Filling reports from json using JasperReports</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34057099/jasper-report-passing-json-io-stream-to-subreport\">Jasper Report - Passing json IO stream to subreport</a></li>\n<li><a href=\"https://community.jaspersoft.com/forums/topic/65690-passing-json-stream-as-datasource-to-subreport/\" rel=\"nofollow noreferrer\">https://community.jaspersoft.com/forums/topic/65690-passing-json-stream-as-datasource-to-subreport/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/71076232/how-to-pass-json-data-to-jasper-report-using-rest\">How to pass json data to jasper report using rest</a></li>\n</ol>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}