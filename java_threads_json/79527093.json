{
  "question": {
    "tags": [
      "java",
      "jdbc",
      "dynamic-sql"
    ],
    "owner": {
      "account_id": 25006705,
      "reputation": 21,
      "user_id": 18866568,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/AATXAJwY4ze2zr18FRVGzJX--ZZHLftcMFUEOEZUSNBj=k-s256",
      "display_name": "Nhat Nguyen",
      "link": "https://stackoverflow.com/users/18866568/nhat-nguyen"
    },
    "is_answered": true,
    "view_count": 117,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1742665872,
    "creation_date": 1742628947,
    "last_edit_date": 1742633282,
    "question_id": 79527093,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79527093/how-to-dynamically-build-a-query-based-on-variable-number-of-fields-in-java-wit",
    "title": "How to dynamically build a query based on variable number of fields, in Java with PreparedStatement?",
    "body": "<p>I have a UserDAO class where I need to retrieve users based on different search criteria.</p>\n<p>Initially, I overloaded the method like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public User getUserByUsername(String username) throws SQLException {\n    try (Connection conn = JdbcUtils.getConnection()) {\n        String sql = &quot;SELECT * FROM user WHERE username = ? ;&quot;;\n\n        PreparedStatement stm = conn.prepareCall(sql);\n        stm.setString(1, username);\n\n        ResultSet rs = stm.executeQuery();\n\n        if (rs.next()) {\n            User u = new User(rs.getInt(&quot;id&quot;), rs.getString(&quot;username&quot;),\n                    rs.getString(&quot;password&quot;), rs.getString(&quot;first_name&quot;),\n                    rs.getString(&quot;last_name&quot;), rs.getString(&quot;email&quot;), rs.getString(&quot;role&quot;));\n            return u;\n        }\n    }\n    return null;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public User getUserByUsername(String username, String email) throws SQLException {\n    try (Connection conn = JdbcUtils.getConnection()) {\n        String sql = &quot;SELECT * FROM user WHERE username = ? AND email = ? ;&quot;;\n\n        PreparedStatement stm = conn.prepareCall(sql);\n        stm.setString(1, username);\n         stm.setString(2, email);\n\n        ResultSet rs = stm.executeQuery();\n\n        if (rs.next()) {\n            User u = new User(rs.getInt(&quot;id&quot;), rs.getString(&quot;username&quot;),\n                    rs.getString(&quot;password&quot;), rs.getString(&quot;first_name&quot;),\n                    rs.getString(&quot;last_name&quot;), rs.getString(&quot;email&quot;), rs.getString(&quot;role&quot;));\n            return u;\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>This approach is not scalable. Every time I need a new condition, I have to write another method.</p>\n<p>Is there a better way to dynamically build the query based on different fields?</p>\n<p>Expected solution:</p>\n<p>More flexible method where I can pass different search fields dynamically.</p>\n<p>Maintainability: I don't want to create multiple overloads just for different search conditions.</p>\n<p>What I've tried:</p>\n<p>I thought of using a <code>Map&lt;String, Object&gt;</code> to store conditions, but I'm not sure how to build the query properly.</p>\n<p>What is the best approach to achieve this?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}