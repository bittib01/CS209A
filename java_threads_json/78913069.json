{
  "question": {
    "tags": [
      "java",
      "android",
      "flutter",
      "kotlin",
      "apktool"
    ],
    "owner": {
      "account_id": 25556871,
      "reputation": 1,
      "user_id": 19340229,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gi0JJT5kMLrLpFyclhL5r0gvAU-pEGAG9IQ_vLl=k-s256",
      "display_name": "Xyzbolt Xyz",
      "link": "https://stackoverflow.com/users/19340229/xyzbolt-xyz"
    },
    "is_answered": true,
    "view_count": 272,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1739533466,
    "creation_date": 1724653409,
    "last_edit_date": 1724653486,
    "question_id": 78913069,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78913069/in-an-android-app-can-i-use-apktool-jar-to-decode-apk-files",
    "title": "In an Android App, can I use Apktool.jar to decode apk files?",
    "body": "<p>I want to take an apk selected by the user (selection system is done), and then decode it into it's resources using Apktool.</p>\n<p>The decoded apk must then be reverted back to an apk, be resigned and be installable</p>\n<p>The problem I am facing is that Apktool.jar cannot be used without root access as a terminal command (java command) is used normally to execute the decoding process. <strong>Can I use apktool.jar's code directly within my app so that this process can be done without root.</strong></p>\n<p>I have seen similar apps decoding and changing apks although never seen there implementations, closest thing I can think of is Lucky patcher (the old patcher to get free purchases in games).\nother Apps that preform these functionalities do exist although I am not sure if they require root...</p>\n<p>// Just a heads up my project is not a native android project (it's a flutter project) but I have\n// sort of figured out native handling so you can give your answer as a native app (kotlin or java)\n// Although if you have tips or info regarding my scenario please do mention those too</p>\n<p>I have currently only tried running through calling commands (P.S this is kotlin code but might be kinda crptic since it's embedded in a flutter project) also this isnt my actual code it's a similar idea I constructed with AI since my code is too long, the exact details of the code are negligible...</p>\n<pre><code>\nimport android.os.Bundle\nimport androidx.annotation.NonNull\nimport io.flutter.embedding.android.FlutterActivity\nimport io.flutter.embedding.engine.FlutterEngine\nimport io.flutter.plugin.common.MethodChannel\nimport java.io.File\n\nclass MainActivity: FlutterActivity() {\n  private val CHANNEL = &quot;com.example.apktool&quot;\n\n  override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {\n    super.configureFlutterEngine(flutterEngine)\n    MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {\n      call, result -&gt;\n      if (call.method == &quot;decodeApk&quot;) {\n        val apkFilePath = call.arguments&lt;String&gt;()\n        val outputPath = decodeApk(apkFilePath)\n        if (outputPath != null) {\n          result.success(outputPath)\n        } else {\n          result.error(&quot;UNAVAILABLE&quot;, &quot;Decoding failed&quot;, null)\n        }\n      } else {\n        result.notImplemented()\n      }\n    }\n  }\n\n  private fun decodeApk(apkFilePath: String): String? {\n    return try {\n      val apkToolCommand = &quot;java -jar ${filesDir.absolutePath}/libs/apktool.jar d -f $apkFilePath -o ${filesDir.absolutePath}/decoded_apk&quot;\n      val process = Runtime.getRuntime().exec(apkToolCommand)\n      process.waitFor()\n      val outputPath = File(filesDir, &quot;decoded_apk&quot;)\n      if (outputPath.exists()) outputPath.absolutePath else null\n    } catch (e: Exception) {\n      e.printStackTrace()\n      null\n    }\n  }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}