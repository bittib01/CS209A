{
  "question": {
    "tags": [
      "java",
      "java-17",
      "jpackage",
      "harfbuzz"
    ],
    "owner": {
      "account_id": 2919557,
      "reputation": 7643,
      "user_id": 2502126,
      "user_type": "registered",
      "accept_rate": 20,
      "profile_image": "https://www.gravatar.com/avatar/fae66f557902359d7cc278076d1a9ef7?s=256&d=identicon&r=PG",
      "display_name": "Buzz Moschetti",
      "link": "https://stackoverflow.com/users/2502126/buzz-moschetti"
    },
    "is_answered": false,
    "view_count": 311,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1722380346,
    "creation_date": 1714486615,
    "last_edit_date": 1714494456,
    "question_id": 78409144,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78409144/how-to-fix-harfbuzz-external-dependency-in-os-x-14-3-java-17-jpackage",
    "title": "how to fix harfbuzz external dependency in OS X 14.3 java 17 jpackage",
    "body": "<p>The standard install of openjdk 17 on OS X using <code>brew</code> also installs the <code>harfbuzz</code> text shaping library because <code>libfontmanager.dylib</code> depends on it:</p>\n<pre><code>$ otool -L libexec/openjdk.jdk/Contents/Home/lib/libfontmanager.dylib\nlibexec/openjdk.jdk/Contents/Home/lib/libfontmanager.dylib:\n    /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home/lib/libfontmanager.dylib (compatibility version 1.0.0, current version 1.0.0)\n    @loader_path/../../../../../../../../opt/harfbuzz/lib/libharfbuzz.0.dylib (compatibility version 60811.0.0, current version 60811.0.0)\n</code></pre>\n<p>This is &quot;fine&quot; for local execution but if a standalone dmg install is required, <code>jpackage</code> does not pick up the dependency and the dmg will fail to launch on a system with no java 17 installed.  In fact, <code>harfbuzz</code> itself depends on other libs that are not part of the standard java 17 install:</p>\n<pre><code>$ otool -L libharfbuzz.0.dylib \n...\n    /opt/homebrew/opt/freetype/lib/libfreetype.6.dylib (compatibility version 27.0.0, current version 27.1.0)\n    /opt/homebrew/opt/glib/lib/libglib-2.0.0.dylib (compatibility version 7801.0.0, current version 7801.1.0)\n    /opt/homebrew/opt/graphite2/lib/libgraphite2.3.dylib (compatibility version 3.0.0, current version 3.2.1)\n...\n</code></pre>\n<p>What is an appropriate workaround?  My application uses the <code>javafx</code> module and is a GUI.  Can I surgically remove the <code>harfbuzz</code> dependency if I am not doing any text shaping?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}