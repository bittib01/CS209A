{
  "question": {
    "tags": [
      "java",
      "android",
      "react-native",
      "expo"
    ],
    "owner": {
      "account_id": 8807543,
      "reputation": 81,
      "user_id": 6581640,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/ffa258ac089c0cccf3142e36c1b1e75c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "DavidNy",
      "link": "https://stackoverflow.com/users/6581640/davidny"
    },
    "is_answered": false,
    "view_count": 1158,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1719220382,
    "creation_date": 1715873576,
    "question_id": 78491034,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78491034/expo-51-and-gradle-8-7-returning-a-lot-of-errors-when-building",
    "title": "EXPO 51 and gradle 8.7 returning a lot of errors when building",
    "body": "<p>I'm currently working on a react native project and I have recently updated expo from 48 to 51 and gradle from 8.0 to 8.7 but I've been running into a lot of issues while building and I don't understand what's happening. If anyone has any idea please let me know</p>\n<p>current configuration</p>\n<p>// android =&gt; build.gradle</p>\n<pre><code>buildscript {\n    ext {\n        minSdkVersion = Integer.parseInt(findProperty('android.minSdkVersion') ?: '24')\n        compileSdkVersion = Integer.parseInt(findProperty('android.compileSdkVersion') ?: '34')\n        targetSdkVersion = Integer.parseInt(findProperty('android.targetSdkVersion') ?: '33')\n        kotlinVersion = findProperty('android.kotlinVersion') ?: '1.8.10'\n        frescoVersion = findProperty('expo.frescoVersion') ?: '2.5.0'\n        ndkVersion = &quot;23.1.7779620&quot;\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath('com.android.tools.build:gradle:8.7')\n        classpath('com.facebook.react:react-native-gradle-plugin')\n    }\n}\n\nallprojects {\n    repositories {\n        maven {\n            url(new File(['node', '--print', &quot;require.resolve('react-native/package.json')&quot;].execute(null, rootDir).text.trim(), '../android'))\n        }\n        maven {\n            url(new File(['node', '--print', &quot;require.resolve('jsc-android/package.json')&quot;].execute(null, rootDir).text.trim(), '../dist'))\n        }\n\n        google()\n        mavenCentral()\n        maven { url 'https://www.jitpack.io' }\n    }\n}\n</code></pre>\n<p>When I run the command below, it starts building but then get a lot of errors</p>\n<pre><code>eas build --platform android\n</code></pre>\n<p>List of errors</p>\n<pre><code>FAILURE: Build completed with 2 failures.\n1: Task failed with an exception.\n-----------\n* What went wrong:\nExecution failed for task ':app:compileReleaseJavaWithJavac'.\n&gt; Compilation failed; see the compiler error output for details.\n* Try:\n&gt; Run with --info option to get more log output.\n&gt; Run with --scan to get full insights.\n==============================================================================\n2: Task failed with an exception.\n-----------\n* What went wrong:\nExecution failed for task ':expo-modules-core:buildCMakeRelWithDebInfo[arm64-v8a]'.\n&gt; com.android.ide.common.process.ProcessException: ninja: Entering directory `/home/expo/workingdir/build/node_modules/expo-modules-core/android/.cxx/RelWithDebInfo/44jo3q1u/arm64-v8a'\n  [1/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/NativeModule.cpp.o\n  [2/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/LazyObject.cpp.o\n  [3/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/ObjectDeallocator.cpp.o\n  [4/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/SharedObject.cpp.o\n  [5/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/TypedArray.cpp.o\n  [6/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/JSIUtils.cpp.o\n  [7/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JNIDeallocator.cpp.o\n  [8/31] Building CXX object CMakeFiles/expo-modules-core.dir/home/expo/workingdir/build/node_modules/expo-modules-core/common/cpp/EventEmitter.cpp.o\n  [9/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JNIInjector.cpp.o\n  [10/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/Exceptions.cpp.o\n  [11/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JNIFunctionBody.cpp.o\n  [12/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/ExpoModulesHostObject.cpp.o\n  [13/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/types/FrontendConverterProvider.cpp.o\n  [14/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaReferencesCache.cpp.o\n  [15/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JSReferencesCache.cpp.o\n  [16/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptFunction.cpp.o\n  [17/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JSIContext.cpp.o\n  [18/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptModuleObject.cpp.o\n  FAILED: CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptModuleObject.cpp.o \n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++ --target=aarch64-none-linux-android24 --sysroot=/home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot -Dexpo_modules_core_EXPORTS -I/home/expo/.gradle/caches/transforms-4/1b0d40195752a48d3828f4fabd5bb28b/transformed/jetified-react-android-0.74.1-release/prefab/modules/reactnativejni/include/react -I/home/expo/workingdir/build/node_modules/react-native/ReactAndroid/src/main/jni/react/turbomodule -I/home/expo/workingdir/build/node_modules/expo-modules-core/android/../common/cpp -I/home/expo/workingdir/build/node_modules/expo-modules-core/android/src/fabric -isystem /home/expo/.gradle/caches/transforms-4/ecfdad561a37bc96224ca22b4a190131/transformed/jetified-fbjni-0.6.0/prefab/modules/fbjni/include -isystem /home/expo/.gradle/caches/transforms-4/1b0d40195752a48d3828f4fabd5bb28b/transformed/jetified-react-android-0.74.1-release/prefab/modules/jsi/include -isystem /home/expo/.gradle/caches/transforms-4/1b0d40195752a48d3828f4fabd5bb28b/transformed/jetified-react-android-0.74.1-release/prefab/modules/reactnativejni/include -isystem /home/expo/.gradle/caches/transforms-4/1b0d40195752a48d3828f4fabd5bb28b/transformed/jetified-react-android-0.74.1-release/prefab/modules/folly_runtime/include -isystem /home/expo/.gradle/caches/transforms-4/1b0d40195752a48d3828f4fabd5bb28b/transformed/jetified-react-android-0.74.1-release/prefab/modules/react_nativemodule_core/include -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -D_FORTIFY_SOURCE=2 -Wformat -Werror=format-security -fexceptions -frtti -stdlib=libc++ -DREACT_NATIVE_TARGET_VERSION=74 -O2 -g -DNDEBUG -fPIC -DFOLLY_NO_CONFIG=1 -DFOLLY_HAVE_CLOCK_GETTIME=1 -DFOLLY_USE_LIBCPP=1 -DFOLLY_CFG_NO_COROUTINES=1 -DFOLLY_MOBILE=1 -DFOLLY_HAVE_RECVMMSG=1 -DFOLLY_HAVE_PTHREAD=1 -DFOLLY_HAVE_XSI_STRERROR_R=1 -O2 -frtti -fexceptions -Wall -fstack-protector-all -DUSE_HERMES=0 -DUNIT_TEST=0 -std=gnu++20 -MD -MT CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptModuleObject.cpp.o -MF CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptModuleObject.cpp.o.d -o CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptModuleObject.cpp.o -c /home/expo/workingdir/build/node_modules/expo-modules-core/android/src/main/cpp/JavaScriptModuleObject.cpp\n  /home/expo/workingdir/build/node_modules/expo-modules-core/android/src/main/cpp/JavaScriptModuleObject.cpp:148:28: error: no viable constructor or deduction guide for deduction of template arguments of 'weak_ptr'\n      auto weakConstructor = std::weak_ptr(constructor);\n                             ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4690:51: note: candidate template ignored: couldn't infer template argument '_Tp'\n      template&lt;class _Yp&gt; _LIBCPP_INLINE_VISIBILITY weak_ptr(shared_ptr&lt;_Yp&gt; const&amp; __r,\n                                                    ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4679:28: note: candidate template ignored: could not match 'weak_ptr' against 'shared_ptr'\n  class _LIBCPP_TEMPLATE_VIS weak_ptr\n                             ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4694:5: note: candidate template ignored: could not match 'weak_ptr' against 'shared_ptr'\n      weak_ptr(weak_ptr const&amp; __r) _NOEXCEPT;\n      ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4695:51: note: candidate template ignored: could not match 'weak_ptr' against 'shared_ptr'\n      template&lt;class _Yp&gt; _LIBCPP_INLINE_VISIBILITY weak_ptr(weak_ptr&lt;_Yp&gt; const&amp; __r,\n                                                    ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4701:5: note: candidate template ignored: could not match 'weak_ptr' against 'shared_ptr'\n      weak_ptr(weak_ptr&amp;&amp; __r) _NOEXCEPT;\n      ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4702:51: note: candidate template ignored: could not match 'weak_ptr' against 'shared_ptr'\n      template&lt;class _Yp&gt; _LIBCPP_INLINE_VISIBILITY weak_ptr(weak_ptr&lt;_Yp&gt;&amp;&amp; __r,\n                                                    ^\n  /home/expo/Android/Sdk/ndk/23.1.7779620/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/memory:4689:23: note: candidate function template not viable: requires 0 arguments, but 1 was provided\n      _LIBCPP_CONSTEXPR weak_ptr() _NOEXCEPT;\n                        ^\n  1 error generated.\n  [19/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptRuntime.cpp.o\n  [20/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptObject.cpp.o\n  [21/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaCallback.cpp.o\n  [22/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptTypedArray.cpp.o\n  [23/31] Building CXX object CMakeFiles/expo-modules-core.dir/src/main/cpp/JavaScriptValue.cpp.o\n  ninja: build stopped: subcommand failed.\n  \n  C++ build system [build] failed while executing:\n      /home/expo/Android/Sdk/cmake/3.22.1/bin/ninja \\\n        -C \\\n        /home/expo/workingdir/build/node_modules/expo-modules-core/android/.cxx/RelWithDebInfo/44jo3q1u/arm64-v8a \\\n        expo-modules-core\n    from /home/expo/workingdir/build/node_modules/expo-modules-core/android\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n&gt; Get more help at https://help.gradle.org.\n==============================================================================\nBUILD FAILED in 7m 16s\n568 actionable tasks: 568 executed\nError: Gradle build failed with unknown error. See logs for the &quot;Run gradlew&quot; phase for more information.\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}