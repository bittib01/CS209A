{
  "question": {
    "tags": [
      "java",
      "logback",
      "graalvm",
      "graalvm-native-image"
    ],
    "owner": {
      "account_id": 1247323,
      "reputation": 1948,
      "user_id": 1319938,
      "user_type": "registered",
      "accept_rate": 67,
      "profile_image": "https://i.sstatic.net/Og98Q.jpg?s=256",
      "display_name": "mah454",
      "link": "https://stackoverflow.com/users/1319938/mah454"
    },
    "is_answered": true,
    "view_count": 1439,
    "accepted_answer_id": 77959581,
    "answer_count": 3,
    "score": 1,
    "last_activity_date": 1727625441,
    "creation_date": 1706078793,
    "last_edit_date": 1706082898,
    "question_id": 77871016,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77871016/java-17-native-image-logback",
    "title": "Java 17+ Native-Image Logback",
    "body": "<p>How to configure maven to compile native image with logback ?<br />\nthis is my environment :</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;imageName&gt;output&lt;/imageName&gt;\n                    &lt;mainClass&gt;ir.moke.ni.MainClass&lt;/mainClass&gt;\n                    &lt;buildArgs&gt;\n                        &lt;buildArgs&gt;--initialize-at-build-time=ch.qos.logback,org.slf4j&lt;/buildArgs&gt;\n                        &lt;buildArgs&gt;-H:ReflectionConfigurationFiles=src/main/resources/META-INF/reflection-config.json&lt;/buildArgs&gt;\n                        &lt;buildArg&gt;-H:IncludeResources=logback.xml&lt;/buildArg&gt;\n                        &lt;buildArg&gt;-H:+UnlockExperimentalVMOptions&lt;/buildArg&gt;\n                        &lt;buildArg&gt;-H:Log=registerResource:5&lt;/buildArg&gt;\n                        &lt;buildArg&gt;--initialize-at-build-time=ch.qos.logback,org.slf4j&lt;/buildArg&gt;\n                    &lt;/buildArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>logback.xml :</p>\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;\n            &lt;Pattern&gt;\n                %d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n\n            &lt;/Pattern&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=&quot;ir.moke&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n    &lt;/logger&gt;\n\n    &lt;root level=&quot;error&quot;&gt;\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>reflection-config.json :</p>\n<pre><code>[\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.DateConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.MessageConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ThrowableProxyConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.NopThrowableInformationConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ContextNameConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldYellowCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.LoggerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.ReplacingCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldBlueCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.CyanCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.RedCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.WhiteCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.PropertyConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ExtendedThrowableProxyConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.RootCauseFirstThrowableProxyConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.MethodOfCallerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.LevelConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.IdentityCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldWhiteCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.MarkerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldCyanCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldMagentaCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.RelativeTimeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.MagentaCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ClassOfCallerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.LineOfCallerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.FileOfCallerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldGreenCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.LocalSequenceNumberConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.YellowCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ExtendedThrowableProxyConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.color.HighlightingCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.GrayCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.MDCConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ClassOfCallerConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BoldRedCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.GreenCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.core.pattern.color.BlackCompositeConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.ThreadConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;ch.qos.logback.classic.pattern.LineSeparatorConverter&quot;,\n    &quot;allDeclaredConstructors&quot;: true\n  }\n]\n</code></pre>\n<p>my simple main class :</p>\n<pre><code>package ir.moke.ni;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class MainClass {\n    private static final Logger logger = LoggerFactory.getLogger(MainClass.class);\n\n    static {\n        System.out.println(&quot;Application started&quot;);\n    }\n    public static void main(String[] args) {\n        logger.info(&quot;This is INFO log&quot;);\n        logger.warn(&quot;This is WARN log&quot;);\n        logger.debug(&quot;This is DEBUG log&quot;);\n        logger.error(&quot;This is ERROR log&quot;);\n        logger.trace(&quot;This is TRACE log&quot;);\n    }\n}\n</code></pre>\n<p>and this is directory tree :</p>\n<pre><code>logback-project/\n├── pom.xml\n└── src\n    └── main\n        ├── java\n        │   └── ir\n        │       └── moke\n        │           └── ni\n        │               └── MainClass.java\n        └── resources\n            ├── logback.xml\n            └── META-INF\n                └── reflection-config.json\n</code></pre>\n<p>project generate native image without any problem but log does not work !<br />\nHow to fix this problem ?<br />\nNote : I try making a series of educational projects about native image, But I can not solve this case!! <a href=\"https://github.com/mah454/native-image\" rel=\"nofollow noreferrer\">Tutorial Project Repository</a></p>\n<hr />\n<p><strong>UPDATE:</strong><br />\nInteresting, I implement logback programmatically (without logback.xml) , <a href=\"https://github.com/mah454/native-image/tree/main/10-logback-programmatically\" rel=\"nofollow noreferrer\">this project</a> does work without any problem .</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}