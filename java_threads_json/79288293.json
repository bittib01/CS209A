{
  "question": {
    "tags": [
      "java",
      "amazon-web-services",
      "amazon-s3",
      "aws-sdk"
    ],
    "owner": {
      "account_id": 5619788,
      "reputation": 1622,
      "user_id": 4450024,
      "user_type": "registered",
      "accept_rate": 99,
      "profile_image": "https://i.sstatic.net/WMErl.jpg?s=256",
      "display_name": "Nunyet Cal&#231;ada",
      "link": "https://stackoverflow.com/users/4450024/nunyet-cal%c3%a7ada"
    },
    "is_answered": true,
    "view_count": 446,
    "accepted_answer_id": 79309486,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1735216897,
    "creation_date": 1734446161,
    "last_edit_date": 1734681094,
    "question_id": 79288293,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79288293/awssdk-services-s3-the-bucket-you-are-attempting-to-access-must-be-addressed-us",
    "title": "awssdk.services.s3: The bucket you are attempting to access must be addressed using the specified endpoint",
    "body": "<p>I have this piece of code:</p>\n<pre><code>    private String putS3Object(String objectKey, String mimeType, byte[] content) {\n\n S3Client s3 = S3Client.builder()\n            .region(Region.EU_CENTRAL_1) // Set region to eu-central-1\n            .build();\n\n            log.info(&quot;adding {} - {} - to {} &quot;, objectKey, mimeType, bucketName);\n            try {\n                PutObjectResponse response = s3.putObject(PutObjectRequest.builder()\n                                .bucket(bucketName)\n                                .contentType(mimeType)\n                                .key(objectKey)\n                                .acl(ObjectCannedACL.PUBLIC_READ)\n                                .build(),\n                        RequestBody.fromBytes(content));\n    \n                return response.eTag();\n    \n            } catch (S3Exception e) {\n                log.error(e.getMessage());\n            }\n            return &quot;&quot;;\n        }\n</code></pre>\n<p>but I have this error:</p>\n<pre><code>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. (Service: S3, Status Code: 301, Request ID: L75KCJ8A7K7WGQNS, Extended Request ID: BsqLF6F+HWW1CoEtVgZxe455hjsacpWCmWIXxwVFn7EnZgYleNPM7N818XYT8KP+8IpkWUA+iMOCRdgUFsy24438Q==)\n</code></pre>\n<p>and trying this is fine:</p>\n<pre><code>aws s3 cp pullpointer.svg s3://myxwaveq/\n</code></pre>\n<p>on the logs:</p>\n<pre><code>2024-12-17 17:10:32.233 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@connectSocket(366) - Connecting socket to myxwaveq.s3.eu-west-1.amazonaws.com/3.5.72.145:443 with timeout 2000\n2024-12-17 17:10:32.257 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@createLayeredSocket(430) - Enabled protocols: [TLSv1.3, TLSv1.2]\n2024-12-17 17:10:32.258 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@createLayeredSocket(431) - Enabled cipher suites:[TLS_AES_256_GCM_SHA384, TLS_AES_128_GCM_SHA256, TLS_CHACHA20_POLY1305_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\n2024-12-17 17:10:32.259 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@debug(84) - socket.getSupportedProtocols(): [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv3, SSLv2Hello], socket.getEnabledProtocols(): [TLSv1.3, TLSv1.2]\n2024-12-17 17:10:32.259 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@debug(84) - TLS protocol enabled for SSL handshake: [TLSv1.2, TLSv1.1, TLSv1, TLSv1.3]\n2024-12-17 17:10:32.259 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@createLayeredSocket(435) - Starting handshake\n2024-12-17 17:10:32.303 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@verifyHostname(465) - Secure session established\n2024-12-17 17:10:32.304 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@verifyHostname(466) -  negotiated protocol: TLSv1.3\n2024-12-17 17:10:32.309 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@verifyHostname(467) -  negotiated cipher suite: TLS_AES_128_GCM_SHA256\n2024-12-17 17:10:32.310 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@verifyHostname(475) -  peer principal: CN=*.s3-eu-west-1.amazonaws.com\n2024-12-17 17:10:32.310 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@verifyHostname(484) -  peer alternative names: [s3-eu-west-1.amazonaws.com, *.s3-eu-west-1.amazonaws.com, s3.eu-west-1.amazonaws.com, *.s3.eu-west-1.amazonaws.com, s3.dualstack.eu-west-1.amazonaws.com, *.s3.dualstack.eu-west-1.amazonaws.com, *.s3.amazonaws.com, *.s3-control.eu-west-1.amazonaws.com, s3-control.eu-west-1.amazonaws.com, *.s3-control.dualstack.eu-west-1.amazonaws.com, s3-control.dualstack.eu-west-1.amazonaws.com, *.s3-accesspoint.eu-west-1.amazonaws.com, *.s3-accesspoint.dualstack.eu-west-1.amazonaws.com, *.s3-deprecated.eu-west-1.amazonaws.com, s3-deprecated.eu-west-1.amazonaws.com, s3-external-3.amazonaws.com, *.s3-external-3.amazonaws.com]\n2024-12-17 17:10:32.311 [scheduling-1] DEBUG [] s.a.a.h.a.i.conn.SdkTlsSocketFactory@verifyHostname(488) -  issuer principal: CN=Amazon RSA 2048 M01, O=Amazon, C=US\n2024-12-17 17:10:32.314 [scheduling-1] DEBUG [] s.a.a.h.a.internal.net.SdkSslSocket@debug(84) - created: myxwaveq.s3.eu-west-1.amazonaws.com/3.5.72.145:443\n2024-12-17 17:10:32.340 [scheduling-1] DEBUG [] software.amazon.awssdk.request@debug(84) - Received error response: software.amazon.awssdk.services.s3.model.S3Exception: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. (Service: S3, Status Code: 301, Request ID: V7kAQWWBTQ99YJKM5M12, Extended Request ID: VvTW1PA9XItafKTy7qGq7t3+vc98jiu5643yjPjUHjiW3FbDff1UtALT/L7KNt2/OXexiS6eVS2YaKuKeL3M/PN2MeSUW9Vjrfuotzyu)\n2024-12-17 17:10:32.341 [scheduling-1] DEBUG [] s.a.a.h.a.internal.net.SdkSslSocket@debug(84) - closing myxwaveq.s3.eu-west-1.amazonaws.com/3.5.72.145:443\n2024-12-17 17:10:32.343 [scheduling-1] ERROR [] c.m.service.ObjectStorageService@putS3Object(189) - The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. (Service: S3, Status Code: 301, Request ID: V127WBTQ9KLYJKM5M12, Extended Request ID: VvTW1PA9XItafKTl9b7qGq7t3+vcOyjPjUHjiW3FbDff1UtALT/L7KNt2/OXexiS6eVS2YaKuKeL3M/PN2MeSUW9Vjrfuotzyu)\n</code></pre>\n<p><a href=\"https://i.sstatic.net/AHw3Iw8J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/AHw3Iw8J.png\" alt=\"enter image description here\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}