{
  "question": {
    "tags": [
      "java",
      "data-structures",
      "queue"
    ],
    "owner": {
      "account_id": 44595710,
      "reputation": 11,
      "user_id": 31835018,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/0gIbdRCY.jpg?s=256",
      "display_name": "Hercules",
      "link": "https://stackoverflow.com/users/31835018/hercules"
    },
    "is_answered": true,
    "view_count": 109,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1762589222,
    "creation_date": 1762584175,
    "last_edit_date": 1762589222,
    "question_id": 79813002,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79813002/sometimes-wrong-output-in-java-queue-simulation",
    "title": "Sometimes wrong output in Java queue simulation",
    "body": "<p><strong>Problem summary:</strong><br />\nEach person in line has <code>tickets[i]</code> tickets to buy. Every second</p>\n<ul>\n<li><p>The person at the front buys <strong>one ticket</strong>.</p>\n</li>\n<li><p>If they still need more tickets, they move to the <em>end of the queue</em>.</p>\n</li>\n</ul>\n<p>We need to find how many seconds it takes for the person at index <code>k</code> to finish buying their tickets.</p>\n<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int timeRequiredToBuy(int[] tickets, int k) {\n    Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\n    for (int i = 0; i &lt; tickets.length; i++) {\n        queue.add(i);\n    }\n\n    int time = 0;\n    while (!queue.isEmpty()) {\n        int person = queue.poll();\n        if (!queue.isEmpty()) {\n            tickets[queue.peek()]--;\n        } else {\n            tickets[person]--;\n        }\n        time++;\n        if (tickets[person] &gt; 0) {\n            queue.add(person);\n        }\n        if (person == k &amp;&amp; tickets[person] == 0) {\n            break;\n        }\n    }\n\n    return time;\n}\n</code></pre>\n<pre><code>tickets =\n[83,86,38,31,59,25,89,71,54,71,84]\nk =1\nOutput\n688\nExpected\n687\n</code></pre>\n<p>Why does this logic result in a value that is higher than the expected one? How would I correctly track the tickets for each person without accidentally decrementing the wrong one?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}