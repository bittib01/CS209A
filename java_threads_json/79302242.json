{
  "question": {
    "tags": [
      "java",
      "sql-server",
      "spring-boot",
      "jdbc",
      "mssql-jdbc"
    ],
    "owner": {
      "account_id": 10078375,
      "reputation": 361,
      "user_id": 7674453,
      "user_type": "registered",
      "accept_rate": 75,
      "profile_image": "https://www.gravatar.com/avatar/2056dc9f525f2a101e5c6e3cf21e9fad?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Vaish MK",
      "link": "https://stackoverflow.com/users/7674453/vaish-mk"
    },
    "is_answered": false,
    "view_count": 282,
    "closed_date": 1734944319,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1734934637,
    "creation_date": 1734932483,
    "last_edit_date": 1734934637,
    "question_id": 79302242,
    "link": "https://stackoverflow.com/questions/79302242/mssql-jdbc-the-driver-could-not-establish-a-secure-connection-to-sql-server-us",
    "closed_reason": "Duplicate",
    "title": "MSSQL jdbc - The driver could not establish a secure connection to SQL server using SSL encryption. Error: Unexpected rethrowing",
    "body": "<p>I'm using springboot with Java 15. The version for the jdbc driver is not mentioned in the POM file.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n&lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is the application-prod.properties</p>\n<pre><code>spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver\nspring.jpa.praperties.hibernate.dialect=org.hibernate.dialect.SQLServer2012Dialect\nspring.datasource.url=jdbc:sqlserver://17x.1x.2x.8x:14xx; \ndatabaseName=xxxxxxaabcbx;\nspring.datasource.username=xxxabcxUser\nspring.datasource.password=xxxsxxssx\n</code></pre>\n<p>The similar configs run fine on the dev machine. But on the prod machine it works well but at some point it starts giving the error</p>\n<pre><code>Caused by: java.sql.SQLTransientConnectionException: HikariPool-l Connection not available, request timed out after 172291ms.\nat com.zakker.hikari.pool.HikariPool.createTimeoutException (HikariFool.java:695)\nat.com.zaxxer.hikari.pool.HikariPool.getConnection (HikariPool.java:197)\nat com.zaxxer.hikari.pool.HikariPool.getConnection (HikariPool.java:162)\nat com.zaxxer.hikari.HikariDataSource.getConnection (HikariDataSource.java:128)\nat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection (DatasourceConnectionProviderImpl.java:122)\nat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection (NonContextual JdbcConnectionAccess.java:38)\nat org.hibernate-resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded (LogicalConnectionManagedImpl.java:108)\n131 common frames omitted\n\nCaused by: secure connection to SQL Server by using Secure Sockets Layer (55L) encryption. **Error: &quot;Unexpected rethrowing&quot;**\nat com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate (SQLServerConnection.java:3151) \nat com.microsoft.agleerver.jdbc.TD5Channel.enableSSL(IOBuffer.java:1912)\nat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper (SQLServerConnection.java:2708)\nat com.microsoft.agiserver.jdbc.SQLServerConnection. login (SQLServerConnection.java:2362) \nat com.microsoft.aqlserver.jdbc.SQLServerConnection.connectInternal (SQLServerConnection.java:2213)\nat com.microsoft..sqlserver.jdbc.SQLServerConnection.connect (SQLServerConnection.java:1276)\nat.com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:861)\nat com.sanser.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)\nat com.zakner.hikari.pool.Poolbase.newConnection (FoolBase.java:358)\nat com.saxxer.hikari.pool.PoolBase.newPoolEntry (PoolBase.java:206) com.zaxxer-hikari.pool.HikariPool.createPoolEntry (HikariPool.java:477)\nat at com.zaxxer.hikari.pool, HikariPool.access100 (HikariPool.java:71)\nat com.saxxer hikari.pool. Hikari Pools FoolEntryCreator.call (HikariPool.java:725) at com.saxxer/hikari.pool.RikersPool$PoolEntryCreator.doll (HikariPool.java:711)\nat java.base/java.util.concurzent. FutureTask.run(FutureTask.java:264)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1130) at java.bane/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\n</code></pre>\n<p>Please help with why this is occuring only in the prod machine and why is it not giving the error right from the start? Is it due to the jdbc version not being mentioned in the pom?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}