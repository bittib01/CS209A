{
  "question": {
    "tags": [
      "java",
      "http",
      "sockets",
      "server",
      "blocking"
    ],
    "owner": {
      "account_id": 37785993,
      "reputation": 63,
      "user_id": 28427218,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/ec0c9e1227b3af86e87ab87cf277c3c5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "ygmelo",
      "link": "https://stackoverflow.com/users/28427218/ygmelo"
    },
    "is_answered": true,
    "view_count": 128,
    "accepted_answer_id": 79842733,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1765580761,
    "creation_date": 1765355856,
    "last_edit_date": 1765358175,
    "question_id": 79842710,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79842710/fix-blocking-issue-when-trying-to-parse-http-request-in-java",
    "title": "fix blocking issue when trying to parse HTTP request in java",
    "body": "<p>I'm trying to parse HTTP requests for fun and I'm currently stuck because the method I'm using blocks until input is received.</p>\n<pre><code>byte[] buffer = new byte[1024];\nwhile (!request.isDone()) {\n  int n = input.read(buffer);\n\n  if (n == -1) {\n    break;\n  }\n  request.parseRequest(buffer, n);\n}\nreturn request;\n</code></pre>\n<p>I'm trying to read into a buffer and parsing the request until it's done. I have a small class which creates a <code>ServerSocket</code> where I send in a simple <code>curl</code> request such as <code>curl -v http://localhost:5000/hello</code>. When my buffer is of a much smaller size like 8 bytes, the request is read in chunks and parsed correctly. But when my buffer is much bigger and can read the entire request in one go, only the request line gets parsed. Then, the loop above gets returned to and blocks on the third line where it needs to read. But <code>curl</code> keeps the connection alive and my program is just waiting for input that's never sent. Is there a viable solution to my problem as is other than looking for a non-blocking socket in java?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}