{
  "question": {
    "tags": [
      "java",
      "javafx",
      "controlsfx"
    ],
    "owner": {
      "account_id": 21837180,
      "reputation": 308,
      "user_id": 16131265,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/QuW5K.jpg?s=256",
      "display_name": "Achille004",
      "link": "https://stackoverflow.com/users/16131265/achille004"
    },
    "is_answered": true,
    "view_count": 123,
    "accepted_answer_id": 79842491,
    "answer_count": 1,
    "score": 3,
    "last_activity_date": 1765364900,
    "creation_date": 1765285258,
    "last_edit_date": 1765364900,
    "question_id": 79841955,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79841955/coltrolsfxs-auto-completion-not-showing-up",
    "title": "ColtrolsFx&#39;s auto completion not showing up",
    "body": "<p>I am trying to bind auto completions on a text field with the library controlsfx. The problem is that somehow on the packaged version of the app it doesn't show up, while in the gradle-run or tar/zip (no bundled jre) version yes.</p>\n<p>In the class scope:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private AutoCompletionBinding&lt;String&gt; softwareAutoCompletion;\nprivate AutoCompletionBinding&lt;String&gt; usernameAutoCompletion;\n</code></pre>\n<p>In the <code>void initialize(URL location, ResourceBundle resources)</code> scope:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Platform.runLater(() -&gt; {\n    softwareAutoCompletion = TextFields.bindAutoCompletion(editorSoftware, getSuggetstionProvider(possibleSoftwares));\n    usernameAutoCompletion = TextFields.bindAutoCompletion(editorUsername, getSuggetstionProvider(possibleUsernames));\n});\n\n// Update auto-completion when suggestions change\nsuggestionsUpdateTrigger.addListener((_, _, _) -&gt; Platform.runLater(() -&gt; {\n    if (softwareAutoCompletion != null) {\n        softwareAutoCompletion.dispose();\n        softwareAutoCompletion = TextFields.bindAutoCompletion(editorSoftware, getSuggetstionProvider(possibleSoftwares));\n    }\n    if (usernameAutoCompletion != null) {\n        usernameAutoCompletion.dispose();\n        usernameAutoCompletion = TextFields.bindAutoCompletion(editorUsername, getSuggetstionProvider(possibleUsernames));\n    }\n}));\n</code></pre>\n<p>With <code>Callback&lt;ISuggestionRequest, Collection&lt;String&gt;&gt; getSuggetstionProvider(List&lt;String&gt; sourceList)</code> which just checks if any software/username starts with the user text.</p>\n<p>I've tried swapping the <code>runLater</code> with a <code>skinProperty</code> listener on the text fields and it does not change, while a <code>sceneProperty</code> listener just makes the parent pane not show up at all.</p>\n<p>I'm on Windows 11, packaging with jpackage. No exceptions seem to be generated in all cases.</p>\n<p>Versions:</p>\n<ul>\n<li>java 25 2025-09-16 LTS</li>\n<li>javafx 25.0.1</li>\n<li>controlsfx 11.2.2</li>\n<li>wix 6.0.0+8c7432e</li>\n</ul>\n<p><strong>UPDATE</strong>: I created a sample application and it still shows the same signs.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        primaryStage.setTitle(&quot;Example App&quot;);\n        Pane pane = getPane();\n        primaryStage.setScene(new Scene(pane, 400, 300));\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    private Pane getPane() {\n        AnchorPane pane = new AnchorPane();\n\n        // Add ControlsFX components to the pane\n        ObservableList&lt;String&gt; items = FXCollections.observableArrayList();\n\n        TextField textField = new TextField();\n        textField.setLayoutX(50);\n        textField.setLayoutY(50);\n        textField.setPrefSize(300, 10);\n\n        textField.setOnAction(event -&gt; {\n            String input = textField.getText();\n            if (!input.isEmpty() &amp;&amp; !items.contains(input)) {\n                items.add(input);\n                textField.clear();\n            }\n        });\n        \n        AutoCompletionBinding&lt;String&gt; autoCompletion[] = new AutoCompletionBinding[1];\n\n        // Initialize auto-completion with the current items\n        Platform.runLater(() -&gt; autoCompletion[0] = TextFields.bindAutoCompletion(textField, getSuggetstionProvider(items)));\n\n        // Update auto-completion when suggestions change\n        items.addListener((ListChangeListener&lt;String&gt;) change -&gt; {\n            if (autoCompletion[0] != null) {\n                autoCompletion[0].dispose();\n                autoCompletion[0] = TextFields.bindAutoCompletion(textField, getSuggetstionProvider(items));\n            }\n        });\n\n        pane.getChildren().add(textField);\n        return pane;\n    }\n\n    private Callback&lt;ISuggestionRequest, Collection&lt;String&gt;&gt; getSuggetstionProvider(List&lt;String&gt; sourceList) {\n        return request -&gt; {\n            String userText = request.getUserText();\n            if (userText == null || userText.isEmpty()) return List.of();\n\n            String lowerUserText = userText.toLowerCase();\n            return sourceList.stream()\n                    .filter(s -&gt; s.toLowerCase().startsWith(lowerUserText))\n                    .toList();\n        };\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>import org.panteleyev.jpackage.ImageType\n\nplugins {\n    id 'java'\n    id 'application'\n\n    id 'org.openjfx.javafxplugin' version '0.1.0'\n    id 'org.panteleyev.jpackageplugin' version '1.7.6'\n}\n\nrepositories {\n    // Use Maven Central for resolving dependencies.\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.openjfx:javafx-base:25.0.1'\n    implementation 'org.openjfx:javafx-controls:25.0.1'\n    implementation 'org.openjfx:javafx-graphics:25.0.1'\n\n    implementation 'org.controlsfx:controlsfx:11.1.1'\n\n    // Use JUnit Jupiter for testing.\n    testImplementation libs.junit.jupiter\n\n    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'\n\n    // This dependency is used by the application.\n    implementation libs.guava\n}\n\n// Apply a specific Java toolchain to ease working on different environments.\njava {\n    sourceCompatibility = JavaVersion.VERSION_25\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(25)\n    }\n}\n\napplication {\n    // Define the main class for the application.\n    mainModule = 'org.example'\n    mainClass = 'org.example.App'\n\n    // JVM arguments\n    applicationDefaultJvmArgs = [\n        '--enable-native-access=javafx.graphics',\n        '--add-exports', 'javafx.base/com.sun.javafx.event=org.controlsfx.controls',\n    ]\n}\n\ntasks.named('test') {\n    // Use JUnit Platform for unit tests.\n    useJUnitPlatform()\n}\n\njavafx {\n    version = '25.0.1'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.graphics' ]\n}\n\njar {\n    archiveBaseName.set(rootProject.name)\n    manifest {\n        attributes 'Implementation-Title': 'Example App', 'Main-Class': 'org.example.App'\n    }\n}\n\ndef compileDir = rootProject.layout.projectDirectory.dir('compiled')\n\ntasks.register('readyAllJars', Copy) {\n    dependsOn tasks.jar\n    from configurations.runtimeClasspath\n    from tasks.named('jar').flatMap { it.archiveFile }\n    into layout.buildDirectory.dir('jars')\n}\n\njpackage {\n    dependsOn tasks.readyAllJars\n\n    type = ImageType.APP_IMAGE\n\n    appDescription = 'Mock application for demonstration purposes.'\n    appName = 'Example App'\n    appVersion = '0.0.1'\n    destination = compileDir\n    javaOptions = ['-Dfile.encoding=UTF-8']\n    module = 'org.example/org.example.App'\n    modulePaths = files(layout.buildDirectory.dir('jars'))\n    runtimeImage = file(System.getProperty('java.home'))\n    vendor = 'Achille004'\n\n    windows {\n        winConsole = true\n    }\n}\n</code></pre>\n<p>By running the application without any deferral it doesn't open (I guess it hangs), while adding <code>Platform.runLater</code> has the same result of not showing up.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}