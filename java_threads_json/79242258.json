{
  "question": {
    "tags": [
      "java",
      "swing",
      "nullpointerexception"
    ],
    "owner": {
      "account_id": 38063463,
      "reputation": 11,
      "user_id": 28575565,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/d8828fc49fc98830badd6f01c141ced6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "lorau",
      "link": "https://stackoverflow.com/users/28575565/lorau"
    },
    "is_answered": false,
    "view_count": 110,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1735936743,
    "creation_date": 1733078401,
    "last_edit_date": 1733859751,
    "question_id": 79242258,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79242258/how-can-i-make-sure-that-a-string-variable-is-set-before-the-panel-switch",
    "title": "How can I make sure that a String variable is set before the panel switch?",
    "body": "<p>I want to make a quiz game using Java. I used panels to display different &quot;stages&quot; of the quiz (more like different interfaces) and I used cardLayout to navigate through those panels (each panel is in a different file).</p>\n<p>I have a panel called <code>SubjectsPanel</code> in which, basically, there are a few buttons with subjects one can choose from. Pressing one of those buttons leads to another panel, <code>ModePanel</code>, in which there are two buttons, a &quot;Practice&quot; button and a &quot;Test&quot; one. Each of those buttons, if pressed, will open their respective panels and the quiz will finally start.</p>\n<p>The thing is, I want all the questions and options to be imported from a <code>.txt</code> file. This would work just fine if I use only one <code>.txt</code>, but I've made a <code>.txt</code> for each of the subjects that the player can choose from, and based on which button is pressed in the <code>SubjectsPanel</code>, I want the questions to be imported from its corresponding <code>.txt </code>.</p>\n<p>I've tried to compact the code as much as I could, so I've made a version of the quiz that does not really do what it should do (it actually does not work much and it looks quite bad), but that's not the point. It's to see where the problem might be.</p>\n<p>So:</p>\n<pre class=\"lang-none prettyprint-override\"><code>\npublic class App {\n    public static void main(String[] args) throws Exception {\n        SwingUtilities.invokeLater(() -&gt; new MainFrame());\n    }\n}\n</code></pre>\n<p>The <code>MainFrame</code> file:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\nclass MainFrame extends JFrame {\n    private CardLayout cardLayout;\n    private JPanel mainPanel;\n    private SharedData sharedData;\n\n    public MainFrame() {\n        setTitle(&quot;QUIZ&quot;);\n        setSize(1000, 750); // frame dimension\n        setLocationRelativeTo(null);\n        setVisible(true);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        sharedData = new SharedData();\n\n        // CardLayout for switching panels\n        cardLayout = new CardLayout();\n        mainPanel = new JPanel(cardLayout);\n\n        mainPanel.add(new SubjectsPanel(this, sharedData), &quot;SubjectsPanel&quot;);\n        mainPanel.add(new ModePanel(this, sharedData), &quot;ModePanel&quot;);\n        mainPanel.add(new PracticePanel(this, sharedData), &quot;PracticePanel&quot;);\n\n        add(mainPanel);\n        cardLayout.show(mainPanel, &quot;SubjectsPanel&quot;);\n    }\n\n    public void switchToPanel(String panelName) {\n        cardLayout.show(mainPanel, panelName);\n    }\n\n}\n</code></pre>\n<p>I've thought of making a shared class, that every other class can access, which looks like this:</p>\n<pre><code>public class SharedData {\n    public String subject;\n\n    public String getSubjectChosen() {\n        return this.subject;\n    }\n    \n    public void setSubjectChosen(String subject) {\n        this.subject = subject;\n    }\n}  \n</code></pre>\n<p>Then there is <code>SubjectsPanel</code>:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nclass SubjectsPanel extends JPanel {\n    JButton b1, b2;\n\n    public SubjectsPanel(MainFrame frame, SharedData sharedData) {\n\n        setLayout(new GridLayout(3, 2));\n\n        JButton b1 = new JButton(&quot;Anatomy&quot;);\n        JButton b2 = new JButton(&quot;Cellular Buiology&quot;);\n\n        b1.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 40));\n        b2.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 40));\n\n        add(b1);\n        add(b2);\n\n        b1.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                sharedData.setSubjectChosen(&quot;C:\\\\Users\\\\Utilizator\\\\Documents\\\\anatomy.txt&quot;);\n                System.out.println(&quot;1st bug print: &quot; + sharedData.getSubjectChosen()); // it displays the file path\n                frame.switchToPanel(&quot;ModePanel&quot;);\n            }\n        });\n\n        b2.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                sharedData.setSubjectChosen(&quot;C:\\\\Users\\\\Utilizator\\\\Documents\\\\biocell.txt&quot;);\n                frame.switchToPanel(&quot;ModePanel&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n<p>Then there is <code>ModePanel</code> for the two modes, test and practice:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nclass ModePanel extends JPanel {\n    public ModePanel(MainFrame frame, SharedData sharedData) {\n        setLayout(new GridLayout(0, 2));\n\n        JButton practiceButton = new JButton(&quot;Practice&quot;);\n        JButton testButton = new JButton(&quot;Test&quot;);\n\n        practiceButton.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 40));\n        testButton.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 40));\n\n        add(practiceButton);\n        add(testButton);\n\n        practiceButton.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                System.out.println(&quot;2nd bug print: &quot; + sharedData.getSubjectChosen()); // !!!!!it displays the file path \n                frame.switchToPanel(&quot;PracticePanel&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n<p>The <code>PracticePanel</code> (the <code>TestPanel</code> is very similar):</p>\n<pre><code>import java.awt.event.*;\nimport java.awt.*;\nimport javax.swing.*;\n\npublic class PracticePanel extends JPanel {\n    JLabel question;\n    JCheckBox c[] = new JCheckBox[4];\n    JButton b1, b2;\n    int q_curent = 0, n = 3;\n\n    QnA q;\n\n    PracticePanel(MainFrame frame, SharedData sharedData) {\n        String subjectPath = sharedData.getSubjectChosen(); // should get the chosen subject\n\n        System.out.println(subjectPath); // displays null\n\n        this.q = new QnA(subjectPath); // passing the chosen subject to QnA\n\n        setLayout(new GridLayout(7, 0));\n\n        question = new JLabel();\n        question.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 20));\n        add(question);\n\n        for (int i = 0; i &lt; 3; i++) {\n            c[i] = new JCheckBox();\n            add(c[i]);\n        }\n\n        b1 = new JButton(&quot;Next&quot;);\n        b2 = new JButton(&quot;Previous&quot;);\n\n        b1.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 18));\n        b2.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 18));\n\n        b2.setEnabled(false);\n\n        add(b1);\n        add(b2);\n        set();\n\n        // if the &quot;next&quot; button is pressed\n        b1.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n\n                q_curent++;\n                b2.setEnabled(true);\n                set();\n            }\n        });\n\n        // if the &quot;previous&quot; button is pressed\n        b2.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                q_curent--;\n                b1.setText(&quot;Next&quot;);\n                b1.setEnabled(true);\n                set();\n\n                if (q_curent == 0) {\n                    b2.setEnabled(false);\n                }\n            }\n        });\n    }\n\n    private void set() {\n        for (int i = 0; i &lt; n; i++) {\n            if (q_curent == i) {\n                question.setText(q.questions[q_curent]); // questions are displayed\n                for (int j = 0; j &lt; 3; j++) {\n                    c[j].setText(q.options[q_curent][j]); // answer options are displayed\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>And lastly, there is the class for importing the questions with their possible answer options:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class QnA {\n    public String[] questions;\n    public String[][] options;\n\n    public QnA(String subject) {\n        // importing the questions and their options from the .txt\n\n        try {\n            System.out.println(subject); //displays null\n\n            BufferedReader f = new BufferedReader(new FileReader(subject)); //error; the path is null\n\n            int nr_questions = 3;\n            questions = new String[nr_questions];\n            options = new String[nr_questions][3];\n\n            String linie;\n            int i = 0;\n\n            // reading from the file\n            while ((linie = f.readLine()) != null) {\n                linie = linie.trim();\n\n                if (linie.isEmpty())\n                    continue;\n\n                questions[i] = linie;\n\n                for (int j = 0; j &lt; 3; j++) {\n                    options[i][j] = f.readLine().trim();\n                }\n\n                i++;\n            }\n\n            // stop reading\n            f.close();\n        }\n\n        catch (IOException e) {\n            System.out.println(&quot;An error occurred: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>The problem is that when it reaches <code>PracticePanel</code>, the <code>sharedData</code> variable is null. I've implemented debug prints and I've kept some (the comments with exclamation marks at the beginning).\nIt might be something obvious, but I really don't know what I should do. Also, the code may have parts that look weird (for those who are experts) and I might have been smarter about organizing it but I'm still learning.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}