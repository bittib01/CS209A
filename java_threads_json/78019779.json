{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "unit-testing",
      "testing"
    ],
    "owner": {
      "account_id": 8717044,
      "reputation": 554,
      "user_id": 6521289,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/e42cbaf6482dd83657f84979f13f517f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "lak",
      "link": "https://stackoverflow.com/users/6521289/lak"
    },
    "is_answered": true,
    "view_count": 11667,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1728338909,
    "creation_date": 1708336914,
    "last_edit_date": 1708339551,
    "question_id": 78019779,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78019779/unit-testing-with-restclient-spring-boot",
    "title": "Unit testing with RestClient - Spring boot",
    "body": "<p>I'd like to add unit tests for an HTTP call, using <code>RestClient</code></p>\n<p>I've read a bit and seems like I can use <code>@RestClientTest</code> but that seems to be for integration tests (it starts the server).</p>\n<p><a href=\"https://www.baeldung.com/restclienttest-in-spring-boot\" rel=\"nofollow noreferrer\">https://www.baeldung.com/restclienttest-in-spring-boot</a></p>\n<p>With <code>restTemplate</code> I can do this.</p>\n<pre><code>@Mock\nprivate RestTemplate restTemplate;\n\nprivate void setRestTemplateResponse(MyResponse response) {\n  given(restTemplate.getForObject(\n                &quot;my-endpoint&quot;, MyRespose.class\n        )).willReturn(response);\n    }\n</code></pre>\n<p>So I was looking for a similar way to do it. Tried this but got a <code>NullPointerException</code> because <code>restClient.get()</code> is a method that comes from an interface</p>\n<pre><code>@Mock\nprivate RestClient restClient;\n\nprivate void setRestTemplateResponse(MyResponse response) {\n   given(restClient.get().uri(&quot;my-endpoint&quot;\n        ).retrieve().body(MyResponse.class)).willReturn(response);\n    }\n</code></pre>\n<hr />\n<p>EDIT #1</p>\n<p>Added:</p>\n<pre><code>@Autowired\nprivate RestClient restClient;\n@BeforeEach\n    void setup() {\n        this.restClient = RestClient.builder().build();\n        adapter = new MyServiceImpl(BASE_URL, restClient);\n    }\n</code></pre>\n<p>I'm not getting the exception, but now, it's actually making the request towards to endpoint which obviously fails</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}