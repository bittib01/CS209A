{
  "question": {
    "tags": [
      "java",
      "redis",
      "quarkus"
    ],
    "owner": {
      "account_id": 924763,
      "reputation": 1750,
      "user_id": 955755,
      "user_type": "registered",
      "accept_rate": 71,
      "profile_image": "https://www.gravatar.com/avatar/bab3d6eac3bdc2e530db285f993b1f0d?s=256&d=identicon&r=PG",
      "display_name": "Murrah",
      "link": "https://stackoverflow.com/users/955755/murrah"
    },
    "is_answered": true,
    "view_count": 834,
    "accepted_answer_id": 78662308,
    "answer_count": 3,
    "score": -1,
    "last_activity_date": 1727446262,
    "creation_date": 1717758526,
    "question_id": 78591551,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78591551/how-to-use-beforeall-in-my-tests-of-io-quarkus-redis-datasource-redisdatasource",
    "title": "How to use @BeforeAll in my tests of io.quarkus.redis.datasource.RedisDataSource",
    "body": "<p>I have a set of test classes in Quarkus that tests my app classes which use <code>io.quarkus.redis.datasource.RedisDataSource</code></p>\n<p>I want to run <code>@BeforeAll</code> on each test class to reseed the redis db with known data. The BeforeAll method must be static:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @BeforeAll\n  static void resetTestData() {\n    // use a static version of io.quarkus.redis.datasource.RedisDataSource; here \n    // so I can do something like:\n    // GraphCommands&lt;String&gt; gc = ds.graph();\n    // gc.graphQuery(redisdbkey, &quot;CREATE (:XXX {key:'abcd', name:'fred'})&quot;);\n  }\n</code></pre>\n<p>I can't work out how to make a static instance of <code>io.quarkus.redis.datasource.RedisDataSource;</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>RedisDataSource ds = new RedisDataSource();\n</code></pre>\n<p>Throws a compiler error &quot;Cannot instantiate the type RedisDataSource&quot;</p>\n<p>I tried making a Singleton instance like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Singleton\npublic class RedisDataSourceSingleton {\n  private static RedisDataSource instance;\n\n  @Inject\n  public RedisDataSourceSingleton(RedisDataSource ds) {\n      instance = ds;\n  }\n\n  public static RedisDataSource getInstance() {\n      if (instance == null) {\n          throw new IllegalStateException(&quot;RedisDataSource is not initialized yet.&quot;);\n      }\n      return instance;\n  }\n}\n</code></pre>\n<p>but using the singleton like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.quarkus.redis.datasource.RedisDataSource;\n\n// ...\n\n  @BeforeAll\n  static void resetTestData() {\n    RedisDataSource ds = RedisDataSourceSingleton.getInstance();\n    // use ds here\n  }\n</code></pre>\n<p>throws:\n&quot;The method getInstance() from the type RedisDataSourceSingleton refers to the missing type RedisDataSource&quot;</p>\n<p>Is there a way to get a static instance of <code>io.quarkus.redis.datasource.RedisDataSource</code> so I can use its methods in my <code>@BeforeAll</code> method? I am probably overthinking it!</p>\n<p>Thanks,\nMurray</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}