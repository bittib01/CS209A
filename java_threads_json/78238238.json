{
  "question": {
    "tags": [
      "java",
      "mongodb",
      "spring-boot"
    ],
    "owner": {
      "account_id": 4266393,
      "reputation": 21,
      "user_id": 3489417,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/tVRcd.jpg?s=256",
      "display_name": "Warlock",
      "link": "https://stackoverflow.com/users/3489417/warlock"
    },
    "is_answered": true,
    "view_count": 182,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1715976478,
    "creation_date": 1711629398,
    "last_edit_date": 1711629453,
    "question_id": 78238238,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78238238/how-to-import-two-pem-into-single-p12-keystore",
    "title": "How to import two .pem into single .p12 keystore?",
    "body": "<p>I have two certs in pem format:</p>\n<ul>\n<li>Server SSL Cert from Let's Encrypt</li>\n<li>Login cert (cert + private key) from MongoDB atlas</li>\n</ul>\n<p>When both are imported to single keystore, mongo driver throws:</p>\n<pre><code>com.mongodb.MongoCommandException: Command failed with error 8000 (AtlasError): 'certificate validation failed' on server ac-9g18w0d-shard-00-02.rrfpnfg.mongodb.net:27017. The full response is {&quot;ok&quot;: 0, &quot;errmsg&quot;: &quot;certificate validation failed&quot;, &quot;code&quot;: 8000, &quot;codeName&quot;: &quot;AtlasError&quot;}\n</code></pre>\n<p>When I keep them in different key-stores, it works fine.</p>\n<p>To import Let's Encrypt cert I used this guide:\n<a href=\"https://blog.ordina-jworks.io/security/2019/08/14/Using-Lets-Encrypt-Certificates-In-Java.html\" rel=\"nofollow noreferrer\">https://blog.ordina-jworks.io/security/2019/08/14/Using-Lets-Encrypt-Certificates-In-Java.html</a></p>\n<p>For MongoAtlas I was using this instruction: <a href=\"https://stackoverflow.com/a/54208558\">https://stackoverflow.com/a/54208558</a></p>\n<p>Also, I'm loading those certs as spring SSL bundle from single key-store:</p>\n<pre><code>spring:\n  ssl:\n    bundle:\n      jks:\n        server:\n          key:\n            alias: server\n          keystore:\n            location: keystore.p12\n            password: ${PASSWORD}\n            type: PKCS12\n        database:\n          key:\n            alias: mongodb\n          keystore:\n            location: keystore.p12\n            password: ${PASSWORD}\n            type: PKCS12\n  data:\n    mongodb:\n      uri: &lt;mongo+srv uri&gt;\n      ssl:\n        enabled: true\n        bundle: database\n</code></pre>\n<p>But every time I got mentioned earlier error. At this point, I'm not sure why it is not working with single key-store. Can you guys point me what I'm doing wrong? Thanks in advance.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}