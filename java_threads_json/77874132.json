{
  "question": {
    "tags": [
      "java",
      "android",
      "kotlin",
      "wifimanager"
    ],
    "owner": {
      "account_id": 30391329,
      "reputation": 1,
      "user_id": 23289947,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/853dfa803729f8b8401b0f9d53d54003?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "PM-Delgado",
      "link": "https://stackoverflow.com/users/23289947/pm-delgado"
    },
    "is_answered": false,
    "view_count": 368,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1725638771,
    "creation_date": 1706109003,
    "question_id": 77874132,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77874132/android-wifi-aware-error-when-creating-multiple-connections",
    "title": "Android WiFi Aware - Error when creating multiple connections",
    "body": "<p>Similarly to the <a href=\"https://stackoverflow.com/questions/77395274/android-wifi-aware-app-error-when-creating-multiple-networks-with-pixel-3a-xl/\">question</a> presented there, I'm currently developing an Android App that utilizes <a href=\"https://developer.android.com/develop/connectivity/wifi/wifi-aware\" rel=\"nofollow noreferrer\">Wi-Fi Aware API</a> in order to establish device-to-device connections. After the Discovery process is completed (via Publish/Subscribe mechanism) and devices know its peers, I'm able to open a device-to-device <a href=\"https://developer.android.com/develop/connectivity/wifi/wifi-aware#create_a_connection\" rel=\"nofollow noreferrer\">connection</a> to exchange data.</p>\n<p>However, this expected behaviour only happens when I'm testing in a scenario with a pair of devices, device A and B, where A acts as the Publisher and B as the Subscriber (for example). If I test with a third device - device C - acting as a Subscriber, I am not able to open a connection between device A and C.</p>\n<p>On the Publisher (Device A) I get these two error messages:\n<code>2024-01-24 14:45:20.054  1656-2060  WifiAwareDataPathStMgr  system_server E selectInterfaceForRequest: req=AwareNetworkRequestInformation: state=103, ns=WifiAwareNetworkSpecifier [type=0, role=1, clientId=254, sessionId=255, peerId=413, peerMac=&lt;null&gt;, securityConfig=WifiAwareDataPathSecurityConfig [cipherSuite=1, passphrase=&lt;non-null&gt;, PMK=&lt;null&gt;, PMKID=&lt;null&gt;], port=43619, transportProtocol=-1, channel=0, forceChannel=false], uid=10248, packageName=com.example.mscwfa1, interfaceName=null, pubSubId=1, specifiedPeerInstanceId=1, specifiedPeerDiscoveryMac=42F0F09263F4, equivalentSpecifiers=[NetworkRequest [ REQUEST id=3075, [ Transports: WIFI_AWARE Capabilities: NOT_RESTRICTED&amp;TRUSTED&amp;NOT_VPN Specifier: &lt;WifiAwareNetworkSpecifier [type=0, role=1, clientId=254, sessionId=255, peerId=413, peerMac=&lt;null&gt;, securityConfig=WifiAwareDataPathSecurityConfig [cipherSuite=1, passphrase=&lt;non-null&gt;, PMK=&lt;null&gt;, PMKID=&lt;null&gt;], port=43619, transportProtocol=-1, channel=0, forceChannel=false]&gt; Uid: 10248 RequestorUid: 10248 RequestorPkg: com.example.mscwfa1 UnderlyingNetworks: Null] ], ], NdpInfos[] - no interfaces available!</code></p>\n<p><code>2024-01-24 14:45:20.063  1656-2060  WifiAwareDataPathStMgr  system_server E  WifiAwareNetworkFactory.releaseNetworkFor: networkRequest=NetworkRequest [ REQUEST id=3075, [ Transports: WIFI_AWARE Capabilities: NOT_RESTRICTED&amp;TRUSTED&amp;NOT_VPN Specifier: &lt;WifiAwareNetworkSpecifier [type=0, role=1, clientId=254, sessionId=255, peerId=413, peerMac=&lt;null&gt;, securityConfig=WifiAwareDataPathSecurityConfig [cipherSuite=1, passphrase=&lt;non-null&gt;, PMK=&lt;null&gt;, PMKID=&lt;null&gt;], port=43619, transportProtocol=-1, channel=0, forceChannel=false]&gt; Uid: 10248 RequestorUid: 10248 RequestorPkg: com.example.mscwfa1 UnderlyingNetworks: Null] ] not in cache!? </code></p>\n<p>And on the second Subscriber (Device C), I get the NetworkCallback.onUnavailable and this error message:</p>\n<p><code>2024-01-24 14:45:20.440  1746-2653  WifiAwareDataPathStMgr  system_server E  WifiAwareNetworkFactory.releaseNetworkFor: networkRequest=NetworkRequest [ REQUEST id=3546, [ Transports: WIFI_AWARE Capabilities: NOT_RESTRICTED&amp;TRUSTED&amp;NOT_VPN Specifier: &lt;WifiAwareNetworkSpecifier [type=0, role=0, clientId=253, sessionId=255, peerId=388, peerMac=&lt;null&gt;, securityConfig=WifiAwareDataPathSecurityConfig [cipherSuite=1, passphrase=&lt;non-null&gt;, PMK=&lt;null&gt;, PMKID=&lt;null&gt;], port=0, transportProtocol=-1, channel=0, forceChannel=false]&gt; Uid: 10248 RequestorUid: 10248 RequestorPkg: com.example.mscwfa1 UnderlyingNetworks: Null] ] not in cache!? </code></p>\n<p>In Android API Level 31+, is there any limitation in <a href=\"https://developer.android.com/reference/android/net/ConnectivityManager\" rel=\"nofollow noreferrer\">ConnectivityManager</a> about how many simultaneous Networks I may have? If not, why am I getting the &quot;No Interfaces Available&quot; error and consequently the callback onUnavailable on the Network I requested?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}