{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-cloud",
      "spring-cloud-aws"
    ],
    "owner": {
      "account_id": 12431448,
      "reputation": 1096,
      "user_id": 9053712,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/2c280a67c5929dc2b7b336f97d4001fc?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "MA1",
      "link": "https://stackoverflow.com/users/9053712/ma1"
    },
    "is_answered": false,
    "view_count": 734,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1728055580,
    "creation_date": 1723744686,
    "last_edit_date": 1723752047,
    "question_id": 78876313,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78876313/how-to-exclude-aws-auto-config-classes-in-spring-boot-3-3-0",
    "title": "How to Exclude AWS auto config classes in spring boot 3.3.0?",
    "body": "<p>I got this exception while running a spring boot application locally, I started getting this exception when I upgraded spring boot version to 3.3.0:</p>\n<p>Error:</p>\n<pre><code>The following classes could not be excluded because they are not auto-configuration classes:\n- org.springframework.cloud.aws.autoconfigure.context.ContextCredentialsAutoConfiguration\n- org.springframework.cloud.aws.autoconfigure.context.ContextInstanceDataAutoConfiguration\n- org.springframework.cloud.aws.autoconfigure.context.ContextRegionProviderAutoConfiguration\n- org.springframework.cloud.aws.autoconfigure.context.ContextResourceLoaderAutoConfiguration\n- org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration\n</code></pre>\n<p>sample pom.xml:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.3.0&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository. --&gt;\n&lt;/parent&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-aws-secrets-manager-config&lt;/artifactId&gt;\n    &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-aws-autoconfigure&lt;/artifactId&gt;\n    &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Code:</p>\n<pre><code>import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.cloud.aws.autoconfigure.context.*;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Profile;\n\n@Configuration\n@EnableAutoConfiguration(exclude = {\n        ContextCredentialsAutoConfiguration.class,\n        ContextInstanceDataAutoConfiguration.class,\n        ContextRegionProviderAutoConfiguration.class,\n        ContextResourceLoaderAutoConfiguration.class,\n        ContextStackAutoConfiguration.class\n})\n@Profile(&quot;local&quot;)\nclass MyClass{\n\n}\n</code></pre>\n<p>I need this config class to make the app not connect to AWS and run locally without any issue. Any idea how to fix this issue?</p>\n<p>If I don't have the config class above, I get this exception:</p>\n<pre><code> com.amazonaws.SdkClientException: Unable to load AWS credentials from any provider in the chain: [EnvironmentVariableCredentialsProvider: Unable to load AWS credentials \nfrom environment variables (AWS_ACCESS_KEY_ID (or AWS_ACCESS_KEY) and \nAWS_SECRET_KEY (or AWS_SECRET_ACCESS_KEY)), \nSystemPropertiesCredentialsProvider: Unable to load AWS credentials \nfrom Java system properties (aws.accessKeyId and aws.secretKey)\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}