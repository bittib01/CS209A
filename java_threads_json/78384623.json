{
  "question": {
    "tags": [
      "java",
      "jackson",
      "swagger",
      "openapi"
    ],
    "owner": {
      "account_id": 738442,
      "reputation": 944,
      "user_id": 871653,
      "user_type": "registered",
      "accept_rate": 90,
      "profile_image": "https://www.gravatar.com/avatar/8a0e826b4975c0e04d46c1e6eea39657?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "sasynkamil",
      "link": "https://stackoverflow.com/users/871653/sasynkamil"
    },
    "is_answered": false,
    "view_count": 1059,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1719928512,
    "creation_date": 1714047783,
    "last_edit_date": 1714140921,
    "question_id": 78384623,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78384623/multiple-jsontypeinfo-and-jsonsubtypes",
    "title": "Multiple @JsonTypeInfo and @JsonSubTypes",
    "body": "<p>I know - based on different question here:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/65432203/multiple-level-jsontypeinfo-and-jsonsubtypes\">Multiple level @JsonTypeInfo and @JsonSubTypes</a>,</li>\n<li><a href=\"https://github.com/FasterXML/jackson-databind/issues/374\" rel=\"nofollow noreferrer\">Deserialize with multiple levels of polymorphic type hierarchy</a></li>\n</ul>\n<p>that in case of multiple inheritance (Car&lt;Audi&lt;Sedan), there can be used just one discriminator name: <code>property = &quot;carType&quot;</code>.</p>\n<p>But I have a different scenario that does now work for me - is this also not supported? - Scenario where I need to use also two discriminators, but not in &quot;inheritance chain&quot;:</p>\n<p>First level: <code>carType</code> (important note: Audi has field <code>private ColorDiscriminator color;</code>)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum CarType {\n\n    AUDI, TOYOTA;\n\n    public static final String AUDI_STR = &quot;AUDI&quot;;\n    public static final String TOYOTA_STR = &quot;TOYOTA&quot;;\n}\n\n@JsonTypeInfo(\n        use = JsonTypeInfo.Id.NAME,\n        include = JsonTypeInfo.As.EXISTING_PROPERTY,\n        property = &quot;carType&quot;,\n        visible = true)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = Audi.class, name = CarType.AUDI_STR),\n        @JsonSubTypes.Type(value = Toyota.class, name = CarType.TOYOTA_STR)\n})\npublic abstract class CarDiscriminator {\n\n    private CarType carType;\n\n    public CarType getCarType () {\n        return carType;\n    }\n\n    public void setCarType (CarType carType) {\n        this.carType = carType;\n    }\n}\n\n@JsonTypeName(CarType.AUDI_STR )\npublic class Audi extends CarDiscriminator {\n  private ColorDiscriminator color;\n  // ommited\n}\n\n@JsonTypeName(CarType.TOYOTA_STR)\npublic class Toyota extends CarDiscriminator {\n  // ommited\n}\n</code></pre>\n<p>Second level: <code>colorType</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum ColorType {\n\n    BLUE, RED;\n\n    public static final String BLUE_STR = &quot;BLUE&quot;;\n    public static final String RED_STR = &quot;RED&quot;;\n}\n\n@JsonTypeInfo(\n        use = JsonTypeInfo.Id.NAME,\n        include = JsonTypeInfo.As.EXISTING_PROPERTY,\n        property = &quot;colorType&quot;,\n        visible = true)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = Blue.class, name = ColorType.BLUE_STR),\n        @JsonSubTypes.Type(value = Red.class, name = ColorType.RED_STR)\n})\npublic abstract class ColorDiscriminator {\n\n    private ColorType colorType;\n\n    public ColorType getColorType () {\n        return colorType;\n    }\n\n    public void setColorType (ColorType colorType) {\n        this.colorType = colorType;\n    }\n}\n\n@JsonTypeName(ColorType.BLUE_STR)\npublic class Blue extends ColorDiscriminator {\n  // ommited\n}\n\n@JsonTypeName(ColorType.RED_STR)\npublic class Red extends ColorDiscriminator {\n  // ommited\n}\n</code></pre>\n<p>In the generated swagger json (&amp; ui) definition, I can see correctly just first <code>oneOf</code> carType: <code>Audi</code> | <code>Toyota</code>. But second <code>colorType</code> not. Generated json does not even contain <code>Blue</code> nor <code>Red</code> object definitions.</p>\n<p>So consumed/produces JSONs could be like this:</p>\n<p>Example 1:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;carType&quot;: &quot;AUDI&quot;,\n    &quot;attrAudi1&quot; : &quot;&quot;,\n    &quot;attrAudi2&quot; : &quot;&quot;,\n    &quot;attrAudi3&quot; : &quot;&quot;,\n    &quot;color&quot;: {\n        &quot;colorType&quot; : &quot;BLUE&quot;,\n        &quot;attrBlue1&quot; : &quot;&quot;,\n        &quot;attrBlue2&quot; : &quot;&quot;,\n        &quot;attrBlue3&quot; : &quot;&quot;,\n    } \n}\n</code></pre>\n<p>Example 2:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;carType&quot;: &quot;AUDI&quot;,\n    &quot;attrAudi1&quot; : &quot;&quot;,\n    &quot;attrAudi2&quot; : &quot;&quot;,\n    &quot;attrAudi3&quot; : &quot;&quot;,\n    &quot;color&quot;: {\n        &quot;colorType&quot; : &quot;RED&quot;,\n        &quot;attrRed1&quot; : &quot;&quot;,\n        &quot;attrRed2&quot; : &quot;&quot;,\n        &quot;attrRed3&quot; : &quot;&quot;,\n    } \n}\n</code></pre>\n<p>Example 3:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;carType&quot;: &quot;TOYOTA&quot;,\n    &quot;attrToyota1&quot; : &quot;&quot;,\n    &quot;attrToyota2&quot; : &quot;&quot;,\n    &quot;attrToyota3&quot; : &quot;&quot;,\n    // no color attribute at all\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}