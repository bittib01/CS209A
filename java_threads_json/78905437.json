{
  "question": {
    "tags": [
      "java",
      "ssl",
      "apache-kafka",
      "spring-kafka",
      "mtls"
    ],
    "owner": {
      "account_id": 9013600,
      "reputation": 1051,
      "user_id": 6717287,
      "user_type": "registered",
      "accept_rate": 62,
      "profile_image": "https://i.sstatic.net/amk1r.png?s=256",
      "display_name": "Amir Choubani",
      "link": "https://stackoverflow.com/users/6717287/amir-choubani"
    },
    "is_answered": false,
    "view_count": 128,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1725625912,
    "creation_date": 1724408981,
    "last_edit_date": 1725625912,
    "question_id": 78905437,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78905437/unable-to-find-valid-certification-path-to-requested-target-spring-boot-3-kaf",
    "title": "unable to find valid certification path to requested target [Spring boot 3 - kafka]",
    "body": "<p>I am trying to make a mtls connection between spring boot kafka consumer and remote brocker of my company which is configured with mtls.</p>\n<p>My entrypoint files are: <code>chain_bundle.pem</code> and <code>my_name.p12</code>.</p>\n<ol>\n<li>I tried first to generate keystore.jks and truststrore.jks files this way (<strong>passphrase is changeme</strong>):</li>\n</ol>\n<pre><code>keytool -import -file chain_bundle.pem -alias caroot -keystore truststore.jks -storepass changeme -noprompt\n\nkeytool -importkeystore -srckeystore my_name.p12 -srcstoretype PKCS12 -destkeystore keystore.jks -deststoretype JKS -srcstorepass changeme -deststorepass changeme\n</code></pre>\n<ol>\n<li>Then, in spring boot config, here is a code snippet:</li>\n</ol>\n<pre><code>spring:\n  kafka:\n    bootstrap-servers: url-of-bootstrap-server:443\n    consumer:\n      auto-offset-reset: latest\n      group-id: name-of-group-id\n      security:\n        protocol: SSL\n      properties:\n        max:\n          poll:\n            records: 1\n            interval:\n              ms: 1200000\n      ssl:\n        key-store-location: classpath:certs/v4/keystore.jks\n        key-store-password: &quot;changeme&quot;\n        key-store-type: &quot;JKS&quot;\n        trust-store-location: classpath:certs/v4/truststore.jks\n        trust-store-password: &quot;changeme&quot;\n        trust-store-type: &quot;JKS&quot;\n</code></pre>\n<p>I already placed <code>truststore.jks</code> and <code>keystore.jks</code> under <code>src/main/resources/certs/v4</code></p>\n<p>I get this error:</p>\n<pre><code>Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n<p>Any idea please ?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}