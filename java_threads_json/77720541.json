{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "vault",
      "spring-vault"
    ],
    "owner": {
      "account_id": 19657975,
      "reputation": 7,
      "user_id": 14390146,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/d7b340f0d8544c9ce6fe934fd9feed1f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "mahdad aioby",
      "link": "https://stackoverflow.com/users/14390146/mahdad-aioby"
    },
    "is_answered": false,
    "view_count": 1273,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1738316553,
    "creation_date": 1703661397,
    "last_edit_date": 1703662976,
    "question_id": 77720541,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77720541/can-not-read-configurations-from-vault-in-spring-boot-application",
    "title": "Can not read configurations from vault in spring boot application",
    "body": "<p>I am trying to read two simple values from vault in spring boot app. no success and I do not know why. here is my code:</p>\n<p>pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project\n    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath/&gt;\n        &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.company&lt;/groupId&gt;\n    &lt;artifactId&gt;vaultdemo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;name&gt;vaultdemo&lt;/name&gt;\n    &lt;description&gt;vaultdemo&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2023.0.0&lt;/spring-cloud.version&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-vault-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.vault&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-vault-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>VaultConfiguration.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(value = &quot;knf&quot;)\npublic class VaultConfiguration {\n\n    private String username;\n    private String password;\n\n    public VaultConfiguration(String username, String password) {\n        this.username = username;\n        this.password = password;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n</code></pre>\n<p>VaultdemoApplication.java :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableConfigurationProperties(VaultConfiguration.class)\npublic class VaultdemoApplication {\n\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext context = SpringApplication.run(VaultdemoApplication.class, args);\n        VaultConfiguration bean =  context.getBean(VaultConfiguration.class);\n        System.out.println(bean.getUsername());\n        System.out.println(bean.getPassword());\n    }\n\n}\n</code></pre>\n<p>application.properties :</p>\n<pre><code>spring.application.name=spring-boot-hashicorp-vault-sample\nspring.cloud.vault.token=***\nspring.cloud.vault.scheme=http\nspring.cloud.vault.enabled=true\nspring.cloud.vault.uri=http://127.0.0.1:8200\nspring.cloud.vault.port=8200\nspring.cloud.vault.kv.enabled=true\nspring.cloud.vault.kv.backend=secret\n</code></pre>\n<p>image of the values in vault:</p>\n<p><a href=\"https://i.sstatic.net/yCFHM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/yCFHM.jpg\" alt=\"key-values in vault\" /></a></p>\n<p>When I run the app It prints null for username and password.\nAny ideas to make it work?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}