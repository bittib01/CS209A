{
  "question": {
    "tags": [
      "java",
      "sql",
      "jdbc",
      "snowflake-cloud-data-platform"
    ],
    "owner": {
      "account_id": 26144917,
      "reputation": 136,
      "user_id": 19833660,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AFdZucqjG1Xmor8wNf5-3_41c9bTJlfHvRaBqsq2fNJqnQ=k-s256",
      "display_name": "Robertino Bonora",
      "link": "https://stackoverflow.com/users/19833660/robertino-bonora"
    },
    "is_answered": true,
    "view_count": 323,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1749098461,
    "creation_date": 1716429996,
    "last_edit_date": 1749098461,
    "question_id": 78520643,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78520643/stored-procedure-execution-error-uninitialized-resultset-and-i-dont-understand",
    "title": "Stored procedure execution error: uninitialized resultSet and i don&#39;t understand why",
    "body": "<p>The following task results in an error:</p>\n<blockquote>\n<p>Stored procedure execution error: uninitialized resultset</p>\n</blockquote>\n<p>and I don't understand why.</p>\n<p>This is the code:</p>\n<pre><code>DECLARE\n    response_string STRING;\n    result BOOLEAN;\n    select_statement VARCHAR;\n    stream_result resultset;\n    query_result resultset;\n    c1 CURSOR FOR stream_result;\n    c2 CURSOR FOR query_result;\nBEGIN\n    IF (SYSTEM$STREAM_HAS_DATA('db.schema.stream_1') = true) THEN select_statement := 'SELECT process_date FROM db.schema.stream_1 ORDER BY process_date';\n    ELSEIF (SYSTEM$STREAM_HAS_DATA('db.schema.stream_2') = true) THEN select_statement := 'SELECT process_date FROM db.schema.stream_2 ORDER BY process_date';\n    END IF;\n \n  stream_result := (EXECUTE IMMEDIATE :select_statement);\n \n    FOR row_variable IN c1 DO\n        query_result := (SELECT stg.flag FROM db.schema.status_loads stg WHERE row_variable.process_date = stg.process_date);\n        FOR row_variable_2 IN c2 DO\n            IF (row_variable_2.flag = 1) THEN\n                result := true;\n            ELSE    \n                result := false;\n                BREAK inner_loop;\n            END IF;\n        END FOR inner_loop;\n        IF (:result = true) THEN\n            response_string := (call sp_1(row_variable.process_date));\n            RETURN(:response_string);\n        ELSE \n            RETURN(row_variable.process_date);\n        END IF;\n    END FOR outer_loop;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}