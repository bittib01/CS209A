{
  "question": {
    "tags": [
      "java",
      "android",
      "reactjs",
      "react-native",
      "compiler-errors"
    ],
    "owner": {
      "account_id": 19783356,
      "reputation": 71,
      "user_id": 14487894,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/AGNmyxa2IJhYuPJqYffRKGfXLj5kNbXobpM7JuVu-Ws1=k-s256",
      "display_name": "HugoTek",
      "link": "https://stackoverflow.com/users/14487894/hugotek"
    },
    "is_answered": true,
    "view_count": 640,
    "accepted_answer_id": 79233258,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1732786174,
    "creation_date": 1732115521,
    "last_edit_date": 1732786066,
    "question_id": 79207818,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79207818/error-switch-rules-are-not-supported-in-source-11-when-compiling-with-react",
    "title": "Error &#171; switch rules are not supported in -source 11 &#187; when compiling with react-native-reanimated",
    "body": "<p>I'm working on a React Native application and I'm getting an error when compiling Android linked to the react-native-reanimated library or the Java version. Here are the details :</p>\n<p>My versions :</p>\n<ul>\n<li>React native : <strong>0.72.3</strong></li>\n<li>react-native-reanimated : <strong>3.9.0-rc.1</strong></li>\n<li>Gradle : <strong>8.0.1</strong></li>\n<li>Kotlin : <strong>1.8.10</strong></li>\n<li>Groovy : <strong>3.0.13</strong></li>\n<li>Plugin Android Gradle : <strong>7.4.2</strong></li>\n<li>JVM : <strong>17.0.10</strong></li>\n<li>Java : <strong>17</strong></li>\n</ul>\n<p>This is the error I get when I try to build :</p>\n<blockquote>\n<p>/Users/me/Documents/Projects/my-project/node_modules/react-native-reanimated/android/src/main/java/com/swmansion/reanimated/NodesManager.java:440:\nerror: switch rules are not supported in -source 11\ncase &quot;opacity&quot; -&gt; {\n^   (use -source 14 or higher to enable switch rules)</p>\n<p>/Users/me/Documents/Projects/my-project/node_modules/react-native-reanimated/android/src/main/java/com/swmansion/reanimated/layoutReanimation/AnimationsManager.java:356:\nerror: pattern matching in instanceof is not supported in -source 11\nif (props.get(Snapshot.TRANSFORM_MATRIX) instanceof ReadableNativeArray matrixArray) {\n^   (use -source 16 or higher to enable pattern matching in\ninstanceof)</p>\n</blockquote>\n<p>Steps I tried :</p>\n<ol>\n<li><p>Gradle configuration : I added this in android/app/build.gradle, but nothing changed, it didn't fix my problem :</p>\n<pre><code>android {\n compileOptions {\n    sourceCompatibility JavaVersion.VERSION_17\n    targetCompatibility JavaVersion.VERSION_17\n }\n}\n</code></pre>\n</li>\n<li><p>Cleaning and reconstruction :</p>\n</li>\n</ol>\n<ul>\n<li><p>I ran <strong>./gradlew clean</strong> in the android directory.</p>\n</li>\n<li><p>I rebuilt with <strong>npx react-native run-android</strong>.</p>\n</li>\n</ul>\n<p>Questions :</p>\n<ul>\n<li><p>How can this problem be resolved so that the project uses Java 17?</p>\n</li>\n<li><p>Is it possible that incompatibilities in my dependencies are preventing the Java version from being updated correctly?</p>\n</li>\n<li><p>Is there a specific version of the library that could correct this?</p>\n</li>\n</ul>\n<p>Thanks in advance !</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}