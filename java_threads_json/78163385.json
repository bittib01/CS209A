{
  "question": {
    "tags": [
      "java",
      "postgresql",
      "tomcat",
      "jdbc",
      "memory-leaks"
    ],
    "owner": {
      "account_id": 461547,
      "reputation": 3316,
      "user_id": 863311,
      "user_type": "registered",
      "accept_rate": 62,
      "profile_image": "https://www.gravatar.com/avatar/3731c7120e30182ebf4f3fbb8609468a?s=256&d=identicon&r=PG",
      "display_name": "Simon",
      "link": "https://stackoverflow.com/users/863311/simon"
    },
    "is_answered": true,
    "view_count": 667,
    "accepted_answer_id": 78171021,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1764754783,
    "creation_date": 1710449170,
    "question_id": 78163385,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78163385/does-postgres-jdbc-lazycleaner-cause-a-classloader-memory-leak",
    "title": "Does Postgres JDBC LazyCleaner cause a classloader memory leak?",
    "body": "<p>I have a Spring Boot web application which is deployed multiple times a day, so a clean undeploy is essential. Tomcat is reporting a memory leak, and MAT points me to</p>\n<p><a href=\"https://i.sstatic.net/gybdr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/gybdr.png\" alt=\"Path to GC Root\" /></a></p>\n<p>I'm using postgresql-42.6.0.jar, and have placed that JAR in the Tomcat 10.1 ./lib directory (as JDBC drivers should be, afaik). It seems to me the web app present at Tomcat startup loads <code>org.postgresql.util.LazyCleaner</code>, which then starts the &quot;PostgreSQL-JDBC-Cleaner&quot; thread. As the thread inherits the AccessControlContext of the ProtectionDomain loaded by the webapp class loader, that class loader will forever have a reference which cannot be gc'ed, ergo a memory leak.</p>\n<p>I can't find anything online that others are also having this issue. Am I missing something?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}