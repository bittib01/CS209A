{
  "question": {
    "tags": [
      "java",
      "xml",
      "okhttp",
      "http3"
    ],
    "owner": {
      "account_id": 29185790,
      "reputation": 9,
      "user_id": 22359000,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/a80059313a684d9f2d430a46511cec14?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "G&#246;rmenProgr&#228;mmer",
      "link": "https://stackoverflow.com/users/22359000/g%c3%b6rmenprogr%c3%a4mmer"
    },
    "is_answered": false,
    "view_count": 2203,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1722369641,
    "creation_date": 1712586946,
    "last_edit_date": 1722369641,
    "question_id": 78293271,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78293271/how-to-solve-streamresetexception-stream-was-reset-no-error-with-a-long-reques",
    "title": "How to solve StreamResetException: stream was reset: NO_ERROR with a long request body",
    "body": "<p>I'm using Okhttp3 to send an xml file http-Request. When I try to send a long file (several thousand lines), I'll get a StreamResetException. Otherwise it works always fine, an error occurs only with a very long xml file. My code looks as following:</p>\n<pre><code>Request request = new Request.Builder()\n            .url(url)\n            .addHeader(SENDER, Sender)\n            .addHeader(NACHRICHTUUID, Uuid)\n            .addHeader(SCHEMEAGENCYID, SchemeId)\n            .addHeader(AUTHORIZATION, token)\n            .post(RequestBody.create(xml, MediaType.get(APPLICATION_XML)))\n            .build();\n\nResponse response = getHttpClient().newCall(request).execute()\n\nprivate OkHttpClient getHttpClient()\n    {\n        if (httpClient == null)\n        {\n            httpClient = new OkHttpClient.Builder()\n                .callTimeout(30, TimeUnit.SECONDS)\n                .connectTimeout(30, TimeUnit.SECONDS)\n                .readTimeout(30, TimeUnit.SECONDS)\n                .writeTimeout(30, TimeUnit.SECONDS)\n                .build();\n        }\n        return httpClient;\n    }\n</code></pre>\n<p>I get the following error message:</p>\n<pre><code>okhttp3.internal.http2.StreamResetException: stream was reset: NO_ERROR\n    at okhttp3.internal.http2.Http2Stream.checkOutNotClosed$okhttp(Http2Stream.kt:646) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http2.Http2Stream$FramingSink.emitFrame(Http2Stream.kt:557) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http2.Http2Stream$FramingSink.write(Http2Stream.kt:532) ~[okhttp-4.9.3.jar:na]\n    at okio.ForwardingSink.write(ForwardingSink.kt:29) ~[okio-2.8.0.jar:na]\n    at okhttp3.internal.connection.Exchange$RequestBodySink.write(Exchange.kt:218) ~[okhttp-4.9.3.jar:na]\n    at okio.RealBufferedSink.emitCompleteSegments(RealBufferedSink.kt:255) ~[okio-2.8.0.jar:na]\n    at okio.RealBufferedSink.write(RealBufferedSink.kt:185) ~[okio-2.8.0.jar:na]\n    at okhttp3.RequestBody$Companion$toRequestBody$2.writeTo(RequestBody.kt:152) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.kt:59) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:34) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201) ~[okhttp-4.9.3.jar:na]\n    at okhttp3.internal.connection.RealCall.execute(RealCall.kt:154) ~[okhttp-4.9.3.jar:na]\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}