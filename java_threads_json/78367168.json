{
  "question": {
    "tags": [
      "java",
      "mapstruct"
    ],
    "owner": {
      "account_id": 2019920,
      "reputation": 1807,
      "user_id": 1806348,
      "user_type": "registered",
      "accept_rate": 84,
      "profile_image": "https://i.sstatic.net/7TqKN.png?s=256",
      "display_name": "Jochem Kuijpers",
      "link": "https://stackoverflow.com/users/1806348/jochem-kuijpers"
    },
    "is_answered": true,
    "view_count": 546,
    "answer_count": 2,
    "score": 4,
    "last_activity_date": 1714414105,
    "creation_date": 1713798022,
    "last_edit_date": 1714134280,
    "question_id": 78367168,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78367168/how-to-simply-unwrap-an-object-with-mapstruct",
    "title": "How to simply unwrap an object with MapStruct?",
    "body": "<p>I have a User ID class, that simply contains a String.\nMy API exposes this as a String, so I want to 'unwrap' this value using MapStruct.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record UserId(String id) {}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic abstract class UserMapper {\n    @Mapping(target = &quot;.&quot;, source=&quot;userId.id&quot;)\n    protected abstract String toApi(UserId userId);\n}\n</code></pre>\n<p>I'm expecting this to work, even pointing out to MapStruct which member to use for the target value. The mapper should simply pass the String contained in <code>UserId</code> and pass it as an output. But instead MapStruct creates a new empty String and returns it without interacting with the source member (besides null-checks):</p>\n<p>(generated code)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected String toApi(UserId id) {\n    if ( id == null ) {\n        return null;\n    }\n\n    String string = new String();\n\n    return string;\n}\n</code></pre>\n<p>This is obviously wrong, I don't want a new empty string, I want the string contained in UserId. I can't figure out the right annotations to get this to work. Any thoughts?</p>\n<p>My workaround listed below is writing a custom mapping method that does just this, but it seems weird that there's no way to let MapStruct generate this code for me.</p>\n<pre><code>@Mapper\npublic abstract class UserMapper {\n    // ... other mapping methods ...\n    \n    protected String toApi(Userid userId) {\n        return userId.id();\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}