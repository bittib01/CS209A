{
  "question": {
    "tags": [
      "java",
      "codenameone",
      "java-io"
    ],
    "owner": {
      "account_id": 29557990,
      "reputation": 521,
      "user_id": 22653206,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/6dfa8d5644edff26627a12b7725d7884?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "curtjacobs1",
      "link": "https://stackoverflow.com/users/22653206/curtjacobs1"
    },
    "is_answered": true,
    "view_count": 104,
    "accepted_answer_id": 79530015,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1742869678,
    "creation_date": 1742357225,
    "last_edit_date": 1742869678,
    "question_id": 79519095,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79519095/how-do-i-write-a-multi-line-file-with-writer",
    "title": "How do I write a multi line file with Writer?",
    "body": "<p>I had success looping through my 5 database rows and writing a CSV file, except the code that I used rewrote the file every line. I will use the CSVParser to read the file to import an activity from another computer. The examples I found online for append are few.</p>\n<p>Can I start the Writer with append as true, or is there a better way to write the file. I used the following to write the CSV line from the String d built from the row of the database:</p>\n<pre><code>                try (Writer w = new OutputStreamWriter(fs.openOutputStream(String.valueOf(sendFile)))) {\n                    w.write(d);\n                } catch (Exception e) {\n                    Log.p(&quot;Error &quot; + e);\n                }\n</code></pre>\n<p>Thanks.</p>\n<p>Edit 1:\nThis is the method I use to read the database into strings. Both Writer, as Shai showed me before (shown above), and writeToSting illustrated below (with \\n added to the string) overwrite row 1 with row 2, etc. and at conclusion give a csv file with only row 5.</p>\n<pre><code>    public void toSVC(addActivity c) throws IOException, InstantiationException {\n        namet = c.name.toString();\n        dbsa = Display.getInstance().openOrCreate(&quot;pandr.db&quot;);\n        String rd = &quot;SELECT * FROM pandr WHERE name ='&quot; + namet + &quot;'&quot;;\n        cursa = dbsa.executeQuery(rd);\n        Row currentRow = cursa.getRow();\n        cc = currentRow.getInteger(3);\n        x = cc + 1;\n        rn = 1;\n        for (r = 1; r &lt; x; r++) {\n            trecno = rn.toString();\n            tname = currentRow.getString(1);\n            tpos = currentRow.getInteger(2);\n            posv = tpos.toString();\n            ttr = currentRow.getInteger(3);\n            trv = ttr.toString();\n            tbloc = currentRow.getString(4);\n            tlwloc = currentRow.getString(5);\n            tcfloc = currentRow.getString(6);\n            trwloc = currentRow.getString(7);\n            tamloc = currentRow.getString(8);\n            tcmloc = currentRow.getString(9);\n            tdmloc = currentRow.getString(10);\n            tlcbloc = currentRow.getString(11);\n            trcbloc = currentRow.getString(12);\n            tlfbloc = currentRow.getString(13);\n            trfbloc = currentRow.getString(14);\n            tgloc = currentRow.getString(15);\n            String d = trecno + &quot;,&quot; + tname + &quot;,&quot; + posv + &quot;,&quot; + trv + &quot;,&quot; + tbloc + &quot;,&quot; + tlwloc + &quot;,&quot; + tcfloc + &quot;,&quot; + trwloc + &quot;,&quot; + tamloc + &quot;,&quot; + tcmloc + &quot;,&quot; + tdmloc + &quot;,&quot; + tlcbloc + &quot;,&quot; + trcbloc + &quot;,&quot; + tlfbloc + &quot;,&quot; + trfbloc + &quot;,&quot; + tgloc+&quot;\\n&quot;;\n            String flname = new String(&quot;/&quot; + namet + &quot;.csv&quot;);\n            FileSystemStorage fs = FileSystemStorage.getInstance();\n            File sendFile = new File(fs.getAppHomePath() + flname);\n            Util.writeStringToFile(sendFile, d);\n            rn++;\n        }\n        dbsa.close();\n        cursa.close();\n        Util.cleanup(os);\n        new FinishBanner();\n    }\n}\n</code></pre>\n<p>I first moved the Writer builder outside the loop, and tried w.write(d) for each row, but that gave me a java.lang.NullPointerException on row 2.</p>\n<p>I also tried to use StringBuilder and sb.append(d) (with \\n included at the end of the string) to the StringBuilder for the 5 rows, but sb.append(d) also gave me a java.lang.NullPointerException when trying to write the first line to the StringBuilder.</p>\n<p>I thought the easiest way to accomplish this was create the file and append each row to the file, which is why I thought StringBuilder.append() would work. I am finding there aren't any website documents showing a way to accomplish this.</p>\n<p>My goal is still to write a file that I can email and parse, and write into the activity database on a different device.</p>\n<p>Edit 2\nIn my work to get the data order correct, I left off cursa.next(), which was why I got line 1 repeated. If I went back to my original code, Writer would work.</p>\n<p>A new problem has manifest with this method. The StringBuilder sb has the first line twice. I increased x to 7, and the StringBuilder showed line 5 from the database as line 6 in sb.</p>\n<p>Here is the current loop with the same head as above:</p>\n<pre><code>        for (r = 1; r &lt; x; r++) {\n            trecno = rn.toString();\n            tname = currentRow.getString(1);\n            tpos = currentRow.getInteger(2);\n            posv = tpos.toString();\n            ttr = currentRow.getInteger(3);\n            trv = ttr.toString();\n            tbloc = currentRow.getString(4);\n            tlwloc = currentRow.getString(5);\n            tcfloc = currentRow.getString(6);\n            trwloc = currentRow.getString(7);\n            tamloc = currentRow.getString(8);\n            tcmloc = currentRow.getString(9);\n            tdmloc = currentRow.getString(10);\n            tlcbloc = currentRow.getString(11);\n            trcbloc = currentRow.getString(12);\n            tlfbloc = currentRow.getString(13);\n            trfbloc = currentRow.getString(14);\n            tgloc = currentRow.getString(15);\n            sb.append(trecno).append(&quot;,&quot;)\n                        .append(tname).append(&quot;,&quot;)\n                        .append(posv).append(&quot;,&quot;)\n                        .append(trv).append(&quot;,&quot;)\n                        .append(tbloc).append(&quot;,&quot;)\n                        .append(tlwloc).append(&quot;,&quot;)\n                        .append(tcfloc).append(&quot;,&quot;)\n                        .append(trwloc).append(&quot;,&quot;)\n                        .append(tamloc).append(&quot;,&quot;)\n                        .append(tcmloc).append(&quot;,&quot;)\n                        .append(tdmloc).append(&quot;,&quot;)\n                        .append(tlcbloc).append(&quot;,&quot;)\n                        .append(trcbloc).append(&quot;,&quot;)\n                        .append(tlfbloc).append(&quot;,&quot;)\n                        .append(trfbloc).append(&quot;,&quot;)\n                        .append(tgloc).append(&quot;,&quot;)\n                        .append(&quot;\\n&quot;);\n            rn++;\n            cursa.next();\n        }\n</code></pre>\n<p><a href=\"https://i.sstatic.net/zhmg6u5n.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/zhmg6u5n.jpg\" alt=\"Here is the Database\" /></a></p>\n<p><a href=\"https://i.sstatic.net/pSXc9Dfg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pSXc9Dfg.jpg\" alt=\"Here is the StringBuilder\" /></a></p>\n<p>I am going to reconstruct the Writer and see if write(d) creates the same file as the StringBuilder.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}