{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "javafx",
      "spring-aop"
    ],
    "owner": {
      "account_id": 31540168,
      "reputation": 11,
      "user_id": 24361247,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/d0a6dcc53fb8912ad0cb0694b40aa45a?s=256&d=identicon&r=PG",
      "display_name": "Atta Gyldas KOUASSI",
      "link": "https://stackoverflow.com/users/24361247/atta-gyldas-kouassi"
    },
    "is_answered": true,
    "view_count": 273,
    "answer_count": 3,
    "score": 1,
    "last_activity_date": 1721890178,
    "creation_date": 1721566820,
    "last_edit_date": 1721630360,
    "question_id": 78775257,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78775257/problem-using-spring-aop-with-java-fx-controller",
    "title": "Problem using Spring AOP with Java FX Controller",
    "body": "<p>I have integrated Java FX with Spring boot using <code>javafx-weaver-spring-boot-starter</code> of <code>net.rgielen</code>. I want to execute some code before the call of a method of the controller, but I am getting NullPointerException when accessing @FXML annotated attributes.</p>\n<p>I have an annotation called FooterPaieConnStatus:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface FooterPaieConnStatus {\n\n}\n</code></pre>\n<p>I have an Aspect on this annotation :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\n@Slf4j(topic = &quot;AppLog&quot;)\npublic class FooterPaieConnStatusAspect {\n    \n    @Before(&quot;@annotation(FooterPaieConnStatus)&quot;)\n    public void beforeMethod(JoinPoint joinPoint) {\n        // Get connection\n        boolean isConnSucessful = PaieDAOHelper.getInstance().testConn();\n        // Get the target object\n        Object target = joinPoint.getTarget();\n        if (target instanceof MyBaseTemplatedController controller) {\n            log.info(&quot;Defining footer paie connection status {} for MyBaseTemplatedController or it Subtype&quot;, isConnSucessful);\n            controller.getFooterController().setIsPaieConnectionSuccesFul(isConnSucessful);\n        }\n\n    }\n}\n</code></pre>\n<p>And I've used the annotation like this in my FXML Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FooterPaieConnStatus\npublic void synchroniserRubriques() {\n        actionWithLoading(&quot;Synchronisation des rubriques en cours...&quot;, \n        ()-&gt;{\n            try {\n                mRubriqueService.fetchRubriques(); \n                pRubriques.getPageFactory().call(0);\n                NotificationFactory.succesSync();\n            } catch (RuntimeException e) {\n                log.error(e.getMessage());\n                NotificationFactory.error(&quot;Etat de l'action&quot;, e.getMessage());\n            }\n        });\n    }\n</code></pre>\n<p>Here is the beginning of the FXML Controller :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Getter\n@Component\n@FxmlView(&quot;/view/parametres_rubriques_comptes.fxml&quot;)\n@RequiredArgsConstructor\npublic class ParamListMappingController extends MyBaseTemplatedController\n</code></pre>\n<p>And inside we have the FXML Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FXML \nprotected HeaderController headerController;\n@FXML \nprotected FooterController footerController;\n</code></pre>\n<p>But when loading the FXML Controller I have this exception (headerController is null) :</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n    at javafx.fxml@21/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1858)\n    at javafx.fxml@21/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1726)\n    at javafx.base@21/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base@21/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232)\n    at javafx.base@21/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189)\n    at javafx.base@21/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@21/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@21/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@21/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.base@21/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.controls@21/javafx.scene.control.MenuItem.fire(MenuItem.java:459)\n    at javafx.controls@21/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1415)\n    at javafx.controls@21/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(ContextMenuContent.java:1368)\n    at javafx.base@21/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\n    at javafx.base@21/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\n    at javafx.base@21/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:232)\n    at javafx.base@21/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:189)\n    at javafx.base@21/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@21/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@21/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@21/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@21/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@21/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@21/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@21/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@21/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@21/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@21/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base@21/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@21/javafx.scene.Scene$MouseHandler.process(Scene.java:3984)\n    at javafx.graphics@21/javafx.scene.Scene.processMouseEvent(Scene.java:1890)\n    at javafx.graphics@21/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2708)\n    at javafx.graphics@21/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics@21/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@21/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics@21/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics@21/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics@21/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\n    at javafx.graphics@21/com.sun.glass.ui.View.notifyMouse(View.java:937)\n    at javafx.graphics@21/com.sun.glass.ui.mac.MacView.notifyMouse(MacView.java:127)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:72)\n    at jdk.internal.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.base@21/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:270)\n    at javafx.fxml@21/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\n    at javafx.fxml@21/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1855)\n    ... 40 more\nCaused by: net.rgielen.fxweaver.core.FxLoadException: Unable to load FXML file file:/Users/macbook/Projets/MyReports/Realisation/myreports-desktop/target/classes/view/parametres_rubriques_comptes.fxml\n    at net.rgielen.fxweaver.core.FxWeaver.loadByViewUsingFxmlLoader(FxWeaver.java:400)\n    at net.rgielen.fxweaver.core.FxWeaver.loadByView(FxWeaver.java:385)\n    at net.rgielen.fxweaver.core.FxWeaver.lambda$load$0(FxWeaver.java:380)\n    at java.base/java.util.Optional.map(Optional.java:260)\n    at net.rgielen.fxweaver.core.FxWeaver.load(FxWeaver.java:380)\n    at net.rgielen.fxweaver.core.FxWeaver.load(FxWeaver.java:347)\n    at net.rgielen.fxweaver.core.FxWeaver.load(FxWeaver.java:320)\n    at com.gconcept.myreports.desktop.infra.fx.ViewManager.changeToWithFooterRefresh(ViewManager.java:104)\n    at com.gconcept.myreports.desktop.infra.fx.ViewManager.changeToParamMapping(ViewManager.java:73)\n    at com.gconcept.myreports.desktop.admin.controller.HeaderController.parametresMapping(HeaderController.java:66)\n    ... 51 more\nCaused by: javafx.fxml.LoadException: \n/Users/macbook/Projets/MyReports/Realisation/myreports-desktop/target/classes/view/parametres_rubriques_comptes.fxml\n\n    at javafx.fxml@21/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722)\n    at javafx.fxml@21/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2700)\n    at javafx.fxml@21/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2547)\n    at net.rgielen.fxweaver.core.FxWeaver.loadByViewUsingFxmlLoader(FxWeaver.java:397)\n    ... 60 more\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;com.gconcept.myreports.desktop.admin.controller.HeaderController.getTitle()&quot; because &quot;this.headerController&quot; is null\n    at com.gconcept.myreports.desktop.infra.core.MyBaseTemplatedController.setHeaderTitle(MyBaseTemplatedController.java:22)\n    at com.gconcept.myreports.desktop.business.controller.ParamListMappingController.initialize(ParamListMappingController.java:110)\n    at com.gconcept.myreports.desktop.business.controller.ParamListMappingController$$FastClassBySpringCGLIB$$bd8f4350.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\n    at com.gconcept.myreports.desktop.business.controller.ParamListMappingController$$EnhancerBySpringCGLIB$$c1c63611.initialize(&lt;generated&gt;)\n    at javafx.fxml@21/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2670)\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}