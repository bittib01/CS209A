{
  "question": {
    "tags": [
      "java",
      "xml",
      "xslt",
      "xslt-1.0",
      "xslt-2.0"
    ],
    "owner": {
      "account_id": 34269264,
      "reputation": 1,
      "user_id": 26475634,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/0447235e5db43d460cb46746aef51c43?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "roi",
      "link": "https://stackoverflow.com/users/26475634/roi"
    },
    "is_answered": true,
    "view_count": 63,
    "accepted_answer_id": 78782052,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1722891142,
    "creation_date": 1721717764,
    "last_edit_date": 1722891142,
    "question_id": 78781976,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78781976/how-to-set-certian-attribute-value-in-array-node-while-maintaining-of-original-s",
    "title": "how to set certian attribute value in array node while maintaining of original structure of xml file",
    "body": "<p>i have xml with multiply blocks of worker.\ni want to change the date field format (from string to date) only if the original value not equal to null.\nIn addition, it is important to maintain the structure and values ​​of the file</p>\n<p>i have xml file like that</p>\n<pre><code>&lt;header&gt;\n&lt;serianl_num&gt;123&lt;/serianl_num&gt;\n&lt;type&gt;11&lt;/type&gt;\n&lt;body&gt;\n   &lt;direction&gt;in&lt;/direction&gt;\n   &lt;worker&gt;\n     &lt;salary&gt;1234&lt;/salary&gt;\n     &lt;name&gt;aaa&lt;/name&gt;\n      &lt;gender&gt;male&lt;/gender&gt;\n      &lt;date&gt;20140101&lt;/date&gt;\n   &lt;/worker&gt;\n &lt;worker&gt;\n     &lt;salary&gt;1234&lt;/salary&gt;\n     &lt;name&gt;bbb&lt;/name&gt;\n      &lt;gender&gt;female&lt;/gender&gt;\n      &lt;date&gt;nil:true&lt;/date&gt;\n   &lt;/worker&gt;\n&lt;/body&gt;\n&lt;/header&gt;\n</code></pre>\n<p>and this the expected output result i want to get</p>\n<pre><code>&lt;header&gt;\n&lt;serianl_num&gt;123&lt;/serianl_num&gt;\n&lt;type&gt;11&lt;/type&gt;\n&lt;body&gt;\n   &lt;direction&gt;in&lt;/direction&gt;\n   &lt;worker&gt;\n     &lt;salary&gt;1234&lt;/salary&gt;\n     &lt;name&gt;aaa&lt;/name&gt;\n      &lt;gender&gt;male&lt;/gender&gt;\n      &lt;date&gt;2014-01-01&lt;/date&gt;\n   &lt;/worker&gt;\n &lt;worker&gt;\n     &lt;salary&gt;1234&lt;/salary&gt;\n     &lt;name&gt;bbb&lt;/name&gt;\n      &lt;gender&gt;female&lt;/gender&gt;\n      &lt;date&gt;nil:true&lt;/date&gt;\n   &lt;/worker&gt;\n&lt;/body&gt;\n&lt;/header&gt;\n</code></pre>\n<p>this is the xsl i tried to write:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot;\nxmlns:xsl=http://www.w3.org/1999/XSL/Transform xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance&gt;\n            &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot; xalan:indent-amount=&quot;2&quot;\n                        xmlns:xalan=http://xml.apache.org/xalan/&gt;\n            &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\n            &lt;xsl:template match=&quot;node()|@*&quot;&gt;\n                        &lt;xsl:copy&gt;\n                             &lt;xsl:apply-templates select=&quot;node()|@*&quot; /&gt;\n                        &lt;/xsl:copy&gt;\n            &lt;/xsl:template&gt;\n   &lt;xsl:template match = &quot;header/body&quot;&gt;        \n         &lt;xsl:for-each select = &quot;worker&quot;&gt;\n                        &lt;xsl:choose&gt;\n                          &lt;xsl:param name=&quot;myDate&quot; select =&quot;string-length(date)&quot;/&gt;\n                             &lt;xsl:when test = &quot;string-length($myDate)=8&quot;&gt;           \n                       &lt;xsl:copy&gt;\n&lt;xsl:value-of select=&quot;concat(substring($myDate,1,4),'-',substring($myDate,5,2),'-',substring($myDate,7,2))&quot;/&gt;\n                          &lt;/xsl:copy&gt;\n                         &lt;/xsl:when&gt;\n                            &lt;xsl:otherwise&gt;\n                                &lt;xsl:copy&gt;\n                              &lt;xsl:attribute name=&quot;xsi:nil&quot;&gt;true&lt;/xsl:attribute&gt;\n                               &lt;xsl:value-of select=&quot;.&quot;/&gt;\n                                 &lt;/xsl:copy&gt;\n                          &lt;/xsl:otherwise&gt;\n                 &lt;/xsl:choose&gt;                   \n            &lt;/xsl:for-each&gt;\n            &lt;/xsl:template&gt;\n            &lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>but it dosent work.\nim Would appreciate for any help</p>\n<p>i tried to find information in internet,  I tried several attempts to achieve the desired result, but without success. I would greatly appreciate any help or advice to solve the problem.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}