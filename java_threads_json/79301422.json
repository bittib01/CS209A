{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "jpa"
    ],
    "owner": {
      "account_id": 3831818,
      "reputation": 1401,
      "user_id": 3177203,
      "user_type": "registered",
      "accept_rate": 88,
      "profile_image": "https://www.gravatar.com/avatar/1f59c734904b6c8ca915a8d18b33e1ef?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Ashok.N",
      "link": "https://stackoverflow.com/users/3177203/ashok-n"
    },
    "is_answered": true,
    "view_count": 43,
    "accepted_answer_id": 79301450,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1734890158,
    "creation_date": 1734889288,
    "question_id": 79301422,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79301422/modifying-repository-returned-response-by-retaining-the-page-information-in-spri",
    "title": "Modifying repository returned response by retaining the Page information in spring boot",
    "body": "<p>I am using spring boot with JPA in my project. I have a service class which calls a repository method that returns <code>Page&lt;List&lt;TestDTO&gt;&gt;</code></p>\n<pre><code>@Query(&quot;SOME QUERY&quot;)\nPage&lt;List&lt;TestDTO&gt;&gt; findAllValues(@Param(&quot;itemNo&quot;) String itemNo, \nPageRequest pageRequest);\n</code></pre>\n<p>I want to modify some of the properties of the above Page response after the response is returned by the repository by retaining the Page information.</p>\n<p>I have done in the following manner:</p>\n<pre><code>Page &lt; List &lt; TestDTO &gt;&gt; resultsPage = repository.findAllValues(&quot;itemOne&quot;, PageRequest.of(offset, pageSize, Sort.by(direction, field))\n\n    resultsPage = resultsPage.map(this::transformTestDTOs);\n\n    private List &lt; TestDTO &gt; transformTestDTOs(final List &lt; TestDTO &gt; testDTOList) {\n      testDTOList.forEach(testDTO -&gt; {\n        testDTO.setItemName(&quot;New Name&quot;);\n      });\n      return testDTOList;\n</code></pre>\n<p>But I am getting the following exception:</p>\n<pre><code>.b.m.d.i.a.r.c.e.GlobalExceptionHandler[0;39m [2m:[0;39m Exception occured while processing the request java.lang.ClassCastException: class com.bosch.ma.dxt.in.apna.reports.response.dto.TTransCustomerStatementDTO cannot be cast to class java.util.List (com.bosch.ma.dxt.in.apna.reports.response.dto.TTransCustomerStatementDTO is in unnamed module of loader 'app'; java.util.List is in module java.base of loader 'bootstrap')\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1003)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\n    at org.springframework.data.domain.Chunk.getConvertedContent(Chunk.java:131)\n    at org.springframework.data.domain.PageImpl.map(PageImpl.java:86)\n</code></pre>\n<p>My target is to modify the response List contents by retaining the <code>Page</code> information.</p>\n<p>I have followed the following thread, but no use.</p>\n<p><a href=\"https://stackoverflow.com/questions/53699726/modify-spring-data-page-class-projection-response-in-service-layer\">Modify Spring data Page&lt;&gt; class projection response in service layer</a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}