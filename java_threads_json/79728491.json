{
  "question": {
    "tags": [
      "java",
      "maven"
    ],
    "owner": {
      "account_id": 11335666,
      "reputation": 552,
      "user_id": 8311608,
      "user_type": "registered",
      "accept_rate": 75,
      "profile_image": "https://www.gravatar.com/avatar/0d2ac35246d702dccdfe2a80f23c8a4c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "SedriX",
      "link": "https://stackoverflow.com/users/8311608/sedrix"
    },
    "is_answered": true,
    "view_count": 76,
    "accepted_answer_id": 79729587,
    "answer_count": 2,
    "score": 3,
    "last_activity_date": 1754645583,
    "creation_date": 1754565942,
    "last_edit_date": 1754620466,
    "question_id": 79728491,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79728491/interfacing-with-legacy-transitive-dependencies",
    "title": "Interfacing with legacy transitive dependencies",
    "body": "<p>I'm using Java 17 with maven 3.9.9. My maven project <code>libfoo</code> is used as a library by other end-user applications say <code>myapp.jar</code>.</p>\n<p><code>libfoo</code> has no choice but to depend on a <code>bar:bar-core:1.2.3</code> whose code is out of my control (e.g. a proprietary client SDK), and <code>1.2.3</code> is the latest version. That artifact from hell is known to brings legacy transitive dependencies e.g.</p>\n<ol>\n<li>vulnerable version of <code>logback</code> and <code>jackson-databind</code> (evil) and</li>\n<li><code>common-zoo:common-zoo:0.0.1</code> (evil), with <code>myapp.jar</code> itself depends on <code>common-zoo:common-zoo:5.9.0</code> (good)</li>\n</ol>\n<p><strong>My question is that</strong>, is there any technique I can use, to <em>seal</em> all the evilness within <code>libfoo.jar</code> itself as implementation details of libfoo, such that</p>\n<ol>\n<li><code>myapp</code> sees <code>libfoo</code> as a single uber jar with 0 transitive dependency</li>\n<li><code>myapp.jar</code> is not awared of evil classes on its runtime classpath, and links only to dependencies declared in its own pom, e.g. <code>common-zoo:5.9.0</code>.</li>\n</ol>\n<p><strong>Known problems with shade+relocate</strong>:</p>\n<ol>\n<li><code>bar-core</code> is known to use <code>Class.forName('com..XXX')</code>, thus relocating class with maven-shade-plugin breaks the code.</li>\n<li><a href=\"https://stackoverflow.com/questions/28241764/maven-is-there-a-way-to-easily-create-an-uber-jar-with-all-the-dependencies\">shading all dependencies is error-prune</a></li>\n</ol>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}