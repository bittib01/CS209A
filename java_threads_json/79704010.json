{
  "question": {
    "tags": [
      "java",
      "aws-sdk"
    ],
    "owner": {
      "account_id": 43069038,
      "reputation": 3,
      "user_id": 31058515,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/9b3000fce6b55177fc3a351b7274a60e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "user31058515",
      "link": "https://stackoverflow.com/users/31058515/user31058515"
    },
    "is_answered": true,
    "view_count": 56,
    "accepted_answer_id": 79704169,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1752713592,
    "creation_date": 1752698898,
    "question_id": 79704010,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79704010/cannot-retrieve-more-results-using-listjobrunsrequest-due-to-invalid-token",
    "title": "Cannot retrieve more results using ListJobRunsRequest due to invalid token",
    "body": "<p>Using EMR serverless client, I'm retrieving job runs for a specific application. The maximum fetch size set by AWS is 50, hence I need to perform further calls, providing a token which is taken from the response. However, regardless of the limit, usage of the token for the next request always fails due to &quot;software.amazon.awssdk.services.emrserverless.model.ValidationException: Invalid token encountered&quot;.</p>\n<pre><code>    try (var client = EmrServerlessClient.builder().region(AwsUtils.getRegion()).build()) {\n      String token = null;\n      do {\n        var builder = ListJobRunsRequest.builder()\n            .maxResults(MAX_RESULTS)\n            .applicationId(applicationId)\n            .createdAtAfter(Instant.now().minus(days, ChronoUnit.DAYS));\n        if (token != null) {\n          builder.nextToken(token);\n        }\n        if (status != null) {\n          builder.states(status);\n        }\n\n        var response = client.listJobRuns(builder.build());\n        jobRuns.addAll(response.jobRuns());\n        token = response.nextToken();\n      } while (token != null);\n    }\n</code></pre>\n<p>The first batch/page of results is always retrieved successfully but further request with token always fail. Here is a sample token I got from the response which is deemed invalid in following request:</p>\n<pre><code>AAMA-EFRSURBSGdDanhVdTVFaVc4aDRkcE5QKzBkOVFEaFRzUFNtUHloQU9Pa2FRL1dFalVRR25aT2xoTVdtQU5UakY5elhKZ0NSQkFBQUFmakI4QmdrcWhraUc5dzBCQndhZ2J6QnRBZ0VBTUdnR0NTcUdTSWIzRFFFSEFUQWVCZ2xnaGtnQlpRTUVBUzR3RVFRTVJMUHFDUTVtc0hwaW5yejNBZ0VRZ0RzbUpFNzBnamtleWVBMDRDOWFYU1FzV2NhZUF3RkNvYWRUbWdoR21NMEtjZHA1dHZaZDJvcFFyZndZRW5wK3U5WEdiTW1JaXdJWDYxOGlzZz09S9CrYd6s9RZvUvvvsyUsAkySOxDk0wdDlJxBXBYhktRauhpGcNpvT4Z2KWf1QdPTC8QIGKTS-Ew2r8Phnwfr7U6xYiereRpJvN7sVLZaAN_UOefwsuzHnyChB-QNPTYYxWsP-_lgR76BYhLMwVgRPZrN112TZ9kksR-5iezObRKk3IVWOjWxisHiuEsrm7ybZJSNJUtO8V5xwXf2zMMRwLwlp82YAfgu9sCtVZ0Ma0xVKxORyNsSw5GeeZq6CbqskMTRTggICI7e5ke78--5fpzoR4HTs2tWtDDpzJ2Yr5lIzbcgL4qOPk73RiFKATL9eDFnzapGBqMkkiRP-kUO3hqxfeqEFmZBXAzG5BlgDJOp18xrm-TNk7KZ6g6rAUUdPHJB00rFVP72ihZoWv2HlJ38M7y1xCepwbj9IH9VboDGjasf_q8HBpsnZxrRjUWlgc3mfd7FBPozbt0mFnQ0cDVJDkfkl23SATJEIA==\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}