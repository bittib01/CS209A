{
  "question": {
    "tags": [
      "java",
      "jar",
      "derby"
    ],
    "owner": {
      "account_id": 18459021,
      "reputation": 575,
      "user_id": 13447006,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/12566e823b05f84cbb04e959e298dfc1?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "AlphabetsAlphabets",
      "link": "https://stackoverflow.com/users/13447006/alphabetsalphabets"
    },
    "is_answered": true,
    "view_count": 92,
    "accepted_answer_id": 79443485,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1740142690,
    "creation_date": 1739596640,
    "question_id": 79440998,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79440998/class-org-apache-derby-jdbc-clientdriver-not-found-despite-derbyclient-jar-being",
    "title": "Class org.apache.derby.jdbc.ClientDriver not found despite derbyclient.jar being in CLASSPATH",
    "body": "<p>I'm running this via Visual Studio Code and have the Language Support for Java (TM) by RedHat extension. The quickstart code I am using is found <a href=\"https://db.apache.org/derby/integrate/plugin_help/derby_app.html\" rel=\"nofollow noreferrer\">here</a>. I modified it slightly to become this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.sql.ResultSetMetaData;\n\n\npublic class Restaurants\n{\n    private static String dbURL = &quot;jdbc:derby://localhost:1527/myDB;create=true;user=me;password=mine&quot;;\n    private static String tableName = &quot;restaurants&quot;;\n    // jdbc Connection\n    private static Connection conn = null;\n    private static Statement stmt = null;\n\n    public static void main(String[] args)\n    {\n        createConnection();\n        insertRestaurants(5, &quot;LaVals&quot;, &quot;Berkeley&quot;);\n        selectRestaurants();\n        shutdown();\n    }\n    \n    private static void createConnection()\n    {\n        try\n        {\n            Class.forName(&quot;org.apache.derby.jdbc.ClientDriver&quot;); //.newInstance();\n            //Get a connection\n            conn = DriverManager.getConnection(dbURL); \n        }\n        catch (Exception except)\n        {\n            except.printStackTrace();\n        }\n    }\n    \n    private static void insertRestaurants(int id, String restName, String cityName)\n    {\n        try\n        {\n            stmt = conn.createStatement();\n            stmt.execute(&quot;insert into &quot; + tableName + &quot; values (&quot; +\n                    id + &quot;,'&quot; + restName + &quot;','&quot; + cityName +&quot;')&quot;);\n            stmt.close();\n        }\n        catch (SQLException sqlExcept)\n        {\n            sqlExcept.printStackTrace();\n        }\n    }\n    \n    private static void selectRestaurants()\n    {\n        try\n        {\n            stmt = conn.createStatement();\n            ResultSet results = stmt.executeQuery(&quot;select * from &quot; + tableName);\n            ResultSetMetaData rsmd = results.getMetaData();\n            int numberCols = rsmd.getColumnCount();\n            for (int i=1; i&lt;=numberCols; i++)\n            {\n                //print Column Names\n                System.out.print(rsmd.getColumnLabel(i)+&quot;\\t\\t&quot;);  \n            }\n\n            System.out.println(&quot;\\n-------------------------------------------------&quot;);\n\n            while(results.next())\n            {\n                int id = results.getInt(1);\n                String restName = results.getString(2);\n                String cityName = results.getString(3);\n                System.out.println(id + &quot;\\t\\t&quot; + restName + &quot;\\t\\t&quot; + cityName);\n            }\n            results.close();\n            stmt.close();\n        }\n        catch (SQLException sqlExcept)\n        {\n            sqlExcept.printStackTrace();\n        }\n    }\n    \n    private static void shutdown()\n    {\n        try\n        {\n            if (stmt != null)\n            {\n                stmt.close();\n            }\n            if (conn != null)\n            {\n                DriverManager.getConnection(dbURL + &quot;;shutdown=true&quot;);\n                conn.close();\n            }           \n        }\n        catch (SQLException sqlExcept)\n        {\n            \n        }\n\n    }\n}\n</code></pre>\n<p>The main difference is <code>Class.forName(&quot;org.apache.derby.jdbc.ClientDriver&quot;).newInstance();</code> -&gt; <code>Class.forName(&quot;org.apache.derby.jdbc.ClientDriver&quot;); //.newInstance();</code>.</p>\n<p>When I run it with the play button, I get this output:</p>\n<pre><code>star@platinum:~/Documents/Projects/Distributed Computing/DerbyTest/DerbyTest$  /usr/bin/env /usr/lib/jvm/java-21-openjdk-amd64/bin/java -XX:+ShowCodeDetailsInExceptionMessages -cp /home/star/Documents/Projects/Distributed\\ Computing/DerbyTest/DerbyTest/bin Restaurants \njava.lang.ClassNotFoundException: org.apache.derby.jdbc.ClientDriver\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:421)\n        at java.base/java.lang.Class.forName(Class.java:412)\n        at Restaurants.createConnection(Restaurants.java:29)\n        at Restaurants.main(Restaurants.java:19)\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.sql.Connection.createStatement()&quot; because &quot;Restaurants.conn&quot; is null\n        at Restaurants.insertRestaurants(Restaurants.java:43)\n        at Restaurants.main(Restaurants.java:20)\n</code></pre>\n<p>From my research there are three possible issues</p>\n<ol>\n<li>Malformed <code>dbURL</code></li>\n<li><code>derbyclient.jar</code> is not in <code>CLASSPATH</code></li>\n<li><code>derby.jar</code> is not in <code>CLASSPATH</code></li>\n</ol>\n<p>I assume <code>dbURL</code> is not malformed because it is directly copied and pasted from the apahce website. As for 2 and 3 this is my <code>CLASSPATH</code>:</p>\n<pre><code>/home/star/.local/bin/derby/lib/derbynet.jar:/home/star/.local/bin/derby/lib/derbyshared.jar:/home/star/.local/bin/derby/lib/derbyLocale_zh_CN.jar:/home/star/.local/bin/derby/lib/derbyLocale_pl.jar:/home/star/.local/bin/derby/lib/derbyLocale_pt_BR.jar:/home/star/.local/bin/derby/lib/derbyLocale_ja_JP.jar:/home/star/.local/bin/derby/lib/derbyoptionaltools.jar:/home/star/.local/bin/derby/lib/derbyrun.jar:/home/star/.local/bin/derby/lib/derbyLocale_de_DE.jar:/home/star/.local/bin/derby/lib/derbyLocale_ru.jar:/home/star/.local/bin/derby/lib/derbyLocale_es.jar:/home/star/.local/bin/derby/lib/derby.jar:/home/star/.local/bin/derby/lib/derbyLocale_it.jar:/home/star/.local/bin/derby/lib/derbyLocale_ko_KR.jar:/home/star/.local/bin/derby/lib/derbyLocale_fr.jar:/home/star/.local/bin/derby/lib/derbyclient.jar:/home/star/.local/bin/derby/lib/derbytools.jar:/home/star/.local/bin/derby/lib/derbyLocale_zh_TW.jar:/home/star/.local/bin/derby/lib/derbyLocale_cs.jar:/home/star/.local/bin/derby/lib/derbyLocale_hu.jar\n</code></pre>\n<p>Both <code>jar</code> files are in the classpath. I'm not sure if it is significant but the <code>CLASSPATH</code> variable is set inside <code>/etc/environment</code>. So, I am unsure of the issue I am facing. I have ran through the Apache's quickstart by creating, inserting, and selecting using <code>ij</code>, so i can confirm that <code>ij</code> works properly as does <code>sysinfo</code>, etc. So, I am quite certain there is no issue with derby but rather configuration, but I am unsure of what solutions are avaiable to me, thanks.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}