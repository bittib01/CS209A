{
  "question": {
    "tags": [
      "java",
      "scheduler",
      "java-time",
      "localtime"
    ],
    "owner": {
      "account_id": 26076115,
      "reputation": 11,
      "user_id": 19775065,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/1a848d7e3d4a7bad55c91338ad183d93?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "dragon4",
      "link": "https://stackoverflow.com/users/19775065/dragon4"
    },
    "is_answered": true,
    "view_count": 191,
    "closed_date": 1752139824,
    "answer_count": 3,
    "score": -1,
    "last_activity_date": 1752598447,
    "creation_date": 1752040825,
    "last_edit_date": 1752144281,
    "question_id": 79695127,
    "link": "https://stackoverflow.com/questions/79695127/migrating-from-joda-time-to-java-time-how-to-replace-time-todatetimetoday-get",
    "closed_reason": "Needs details or clarity",
    "title": "Migrating from Joda-Time to java.time: How to replace time.toDateTimeToday().getMillis()?",
    "body": "<p>I'm currently migrating my codebase from Joda-Time to the java.time API (Java 8+).</p>\n<p>In one part of my application, I schedule tasks to run at a specific time either today or tomorrow, depending on business logic.</p>\n<p>Below is a simplified and working version of the existing implementation using Joda-Time:</p>\n<pre><code>private synchronized void scheduleToday(LocalTime time) {\n    long now = System.currentTimeMillis();\n    task = normalScheduler.schedule(this, time.toDateTimeToday().getMillis() - now, TimeUnit.MILLISECONDS);\n}\n\nprivate synchronized void scheduleTomorrow(LocalTime time) {\n    LocalDate tomorrow = new LocalDate().plusDays(1);\n    long now = System.currentTimeMillis();\n    task = normalScheduler.schedule(this, tomorrow.toDateTime(time).getMillis() - now, TimeUnit.MILLISECONDS);\n}\nI’m trying to migrate these methods to use java.time API instead of Joda-Time, without changing the functionality.\n\n✅ What I’ve tried for scheduleToday():\nI tried replacing it with the following:\n\nprivate synchronized void scheduleToday(LocalTime time) {\n    long now = System.currentTimeMillis();\n    LocalDateTime dateTimeToday = LocalDateTime.of(LocalDate.now(), time);\n    long millis = dateTimeToday.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();\n    task = normalScheduler.schedule(this, millis - now, TimeUnit.MILLISECONDS);\n}\n\nMy questions:\nIs the above scheduleToday() code a correct and reliable replacement for the Joda-Time version? Will it handle edge cases (e.g., past time or daylight saving time shifts)?\n\nHow should I rewrite the scheduleTomorrow() method using java.time to match this equivalent functionality?\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}