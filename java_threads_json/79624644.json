{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot"
    ],
    "owner": {
      "account_id": 20138787,
      "reputation": 43,
      "user_id": 14769129,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/48e4339fd6474b14765fb4317e57beca?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Koen",
      "link": "https://stackoverflow.com/users/14769129/koen"
    },
    "is_answered": false,
    "view_count": 125,
    "answer_count": 0,
    "score": 2,
    "last_activity_date": 1747422060,
    "creation_date": 1747379051,
    "last_edit_date": 1747422060,
    "question_id": 79624644,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79624644/spring-boot-3-3-4-to-3-4-5-with-multiple-configurations-springboottestclasses",
    "title": "Spring boot 3.3.4 to 3.4.5 with multiple configurations (@SpringBootTest(classes = setupA) aappears to load the incorrect setup",
    "body": "<p>In our project, we have 2 setups for the integration tests. Each of the setups needs other containers. The containers were initialized in the static block of the springboot application.</p>\n<p>Code to explain the problem:</p>\n<p><strong>setupA:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class SetupA {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SetupA.class, args);\n    }\n\n    static {\n        System.out.println(&quot;============================ setup of A ====================================&quot;);\n        // Containers to startup for setup A\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = SetupA.class)\npublic class BaseATest {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class SetupATests extends BaseATest {\n\n    @Test\n    void testA() {\n        System.out.println(&quot;============================ executed A test ====================================&quot;);\n    }\n}\n</code></pre>\n<p><strong>setupB:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class SetupB {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SetupB.class, args);\n    }\n\n    static {\n        System.out.println(&quot;============================ setup of B ====================================&quot;);\n        // Containers to startup for setup B\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = SetupB.class)\npublic class BaseBTest {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class SetupBTests extends BaseBTest{\n\n    @Test\n    void testB() {\n        System.out.println(&quot;============================ executed B test ====================================&quot;);\n    }\n}\n</code></pre>\n<p>code also available at <a href=\"https://github.com/koenv-star/springboot-test-problem.git\" rel=\"nofollow noreferrer\">https://github.com/koenv-star/springboot-test-problem.git</a></p>\n<p>Using this setup in Spring Boot 3.3.4, if we run the tests of <code>setupA</code>, we see both the static blocks are executed:</p>\n<p><a href=\"https://i.sstatic.net/kZZ2Z9vb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/kZZ2Z9vb.png\" alt=\"sb 3.34\" /></a></p>\n<p>while in Spring Boot 3.4.5. only the static block of <code>setupB</code> is executed:</p>\n<p><a href=\"https://i.sstatic.net/M6AzjPkp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/M6AzjPkp.png\" alt=\"enter image description here\" /></a></p>\n<p>Why is this suddenly different?</p>\n<p>Also, important to mention that starting the containers in a static block, it was probably not the best usecase, because all the static blocks ran and all the containers started, but still want to know what introduced the different behavior between the Spring Boot versions.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}