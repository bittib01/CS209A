{
  "question": {
    "tags": [
      "java",
      "testing",
      "mockito",
      "jqwik"
    ],
    "owner": {
      "account_id": 35879622,
      "reputation": 19,
      "user_id": 27450183,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/77b591e5211195c4f11d500dc6611303?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Luis Santos",
      "link": "https://stackoverflow.com/users/27450183/luis-santos"
    },
    "is_answered": false,
    "view_count": 84,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1734901687,
    "creation_date": 1734733684,
    "last_edit_date": 1734901687,
    "question_id": 79298523,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79298523/mockito-is-behaving-in-a-weird-way",
    "title": "Mockito is behaving in a weird way",
    "body": "<p>I was doing some testing and I can't get it right.</p>\n<p>I was making some tests using mockito and jqwik and I wanted to assert if a method was being called exactly 5 times for that I used the function</p>\n<pre><code>@Property\nvoid verifycoligions(@ForAll(&quot;ActionArbitrary&quot;) GUI.Action action, @ForAll boolean collidesUp,@ForAll boolean collidesDown, @ForAll boolean colidesright)\n{\n    Mockito.when(chicken.getPosition()).thenReturn(new Position(0,0));\n    Mockito.when(chicken.getHeight()).thenReturn(40);\n    Mockito.when(chicken.getWidth()).thenReturn(40);\n    Mockito.when(chickenController.getLocation()).thenReturn(chicken);\n    Mockito.when(map.collidesDown(Mockito.anyInt(), Mockito.anyInt(),Mockito.anyInt())).thenReturn(collidesDown);\n    Mockito.when(map.collidesRight(Mockito.anyInt(), Mockito.anyInt(),Mockito.anyInt())).thenReturn(colidesright);\n    Mockito.when(map.collidesUp(Mockito.anyInt(), Mockito.anyInt(),Mockito.anyInt())).thenReturn( collidesUp);\n    Mockito.when(map.collidesHarmObject(Mockito.anyInt(), Mockito.anyInt(),Mockito.anyInt(),Mockito.anyInt())).thenReturn(false);\n    mapController = new MapController(map,chickenController,offset);\n\n    mapController.step(game, gui, action);\n\n    Mockito.verify(chickenController, Mockito.times(5)).step(game,gui,action);\n}\n</code></pre>\n<p>but it looks like the mockito is summing the number of interactions with the mock because when I do this it gives me an error</p>\n<p><code>Wanted 5 times: -&gt; at com.chickengame.controller.MapControllerTest.verifycoligions(MapControllerTest.java:104) But was 10 times:</code></p>\n<p>at first, I thought even though my code only called it 5 times I did something wrong, so for testing I changed the number of expected interactions to 10 and then the same error appeared but a little different</p>\n<p><code>Wanted 5 times: -&gt; at com.chickengame.controller.MapControllerTest.verifycoligions(MapControllerTest.java:104) But was 5 times:</code></p>\n<p>My question is, does Mockito sum up the number of interactions?</p>\n<p>The class that I'm testing is this one</p>\n<pre><code>package com.chickengame.controller.game;\n\nimport com.chickengame.Game;\nimport com.chickengame.controller.Controller;\nimport com.chickengame.gui.GUI;\nimport com.chickengame.model.Position;\nimport com.chickengame.model.menus.GameEndMenu;\nimport com.chickengame.model.game.elements.Chicken;\nimport com.chickengame.model.game.map.Map;\nimport com.chickengame.state.menus.GameEndState;\n\npublic class MapController extends Controller&lt;Map&gt; {\n    private final Chicken chicken;\n    private final ChickenController chickenController;\n    private final int adapter;\n\n    public MapController(Map location, ChickenController chickenController, int adapter) {\n        super(location);\n        this.chickenController = chickenController;\n        this.chicken = chickenController.getLocation();\n        this.adapter = adapter;\n    }\n\n    @Override\n    public void step(Game game, GUI gui, GUI.Action action) {\n\n        Position position = chicken.getPosition();\n\n        boolean chickenOutX = (position.getX() + chicken.getWidth() &lt;= 0);\n        boolean chickenOutUp = (position.getY() + chicken.getHeight() &lt;= 0);\n        boolean chickenOutDown = (position.getY() &gt;= 375);\n\n        chickenOut(chickenOutX,chickenOutUp,chickenOutDown, game);\n\n        int chickenXMin = chicken.getPosition().getX();\n        int chickenXMax = chickenXMin + chicken.getWidth();\n        int chickenYMin = chicken.getPosition().getY();\n        int chickenYMax = chickenYMin + chicken.getHeight();\n\n        colidesHarmObject(game, getLocation().collidesHarmObject(chickenXMin, chickenXMax, chickenYMin, chickenYMax));\n        for (int i = 0; i &lt; adapter; i++) {\n            chickenXMin = chicken.getPosition().getX();\n            chickenXMax = chickenXMin + chicken.getWidth();\n            chickenYMin = chicken.getPosition().getY();\n            chickenYMax = chickenYMin + chicken.getHeight();\n\n            moveCamera(-1);\n\n            boolean chickenCollidesDown = (!chicken.isInverted() &amp;&amp; getLocation().collidesDown(chickenXMin, chickenXMax, chickenYMax));\n            boolean chickenCollidesUp = (chicken.isInverted() &amp;&amp; getLocation().collidesUp(chickenXMin, chickenXMax, chickenYMin));\n\n            if (getLocation().collidesHarmObject(chickenXMin, chickenXMax, chickenYMin, chickenYMax)) {\n                break;\n            }\n            colidesUpDown(chickenCollidesDown, chickenCollidesUp);\n            colidesRight(chickenXMax, chickenYMin, chickenYMax);\n\n            chickenController.step(game, gui, action);\n        }\n    }\n\n    void chickenOut(boolean chickenOutX, boolean chickenOutUp, boolean chickenOutDown, Game game ){\n\n        if(chickenOutX ||chickenOutUp ||chickenOutDown)\n        {\n            GameEndState endState = new GameEndState(new GameEndMenu(&quot;gameOver&quot;));\n            game.setState(endState);\n        }\n    }\n    public void colidesHarmObject(Game game,boolean colidesharmobject)\n    {\n        if(colidesharmobject)\n        {\n            GameEndState endState = new GameEndState(new GameEndMenu(&quot;gameOver&quot;));\n            game.setState(endState);\n        }\n    }\n    public void colidesUpDown(boolean chickenCollidesDown, boolean chickenCollidesUp)\n    {\n            if(chickenCollidesDown || chickenCollidesUp)\n            {\n                chicken.setCharge(true);\n            }\n            else\n            {\n                chickenController.moveY();\n            }\n    }\n    public void colidesRight(int chickenXMax, int chickenYMin, int chickenYMax)\n    {\n            if(getLocation().collidesRight(chickenXMax,chickenYMin,chickenYMax))\n            {\n                chickenController.stopX();\n            }\n    }\n    public void moveCamera(int offset)\n    {\n        getLocation().moveMap(offset);\n    }\n}\n\n</code></pre>\n<p>Meanwhile, if I use the inorder of Mockito, I can execute the test with no problems.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}