{
  "question": {
    "tags": [
      "java",
      "selenium-webdriver",
      "iframe",
      "paypal",
      "nopcommerce"
    ],
    "owner": {
      "account_id": 17551077,
      "reputation": 1,
      "user_id": 12731467,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/46f447d9f10394658da4f0c032ff927f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Md Shahin Shanaous",
      "link": "https://stackoverflow.com/users/12731467/md-shahin-shanaous"
    },
    "is_answered": false,
    "view_count": 72,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1747376669,
    "creation_date": 1736321351,
    "question_id": 79338256,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79338256/paypal-advanced-checkout-web-automation-fails-sometimes-in-selenium-java",
    "title": "PayPal Advanced Checkout Web Automation Fails Sometimes in Selenium Java",
    "body": "<p>I am automating the checkout process on a NopCommerce site using PayPal Advanced as the payment method. Most of the time, the automation works, but sometimes it fails to complete the payment.</p>\n<p>When the payment works, the PayPal form looks like this:\n<a href=\"https://i.sstatic.net/8ZKsmITK.png\" rel=\"nofollow noreferrer\">Successful paypal payment form</a></p>\n<p>When it fails, the form looks like this:\n<a href=\"https://i.sstatic.net/v8WFUtPo.png\" rel=\"nofollow noreferrer\">Failed paypal payment form</a></p>\n<p>The main difference is how the card number is shown, with spaces between every four digits when it works.</p>\n<p>At first, I used the sendKeys method in my selenium code:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(60));\n    wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//iframe[@title='paypal_card_number_field']&quot;)));\n\nWebElement cardNumberInput = wait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;number&quot;)));\n\ncardNumberInput.click();\ncardNumberInput.clear();\n\ncardNumberInput.sendKeys(cardNumber);\n\ndriver.switchTo().defaultContent();\n</code></pre>\n<p>I thought sending the whole card number at once might be the problem, so I changed it to send one number at a time:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(60));\n    wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//iframe[@title='paypal_card_number_field']&quot;)));\n\nWebElement cardNumberInput = wait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;number&quot;)));\n\ncardNumberInput.click();\ncardNumberInput.clear();\n\nActions actions = new Actions(driver); \nfor (char c : cardNumber.toCharArray()){\n    actions.sendKeys(String.valueOf(c)).pause(500).perform(); \n}\n\ndriver.switchTo().defaultContent();\n</code></pre>\n<p>Even with this change, the problem still happens sometimes. I tried adding waits before and after filling the card number, but the issue still comes up. The failure is random â€“ sometimes it works, sometimes it doesn't.</p>\n<p>What could be causing this issue, and how can I make the PayPal Advanced checkout more reliable in my automation?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}