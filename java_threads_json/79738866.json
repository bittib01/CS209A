{
  "question": {
    "tags": [
      "java",
      "mockito",
      "junit5"
    ],
    "owner": {
      "account_id": 1634731,
      "reputation": 3964,
      "user_id": 1508529,
      "user_type": "registered",
      "accept_rate": 82,
      "profile_image": "https://www.gravatar.com/avatar/974a4e8de28274c71bf5e08a39ca1b86?s=256&d=identicon&r=PG",
      "display_name": "Mathias Bader",
      "link": "https://stackoverflow.com/users/1508529/mathias-bader"
    },
    "is_answered": true,
    "view_count": 147,
    "accepted_answer_id": 79739815,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1755601624,
    "creation_date": 1755526948,
    "last_edit_date": 1755593451,
    "question_id": 79738866,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79738866/mockito-java-not-producing-reliable-results",
    "title": "Mockito, Java not producing reliable results",
    "body": "<p>I have a Java test class setup with Mockito and get some strange behavior. My class looks as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\npublic class FrameworkTest {\n    @Mock private OrderService orderService;\n\n    @InjectMocks private CompanyService companyService;\n\n    @Test\n    void testexecuteOrder() {\n        Mockito.when(orderService.executeAuftrag((OrderData) Mockito.any()))\n        .thenReturn(OrderAnswer.builder().successful(true).build());\n\n        Output output = companyService.execute();\n        // ...\n    }\n\n}\n</code></pre>\n<p>The method <code>orderService.executeAuftrag()</code> is overloaded, only one method has as parameter <code>OrderData</code>, so I have to cast <code>Mockito.any()</code> to make it work.</p>\n<p>Now my intuition is that <code>company.execute()</code> is executed with the <code>orderService</code> Mock and returns a successful <code>OrderAnswer</code> when the method <code>executeAuftrag</code> is called with OrderData (since I mocked it that way).</p>\n<p>And that is actually what happens. Some of the times. Some other times - executing the exact same code without changes - the method <code>executeAuftrag()</code> returns a <code>null</code> object, making my test fail, because in the following line in CompanyService, a NPE is produced.</p>\n<p>I find it very confusing that the exact same code without any changes sometimes does what it is expected to do and sometimes returns a <code>null</code> where it is supposed to return a <code>OrderAnswer</code> object.</p>\n<p>Am I missing something?</p>\n<p>Maybe I am using the wrong methods for mocking? Maybe there is some state saved between tests that I don't see?</p>\n<p>My Mockito version is</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;version&gt;3.12.4&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I use <code>org.junit.jupiter:junit-jupiter-api:5.10.1</code>.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}