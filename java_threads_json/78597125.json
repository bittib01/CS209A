{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "mockito",
      "junit5",
      "testcase"
    ],
    "owner": {
      "account_id": 30980641,
      "reputation": 31,
      "user_id": 23795602,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/960d277af9fff47fab72aad5198f8b51?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Kinova",
      "link": "https://stackoverflow.com/users/23795602/kinova"
    },
    "is_answered": true,
    "view_count": 178,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1719815000,
    "creation_date": 1717886402,
    "last_edit_date": 1719815000,
    "question_id": 78597125,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78597125/getting-nullpointerexception-while-writing-integration-testcases-in-junit-5-with",
    "title": "Getting NullPointerException while writing Integration TestCases in Junit 5 with mockMvc",
    "body": "<p>Getting this NPE even when all services are annotated\nHere is the code, and I think I can also get similar error for EncryptDecryptService though not getting that for now</p>\n<p>Error</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;comservice.service.SearchService.searchPatient(com.service.requests.SearchPatientRequest)&quot; because &quot;this.patientSearchService&quot; is null\n    at com.service.Controller.SearchControllerIntegrationTest.testSearchPatients(SearchControllerIntegrationTest.java:72)\n</code></pre>\n<p>Controller class</p>\n<pre><code>RestController\n@Slf4j\npublic class SearchController {\n    \n    @Autowired\n    SearchServiceImpl SearchService;\n    @Autowired\n    SearchService psService;\n    \n    @Autowired\n    private EncryptDecryptService encryptDecryptService;\n    \n    @GetMapping(&quot;/search&quot;)\n    public ResponseEntity&lt;SearchResponse&gt; searchPatients(SearchPatientRequest message) {\n        \n        return new ResponseEntity(response, HttpStatus.OK);\n        \n    }\n}\n</code></pre>\n<p>If I m commenting when.thenReturn and verify statement then mockmvc is giving NULLPOINTEREXCEPTION\nTestCases</p>\n<pre><code>\n@ExtendWith(MockitoExtension.class)\n@WebMvcTest(SearchController.class)\n@AutoConfigureMockMvc\n@ActiveProfiles(&quot;test&quot;)\npublic class SearchControllerIntegrationTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    SearchServiceImpl patientSearchService;\n\n    @MockBean\n    private EncryptDecryptService encryptDecryptService;\n\n    @InjectMocks\n    private SearchController patientSearchController;\n\n    private ObjectMapper objectMapper;\n\n    @BeforeEach\n    public void setUp() {\n        MockitoAnnotations.initMocks(this);\n        objectMapper = new ObjectMapper();\n    }\n\n  \n}\n</code></pre>\n<p>pom versions</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.9.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.9.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n            &lt;version&gt;5.9.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Mockito Core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;5.3.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Mockito JUnit Jupiter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.3.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Not able to figure out what is missing or wrong</p>\n<p>I want these test cases to run via mvn clean test command</p>\n<p><strong>Updated Code:</strong> Still not working</p>\n<pre><code>\n@WebMvcTest(PatientSearchController.class)\npublic class TestPatientSearchControllerIntegration {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Autowired\n    private SearchService pss;\n    @MockBean\n    private SearchServiceImpl patientSearchService;\n\n    @MockBean\n    private EncryptDecryptService encryptDecryptService;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n   \n    private Patient CreateORGStudentInElastic() {\n      .....\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}