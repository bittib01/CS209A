{
  "question": {
    "tags": [
      "javascript",
      "java",
      "html",
      "postgresql",
      "spring-boot"
    ],
    "owner": {
      "account_id": 33197700,
      "reputation": 1,
      "user_id": 25712829,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/981224e6d100936dd08bcc34f302f72f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "N P Singh",
      "link": "https://stackoverflow.com/users/25712829/n-p-singh"
    },
    "is_answered": false,
    "view_count": 58,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1725355190,
    "creation_date": 1719314677,
    "question_id": 78667051,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78667051/having-trouble-in-displaying-user-enteries-from-a-database-table-onto-a-html-tab",
    "title": "having trouble in displaying user enteries from a database table onto a HTML table using springboot java application",
    "body": "<p>this is my user entity class</p>\n<pre><code>package com.example.hardware_inventory.model;\n\npublic class User {\n    private Long userId;\n    private String username;\n    private String passwordHash;\n    private String role;\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public String getPasswordHash() {\n        return passwordHash;\n    }\n\n    public void setPasswordHash(String passwordHash) {\n        this.passwordHash = passwordHash;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public Long getUserId() {\n        return userId;\n    }\n\n    public void setUserId(Long userId) {\n        this.userId = userId;\n    }\n\n    // getters and setters\n}\n\n\n</code></pre>\n<p>this is my User Repository class</p>\n<pre><code>package com.example.hardware_inventory.repository;\n\nimport com.example.hardware_inventory.model.User;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.RowMapper;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.dao.EmptyResultDataAccessException;\n\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.List;\nimport java.util.Optional;\n\n@Repository\npublic class UserRepository {\n\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n\n    private static final class UserRowMapper implements RowMapper&lt;User&gt; {\n        @Override\n        public User mapRow(ResultSet rs, int rowNum) throws SQLException {\n            User user = new User();\n            user.setUserId(rs.getLong(&quot;user_id&quot;));\n            user.setUsername(rs.getString(&quot;username&quot;));\n            user.setPasswordHash(rs.getString(&quot;password_hash&quot;));\n            user.setRole(rs.getString(&quot;role&quot;));\n            return user;\n        }\n    }\n\n    public List&lt;User&gt; findAll() {\n        String sql = &quot;SELECT * FROM users&quot;;\n        return jdbcTemplate.query(sql, new UserRowMapper());\n    }\n\n    public Optional&lt;User&gt; findById(Long id) {\n        String sql = &quot;SELECT * FROM users WHERE user_id = ?&quot;;\n        try {\n            return Optional.ofNullable(jdbcTemplate.queryForObject(sql, new Object[]{id}, new UserRowMapper()));\n        } catch (EmptyResultDataAccessException e) {\n            return Optional.empty();\n        }\n    }\n\n    public Optional&lt;User&gt; findByUsername(String username) {\n        String sql = &quot;SELECT * FROM users WHERE username = ?&quot;;\n        try {\n            return Optional.ofNullable(jdbcTemplate.queryForObject(sql, new Object[]{username}, new UserRowMapper()));\n        } catch (EmptyResultDataAccessException e) {\n            return Optional.empty();\n        }\n    }\n\n    public void save(User user) {\n        String sql = &quot;INSERT INTO users (username, password_hash, role) VALUES (?, ?, ?)&quot;;\n        jdbcTemplate.update(sql, user.getUsername(), user.getPasswordHash(), user.getRole());\n    }\n\n    public void update(User user) {\n        String sql = &quot;UPDATE users SET username = ?, password_hash = ?, role = ? WHERE user_id = ?&quot;;\n        jdbcTemplate.update(sql, user.getUsername(), user.getPasswordHash(), user.getRole(), user.getUserId());\n    }\n\n    public void deleteById(Long id) {\n        String sql = &quot;DELETE FROM users WHERE user_id = ?&quot;;\n        jdbcTemplate.update(sql, id);\n    }\n    public void resetPassword(Long id, String newPassword) {\n        String sql = &quot;UPDATE users SET password_hash = ? WHERE user_id = ?&quot;;\n        jdbcTemplate.update(sql, newPassword, id);\n    }\n\n    public void blockUser(Long id) {\n        String sql = &quot;UPDATE users SET role = 'blocked' WHERE user_id = ?&quot;;\n        jdbcTemplate.update(sql, id);\n    }\n}\n\n</code></pre>\n<p>This is my User Service class</p>\n<pre><code>package com.example.hardware_inventory.service;\n\nimport com.example.hardware_inventory.repository.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserService {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    public void resetPassword(Long id, String newPassword) {\n        userRepository.resetPassword(id, newPassword);\n    }\n\n    public void blockUser(Long id) {\n        userRepository.blockUser(id);\n    }\n}\n\n</code></pre>\n<p>I have users given role as user or admin and admin can add a new user in the web page\nIn the add user web page I need to have a list of users already in the table along with option for admin to add user and reset password and block users\nthis is my HTML code for the add_new_user page</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Add New User&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot;&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=&quot;form-container&quot;&gt;\n    &lt;h1&gt;Add New User&lt;/h1&gt;\n    &lt;form id=&quot;add-user-form&quot;&gt;\n        &lt;input type=&quot;text&quot; id=&quot;new-username&quot; placeholder=&quot;Username&quot; required&gt;\n        &lt;input type=&quot;password&quot; id=&quot;new-password&quot; placeholder=&quot;Password&quot; required&gt;\n        &lt;select id=&quot;role&quot;&gt;\n            &lt;option value=&quot;user&quot;&gt;User&lt;/option&gt;\n            &lt;option value=&quot;admin&quot;&gt;Admin&lt;/option&gt;\n        &lt;/select&gt;\n        &lt;button type=&quot;submit&quot;&gt;Add User&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n\n&lt;div class=&quot;table-container&quot;&gt;\n    &lt;h1&gt;All Users&lt;/h1&gt;\n    &lt;table id=&quot;users-table&quot;&gt;\n        &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;User ID&lt;/th&gt;\n            &lt;th&gt;Username&lt;/th&gt;\n            &lt;th&gt;Role&lt;/th&gt;\n            &lt;th&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n        &lt;!-- Dynamic rows will be inserted here --&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n\n&lt;script src=&quot;scripts.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>This is the javascript I've used</p>\n<pre><code>document.addEventListener('DOMContentLoaded', function() {\n    const form = document.getElementById('add-user-form');\n    const usersTable = document.getElementById('users-table').getElementsByTagName('tbody')[0];\n\n    // Fetch users and display them\n    fetch('/api/users')\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            data.forEach(user =&gt; {\n                addUserRow(user);\n            });\n        });\n\n    // Handle form submission\n    form.addEventListener('submit', function(event) {\n        event.preventDefault();\n\n        const newUsername = document.getElementById('new-username').value;\n        const newPassword = document.getElementById('new-password').value;\n        const role = document.getElementById('role').value;\n\n        fetch('/api/users', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: newUsername,\n                password: newPassword,\n                role: role\n            })\n        })\n        .then(response =&gt; response.json())\n        .then(user =&gt; {\n            addUserRow(user);\n            form.reset();\n        });\n    });\n\n    function addUserRow(user) {\n        const row = usersTable.insertRow();\n\n        const cellId = row.insertCell(0);\n        const cellUsername = row.insertCell(1);\n        const cellRole = row.insertCell(2);\n        const cellActions = row.insertCell(3);\n\n        cellId.textContent = user.userId;\n        cellUsername.textContent = user.username;\n        cellRole.textContent = user.role;\n        cellActions.innerHTML = `&lt;form action=&quot;/api/users/delete/${user.userId}&quot; method=&quot;post&quot;&gt;\n                                    &lt;button type=&quot;submit&quot;&gt;Delete&lt;/button&gt;\n                                 &lt;/form&gt;`;\n    }\n});\n\n</code></pre>\n<p>My HTML is not getting populated and I'm struggling with this\nMy Database is already connected with my application I just can't fetch data correctly from my database</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}