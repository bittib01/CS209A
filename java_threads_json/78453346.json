{
  "question": {
    "tags": [
      "java",
      "jframe",
      "keypress"
    ],
    "owner": {
      "account_id": 23195346,
      "reputation": 131,
      "user_id": 19081609,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/624828c43fac4dac1be441d54c6f0ec6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "jared-dev",
      "link": "https://stackoverflow.com/users/19081609/jared-dev"
    },
    "is_answered": false,
    "view_count": 39,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1716991812,
    "creation_date": 1715245168,
    "question_id": 78453346,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78453346/java-keypress-is-getting-the-value-before-the-key-press-not-the-value-during-th",
    "title": "Java KeyPress is getting the value before the key press, not the value during the key press",
    "body": "<p>I'm writing a Java program that generates 5 random letters when user press G. After pressing G, if user press S, the next pressed key would be compared to the random generated letters to check if it matches with that key.</p>\n<p>Here's my code:</p>\n<pre><code>import javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JButton;\nimport javax.swing.JTextField;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\nimport java.util.Random;\n\npublic class randomFive{\n        private static JFrame frame;\n        private static JLabel num1, num2, num3, num4, num5;\n        private static char n1;\n        \npublic static void main(String[] args) {\n  // Create a JFrame\n        JFrame frame = new JFrame(&quot;Add or Subtract&quot;);\n        \n        // Set the layout manager to null\n        frame.setLayout(null);\n        // Set the size of the frame\n        frame.setSize(500, 500);\n        // Set default close operation\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        // Set the frame visibility\n        frame.setVisible(true);\n\n        n1 = 'a';\n\n        frame.addKeyListener(new KeyAdapter() {\n            boolean gPressed = false; // Flag to track if 'G' is pressed\n            @Override\n            public void keyPressed(KeyEvent e) {\n                if (e.getKeyCode() == KeyEvent.VK_G) {\n                    gPressed = true; // Set the flag to true if 'G' is pressed\n                    if (num1 != null) {\n                        frame.remove(num1);\n                        frame.remove(num2);\n                        frame.remove(num3);\n                        frame.remove(num4);\n                        frame.remove(num5);\n                    }\n\n                    //generate random letters from a to z\n                    Random r = new Random();\n                    n1 = (char)(r.nextInt(26) + 'a');\n                    char n2 = (char)(r.nextInt(26) + 'a');\n                    char n3 = (char)(r.nextInt(26) + 'a');\n                    char n4 = (char)(r.nextInt(26) + 'a');\n                    char n5 = (char)(r.nextInt(26) + 'a');\n\n                    // Create new JLabel components\n                    num1 = new JLabel(String.valueOf(n1));\n                    num2 = new JLabel(String.valueOf(n2));\n                    num3 = new JLabel(String.valueOf(n3));\n                    num4 = new JLabel(String.valueOf(n4));\n                    num5 = new JLabel(String.valueOf(n5));\n\n                    // Set the size and position of components\n                    num1.setBounds(140, 200, 200, 20);\n                    num2.setBounds(170, 200, 200, 20);\n                    num3.setBounds(200, 200, 200, 20);\n                    num4.setBounds(230, 200, 200, 20);\n                    num5.setBounds(260, 200, 200, 20);\n\n                    // Add JLabel components to the frame\n                    frame.add(num1);\n                    frame.add(num2);\n                    frame.add(num3);\n                    frame.add(num4);\n                    frame.add(num5);\n\n                    // Repaint the frame to reflect the changes\n                    frame.repaint();\n                    \n                } else if (e.getKeyCode() == KeyEvent.VK_S &amp;&amp; gPressed) {\n                    // Check if 'S' is pressed after 'G'\n                    System.out.println(&quot;'S' key is pressed after 'G'&quot;);\n                    char keyPressed = e.getKeyChar(); // Get the character of the key pressed\n                    System.out.println(&quot;keyPress value is: &quot; + keyPressed);\n                    System.out.println(&quot;n1 value is: &quot; + n1);\n\n                    // Convert the string to char and compare with n1\n                    if (keyPressed == n1) {\n                        // Compare the first character of the string with n1\n                        System.out.println(&quot;The pressed key matches n1&quot;);\n                    }\n                }\n            }\n        });\n        \n        // Set the frame to focusable so that it can receive key events\n        frame.setFocusable(true);\n        // Request the focus for the frame so that it can start receiving key events\n        frame.requestFocusInWindow();\n\n    }\n}\n</code></pre>\n<p>But focus on this code block, this is where the problem happens:</p>\n<pre><code>else if (e.getKeyCode() == KeyEvent.VK_S &amp;&amp; gPressed) {\n                    // Check if 'S' is pressed after 'G'\n                    System.out.println(&quot;'S' key is pressed after 'G'&quot;);\n                    char keyPressed = e.getKeyChar(); // Get the character of the key pressed\n                    System.out.println(&quot;keyPress value is: &quot; + keyPressed);\n                    System.out.println(&quot;n1 value is: &quot; + n1);\n\n                    // Convert the string to char and compare with n1\n                    if (keyPressed == n1) {\n                        // Compare the first character of the string with n1\n                        System.out.println(&quot;The pressed key matches n1&quot;);\n                    }\n                }\n</code></pre>\n<p>When I run the code, let's say the value of n1 is &quot;a&quot;, the value of <strong>keyPressed</strong> is always S even though I pressed a. And I set the value of <strong>keyPressed</strong> inside the else if block so it should get the current pressed key, not the previously pressed S key. What should I do?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}