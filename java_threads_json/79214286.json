{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "docker",
      "couchbase"
    ],
    "owner": {
      "account_id": 7531034,
      "reputation": 2948,
      "user_id": 5719229,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/6ce9838b80ca63bca34363ae64e500a1?s=256&d=identicon&r=PG",
      "display_name": "Sercan Noyan GermiyanoÄŸlu",
      "link": "https://stackoverflow.com/users/5719229/sercan-noyan-germiyano%c4%9flu"
    },
    "is_answered": true,
    "view_count": 128,
    "accepted_answer_id": 79245555,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1733172422,
    "creation_date": 1732266062,
    "last_edit_date": 1732312975,
    "question_id": 79214286,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79214286/docker-connection-issue-for-spring-boot-with-couchbase",
    "title": "Docker Connection Issue for Spring Boot with Couchbase",
    "body": "<p>I want to run my app as Spring Boot with Couchbase in local and on Docker</p>\n<p>Here is .env shown below</p>\n<pre><code>COUCHBASE_USERNAME=Administrator\nCOUCHBASE_PASSWORD=123456\nCOUCHBASE_BUCKET=todo_list\nCOUCHBASE_HOST=127.0.0.1\n</code></pre>\n<p>Here is application.yml file</p>\n<pre><code>spring:\n  application:\n    name: todowithcouchbase\n  config:\n    import: optional:file:.env[.properties]\n  couchbase:\n    connection-string: couchbase://${COUCHBASE_HOST:127.0.0.1}\n    username: ${COUCHBASE_USERNAME:Administrator}\n    password: ${COUCHBASE_PASSWORD:123456}\n    bucket: ${COUCHBASE_BUCKET:todo_list}\n    scopes:\n      user-scope: user-scope\n      task-scope: task-scope\n      invalid-token-scope : invalid-token-scope\n      log-scope: log-scope\n    collections:\n      user-collection: user-collection\n      task-collection: task-collection\n      invalid-token-collection: invalid-token-collection\n      log-collection : log-collection\n\n\n  data:\n    couchbase:\n      auto-index: true\n\nserver:\n  shutdown: graceful\n  port: 2323\n\n# SWAGGER\nspringdoc:\n  api-docs:\n    enabled: true\n  show-actuator: true\n</code></pre>\n<p>Here is the docker-compose.yml file shown below</p>\n<pre><code>version: '3.9'\nservices:\n  couchbase:\n    image: couchbase:latest\n    container_name: couchbase\n    ports:\n      - &quot;8091:8091&quot;\n      - &quot;8092:8092&quot;\n      - &quot;8093:8093&quot;\n      - &quot;8094:8094&quot;\n      - &quot;11210:11210&quot;\n    environment:\n      COUCHBASE_ADMINISTRATOR_USERNAME: ${COUCHBASE_USERNAME:-Administrator}\n      COUCHBASE_ADMINISTRATOR_PASSWORD: ${COUCHBASE_PASSWORD:-123456}\n      COUCHBASE_BUCKET: ${COUCHBASE_BUCKET:-todo_list}\n      COUCHBASE_AUTO_INDEX: true\n    volumes:\n      - ~/couchbase/node1:/opt/couchbase/var\n    healthcheck:\n      test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8091/ui/index.html&quot;]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n    networks:\n      - todowithcouchbase_network\n\n  todowithcouchbase:\n    image: 'todowithcouchbase:latest'\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: todowithcouchbase\n    # restart: on-failure\n    ports:\n      - &quot;2323:2323&quot;\n    depends_on:\n      couchbase:\n        condition: service_healthy\n    env_file:\n      - .env  # Use the .env file for environment variables\n    environment:\n      COUCHBASE_BUCKET: ${COUCHBASE_BUCKET:-todo_list}\n      COUCHBASE_USER: ${COUCHBASE_USERNAME:-Administrator}\n      COUCHBASE_PASSWORD: ${COUCHBASE_PASSWORD:-123456}\n      COUCHBASE_HOST: couchbase\n    networks:\n      - todowithcouchbase_network\n\nnetworks:\n  todowithcouchbase_network:\n    driver: bridge\n</code></pre>\n<p>I have no issue to run it in local. When I ran <code>docker-compose up -d</code>, I got this error shown below.</p>\n<pre><code>DNS SRV lookup failed (name not found). This is expected if the there is no DNS SRV record associated with the hostname in the connection string. Will now try to bootstrap directly from the given hostname. To suppress this message, specify an IP address instead of a hostname (for example: 127.0.0.1 instead of localhost), specify more than one hostname, or set the `io.enableDnsSrv` client setting to false.\n\nConnect attempt 1 failed because of AuthenticationFailureException: Authentication Failure - Potential causes: invalid credentials or if LDAP is enabled ensure PLAIN SASL mechanism is exclusively used on the PasswordAuthenticator (insecure) or TLS is used (recommended) {&quot;bucket&quot;:&quot;todo_list&quot;,&quot;circuitBreaker&quot;:&quot;DISABLED&quot;,&quot;coreId&quot;:&quot;0x1450b18f00000001&quot;,&quot;remote&quot;:&quot;couchbase:11210&quot;,&quot;status&quot;:&quot;UNKNOWN&quot;,&quot;type&quot;:&quot;KV&quot;,&quot;xerror&quot;:{&quot;ref&quot;:&quot;b96586b3-65ae-4b33-9d5e-abb73869e6f9&quot;}} {&quot;bucket&quot;:&quot;todo_list&quot;,&quot;circuitBreaker&quot;:&quot;DISABLED&quot;,&quot;coreId&quot;:&quot;0x1450b18f00000001&quot;,&quot;remote&quot;:&quot;couchbase:11210&quot;,&quot;type&quot;:&quot;KV&quot;}\n\n...\n\nConnect attempt 25 failed because of AuthenticationFailureException: Authentication Failure - Potential causes: invalid credentials or if LDAP is enabled ensure PLAIN SASL mechanism is exclusively used on the PasswordAuthenticator (insecure) or TLS is used (recommended) {&quot;bucket&quot;:&quot;todo_list&quot;,&quot;circuitBreaker&quot;:&quot;DISABLED&quot;,&quot;coreId&quot;:&quot;0x1450b18f00000001&quot;,&quot;remote&quot;:&quot;couchbase:11210&quot;,&quot;status&quot;:&quot;UNKNOWN&quot;,&quot;type&quot;:&quot;KV&quot;,&quot;xerror&quot;:{&quot;ref&quot;:&quot;b2f299fc-1e0b-497c-9d87-34be7eebbcc3&quot;}} {&quot;bucket&quot;:&quot;todo_list&quot;,&quot;circuitBreaker&quot;:&quot;DISABLED&quot;,&quot;coreId&quot;:&quot;0x1450b18f00000001&quot;,&quot;remote&quot;:&quot;couchbase:11210&quot;,&quot;type&quot;:&quot;KV&quot;}\n\nConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'couchbaseBucket' defined in class path resource [com/example/todowithcouchbase/common/config/CouchbaseConfig.class]: Failed to instantiate [com.couchbase.client.java.Bucket]: Factory method 'couchbaseBucket' threw exception with message: CoreHttpRequest, Reason: TIMEOUT {&quot;cancelled&quot;:true,&quot;completed&quot;:true,&quot;coreId&quot;:&quot;0x1450b18f00000001&quot;,&quot;idempotent&quot;:true,&quot;reason&quot;:&quot;TIMEOUT&quot;,&quot;requestId&quot;:5,&quot;requestType&quot;:&quot;CoreHttpRequest&quot;,&quot;retried&quot;:156,&quot;retryReasons&quot;:[&quot;AUTHENTICATION_ERROR&quot;],&quot;service&quot;:{&quot;method&quot;:&quot;GET&quot;,&quot;path&quot;:&quot;/pools/default/buckets/&quot;,&quot;type&quot;:&quot;mgmt&quot;},&quot;timeoutMs&quot;:75000,&quot;timings&quot;:{&quot;totalMicros&quot;:75006648}}\n</code></pre>\n<p>How can I fix the issue ?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}