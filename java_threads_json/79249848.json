{
  "question": {
    "tags": [
      "java",
      "sql",
      "database",
      "postgresql",
      "spring-boot"
    ],
    "owner": {
      "account_id": 12547571,
      "reputation": 73,
      "user_id": 9130331,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/4146539eaed00055fc21c0db3e803d5a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "NoobMaster",
      "link": "https://stackoverflow.com/users/9130331/noobmaster"
    },
    "is_answered": true,
    "view_count": 126,
    "answer_count": 1,
    "score": 3,
    "last_activity_date": 1744225404,
    "creation_date": 1733284981,
    "question_id": 79249848,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79249848/how-to-use-list-of-pairs-as-parameters-for-a-query-in-postgres",
    "title": "How to use list of pairs as parameters for a query in postgres",
    "body": "<p>I am using java spring boot with postgres as my database. I have a table called current logs with many fields. I also have 2 lists one for team ids and one for event dates. Now team_id[0] corresponds to event_date[0] and so on..... I want to write a query which gives me all the records which satisfies a particular set of conditions(you can see them below) on a particular pair. I have tried writing this code :</p>\n<pre><code>    @Query(\n  value =\n      &quot;with pairs as (&quot;\n          + &quot;  select unnest(ARRAY[:teamIds]) as team_id, unnest(ARRAY[:eventDates]) as event_date&quot;\n          + &quot;) &quot;\n          + &quot;select * from current_logs cl &quot;\n          + &quot;inner join current_logs_settings cls on cl.current_logs_settings_id = cls.id &quot;\n          + &quot;INNER JOIN pairs p ON cls.team_id = p.team_id &quot;\n          + &quot;where cls.university_id = :universityId &quot;\n          + &quot;and cl.period_start_date &lt;= p.event_date &quot;\n          + &quot;and cl.period_end_date &gt;= p.event_date&quot;,\n  nativeQuery = true)\nList&lt;CurrentLogs&gt; findUsersByTeamIdsAndEventDates(\n  @Param(&quot;universityId&quot;) Long universityId,\n  @Param(&quot;teamIds&quot;) List&lt;Long&gt; teamIds,\n  @Param(&quot;eventDates&quot;) List&lt;LocalDate&gt; eventDates);\n</code></pre>\n<p>But when I tried this code, it gives me SQL grammar exception possibly because of the ARRAY keyword used on my java lists. Is there anyway I can get my required solution?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}