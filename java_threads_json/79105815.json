{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot"
    ],
    "owner": {
      "account_id": 18264897,
      "reputation": 378,
      "user_id": 13296852,
      "user_type": "registered",
      "profile_image": "https://graph.facebook.com/668126583761063/picture?type=large",
      "display_name": "Akari Oozora",
      "link": "https://stackoverflow.com/users/13296852/akari-oozora"
    },
    "is_answered": true,
    "view_count": 743,
    "accepted_answer_id": 79174134,
    "answer_count": 3,
    "score": 4,
    "last_activity_date": 1740520753,
    "creation_date": 1729367971,
    "last_edit_date": 1729959088,
    "question_id": 79105815,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79105815/receiving-a-list-of-objects-with-files-on-spring-boot",
    "title": "Receiving a list of objects with files on Spring Boot",
    "body": "<p>I made a <a href=\"https://stackoverflow.com/questions/79100375/how-to-receive-a-list-of-objects-on-spring-boot-on-a-multipart-request/79100606#79100606\">question before</a> to receive a list of custom objects on Spring Boot on multipart/form-data requests. Now, I need to make some adjustments to send files as well</p>\n<p>Before, I was sending the list field as a JSON, so a custom converter was enough to handle the task. But it won't work for files. So I found <a href=\"https://stackoverflow.com/a/71754943/13296852\">this answer</a> on how to handle the POST of arrays/lists of objects (they used NextJS as the backend) and I'd like to do something similar for Spring, and can't find any answers as well. Here is an exemple of how the request should look:</p>\n<p><a href=\"https://i.sstatic.net/XWh0Epcg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/XWh0Epcg.png\" alt=\"enter image description here\" /></a></p>\n<p>Or, if you need a JS example:</p>\n<pre><code>function createFormData() {\n    const formDate = new FormData()\n\n    formDate.append('name', 'test')\n    formDate.append('logo', new File([''], 'test.png'))\n    formDate.append('link', 'test')\n\n    formDate.append('contacts[0][name]', 'test')\n    formDate.append('contacts[0][email]', 'test')\n    formDate.append('contacts[0][icon]', new File([''], 'test.png'))\n\n    formDate.append('contacts[1][name]', 'test')\n    formDate.append('contacts[1][email]', 'test')\n    formDate.append('contacts[1][icon]', new File([''], 'test.png'))\n\n    return formDate\n}\n</code></pre>\n<p>When receiving a request like this, Spring returns:\n<code>Invalid property 'contacts[0][email]' of bean class [com.example.trilha.dto.PartnerRequest]: Illegal attempt to get property 'contacts' threw exception</code></p>\n<p>How can I implement this?</p>\n<p>My route is the following:</p>\n<pre><code>@PostMapping(value = &quot;createPartner&quot;, consumes = &quot;multipart/form-data&quot;)\npublic ResponseEntity&lt;String&gt; createPartner(\n        @ModelAttribute PartnerRequest partnerRequest\n) \n</code></pre>\n<p>The DTOs for the request are the following:</p>\n<pre><code>record Contacts(\n        String name,\n        String email,\n        MultipartFile icon\n) {}\n\npublic record PartnerRequest(\n        String name,\n        MultipartFile logo,\n        String link,\n        List&lt;Contact&gt; contacts\n){}\n</code></pre>\n<p>EDIT:\nI do not have a front-end right now, I'm creating and testing the API first before build the interface</p>\n<p>Changing <code>ModelAttribute</code> to <code>RequestParam</code> does not solve the problem, because Spring will try to read as a JSON (thus won't handle the file upload)\n<a href=\"https://i.sstatic.net/Lqqffmdr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/Lqqffmdr.png\" alt=\"enter image description here\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}