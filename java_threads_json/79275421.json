{
  "question": {
    "tags": [
      "java",
      "spring",
      "hibernate",
      "jpa"
    ],
    "owner": {
      "account_id": 38394982,
      "reputation": 11,
      "user_id": 28752605,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/bcb04e7dbf7345ab8cfac67cde6232b2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Ben Sagi",
      "link": "https://stackoverflow.com/users/28752605/ben-sagi"
    },
    "is_answered": false,
    "view_count": 73,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1735920634,
    "creation_date": 1734012470,
    "last_edit_date": 1735920634,
    "question_id": 79275421,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79275421/hibernate-flush-mode-configuration",
    "title": "Hibernate flush mode configuration",
    "body": "<p>Using spring 3.2.1, I found that the default <code>flushModeType = Auto</code> causing issues as I'm trying to work on the object before persist it.</p>\n<p>I tried to set the <code>flushMode</code> to <code>COMMIT</code>, but whenever it happens outside of a <code>@Transactional</code> method, it goes back to <code>AUTO</code>.</p>\n<p>I tried set the <code>flushMode</code> as env var, and directly on the <code>entityManager</code>, but that shows the same behavior. Whenever set the <code>flushMode</code> outside of transaction, it has no meaning.</p>\n<pre><code>entityManager.setFlushMode(FlushModeType.COMMIT);\nSystem.out.println(entityManager.getFlushMode());\n</code></pre>\n<p>prints 'AUTO'</p>\n<p><strong>Updated</strong>: the code been affected out of the auto <code>flushmode</code>:</p>\n<pre><code>private void insertImageToDB(String imagePath, Map&lt;String, ImageMetaData&gt; imageNameToMetaData, int numOfImages,\n      int currentImage) {\n    try {\n      ImageDB imageDB = new ImageDB();\n      imageDB.setGcsFullPath(imagePath);\n      imageDB.setStatus(PENDING);\n\n      setImageMetaData(imagePath, imageNameToMetaData, imageDB); //calling more setters in this method\n\n      imagesRepository.save(imageDB); //this clause causing extra persistence. I can solve it locally by removing this, but prefer to work with explicitly 'save()' action in order to under where and when I'm doing the commit. \n      logger.debug(&quot;processed {}/{} images&quot;, currentImage, numOfImages);\n    } catch (Exception e) {\n      logger.error(&quot;failed to save image {}&quot;, imagePath, e);\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}