{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot"
    ],
    "owner": {
      "account_id": 29104836,
      "reputation": 9,
      "user_id": 22295878,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/dcd8ad3f1c0ce1ebfd67df2a1ee3549a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Frank",
      "link": "https://stackoverflow.com/users/22295878/frank"
    },
    "is_answered": true,
    "view_count": 55,
    "accepted_answer_id": 79304653,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1735010113,
    "creation_date": 1734524432,
    "question_id": 79291070,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79291070/spring-boot-security-always-returns-403-on-all-errors-except-success",
    "title": "Spring Boot Security always returns 403 on all errors except success",
    "body": "<p>I'm learning about Spring Boot and trying to configure the Security Filter Chain with JWT.<br> I'm facing a problem where it always returns 403 errors. For example, when I access a non-existent URL, it throws a 403 error, and in the case of an invalid request body, it throws a 403 error again. Other errors also occur. However, in the case of success, it works correctly.\n<br>Can anyone tell me what my fault is? Thanks a lot.</p>\n<p>My SecurityFilterChain:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n private final JwtRequestFilter jwtRequestFilter;\n @Autowired\n public SecurityConfig(JwtRequestFilter jwtRequestFilter) {\n    this.jwtRequestFilter = jwtRequestFilter;\n }\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) {\n    try {\n        httpSecurity\n                .csrf(csrf -&gt; csrf.csrfTokenRepository(cookieCsrfTokenRepository()).disable())\n                .authorizeHttpRequests(authorize -&gt; authorize.requestMatchers(&quot;/api/v1/*/public/**&quot;, &quot;/api/v1/auth/login&quot;)\n                        .permitAll().anyRequest().authenticated())\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n        return httpSecurity.build();\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n@Bean\npublic CsrfTokenRepository cookieCsrfTokenRepository() {\n    return CookieCsrfTokenRepository.withHttpOnlyFalse();\n  }\n}\n</code></pre>\n<p>JwtRequestFilter :</p>\n<pre><code>@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n        throws ServletException, IOException {\n        chain.doFilter(request, response);\n}\n</code></pre>\n<p>My Dependencies:</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nimplementation 'org.springframework.boot:spring-boot-starter-validation'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\nimplementation 'org.springframework.boot:spring-boot-starter-security'\nimplementation 'io.jsonwebtoken:jjwt-api:0.11.2'\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}