{
  "question": {
    "tags": [
      "java",
      "tomcat",
      "log4j",
      "log4j2"
    ],
    "owner": {
      "account_id": 6680358,
      "reputation": 504,
      "user_id": 5153779,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/rvNh9.png?s=256",
      "display_name": "Ed Sabol",
      "link": "https://stackoverflow.com/users/5153779/ed-sabol"
    },
    "is_answered": true,
    "view_count": 163,
    "accepted_answer_id": 79827943,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1763910380,
    "creation_date": 1743030508,
    "question_id": 79537466,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79537466/how-do-i-configure-tomcat-to-send-access-log-to-syslog-ng-server-on-another-host",
    "title": "How do I configure Tomcat to send access log to syslog-ng server on another host?",
    "body": "<p>I have configured a Tomcat server (currently version 8.5.x) to use log4j2 to send some logging to a syslog-ng server using the following <code>log4j.xml</code> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n    &lt;Appenders&gt;\n        &lt;Socket name=&quot;RemoteAppender&quot; host=&quot;__syslog_server_hostname_here__&quot; port=&quot;###&quot;&gt;\n          &lt;PatternLayout pattern=&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/Socket&gt;\n        &lt;Async name=&quot;ASYNC&quot;&gt;\n          &lt;AppenderRef ref=&quot;RemoteAppender&quot;/&gt;\n        &lt;/Async&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;ASYNC&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>This is working well, but I'm having difficulty transitioning Tomcat's access log to do the same. The Tomcat <code>server.xml</code> has the following for reference:</p>\n<pre class=\"lang-none prettyprint-override\"><code>        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;\n               fileDateFormat=&quot;yyyy-MM&quot;\n               prefix=&quot;access_log.&quot; suffix=&quot;.txt&quot;\n               pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;\n</code></pre>\n<p>What scant information I have found on how to do this says you need to use a <code>Log4JAccessLogValve</code>, but I don't know where to get it (is it included in some Tomcat or log4j2 jar file? some very old information says that you need to compile your own?) or how to configure it in the <code>server.xml</code> and incorporate it into the above <code>log4j.xml</code> in such a way that I can add a separate filter for it in syslog-ng. Can anyone help?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}