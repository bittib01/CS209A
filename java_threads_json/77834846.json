{
  "question": {
    "tags": [
      "java",
      "spring",
      "benchmarking",
      "apachebench"
    ],
    "owner": {
      "account_id": 30351679,
      "reputation": 1,
      "user_id": 23260008,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/82125ee95ca35a65a42a7c2d8c1585d3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "FrozenHat",
      "link": "https://stackoverflow.com/users/23260008/frozenhat"
    },
    "is_answered": true,
    "view_count": 272,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1711574546,
    "creation_date": 1705517534,
    "question_id": 77834846,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77834846/apache-benchmark-first-request-not-concurrent",
    "title": "Apache Benchmark First Request Not Concurrent",
    "body": "<p>When using the Apache Benchmark tool I noticed that the first request is not getting executed concurrently.</p>\n<p>For example, when running: <code>ab -n 4 -c 4 http://localhost:8080/block/10</code> I get the following results:</p>\n<pre><code>2024-01-17T13:40:28.398-05:00  INFO 61127 --- [sample-client] [nio-8080-exec-1] a.s.s.client.controller.HomeController   : 200 OK on Thread[#56,http-nio-8080-exec-1,5,main]\n2024-01-17T13:40:38.414-05:00  INFO 61127 --- [sample-client] [nio-8080-exec-3] a.s.s.client.controller.HomeController   : 200 OK on Thread[#58,http-nio-8080-exec-3,5,main]\n2024-01-17T13:40:38.414-05:00  INFO 61127 --- [sample-client] [nio-8080-exec-2] a.s.s.client.controller.HomeController   : 200 OK on Thread[#57,http-nio-8080-exec-2,5,main]\n2024-01-17T13:40:38.414-05:00  INFO 61127 --- [sample-client] [nio-8080-exec-4] a.s.s.client.controller.HomeController   : 200 OK on Thread[#59,http-nio-8080-exec-4,5,main]\n</code></pre>\n<p>The first request is executed at 13:40:28 and runs by itself.  After it returns the remaining 3 requests are in parallel.  All 4 requests run on different threads, but not at the same time.</p>\n<p>I don't think it is a problem with my laptop not being able to handle 4 threads concurrently.  If I change the parameters to <code>-n 3 -c 3</code> I get the same results.  The first request is executed and then when it finishes the 2 remaining request are done in parallel.</p>\n<p>The code I'm using is a Spring Boot application that makes a call to another Spring Boot application.  I'm following along with a video by <a href=\"https://www.youtube.com/watch?v=THavIYnlwck\" rel=\"nofollow noreferrer\">Spring Developer Advocate Dan Vega</a>.  Dan experiences the problem too, first seen around 16:15 in the video.  He is expecting a time of 15 seconds but the result is 18 seconds.  This off by 1 factor continues throughout all of his tests.  Likely the cause in the video is the same I'm experiencing.</p>\n<p>Any thoughts as to what is causing this or how to get around it?  This is causing the benchmarks to be off.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}