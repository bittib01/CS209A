{
  "question": {
    "tags": [
      "java",
      "algorithm",
      "data-structures"
    ],
    "owner": {
      "account_id": 25377798,
      "reputation": 11,
      "user_id": 19190672,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/73fb9b9e256807f98065065b42b549d1?s=256&d=identicon&r=PG",
      "display_name": "John Snow",
      "link": "https://stackoverflow.com/users/19190672/john-snow"
    },
    "is_answered": true,
    "view_count": 180,
    "accepted_answer_id": 78906298,
    "answer_count": 3,
    "score": 1,
    "last_activity_date": 1724421834,
    "creation_date": 1708508629,
    "last_edit_date": 1708755377,
    "question_id": 78032956,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78032956/how-can-i-trigger-an-expensive-computation-at-most-once-every-30-minutes",
    "title": "How can I trigger an expensive computation at most once every 30 minutes?",
    "body": "<p>We have a system that receives a bunch of &quot;item was updated/created/...&quot; events, and that is responsible for doing an expensive computation on the item after it has changed. Currently this system will perform this expensive computation every time an event of the type &quot;item was updated/created/...&quot; arrives. However, changes to items are often made in quick succession, which thus results in a lot of (repeated) expensive computations and load on the system in a short time frame.</p>\n<p>We would like to delay the expensive computation for 30 minutes to aggregate the various changes mad in quick succession, and at the end of that window perform the computation only once.</p>\n<p>Thus, when the first &quot;item X was updated/created/...&quot; arrives we would like to start a timer for 30 minutes. Any events related to item X during that window will NOT extend the window duration of start a new window. At the end of those 30 minutes the computation is performed. If an event arrives after that cache wipe, a new window of 30 minutes is started</p>\n<p>A similar, unrelated window might also exist at the same time for item Y. In total we have 500,000 items.</p>\n<p>Would it be possible to help us with some pointers/advice on how to efficiently implement such an &quot;aggregation&quot; window? Is there an efficient data structure that could solve our problem?</p>\n<p>We have thought of adding all the events to a database and then performing a group by query every 30 minutes via a cron, but this comes with some drawbacks:</p>\n<ul>\n<li>All item recalculations are executed at the same time (the time that the cron interval triggers), which causes a lot of load on the system. Such a fixed window interval might thus not be a good solution. We would thus prefer that the first event triggers that start of the window, and not a fixed cron.</li>\n<li>The overhead of storing all events in the database does not look appealing.</li>\n<li>Changing the window size from 30 minutes to 30 seconds might result in a lot of creates and deletes to the database.</li>\n<li>...</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}