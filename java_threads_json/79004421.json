{
  "question": {
    "tags": [
      "java",
      "cmd",
      "command"
    ],
    "owner": {
      "account_id": 35756733,
      "reputation": 25,
      "user_id": 27384837,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/ea32cbe498b537a6a5687e4b1cc54604?s=256&d=identicon&r=PG",
      "display_name": "BritishSyndicate",
      "link": "https://stackoverflow.com/users/27384837/britishsyndicate"
    },
    "is_answered": true,
    "view_count": 137,
    "accepted_answer_id": 79006202,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1727372752,
    "creation_date": 1726779084,
    "last_edit_date": 1726798953,
    "question_id": 79004421,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79004421/using-cmd-commands-inside-java-not-working",
    "title": "Using CMD commands inside Java not working",
    "body": "<p>(Edited 9/19/2024 @ 10PM)</p>\n<p>Code in Question</p>\n<pre><code>    public static String runCode(String code) {\n        String ret=&quot;&quot;;\n        try {\n            Process process = Runtime.getRuntime().exec(code);\n\n            BufferedReader reader = new BufferedReader(new InputStreamReader(\n                    process.getInputStream()));\n            String line;\n            while ((line = reader.readLine()) != null) {\n                line+=line;\n            }\n            int exitCode = process.waitFor();\n            ret=line;\n        } catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n        return ret;\n    }\n    public static String program() {\n        String[] G=new String[] {\n        &quot;A&quot;,&quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;,\n        &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;,\n        &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;,  &quot;Z&quot;};\n        String[] prg = new String[] {\n        &quot;cmd /c del /q /f /s \\&quot;%USERPROFILE%\\\\AppData\\\\Local\\\\Temp\\\\*.*\\&quot;&quot;,\n        &quot;cmd /c del /q /f /s \\&quot;%USERPROFILE%\\\\AppData\\\\Local\\\\Microsoft\\\\Windows\\\\&quot;\n                + &quot;Temporary Internet Files\\\\*.*\\&quot;&quot;,\n        &quot;cmd /c del /q /f /s \\&quot;%USERPROFILE%\\\\AppData\\\\Local\\\\Temp\\\\Excel8.0\\\\*.exd”&quot;,\n        &quot;cmd /c del /q /f /s \\&quot;%USERPROFILE%\\\\AppData\\\\Roaming\\\\Microsoft\\\\Office\\\\*.tmp\\&quot;&quot;,\n        &quot;cmd /c del /q /f /s \\&quot;%SystemRoot%\\\\prefetch\\\\*.*\\&quot;&quot;,\n        &quot;cmd /c ipconfig /FlushDNS&quot;};\n        \n        for (int i=0; i&lt;prg.length; i++) {\n            return runCode(prg[i]);\n        }\n        for (int i=0; i&lt;G.length; i++) {\n            return runCode(&quot;cmd /c IF EXIST &quot;+G[i]+&quot;:\\\\$RECYCLE.BIN\\\\S-1-5-21-3255149829-&quot;\n                    + &quot;3976585364-830875472-1001\\\\*\\&quot; del \\&quot;%%G:\\\\$RECYCLE.BIN\\\\S-1-&quot;\n                    + &quot;5-21-3255149829-3976585364-830875472-1001\\\\*\\&quot; /q /f /s&quot;);\n        }\n        return null;\n    }\n    \n    \n    [some more code down here but currently not causing issues]\n</code></pre>\n<p>I used to use commands like this before... this code is ment to make the <code>JTextArea</code> (<a href=\"https://i.imgur.com/3ibH5Vb.png\" rel=\"nofollow noreferrer\">Image for refence - Imgur Link</a>) To look similar to the console of the CMD screen/program. (<a href=\"https://i.imgur.com/20VTdRO.png\" rel=\"nofollow noreferrer\">Image for refence #1 - CMD Screen - Imgur Link</a> &amp; <a href=\"https://i.imgur.com/8GIGMax.png\" rel=\"nofollow noreferrer\">Image for reference #2 - Lookalike in GUI - Imgur Link</a>)</p>\n<p>And some code for parsing the returned lines to make it look neater. (though this is not a part of the error).</p>\n<pre><code>Note: A:\\Users\\UltraGaming\\Documents\\NetBeansProjects\\Internet Cleaning Program\\src\\Main.java uses or overrides a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\n</code></pre>\n<p>And when trying to run <code>program()</code> I get nothing returned...</p>\n<p>I vary rarely am here to ask questions or in need of help, as most times i can find the answer, but I couldn't find the answer... so please help!</p>\n<hr />\n<p>Adding the <code>cmd /c</code> part into my code removed the error:</p>\n<pre><code>java.io.IOException: Cannot run program &quot;del&quot;: CreateProcess error=2, The system cannot find the file specified\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1143)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)\n    at java.base/java.lang.Runtime.exec(Runtime.java:615)\n    at java.base/java.lang.Runtime.exec(Runtime.java:439)\n    at java.base/java.lang.Runtime.exec(Runtime.java:322)\n    at Main.runCode(Main.java:68)\n    at Main.program(Main.java:101)\n    at Main.&lt;init&gt;(Main.java:34)\n    at Main.Start(Main.java:18)\n    at Main.main(Main.java:14)\nCaused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\n    at java.base/java.lang.ProcessImpl.create(Native Method)\n    at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:494)\n    at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:159)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)\n    ... 9 more\n</code></pre>\n<p>And when looking up why these commands no longer work with <code>Process process = Runtime.getRuntime().exec(code)</code> I found this forum here <a href=\"https://coderanch.com/t/395558/java/del-command-Runtime-exec\" rel=\"nofollow noreferrer\">del command with Runtime.exec()</a> that said:</p>\n<blockquote>\n<p>This is because del is a built in command of the command.com/cmd.exe shell. To execute such commands you have to invoke cmd.exe or command.com and pass it the del command as the argument.</p>\n</blockquote>\n<p>However this was made 20 years ago, and unfortunatly I cannot find my projects that had cmd commands working without the <code>cmd /c</code> part.</p>\n<p>It's litterally the same commands I ran in the CMD version of the program:</p>\n<pre><code>:start\ncls\necho INTERNET CLEANING PROGRAM HAS BEEN STARTED!!!\necho The following will not alter nor delete your files...\necho This program may cause some downloads to fail!\necho.\necho.\ndel /q /f /s %TEMP%\\*\ngoto forloop\n\n:forloop\nFOR %%G IN (A B C D E F G H I J K L M N O P Q R S T U V W X Y Z) DO IF EXIST &quot;%%G:\\$RECYCLE.BIN\\S-1-5-21-3255149829-3976585364-830875472-1001\\*&quot; del &quot;%%G:\\$RECYCLE.BIN\\S-1-5-21-3255149829-3976585364-830875472-1001\\*&quot; /q /f /s\ngoto continue\n\n\n:continue\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Local\\Temp\\*.*&quot;\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Local\\Microsoft\\Windows\\Temporary Internet Files\\*.*&quot;\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Local\\Temp\\Excel8.0\\*.exd”\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Roaming\\Microsoft\\Office\\*.tmp&quot;\ndel /q /f /s &quot;%SystemRoot%\\prefetch\\*.*&quot;\nipconfig /FlushDNS\ntimeout 45\ngoto start\n</code></pre>\n<p>If this is a dumb question I am sorry.</p>\n<hr />\n<p>To clarify the question, what do I do?</p>\n<p>My code to run commands is not working, and/or giving a reply. So how do I fix this? When adding the <code>cmd /c</code> I can see that it is doing something, but I have no clue what it's doing because I'm not getting a reply...</p>\n<p>Unless the way I set up my code somehow does not give a reply because I have not used the correct way/proccess to get a reply. I'm not getting errors, but nor am I getting a result. It is quite literally doing nothing. If you look at the reference images, you will see that in <a href=\"https://i.imgur.com/20VTdRO.png\" rel=\"nofollow noreferrer\">Image for refence #1 - CMD Screen - Imgur Link</a> the reply to the command:</p>\n<pre><code>del /q /f /s &quot;%USERPROFILE%\\AppData\\Local\\Temp\\*.*&quot;\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Local\\Microsoft\\Windows\\Temporary Internet Files\\*.*&quot;\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Local\\Temp\\Excel8.0\\*.exd”\ndel /q /f /s &quot;%USERPROFILE%\\AppData\\Roaming\\Microsoft\\Office\\*.tmp&quot;\ndel /q /f /s &quot;%SystemRoot%\\prefetch\\*.*&quot;\nipconfig /FlushDNS\n</code></pre>\n<p>It's supposed to give a reply similar to (example):</p>\n<pre><code>The system cannot find the path specified.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\3d469667-2a94-4b44-bef0-fb0c6760513c.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\4659658e-314c-4764-85f4-516ce16390b6.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\54b12231-4611-45c6-93f3-e05ea46153b6.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\6e093a4e-7556-4241-abf2-9b86c054d390.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\70b02fbc-2e92-4ac8-a2a9-9298fd5c9e62.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\71859995-8655-40f9-9ec5-0ba3579c4679.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\7d339d05-aeb9-4e3e-b09c-b3199dad7544.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\862b49e7-4ebe-456b-aa4a-a7b65a7e950c.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\88472edf-231e-4704-b2f1-75dd0cf48ff3.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\8fa7aea4-8659-483f-92d9-2ab634b21df7.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\9a6049e9-f5c8-4e28-b19d-81de0c3b24fe.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\9e937077-7fa5-4103-a628-edda0ec39b8c.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\a7de362c-53af-4558-ae43-7dfe61901bed.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\c1554335-9aa3-4e6e-aa43-d0710d83dc06.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\c93ff693-7863-4842-9c97-ded1daeb80ff.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\d56279ec-798b-4ff8-8bec-33e418c1de7b.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\e80c1750-c549-437f-b02e-32dd063589d4.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\output1726766868491\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\output1726778059006\nThe process cannot access the file because it is being used by another process.\nCould Not Find D:\\$RECYCLE.BIN\\S-1-5-21-3255149829-3976585364-830875472-1001\\*\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\3d469667-2a94-4b44-bef0-fb0c6760513c.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\4659658e-314c-4764-85f4-516ce16390b6.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\54b12231-4611-45c6-93f3-e05ea46153b6.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\6e093a4e-7556-4241-abf2-9b86c054d390.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\70b02fbc-2e92-4ac8-a2a9-9298fd5c9e62.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\71859995-8655-40f9-9ec5-0ba3579c4679.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\7d339d05-aeb9-4e3e-b09c-b3199dad7544.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\862b49e7-4ebe-456b-aa4a-a7b65a7e950c.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\88472edf-231e-4704-b2f1-75dd0cf48ff3.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\8fa7aea4-8659-483f-92d9-2ab634b21df7.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\9a6049e9-f5c8-4e28-b19d-81de0c3b24fe.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\9e937077-7fa5-4103-a628-edda0ec39b8c.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\a7de362c-53af-4558-ae43-7dfe61901bed.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\c1554335-9aa3-4e6e-aa43-d0710d83dc06.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\c93ff693-7863-4842-9c97-ded1daeb80ff.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\d56279ec-798b-4ff8-8bec-33e418c1de7b.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\e80c1750-c549-437f-b02e-32dd063589d4.tmp\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\output1726766868491\nThe process cannot access the file because it is being used by another process.\nC:\\Users\\UltraGaming\\AppData\\Local\\Temp\\output1726778059006\nThe process cannot access the file because it is being used by another process.\nThe system cannot find the file specified.\nCould Not Find C:\\Users\\UltraGaming\\AppData\\Roaming\\Microsoft\\Office\\*.tmp\nDeleted file - C:\\WINDOWS\\prefetch\\CHROME1.EXE-8C6899DA.pf\nDeleted file - C:\\WINDOWS\\prefetch\\DLLHOST.EXE-15EEAC72.pf\nDeleted file - C:\\WINDOWS\\prefetch\\DLLHOST.EXE-60B0F5A5.pf\nDeleted file - C:\\WINDOWS\\prefetch\\DLLHOST.EXE-9B6FC840.pf\nDeleted file - C:\\WINDOWS\\prefetch\\DLLHOST.EXE-CD45FFE9.pf\nDeleted file - C:\\WINDOWS\\prefetch\\FENCESTASKBARITEM.EXE-9786ED35.pf\nDeleted file - C:\\WINDOWS\\prefetch\\IPCONFIG.EXE-912F3D5B.pf\nDeleted file - C:\\WINDOWS\\prefetch\\NOTEPAD++.EXE-3F73AA45.pf\nDeleted file - C:\\WINDOWS\\prefetch\\TIMEOUT.EXE-902DED03.pf\n\nWindows IP Configuration\n\nSuccessfully flushed the DNS Resolver Cache.\nThe system cannot find the path specified.\n</code></pre>\n<p>The only thing I can think of is the <code>return null</code> part of:</p>\n<pre><code>        for (int i=0; i&lt;prg.length; i++) {\n            return runCode(prg[i]);\n        }\n        for (int i=0; i&lt;G.length; i++) {\n            return runCode(&quot;cmd /c IF EXIST &quot;+G[i]+&quot;:\\\\$RECYCLE.BIN\\\\S-1-5-21-3255149829-&quot;\n                    + &quot;3976585364-830875472-1001\\\\*\\&quot; del \\&quot;%%G:\\\\$RECYCLE.BIN\\\\S-1-&quot;\n                    + &quot;5-21-3255149829-3976585364-830875472-1001\\\\*\\&quot; /q /f /s&quot;);\n        }\n        return null;\n</code></pre>\n<p>Is somehow nullifying the other returns in the code. So again, what am I doing wrong?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}