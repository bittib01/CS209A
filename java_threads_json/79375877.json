{
  "question": {
    "tags": [
      "java",
      "android"
    ],
    "owner": {
      "account_id": 8631006,
      "reputation": 67,
      "user_id": 6462591,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/-lnyE4TG-lDg/AAAAAAAAAAI/AAAAAAAAABk/mMTPqEIpTLE/s256-rj/photo.jpg",
      "display_name": "İsmail &#199;İLOĞLU",
      "link": "https://stackoverflow.com/users/6462591/%c4%b0smail-%c3%87%c4%b0lo%c4%9elu"
    },
    "is_answered": false,
    "view_count": 25,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1737699076,
    "creation_date": 1737491779,
    "last_edit_date": 1737699076,
    "question_id": 79375877,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79375877/android-java-restfull-api-string-in-img-tag-not-loading-problem",
    "title": "Android Java Restfull api String in img tag not loading problem",
    "body": "<p>Hi I developing Android java app I am just learning Android Java.\nThe image in the string data that I get from the API is not loaded. I am using the Picasso class to load the image. While the image can be loaded in Imageview, the image tag defined in the String is not pulled I tried using Glide and Picasso class as a solution but I couldn't find any more solutions because I got an error.\nContentDetail.java</p>\n<pre><code>public class ContentDetail extends AppCompatActivity {\n    ContentDetailBinding makDet;\n    MakalelerAdapter contentsAdp;\n    CompositeDisposable compositeDisposable;\n    Retrofit retrofit;\n    ArrayList&lt;ContentsApi&gt; content;\n    private String BASE_URL = &quot;https://aa.com.tr/&quot;;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        makDet=ContentDetailBinding .inflate(getLayoutInflater());\n        super.onCreate(savedInstanceState);\n        EdgeToEdge.enable(this);\n        Gson gson = new GsonBuilder().setLenient().create();\n\n        retrofit = new Retrofit.Builder()\n                .baseUrl(BASE_URL)\n                .addConverterFactory(GsonConverterFactory.create(gson))\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .build();\n        loadData();\n\n        setContentView(makDet.getRoot());\n    }\n\n    private void loadData(){\n\n        final Contents contentApi = retrofit.create(Contents.class);\n\n        compositeDisposable = new CompositeDisposable();\n        int getId=getIntent().getIntExtra(&quot;content_id&quot;,0);\n        Log.i(&quot;id&quot;,String.valueOf(getId));\n        compositeDisposable.add(contentApi.getContent(getId)\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(this::handleResponse, Throwable::printStackTrace)\n        );\n\n    }\n\n\n    private void handleResponse(List&lt;ContentsApi&gt; contentData) {\n        Log.i(&quot;dxx&quot;,contentData.get(0).content_image);\n        if(contentData.isEmpty()){\n\n            Snackbar.make(makDet.getRoot(),&quot;İçerik Bulunamadı&quot;,Snackbar.LENGTH_LONG).show();\n        }else{\n            Log.i(&quot;dxx&quot;,contentData.get(0).content_image);\n            ContentsApi content = new ArrayList&lt;&gt;(contentData).get(0);\n            TextView info = makDet.detailInfo;\n           // info.setText(Html.fromHtml(content.content_text,Html.FROM_HTML_MODE_COMPACT));\n            Spannable html;\n            /*if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n                Log.i(&quot;Hata bimp&quot;,&quot;hata2&quot;);\n                html = (Spannable) Html.fromHtml(content.content_text, Html.FROM_HTML_MODE_LEGACY, new PicassoImageGetter(info), null);\n            } else {\n                Log.i(&quot;hata bimp&quot;,&quot;hata&quot;);\n                html = (Spannable) Html.fromHtml(content.content_text, new PicassoImageGetter(info), null);\n            }\n            */\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n                html = (Spannable) Html.fromHtml(content.content_text, Html.FROM_HTML_MODE_LEGACY, new PicassoImageGetter(info), null);\n            } else {\n                html = (Spannable) Html.fromHtml(content.content_text, new PicassoImageGetter(info), null);\n            }\n\n            info.setText(html);\n            Picasso.get().load(Uri.parse(content.content_image)).fit().into(imageView);\n        }\n\n\n    }\n}\n</code></pre>\n<p>PicassoImageGetter.java class</p>\n<pre><code>import android.graphics.Bitmap;\nimport android.graphics.drawable.BitmapDrawable;\nimport android.graphics.drawable.Drawable;\nimport android.text.Html;\nimport android.util.Log;\nimport android.widget.TextView;\n\nimport com.bumptech.glide.Glide;\nimport com.bumptech.glide.request.target.CustomTarget;\nimport com.bumptech.glide.request.transition.Transition;\nimport com.squareup.picasso.Picasso;\nimport com.squareup.picasso.Target;\n\nimport io.reactivex.annotations.NonNull;\nimport io.reactivex.annotations.Nullable;\n\n\npublic class PicassoImageGetter implements Html.ImageGetter {\n    private TextView textView;\n\n    public PicassoImageGetter(TextView textView) {\n        this.textView = textView;\n    }\n\n    public Drawable getDrawable(String source) {\n        // Use Glide or Picasso to load the WebP image\n        Glide.with(textView.getContext())\n                .load(source)\n                .into(new CustomTarget&lt;Drawable&gt;() {\n                    @Override\n                    public void onResourceReady(@NonNull Drawable resource, @Nullable Transition&lt;? super Drawable&gt; transition) {\n                        resource.setBounds(0, 0, resource.getIntrinsicWidth(), resource.getIntrinsicHeight());\n                        textView.invalidate();\n                        textView.setText(textView.getText()); // Refresh the TextView\n                    }\n\n                    @Override\n                    public void onLoadCleared(@Nullable Drawable placeholder) {\n                        // Handle placeholder if needed\n                    }\n                });\n        return null; // Return null to indicate that the drawable is not ready yet\n    }\n    //@Override\n    public Drawable getDrawable2(String source) {\n        // Use Picasso or any other image loading library to load the image\n        // Example with Picasso:\n        Picasso.get().load(source).into(new Target() {\n            @Override\n            public void onBitmapLoaded(Bitmap bitmap, Picasso.LoadedFrom from) {\n                Drawable drawable = new BitmapDrawable(textView.getResources(), bitmap);\n                drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());\n                textView.invalidate();\n                textView.setText(textView.getText()); // Refresh the TextView\n            }\n\n            @Override\n            public void onBitmapFailed(Exception e, Drawable errorDrawable) {\n                Log.i(&quot;Hata bimp&quot;,e.getMessage());\n            }\n\n            @Override\n            public void onPrepareLoad(Drawable placeHolderDrawable) {\n                // Optional: Set a placeholder\n            }\n        });\n        return null; // Return null to indicate that the drawable is not ready yet\n    }\n}\n</code></pre>\n<p>Hi I developing Android java app\nThe image in the string data that I get from the API is not loaded. I am using the Picasso class to load the image. While the image can be loaded in Imageview, the image tag defined in the String is not pulled</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}