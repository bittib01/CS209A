{
  "question": {
    "tags": [
      "java",
      "algorithm",
      "data-structures",
      "stack"
    ],
    "owner": {
      "account_id": 19144297,
      "reputation": 767,
      "user_id": 13983643,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/e21a8a4aacfdf69fef7bc0a2f3e9ca9e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "newLearner",
      "link": "https://stackoverflow.com/users/13983643/newlearner"
    },
    "is_answered": true,
    "view_count": 122,
    "accepted_answer_id": 78793497,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1728447237,
    "creation_date": 1721907247,
    "last_edit_date": 1721918180,
    "question_id": 78793070,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78793070/how-is-my-algorithm-for-stock-span-problem-incorrect",
    "title": "How is my algorithm for stock span problem incorrect?",
    "body": "<p>The question :</p>\n<p>The stock span problem is a financial problem where we have a series of n daily price quotes for a stock and we need to calculate the span of stocks price for all n days.\nThe span Si of the stocks price on a given day i is defined as the maximum number of consecutive days just before the given day, for which the price of the stock on the given day is less than or equal to its price on the current day.\nFor example, if an array of 7 days prices is given as {100, 80, 60, 70, 60, 75, 85}, then the span values for corresponding 7 days are {1, 1, 1, 2, 1, 4, 6}.</p>\n<p>My SOlution:</p>\n<pre><code>class Solution {\n    \n    public static int[] calculateSpan(int price[], int n) {\n        Stack&lt;Integer&gt; s1 = new Stack&lt;&gt;();\n        Stack&lt;Integer&gt; s2 = new Stack&lt;&gt;();\n        int[] count = new int[price.length];\n        \n        for(int i = 0 ; i &lt; n; i++) {\n            int size = 0;\n            \n            while(!s1.empty() &amp;&amp; price[i] &gt; s1.peek()) {\n                s2.push(s1.pop());\n            }\n            if(!s2.empty()) {\n                size = s2.size();\n            }\n            while(!s2.empty() &amp;&amp; price[i] &gt; s2.peek()) {\n                s1.push(s2.pop());\n            }\n            \n            s1.push(price[i]);\n            count[i] = size + 1;\n        }\n        \n        return count;\n    }\n}\n</code></pre>\n<p>For input:</p>\n<pre><code>n = 134\n74 665 742 512 254 469 748 445 663 758 38 60 724 142 330 779 317 636 591 243 289 507 241 143 65 249 247 606 691 330 371 151 607 702 394 349 430 624 85 755 357 641 167 177 332 709 145 440 627 124 738 739 119 483 530 542 34 716 640 59 305 331 378 707 474 787 222 746 525 673 671 230 378 374 298 513 787 491 362 237 756 768 456 375 32 53 151 351 142 125 367 231 708 592 408 138 258 288 554 784 546 110 210 159 222 189 23 147 307 231 414 369 101 592 363 56 611 760 425 538 749 84 396 42 403 351 692 437 575 621 597 22 149 800\n</code></pre>\n<p>My output is:</p>\n<pre><code>1 2 3 1 1 2 7 1 2 10 1 2 3 1 2 16 1 2 1 1 2 3 1 1 1 4 1 10 13 1 2 1 4 18 1 1 3 4 1 24 1 2 1 2 3 6 1 2 3 1 11 12 1 2 3 4 1 6 1 1 2 3 4 6 1 66 1 2 1 2 1 1 2 1 1 5 11 1 1 1 4 5 1 1 1 2 3 4 1 1 7 1 11 1 1 1 2 3 5 23 1 1 2 1 4 1 1 2 8 1 10 1 1 14 1 1 17 18 1 2 3 1 2 1 4 1 6 1 2 3 1 1 2 134\n</code></pre>\n<p>while the expected output is :</p>\n<pre><code>1 2 3 1 1 2 7 1 2 10 1 2 3 1 2 16 1 2 1 1 2 3 1 1 1 4 1 10 13 1 2 1 4 18 1 1 3 4 1 24 1 2 1 2 3 6 1 2 3 1 11 12 1 2 3 4 1 6 1 1 2 3 4 6 1 66 1 2 1 2 1 1 2 1 1 5 77 1 1 1 4 5 1 1 1 2 3 4 1 1 7 1 11 1 1 1 2 3 5 23 1 1 2 1 4 1 1 2 8 1 10 1 1 14 1 1 17 18 1 2 3 1 2 1 4 1 6 1 2 3 1 1 2 134\n</code></pre>\n<p>The difference is that one value in the output is 77 and mine is 11.</p>\n<p>I have been debugging this for last 5 hours but unable to understand.\nWould really appreciate help in understanding the issue.</p>\n<p><strong>Side note</strong>: I know we can do this with 1 stack and various other optimised approaches. But I just want to know how is my approach incorrect ? WHat is wrong in my algorithm ?</p>\n<p>[EDIT] Original question here: <a href=\"https://www.geeksforgeeks.org/problems/stock-span-problem-1587115621/1\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/problems/stock-span-problem-1587115621/1</a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}