{
  "question": {
    "tags": [
      "java",
      "android",
      "gradle",
      "android-gradle-plugin",
      "java-native-interface"
    ],
    "owner": {
      "account_id": 16147123,
      "reputation": 11,
      "user_id": 11656486,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/e100ae83b17dcdac808d452222245f0b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "bobycx1",
      "link": "https://stackoverflow.com/users/11656486/bobycx1"
    },
    "is_answered": true,
    "view_count": 521,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1736344995,
    "creation_date": 1716764753,
    "question_id": 78536673,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78536673/android-native-library-file-not-found-at-runtim",
    "title": "Android Native library file not found at runtim",
    "body": "<p>I'm building a VPN app (using v2ray protocol) for school project and I am trying to use this (<a href=\"https://github.com/dev7dev/V2ray-Android\" rel=\"nofollow noreferrer\">https://github.com/dev7dev/V2ray-Android</a>) library and everything works fine if I just build the provided project files, however when I make my own project and import the module while following the instructions, I get a runtime error saying that the jnilib &quot;libtun2socks.so&quot; file does not exist (Cannot run program &quot;/data/app/com.example.bobvpn5-JTEQwsRle2opKu7bKLubFg==/lib/arm64/libtun2socks.so&quot; (in directory &quot;/data/user/0/com.example.bobvpn5/files&quot;): error=2, No such file or directory).</p>\n<p>I analyzed my apk file and the file is actually in the apk but just not loaded properly. I used this piece debug code to verify:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(getApplicationInfo().nativeLibraryDir, &quot;libtun2socks.so&quot;);\n        if (file.exists()) {\n            Log.d(&quot;!!!MainActivity&quot;, &quot;libtun2socks.so exists at &quot; + file.getAbsolutePath());\n        } else {\n            Log.e(&quot;!!!MainActivity&quot;, &quot;libtun2socks.so does NOT exist&quot;);\n        }\n</code></pre>\n<p>and tested on both the provided project and my own. Provided project shows that it exists (as expected) and my project's debug shows that it does not exist. I also noticed this linker error for my project <a href=\"https://i.sstatic.net/IYzfKbPW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/IYzfKbPW.png\" alt=\"linker error\" /></a>, that does not come up when running the provided project.</p>\n<p>For the past 2 days I was suspicious it had to do with my gradle configs (bc my gradle + AGP version is higher than the provided project's) but now I dont know if gradle is the issue bc I've checked my configs 6 billion times, made sure correct jniSrcDirs , app-level, project-level, v2ray-level gradle configs settings etc..</p>\n<p>I can provide anyone down to help with my project file.</p>\n<p>THANK YOU soso much in advance, im pulling my hair out rn bc pretty much everything is same between my project and his project. PS my project is just a barebone project with no additional code that could be interfering. And theres no way its a problem with the .so native libraries because it's the same files. And also ran on the same devices with same architecture.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}