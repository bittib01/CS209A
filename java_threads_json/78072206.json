{
  "question": {
    "tags": [
      "java",
      "android",
      "vosk"
    ],
    "owner": {
      "account_id": 30647400,
      "reputation": 11,
      "user_id": 23494479,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocJqqsFgrI4UGzivnmn97FfXxUCN6-MPxukomEVErC-1=k-s256",
      "display_name": "Muhammad Bahrami",
      "link": "https://stackoverflow.com/users/23494479/muhammad-bahrami"
    },
    "is_answered": false,
    "view_count": 923,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1735207495,
    "creation_date": 1709099917,
    "last_edit_date": 1710479336,
    "question_id": 78072206,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78072206/managing-large-vosk-models-in-android-java",
    "title": "Managing Large Vosk Models in Android java",
    "body": "<p>I intend to use the &quot;vosk&quot; library in my Android project written in Java. Initially, I was able to perform speech-to-text tasks using a small and lightweight model. However, I'm unsure how to handle larger and more complex models. Whenever I try to include the model files within my application, I encounter a &quot;java.lang.OutOfMemoryError&quot; error. Additionally, I lack information on how to load the model files from the device's memory. Any guidance on how to efficiently handle large models in my Android project would be greatly appreciated. this is my codes :</p>\n<p>public class SpeakToText implements RecognitionListener {</p>\n<pre><code>private final String VOSK_TAG = &quot;SpeakRecognizing&quot;;\n\nprivate Context context;\nprivate Model model;\nprivate SpeechService speechService;\nprivate SpeechStreamService speechStreamService;\n\npublic void initModel() {\n    StorageService.unpack(context, &quot;vosk-model-small-fa-0.4&quot;, &quot;model&quot;,\n            (model) -&gt; {\n                this.model = model;\n                Toast.makeText(context, &quot;Ready&quot;, Toast.LENGTH_SHORT).show();\n                recognizeMicrophone();\n            },\n            (exception) -&gt; setErrorState(&quot;Failed to unpack the model&quot; + exception.getMessage()));\n}\n\n@Override\npublic void onResult(String hypothesis) {\n    Log.i(&quot;TAG&quot;, hypothesis);\n}\n\n@Override\npublic void onFinalResult(String hypothesis) {\n    if (speechStreamService != null) {\n        speechStreamService = null;\n    }\n    Log.i(VOSK_TAG, &quot;onFinalResult: &quot; + hypothesis);\n}\n\n@Override\npublic void onPartialResult(String hypothesis) {\n  Log.i(VOSK_TAG, &quot;onPartialResult: &quot; + hypothesis);\n}\n\n@Override\npublic void onError(Exception e) {\n    setErrorState(e.getMessage());\n    Log.e(VOSK_TAG, &quot;onError: &quot;, e);\n}\n\n@Override\npublic void onTimeout() {\n    Log.i(VOSK_TAG, &quot;onTimeout: &quot;);\n}\n\nprivate void setErrorState(String message) {\n\n}\n\npublic void recognizeMicrophone() {\n    if (speechService != null) {\n        speechService.stop();\n        speechService = null;\n    } else {\n        try {\n            Recognizer rec = new Recognizer(model, 16000.0f);\n            speechService = new SpeechService(rec, 16000.0f);\n            speechService.startListening(this);\n        } catch (IOException e) {\n            setErrorState(e.getMessage());\n        }\n    }\n}\n\npublic void pause(boolean checked) {\n    if (speechService != null) {\n        speechService.setPause(checked);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I want either the model to be placed in the project files without errors and run, or the model file to be imported from the mobile memory.Thank you.</p>\n<p>Update:</p>\n<p>I manually copied the model file into the required folder (\\Internal shared storage\\Android\\data\\com.example.myapp\\files\\model). Now I don't know how to import this model into the app.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}