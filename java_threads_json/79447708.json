{
  "question": {
    "tags": [
      "java",
      "jdbc",
      "informix"
    ],
    "owner": {
      "account_id": 11659,
      "reputation": 54544,
      "user_id": 22595,
      "user_type": "registered",
      "accept_rate": 77,
      "profile_image": "https://i.sstatic.net/kxy3v.jpg?s=256",
      "display_name": "Micha≈Ç Niklas",
      "link": "https://stackoverflow.com/users/22595/micha%c5%82-niklas"
    },
    "is_answered": true,
    "view_count": 338,
    "accepted_answer_id": 79562079,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1744116394,
    "creation_date": 1739870545,
    "last_edit_date": 1740043198,
    "question_id": 79447708,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79447708/problem-connecting-to-informix-database-with-new-jdbc-driver-15-0-0-0",
    "title": "Problem connecting to Informix database with new JDBC driver 15.0.0.0",
    "body": "<p>I tried to use new Informix JDBC driver from <a href=\"https://mvnrepository.com/artifact/com.ibm.informix/jdbc\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.ibm.informix/jdbc</a></p>\n<p>I have simple program that tests connection time to a database. With Informix JDBC driver <code>4.50.JC11</code> it works well:</p>\n<pre><code>export CLASSPATH=jdbc-4.50.11.jar\n\n[mn:~/jdbc_connect_test] ./jdbc_connect_test_ifx.sh\nOS: Linux 6.12.13-200.fc41.x86_64 amd64\nJava version: 21.0.6 Red Hat, Inc.\n--------------\nJDBC drivers:\ncom.informix.jdbc.IfxDriver@76ed5528 ver: 4.2\n--------------\nTest [jdbc:informix-sqli://test-informix.testd:9088/multi:informixserver=ol_testifx]\nJDBC driver version: '4.50.JC11'; major: 4; minor: 50\nTest  1:    88 [ms] com.informix.jdbc.IfxSqliConnect@725bef66\nTest  2:    14 [ms] com.informix.jdbc.IfxSqliConnect@2aaf7cc2\n...\n</code></pre>\n<p>When I changed <code>CLASSPATH</code> to point at <code>jdbc-15.0.0.0.jar</code> it fails with strange exception:</p>\n<pre><code>export CLASSPATH=jdbc-15.0.0.0.jar\n\n[mn:~/jdbc_connect_test] ./jdbc_connect_test_ifx.sh\nOS: Linux 6.12.13-200.fc41.x86_64 amd64\nJava version: 21.0.6 Red Hat, Inc.\n--------------\nJDBC drivers:\ncom.informix.jdbc.IfxDriver@7a81197d ver: 4.2\ncom.informix.jdbc.InformixDriver@27bc2616 ver: 15.0\n--------------\nTest [jdbc:informix-sqli://test-informix.testd:9088/multi:informixserver=ol_testifx]\nException in thread &quot;main&quot; java.lang.IllegalMonitorStateException\n    at java.base/java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:175)\n    at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1059)\n    at java.base/java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:494)\n    at com.informix.jdbc.IfxSqliConnect.unlockSession(IfxSqliConnect.java:2696)\n    at com.informix.jdbc.IfxSqli.executeStatementQuery(IfxSqli.java:1239)\n    at com.informix.jdbc.IfxResultSet.executeQuery(IfxResultSet.java:132)\n    at com.informix.jdbc.IfxStatement.executeQuery(IfxStatement.java:744)\n    at com.informix.jdbc.IfxStatement.executeQuery(IfxStatement.java:169)\n    at com.informix.jdbc.IfxStatement.executeQuery(IfxStatement.java:157)\n    at com.informix.jdbc.IfxSqliConnect.getSqlLogicalChar(IfxSqliConnect.java:3795)\n    at com.informix.jdbc.IfxDatabaseMetaData.&lt;init&gt;(IfxDatabaseMetaData.java:306)\n    at com.informix.jdbc.IfxSqliConnect.getMetaData(IfxSqliConnect.java:1737)\n    at jdbc_connect_test.test_connection(jdbc_connect_test.java:34)\n    at jdbc_connect_test.main(jdbc_connect_test.java:91)\n</code></pre>\n<p>Code fails on <code>db.getMetaData()</code>, but I tried also simple <code>executeQuery()</code> and it fails with the same exception:</p>\n<pre><code>public static void test_connection(int n, String jdbc_url, String jdbc_username, String jdbc_passwd)\n    {\n    long t0 = System.currentTimeMillis();\n    Connection db = null;\n    try\n        {\n        try\n            {\n            db = DriverManager.getConnection(jdbc_url, jdbc_username, jdbc_passwd);\n            long t2 = System.currentTimeMillis();\n            if (n == 0)\n                {\n                DatabaseMetaData dbmi = db.getMetaData();\n                System.out.format(&quot;JDBC driver version: '%s'; major: %s; minor: %s\\n&quot;, dbmi.getDriverVersion(), dbmi.getDriverMajorVersion(), dbmi.getDriverMinorVersion());\n                }\n            System.out.format(&quot;Test %2d: %5d [ms]\\t%s\\n&quot;, (n+1), (t2 - t0), db);\n            }\n        finally\n            {\n            if (db != null)\n                db.close();\n            }\n        }\n    catch (SQLException e)\n        {\n        e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>Anybody tried Informix JDBC driver 15.0.0.0 with success?</p>\n<hr />\n<p>EDIT</p>\n<p>With the new 15.0 driver I can connect to Informix 14.10 database and it works, but it cannot connect with Informix 11.50.</p>\n<p>With the old 4.50 driver I can connect to Informix 11.50 database:</p>\n<pre><code>[mn:~/test/tools/javatools/jdbc_connect_test] ./jdbc_connect_test_ifx.sh\nOS: Linux 6.12.13-200.fc41.x86_64 amd64\nJava version: 21.0.6 Red Hat, Inc.\nclasspath: bson-5.3.1.jar:jdbc-4.50.11.jar:\n--------------\nJDBC drivers:\ncom.informix.jdbc.IfxDriver@38af3868 ver: 4.2\n--------------\nTest [jdbc:informix-sqli://test-informix.testd:9088/multi:informixserver=ol_testifx]\ndb=com.informix.jdbc.IfxSqliConnect@6d7b4f4c\ndb.isClosed()=false\nSELECT FIRST 1 DBINFO('version','full') FROM systables\nIBM Informix Dynamic Server Version 11.50.FC4\nJDBC driver version: '4.50.JC11'; major: 4; minor: 50\nTest  1:   288 [ms] com.informix.jdbc.IfxSqliConnect@6d7b4f4c\nTest  2:    20 [ms] com.informix.jdbc.IfxSqliConnect@63e2203c\n...\n</code></pre>\n<p>With the new 15.0 driver I can connect to Informix 14.10 stores demo database</p>\n<pre><code>[mn:~/test/tools/javatools/jdbc_connect_test] ./jdbc_connect_test_ifx.sh\nOS: Linux 6.12.13-200.fc41.x86_64 amd64\nJava version: 21.0.6 Red Hat, Inc.\nclasspath: bson-5.3.1.jar:jdbc-15.0.0.0.jar:\n--------------\nJDBC drivers:\ncom.informix.jdbc.IfxDriver@3af49f1c ver: 4.2\ncom.informix.jdbc.InformixDriver@7106e68e ver: 15.0\n--------------\nTest [jdbc:informix-sqli://localhost:9088/stores_demo:INFORMIXSERVER=informix]\ndb=JDBC Connection #1\ndb.isClosed()=false\nSELECT FIRST 1 DBINFO('version','full') FROM systables\nIBM Informix Dynamic Server Version 14.10.FC9W1DE\nJDBC driver version: '15.0.0'; major: 15; minor: 0\nTest  1:   106 [ms] JDBC Connection #1\nTest  2:    17 [ms] JDBC Connection #2\n...\n</code></pre>\n<p>With the new 15.0 driver I cannot to Informix 11.50 database:</p>\n<pre><code>[mn:~/test/tools/javatools/jdbc_connect_test] ./jdbc_connect_test_ifx.sh\nOS: Linux 6.12.13-200.fc41.x86_64 amd64\nJava version: 21.0.6 Red Hat, Inc.\nclasspath: bson-5.3.1.jar:jdbc-15.0.0.0.jar:\n--------------\nJDBC drivers:\ncom.informix.jdbc.IfxDriver@3af49f1c ver: 4.2\ncom.informix.jdbc.InformixDriver@7106e68e ver: 15.0\n--------------\nTest [jdbc:informix-sqli://test-informix.testd:9088/multi:informixserver=ol_testifx]\ndb=JDBC Connection #1\ndb.isClosed()=false\nSELECT FIRST 1 DBINFO('version','full') FROM systables\nException in thread &quot;main&quot; java.lang.IllegalMonitorStateException\n    at java.base/java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:175)\n    at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1059)\n    at java.base/java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:494)\n    at com.informix.jdbc.IfxSqliConnect.unlockSession(IfxSqliConnect.java:2696)\n    at com.informix.jdbc.IfxSqli.executeStatementQuery(IfxSqli.java:1239)\n    at com.informix.jdbc.IfxResultSet.executeQuery(IfxResultSet.java:132)\n    at com.informix.jdbc.IfxStatement.executeQuery(IfxStatement.java:744)\n    at com.informix.jdbc.IfxStatement.executeQuery(IfxStatement.java:169)\n    at com.informix.jdbc.IfxStatement.executeQuery(IfxStatement.java:157)\n    at jdbc_connect_test.showSelectResults(jdbc_connect_test.java:28)\n    at jdbc_connect_test.test_connection(jdbc_connect_test.java:55)\n    at jdbc_connect_test.main(jdbc_connect_test.java:114)\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}