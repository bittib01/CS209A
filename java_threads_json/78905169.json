{
  "question": {
    "tags": [
      "java",
      "windows",
      "visual-studio-code",
      "latex"
    ],
    "owner": {
      "account_id": 1898299,
      "reputation": 14389,
      "user_id": 4999991,
      "user_type": "registered",
      "accept_rate": 56,
      "profile_image": "https://i.sstatic.net/y69di.png?s=256",
      "display_name": "Foad S. Farimani",
      "link": "https://stackoverflow.com/users/4999991/foad-s-farimani"
    },
    "is_answered": true,
    "view_count": 6917,
    "answer_count": 2,
    "score": 8,
    "last_activity_date": 1745136227,
    "creation_date": 1724404582,
    "question_id": 78905169,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78905169/vs-code-ltex-extension-fails-to-run-with-java-in-latex-profile",
    "title": "VS Code LTeX extension fails to run with Java in LaTeX profile",
    "body": "<p>I'm having trouble getting the LTeX extension to work properly in my Visual Studio Code LaTeX profile. When I open a folder containing LaTeX documents with this profile, I get the following error messages:</p>\n<blockquote>\n<p><a href=\"https://i.sstatic.net/Z4WjZfSm.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/Z4WjZfSm.png\" alt=\"enter image description here\" /></a></p>\n</blockquote>\n<blockquote>\n<p>Could not run ltex-ls with Java, please see the output panel 'LTeX Language Client' for details. You might want to try offline installation.</p>\n</blockquote>\n<p>and then</p>\n<blockquote>\n<p><a href=\"https://i.sstatic.net/UmmmGvME.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/UmmmGvME.png\" alt=\"enter image description here\" /></a></p>\n</blockquote>\n<p>which points me to <a href=\"https://valentjn.github.io/ltex/vscode-ltex/installation-usage-vscode-ltex.html#offline-installation\" rel=\"noreferrer\">this page</a>.</p>\n<p>Here's the output from the LTeX Language Client:</p>\n<pre><code>Info: Setting LTeX UI language to 'en'.\nInfo: Loading i18n messages...\nInfo: Loading default i18n messages...\nInfo: \nInfo: ltex.ltex-ls.path not set.\nInfo: Searching for ltex-ls in 'c:\\Users\\foobar\\.vscode\\extensions\\valentjn.vscode-ltex-13.1.0\\lib'...\nInfo: ltex-ls found in 'c:\\Users\\foobar\\.vscode\\extensions\\valentjn.vscode-ltex-13.1.0\\lib\\ltex-ls-15.2.0'.\nInfo: \nInfo: Using ltex-ls from 'c:\\Users\\foobar\\.vscode\\extensions\\valentjn.vscode-ltex-13.1.0\\lib\\ltex-ls-15.2.0'.\nInfo: Using Java from 'C:\\Program Files\\Microsoft\\jdk-11.0.16.101-hotspot\\bin\\java.exe' (set in ltex.java.path).\nInfo: Testing ltex-ls...\nInfo:   Command: &quot;c:\\\\Users\\\\foobar\\\\.vscode\\\\extensions\\\\valentjn.vscode-ltex-13.1.0\\\\lib\\\\ltex-ls-15.2.0\\\\bin\\\\ltex-ls.bat&quot;\nInfo:   Arguments: [&quot;--version&quot;]\nInfo:   env['JAVA_HOME']: &quot;C:\\\\Program Files\\\\Microsoft\\\\jdk-11.0.16.101-hotspot\\\\bin\\\\java.exe&quot;\nInfo:   env['JAVA_OPTS']: &quot;-Xms64m -Xmx512m&quot;\nError: Test failed.\nError: Error details:\nError: Error: spawnSync c:\\Users\\foobar\\.vscode\\extensions\\valentjn.vscode-ltex-13.1.0\\lib\\ltex-ls-15.2.0\\bin\\ltex-ls.bat EINVAL\nError:  at Object.spawnSync (node:internal/child_process:1124:20)\nError:  at Object.spawnSync (node:child_process:914:24)\nError:  at DependencyManager.&lt;anonymous&gt; (c:\\Users\\foobar\\.vscode\\extensions\\valentjn.vscode-ltex-13.1.0\\dist\\extension.js:13528:45)\nError:  at Generator.next (&lt;anonymous&gt;)\nError:  at fulfilled (c:\\Users\\foobar\\.vscode\\extensions\\valentjn.vscode-ltex-13.1.0\\dist\\extension.js:13159:58)\nInfo: ltex-ls did not print expected version information to stdout.\nInfo: stdout of ltex-ls:\nInfo: \nInfo: stderr of ltex-ls:\nInfo: \nInfo: You might want to try offline installation, see https://valentjn.github.io/vscode-ltex/docs/installation-and-usage.html#offline-installation.\n</code></pre>\n<p>I have multiple Java versions installed on my system via Chocolatey and winget. When I run <code>where java</code> in cmd, I get:</p>\n<pre><code>C:\\Program Files\\Eclipse Adoptium\\jre-8.0.422.5-hotspot\\bin\\java.exe\nC:\\Program Files (x86)\\Common Files\\Oracle\\Java\\java8path\\java.exe\nC:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath\\java.exe\nC:\\Program Files\\AdoptOpenJDK\\jdk-15.0.2.7-hotspot\\bin\\java.exe\nC:\\ProgramData\\Oracle\\Java\\javapath\\java.exe\nC:\\Program Files\\Microsoft\\jdk-11.0.16.101-hotspot\\bin\\java.exe\nC:\\Program Files\\OpenJDK\\jdk-22.0.2\\bin\\java.exe\n</code></pre>\n<p>Here's my <code>settings.json</code> for the LaTeX profile:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;editor.formatOnSave&quot;: true,\n    &quot;ltex.java.path&quot;: &quot;C:\\\\Program Files\\\\Microsoft\\\\jdk-11.0.16.101-hotspot\\\\bin\\\\java.exe&quot;\n}\n</code></pre>\n<p>I've tried various combinations of settings and Java versions, but I can't get LTeX to work properly. When I run the <code>ltex-ls.bat</code> file manually with the <code>--version</code> flag, it seems to work and reports using Java 22.0.2.</p>\n<p>Any ideas on how to resolve this issue and get LTeX working with my LaTeX profile in VS Code?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}