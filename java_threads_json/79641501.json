{
  "question": {
    "tags": [
      "java",
      "arraylist",
      "sampling"
    ],
    "owner": {
      "account_id": 42233632,
      "reputation": 53,
      "user_id": 30654079,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/fc9a106b543709ab56eb7172027d7588?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "user30654079",
      "link": "https://stackoverflow.com/users/30654079/user30654079"
    },
    "is_answered": true,
    "view_count": 210,
    "accepted_answer_id": 79641715,
    "answer_count": 3,
    "score": 5,
    "last_activity_date": 1765719031,
    "creation_date": 1748406438,
    "last_edit_date": 1748414685,
    "question_id": 79641501,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79641501/how-to-consistently-retain-an-exact-percentage-of-elements-from-a-list-in-java",
    "title": "How to consistently retain an exact percentage of elements from a List in Java?",
    "body": "<p>I'm currently filtering a Java List to keep approximately a percentage of its elements using a random approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport java.util.Random;\n\npublic class Main {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = List.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;);\n\n        // Percentage of elements to retain (between 0 and 100)\n        int percentageToRetain = 30; // Change this value to adjust the percentage\n\n        Random random = new Random();\n        List&lt;String&gt; result = list.stream()\n                .filter(s -&gt; random.nextInt(100) &lt; percentageToRetain)\n                .toList();\n\n        System.out.println(result);\n    }\n}\n</code></pre>\n<p>While this works for approximating the percentage, each run produces different results, and the actual percentage retained can vary significantly from my target, especially with smaller lists.</p>\n<p>For example: When targeting 30% of a 10-element list, I might get 2 elements (20%) on one run and 4 elements (40%) on another.</p>\n<p>My question:\nHow can I modify my code to consistently retain exactly the specified percentage of elements from a List? Ideally, I'd like a solution that:</p>\n<ul>\n<li><p>Keeps exactly percentageToRetain percent of the elements (rounding on the lower as needed)</p>\n</li>\n<li><p>Still provides randomness in which specific elements are selected</p>\n</li>\n<li><p>Works efficiently for both small and large lists</p>\n</li>\n</ul>\n<p>How to handle this kind of &quot;exact percentage sampling&quot; problem?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}