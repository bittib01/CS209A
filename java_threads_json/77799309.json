{
  "question": {
    "tags": [
      "java",
      "db2",
      "datasource",
      "kerberos",
      "dbconnection"
    ],
    "owner": {
      "account_id": 18489280,
      "reputation": 11,
      "user_id": 13469382,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/7bad84555bc77a9c9e160556963b256d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "bagb",
      "link": "https://stackoverflow.com/users/13469382/bagb"
    },
    "is_answered": false,
    "view_count": 760,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1738513485,
    "creation_date": 1704968741,
    "last_edit_date": 1705075343,
    "question_id": 77799309,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77799309/data-source-in-java-using-db2-and-kerberos",
    "title": "Data Source in Java using DB2 and Kerberos",
    "body": "<p>I'm currently attempting to set up a DataSource connection in a DB2 database using Kerberos authentication. I've read several threads with differing approaches and now feel rather confused.</p>\n<p>To begin, I'm unsure where the correct attribute is for setting up the values for Kerberos. Should I add it using <code>dataSource.setServerName(nameofserver)</code>, <code>dataSource.setPortNumber(integernumber)</code>, etc., or can I add it in a Properties variable?</p>\n<p>Edit:\nI am using the com.ibm.db2.jcc.DB2SimpleDataSource and the version is 4.19.49 (thanks @mao)</p>\n<p>Edit 12.01.2024:</p>\n<p><strong>Code Block</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>DB2SimpleDataSource dataSource = new DB2SimpleDataSource();\n            dataSource.setDriverType(4);\n            dataSource.setServerName(&quot;server&quot;);\n            dataSource.setPortNumber(portnumber);\n            dataSource.setDatabaseName(&quot;database name&quot;);\n            dataSource.setSslConnection(true);\n            dataSource.setClientProgramName(&quot;program name&quot;);\n            dataSource.setRetrieveMessagesFromServerOnGetMessage(true);\n            dataSource.setSecurityMechanism(dataSource.KERBEROS_SECURITY);\n</code></pre>\n<p><strong>Error message</strong></p>\n<pre><code>com.ibm.db2.jcc.am.SqlException: [jcc][t4][10262][11223][4.19.49] Unexpected Throwable caught: class com.ibm.db2.jcc.am.le (in unnamed module @0x49097b5d) cannot access class sun.security.action.GetPropertyAction (in module java.base) because module java.base does not export sun.security.action to unnamed module @0x49097b5d. ERRORCODE=-4228, SQLSTATE=null\n    at com.ibm.db2.jcc.am.kd.a(Unknown Source)\n    at com.ibm.db2.jcc.am.kd.a(Unknown Source)\n    at com.ibm.db2.jcc.am.kd.a(Unknown Source)\n    at com.ibm.db2.jcc.t4.b.b(Unknown Source)\n    at com.ibm.db2.jcc.t4.b.a(Unknown Source)\n    at com.ibm.db2.jcc.t4.b.a(Unknown Source)\n    at com.ibm.db2.jcc.t4.b.a(Unknown Source)\n    at com.ibm.db2.jcc.t4.b.&lt;init&gt;(Unknown Source)\n    at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(Unknown Source)\n    at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(Unknown Source)\n    at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(Unknown Source)\n    at test.connection.TestDbConnectionDataSource.main(TestDbConnectionDataSource.java:81)\nCaused by: java.lang.IllegalAccessError: class com.ibm.db2.jcc.am.le (in unnamed module @0x49097b5d) cannot access class sun.security.action.GetPropertyAction (in module java.base) because module java.base does not export sun.security.action to unnamed module @0x49097b5d\n    at com.ibm.db2.jcc.am.le.a(Unknown Source)\n    at com.ibm.db2.jcc.am.le.a(Unknown Source)\n    at com.ibm.db2.jcc.t4.b.a(Unknown Source)\n</code></pre>\n<p>At IBM documentation reading for <code>dataSource.setKerberosServerPrincipal(&quot;sample/srvlsj.ibm.com@SRVLSJ.SJ.IBM.COM&quot;);</code></p>\n<p>I have to replace <em>@SRVLSJ.SJ.IBM.COM</em> with the <strong>realm</strong> of my Kerberos.conf file. But, what can I do if I use many <strong>realm</strong>?</p>\n<p><em>PS 1.</em> I have used the <code>System.setProperty(&quot;java.security.krb5.conf&quot;, &quot;path\\krb5.conf&quot;);</code>.</p>\n<p><em>PS 2.</em> The above error I can resolve it if I use in VM arguments this: <code>--add-exports java.base/sun.security.action=ALL-UNNAMED</code>. But, I want to still work without this in VM arguments.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}