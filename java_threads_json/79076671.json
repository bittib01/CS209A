{
  "question": {
    "tags": [
      "java",
      "netlogo",
      "headless",
      "agent-based-modeling"
    ],
    "owner": {
      "account_id": 36439694,
      "reputation": 21,
      "user_id": 27741350,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/2e9a7555eb0448837bb2c08b049ef24d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "alerone",
      "link": "https://stackoverflow.com/users/27741350/alerone"
    },
    "is_answered": false,
    "view_count": 93,
    "answer_count": 0,
    "score": 2,
    "last_activity_date": 1730811690,
    "creation_date": 1728614862,
    "last_edit_date": 1730811690,
    "question_id": 79076671,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79076671/how-to-run-netlogo-headless-without-a-pre-existing-nlogo-file-starting-from-n",
    "title": "How to Run NetLogo Headless Without a Pre-Existing .nlogo File (Starting from .nls File)?",
    "body": "<p>I would like to set up a fully headless NetLogo workflow, that doesn't require me to open the GUI to create the initial .nlogo file. Everything I've been able to find through searching requires a .nlogo file to already exist as created by the GUI. Is it possible to create a .nlogo file from a .nls file without a GUI? Or to run headless mode just from the .nls without a .nlogo file? I am using OpenJDK 11 and NetLogo 6.4.0 on Mac OS Sonoma.</p>\n<p>I have looked at <a href=\"https://ccl.northwestern.edu/netlogo/docs/behaviorspace.html\" rel=\"nofollow noreferrer\">the BehaviorSpace documentation</a>, but all the headless examples use pre-existing .nlogo files.</p>\n<p>I tried to create a minimal example using a .nls file and a .java file:</p>\n<p><code>minimal.nls</code> (runs correctly when plugged into the GUI):</p>\n<pre><code>globals []\n\nto go\n  print &quot;Hello World!&quot;\n  tick\nend\n\n</code></pre>\n<p><code>Minimal.java</code>:</p>\n<pre><code>import org.nlogo.headless.HeadlessWorkspace;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.nio.charset.StandardCharsets;\nimport java.io.IOException;\n\npublic class Minimal {\n    public static void main(String[] args) {\n        HeadlessWorkspace workspace = HeadlessWorkspace.newInstance();\n        try {\n            // Read NetLogo code from the file\n            String netlogoCode = new String(Files.readAllBytes(Paths.get(&quot;minimal.nls&quot;)), StandardCharsets.UTF_8);\n\n            // Print the NetLogo code for verification\n            System.out.println(&quot;NetLogo code:&quot;);\n            System.out.println(netlogoCode);\n\n            // Open the workspace\n            try {\n                workspace.openString(netlogoCode);\n                System.out.println(&quot;NetLogo code loaded successfully.&quot;);\n            } catch (Exception e) {\n                System.err.println(&quot;Error loading NetLogo code:&quot;);\n                e.printStackTrace();\n                System.exit(1);\n            }\n\n            // Run the simulation\n            try {\n                workspace.command(&quot;go&quot;);\n                System.out.println(&quot;Simulation ran successfully.&quot;);\n            } catch (Exception e) {\n                System.err.println(&quot;Error running 'go' command:&quot;);\n                e.printStackTrace();\n                System.exit(1);\n            }\n\n        } catch (IOException ex) {\n            System.err.println(&quot;An error occurred while reading the NetLogo file:&quot;);\n            ex.printStackTrace();\n            System.exit(1);\n        } finally {\n            // Close the workspace and handle InterruptedException\n            try {\n                workspace.dispose();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n                // Optionally, restore the interrupted status\n                Thread.currentThread().interrupt();\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>Expected result:</p>\n<pre><code>NetLogo code:\nglobals []\n\nto go\n  print &quot;Hello World!&quot;\n  tick\nend\n\nNetLogo code loaded successfully.\nHello world!\nSimulation ran successfully.\n</code></pre>\n<p>Actual result:</p>\n<pre><code>NetLogo code:\nglobals []\n\nto go\n  print &quot;Hello World!&quot;\n  tick\nend\n\nNetLogo code loaded successfully.\nError running 'go' command:\nNothing named GO has been defined. at position 33 in\n    at org.nlogo.core.Fail$.exception(Fail.scala:27)\n    at org.nlogo.core.Fail$.exception(Fail.scala:25)\n    at org.nlogo.core.Fail$.exception(Fail.scala:23)\n    at org.nlogo.parse.ExpressionParser$.parseStatement(ExpressionParser.scala:151)\n    at org.nlogo.parse.ExpressionParser$.$anonfun$apply$1(ExpressionParser.scala:32)\n    at org.nlogo.parse.ExpressionParser$.parseStatements(ExpressionParser.scala:44)\n    at org.nlogo.parse.ExpressionParser$.apply(ExpressionParser.scala:32)\n    at org.nlogo.parse.NetLogoParser.parseProcedure(NetLogoParser.scala:47)\n    at org.nlogo.parse.NetLogoParser.parseProcedure$(NetLogoParser.scala:29)\n    at org.nlogo.parse.FrontEnd$.parseProcedure(FrontEnd.scala:10)\n    at org.nlogo.parse.NetLogoParser.$anonfun$basicParse$1(NetLogoParser.scala:25)\n    at scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:286)\n    at scala.collection.Iterator.foreach(Iterator.scala:943)\n    at scala.collection.Iterator.foreach$(Iterator.scala:943)\n    at scala.collection.AbstractIterator.foreach(Iterator.scala:1431)\n    at scala.collection.MapLike$DefaultValuesIterable.foreach(MapLike.scala:214)\n    at scala.collection.TraversableLike.map(TraversableLike.scala:286)\n    at scala.collection.TraversableLike.map$(TraversableLike.scala:279)\n    at scala.collection.AbstractTraversable.map(Traversable.scala:108)\n    at org.nlogo.parse.NetLogoParser.basicParse(NetLogoParser.scala:25)\n    at org.nlogo.parse.NetLogoParser.basicParse$(NetLogoParser.scala:15)\n    at org.nlogo.parse.FrontEnd$.basicParse(FrontEnd.scala:10)\n    at org.nlogo.parse.FrontEndMain.frontEnd(FrontEnd.scala:26)\n    at org.nlogo.parse.FrontEndMain.frontEnd$(FrontEnd.scala:25)\n    at org.nlogo.parse.FrontEnd$.frontEnd(FrontEnd.scala:10)\n    at org.nlogo.compile.CompilerMain$.compile(CompilerMain.scala:47)\n    at org.nlogo.compile.Compiler.compileMoreCode(Compiler.scala:85)\n    at org.nlogo.compile.Compiler.compileMoreCode(Compiler.scala:100)\n    at org.nlogo.workspace.Evaluator.invokeCompiler(Evaluator.scala:160)\n    at org.nlogo.workspace.Evaluator.evaluateCommands(Evaluator.scala:20)\n    at org.nlogo.workspace.Evaluating.command(Evaluating.scala:80)\n    at org.nlogo.workspace.Evaluating.command$(Evaluating.scala:79)\n    at org.nlogo.workspace.AbstractWorkspaceScala.command(AbstractWorkspaceScala.scala:25)\n    at Minimal.main(Minimal.java:30)\n</code></pre>\n<p>How can I run a NetLogo model in headless mode starting from a .nls file or source code without needing to create a .nlogo file in the GUI? Am I doing something wrong, or does this functionality not exist/do I have to use the GUI to create the model file?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}