{
  "question": {
    "tags": [
      "java",
      "apache-spark",
      "thrift",
      "spark-thriftserver"
    ],
    "owner": {
      "account_id": 1369077,
      "reputation": 91,
      "user_id": 1304814,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/ec4074b2bc5f5980e4413e7bcba032cb?s=256&d=identicon&r=PG",
      "display_name": "bsethi24",
      "link": "https://stackoverflow.com/users/1304814/bsethi24"
    },
    "is_answered": true,
    "view_count": 153,
    "accepted_answer_id": 79396812,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1738155553,
    "creation_date": 1732558857,
    "last_edit_date": 1733489999,
    "question_id": 79224196,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79224196/unable-to-start-thrift-server-due-to-class-org-apache-hadoop-yarn-server-webprox",
    "title": "Unable to start thrift-server due to class org.apache.hadoop.yarn.server.webproxy.amfilter.AmIpFilter is not a javax.servlet.Filter",
    "body": "<p>On starting spark-thrift-server using</p>\n<ul>\n<li>java 1.8,</li>\n<li>spark-3.5.0-bin-hadoop3 and</li>\n<li>hadoop-3.3.6...</li>\n</ul>\n<p>spark-submit showing the job is submitted, running and completed within few seconds successfully however getting error as below -</p>\n<pre><code>ERROR SparkContext: Error initializing SparkContext.\nMultiException[java.lang.IllegalStateException: class org.apache.hadoop.yarn.server.webproxy.amfilter.AmIpFilter is not a javax.servlet.Filter, java.lang.IllegalStateException: class org.apache.hadoop.yarn.server.webproxy.amfilter.AmIpFilter is not a javax.servlet.Filter]\n\nSuppressed: java.lang.IllegalStateException: class org.apache.hadoop.yarn.server.webproxy.amfilter.AmIpFilter is not a javax.servlet.Filter\n\n[CIRCULAR REFERENCE:java.lang.IllegalStateException: class org.apache.hadoop.yarn.server.webproxy.amfilter.AmIpFilter is not a javax.servlet.Filter]\n</code></pre>\n<p>On checking, hadoop-yarn-server-web-proxy jar, found hadoop-yarn-server-web-proxy-3.3.6.jar is there in hadoop as well as in spark both -&gt;</p>\n<pre><code>$  jar -tf $SPARK_HOME/jars/hadoop-yarn-server-web-proxy-3.3.6.jar | grep AmIpFilter\nPicked up _JAVA_OPTIONS: -Djava.io.tmpdir=/opt/disk1/tmp\norg/apache/hadoop/yarn/server/webproxy/amfilter/AmIpFilter.class\n\n$  jar -tf $HADOOP_HOME/share/hadoop/yarn/hadoop-yarn-server-web-proxy-3.3.6.jar | grep AmIpFilter\nPicked up _JAVA_OPTIONS: -Djava.io.tmpdir=/opt/disk1/tmp\norg/apache/hadoop/yarn/server/webproxy/amfilter/AmIpFilter.class\n\n$ echo $HADOOP_CONF_DIR &amp;&amp; echo $SPARK_HOME &amp;&amp; echo $HADOOP_HOME\n.../hadoop-3.3.6/etc/hadoop\n.../spark-3.5.0-bin-hadoop3\n.../hadoop-3.3.6\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}