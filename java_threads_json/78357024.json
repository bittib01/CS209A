{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "thymeleaf",
      "spring-thymeleaf"
    ],
    "owner": {
      "account_id": 5619788,
      "reputation": 1622,
      "user_id": 4450024,
      "user_type": "registered",
      "accept_rate": 99,
      "profile_image": "https://i.sstatic.net/WMErl.jpg?s=256",
      "display_name": "Nunyet Cal&#231;ada",
      "link": "https://stackoverflow.com/users/4450024/nunyet-cal%c3%a7ada"
    },
    "is_answered": true,
    "view_count": 190,
    "accepted_answer_id": 78395361,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1714228920,
    "creation_date": 1713588660,
    "last_edit_date": 1713958859,
    "question_id": 78357024,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78357024/springboot-thymeleaf-validate-email",
    "title": "springBoot + Thymeleaf: validate Email",
    "body": "<p>I have this object:</p>\n<pre><code>@Builder\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class NatalChartDataPayload {\n    String langCode;\n\n    @NotEmpty(message = &quot;Email cannot be empty&quot;)\n    @Email(message = &quot;Invalid email format&quot;)\n    String email;\n\n    String city;\n    String place;\n}\n</code></pre>\n<p>Controller look like:</p>\n<pre><code>@GetMapping({&quot;/data&quot;})\npublic String data (Model model) {\n    model.addAttribute(&quot;months&quot;, Month.values());\n    model.addAttribute(&quot;data&quot;,   NatalChartDataPayload.builder().build());\n    return &quot;natalChartData&quot;;\n}\n\n@PostMapping(&quot;/create&quot;)\npublic String createNatalChart ( \n    @Valid @ModelAttribute NatalChartDataPayload data,\n    BindingResult result, \n    Model model\n) {        \n    if (result.hasErrors()) {\n        return &quot;natalChartData&quot;;\n    }\n        \n    User user = new User();    \n    user.setEmail(data.getEmail());\n               \n    if (data.getPlace() == null ||\n          data.getPlace().isEmpty() ||\n          data.getEmail() == null ||\n          data.getEmail().isEmpty()) {\n    return &quot;redirect:/natalchart/data&quot;;\n}\n</code></pre>\n<p>However, when the email is not correct I have this error:</p>\n<pre><code>aused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors('email')&quot; (template: &quot;natalChartData&quot; - line 142, col 20)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)\n    ... 101 more\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors('email')&quot; (template: &quot;natalChartData&quot; - line 142, col 20)\n    at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)\n    at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)\n    at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:125)\n    at org.thymeleaf.standard.processor.StandardIfTagProcessor.isVisible(StandardIfTagProcessor.java:59)\n    at org.thymeleaf.standard.processor.AbstractStandardConditionalVisibilityTagProcessor.doProcess(AbstractStandardConditionalVisibilityTagProcessor.java:61)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)\n    at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)\n    at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)\n    at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)\n    at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)\n    at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)\n    at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)\n    at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)\n    ... 103 more\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'data' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153)\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:926)\n    at org.thymeleaf.spring6.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:232)\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306)\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:253)\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:227)\n    at org.thymeleaf.spring6.util.FieldUtils.checkErrors(FieldUtils.java:212)\n</code></pre>\n<p>here is the template:</p>\n<pre><code> &lt;form method=&quot;post&quot; th:action=&quot;@{/natalchart/create}&quot; th:object=&quot;${data}&quot;&gt;\n          &lt;div class=&quot;row&quot;&gt;\n            &lt;div class=&quot;col-lg-8&quot;&gt;\n                &lt;h4&gt;Enter your birth details to create your natal chart&lt;/h4&gt;\n\n              &lt;p&gt;&amp;nbsp;&lt;/p&gt;\n              &lt;p&gt;&amp;nbsp;&lt;/p&gt;\n\n              &lt;div th:if=&quot;${#fields.hasErrors('email')}&quot; th:errors=&quot;*{email}&quot;&gt;Email Error&lt;/div&gt;\n\n                &lt;div&gt;\n                  &lt;label for=&quot;language&quot;&gt;PDF Report Language&lt;/label&gt;\n                  &lt;select th:field=&quot;*{langCode}&quot;&gt;\n                    &lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;\n                    &lt;option value=&quot;es&quot;&gt;Spanish&lt;/option&gt;\n                    &lt;option value=&quot;fr&quot;&gt;French&lt;/option&gt;\n                    &lt;option value=&quot;pt&quot;&gt;Portuguese&lt;/option&gt;\n                  &lt;/select&gt;&lt;br&gt;&lt;br&gt;\n\n                  &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;\n                  &lt;input id=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;email&quot; th:field=&quot;*{email}&quot;  /&gt;&lt;br&gt;&lt;br&gt;\n\n                  &lt;!-- Label and select fields for day, month, and year of birth --&gt;\n                  &lt;label for=&quot;dayOfBirth&quot;&gt;Date of Birth:&lt;/label&gt;\n                  &lt;select id=&quot;dayOfBirth&quot; th:field=&quot;*{dayOfBirth}&quot;&gt;\n                    &lt;option th:each=&quot;day : ${#numbers.sequence(1, 31)}&quot; th:text=&quot;${day}&quot; th:value=&quot;${day}&quot;&gt;&lt;/option&gt;\n                  &lt;/select&gt;\n                  &lt;select id=&quot;monthOfBirth&quot; th:field=&quot;*{monthOfBirth}&quot;&gt;\n                    &lt;option th:each=&quot;month : ${months}&quot; th:text=&quot;${month}&quot; th:value=&quot;${month.getValue()}&quot;&gt;&lt;/option&gt;\n                  &lt;/select&gt;\n                  &lt;select id=&quot;yearOfBirth&quot; th:field=&quot;*{yearOfBirth}&quot;&gt;\n                    &lt;option th:each=&quot;year : ${#numbers.sequence(1900, 2025)}&quot; th:text=&quot;${year}&quot; th:value=&quot;${year}&quot;&gt;&lt;/option&gt;\n                  &lt;/select&gt;\n                  &lt;br&gt;&lt;br&gt;\n                  &lt;!-- Label and select fields for hour and minute of birth --&gt;\n                  &lt;label for=&quot;hourOfBirth&quot;&gt;Time of Birth:&lt;/label&gt;\n                  &lt;select id=&quot;hourOfBirth&quot; th:field=&quot;*{hourOfBirth}&quot;&gt;\n                    &lt;option th:each=&quot;hour : ${#numbers.sequence(0, 23)}&quot; th:text=&quot;${hour}&quot; th:value=&quot;${hour}&quot;&gt;&lt;/option&gt;\n                  &lt;/select&gt;\n                  &lt;select id=&quot;minuteOfBirth&quot; th:field=&quot;*{minuteOfBirth}&quot;&gt;\n                    &lt;option th:each=&quot;minute : ${#numbers.sequence(0, 59)}&quot; th:text=&quot;${minute}&quot; th:value=&quot;${minute}&quot;&gt;&lt;/option&gt;\n                  &lt;/select&gt;\n                  &lt;br&gt;&lt;br&gt;\n                  &lt;label for=&quot;hint&quot;&gt;Place of birth (Select one of the list)&lt;/label&gt;\n                  &lt;input id=&quot;hint&quot;  name=&quot;hint&quot;   th:field=&quot;*{city}&quot; /&gt;&lt;br&gt;&lt;br&gt;\n                  &lt;input id=&quot;place&quot; name=&quot;place&quot; th:field=&quot;*{place}&quot; type=&quot;hidden&quot;/&gt;\n                &lt;/div&gt;\n          &lt;/div&gt;\n            &lt;div class=&quot;col-lg-4&quot;&gt;\n              &lt;div class=&quot;blog-sidbar&quot;&gt;\n                    &lt;div class=&quot;d-flex justify-content-between mt-20&quot;&gt;\n                      &lt;button class=&quot;fill-btn&quot; data-text=&quot;Send Message&quot; type=&quot;submit&quot;&gt;create PDF Natal Chart Report&lt;/button&gt;\n                    &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}