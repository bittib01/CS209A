{
  "question": {
    "tags": [
      "java",
      "image",
      "jasper-reports"
    ],
    "owner": {
      "account_id": 26275133,
      "reputation": 9,
      "user_id": 19944431,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a-/AFdZucpkNgJJZZ9WG7TLHN1QjTrYQ3MMNVhAjIlKYdB-2Q=k-s256",
      "display_name": "Val Lins",
      "link": "https://stackoverflow.com/users/19944431/val-lins"
    },
    "is_answered": false,
    "view_count": 173,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1729679345,
    "creation_date": 1729260856,
    "last_edit_date": 1729353427,
    "question_id": 79102457,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79102457/cannot-cast-from-bytearrayinputstream-to-string-trying-to-load-an-image-at-jaspe",
    "title": "Cannot cast from ByteArrayInputStream to String trying to load an image at jasper report",
    "body": "<p>I'm trying to load an image at my report through an expression but im receiving the error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>net.sf.jasperreports.engine.JRException: Errors were encountered when compiling report expressions class file:\n1. Cannot cast from ByteArrayInputStream to String\n                value = (java.lang.String)(new ByteArrayInputStream((byte[]) ((java.lang.Object)parameter_logobrasao.getValue()))); //$JR_EXPR_ID=25$\n                        &lt;--------------------------------------------------------------------------------------------------------&gt;\n2. Cannot cast from ByteArrayInputStream to String\n                value = (java.lang.String)(new ByteArrayInputStream((byte[]) ((java.lang.Object)parameter_logobrasao.getValue()))); //$JR_EXPR_ID=25$\n                        &lt;--------------------------------------------------------------------------------------------------------&gt;\n3. Cannot cast from ByteArrayInputStream to String\n                value = (java.lang.String)(new ByteArrayInputStream((byte[]) ((java.lang.Object)parameter_logobrasao.getValue()))); //$JR_EXPR_ID=25$\n                        &lt;--------------------------------------------------------------------------------------------------------&gt;\n</code></pre>\n<p>Passing the logo by parameter with the type Object and casting to byte[] at expression:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parameter name=&quot;logobrasao&quot; class=&quot;java.lang.Object&quot;/&gt;\n....\n\n&lt;image hAlign=&quot;Center&quot; vAlign=&quot;Middle&quot;&gt;\n   &lt;reportElement x=&quot;0&quot; y=&quot;20&quot; width=&quot;557&quot; height=&quot;150&quot;/&gt;\n   &lt;imageExpression&gt;&lt;![CDATA[new ByteArrayInputStream((byte[]) $P{logobrasao})]]&gt;&lt;/imageExpression&gt;\n&lt;/image&gt;\n</code></pre>\n<p>I'm taking the image with java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\nlogobrasao = getImageBytes();\n                \nparameters.put(&quot;logobrasao&quot;, logobrasao);\n\nJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameter, beanDS);\n...\n</code></pre>\n<p>Some way Jasper is trying to cast the expression to String automatically. How can I solve it?</p>\n<p>Versions:</p>\n<ul>\n<li>Jaspersoft Studio 6.21.3</li>\n<li>jasperreports-3.7.6</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}