{
  "question": {
    "tags": [
      "java",
      "java.util.concurrent",
      "concurrenthashmap",
      "java-21"
    ],
    "owner": {
      "account_id": 14761714,
      "reputation": 25,
      "user_id": 10660856,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/lqjCz.png?s=256",
      "display_name": "杨尚山",
      "link": "https://stackoverflow.com/users/10660856/%e6%9d%a8%e5%b0%9a%e5%b1%b1"
    },
    "is_answered": true,
    "view_count": 151,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1765538262,
    "creation_date": 1765360113,
    "last_edit_date": 1765440025,
    "question_id": 79842774,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79842774/the-purpose-of-an-if-statement-condition-it-is-java21-concurrenthashmap-transfe",
    "title": "The purpose of an if statement condition, it is java21-ConcurrentHashMap-transfer method code:2463Line",
    "body": "<p>I am using Java 21.<br />\nThe following code is from the source code of class <code>java.util.concurrent.ConcurrentHashMap</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Method: transfer , line: 2463\nif (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) {\n    int sc;\n    if (finishing) {\n        nextTable = null;\n        table = nextTab;\n        sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1);\n        return;\n    }\n    if (U.compareAndSetInt(this, SIZECTL, sc = sizeCtl, sc - 1)) {\n        if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT)\n            return;\n        finishing = advance = true;\n        i = n; // recheck before commit\n    }\n}\n</code></pre>\n<ul>\n<li>Condition 1: <code>i &lt; 0</code>, I can understand it.</li>\n<li>Condition 2: <code>i &gt;= n</code>, I can't think of a special case; it feels like it can't happen.</li>\n<li>Condition 3: <code>i + n &gt;= nextn</code>, is the same.</li>\n</ul>\n<p>Are conditions 2 and 3 for defensive programming?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}