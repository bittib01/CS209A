{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "open-telemetry",
      "open-telemetry-java"
    ],
    "owner": {
      "account_id": 12241772,
      "reputation": 301,
      "user_id": 8934639,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/-ha0ik68bEhw/AAAAAAAAAAI/AAAAAAAAAA8/HVT-SyYJN8c/s256-rj/photo.jpg",
      "display_name": "Chedva",
      "link": "https://stackoverflow.com/users/8934639/chedva"
    },
    "is_answered": false,
    "view_count": 740,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1744803695,
    "creation_date": 1742726440,
    "question_id": 79528816,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79528816/springboot-gradle-open-telemetry-dependency-error",
    "title": "Springboot Gradle Open Telemetry dependency error",
    "body": "<p>I have a Java 17, SpringBoot with gradle application, and I'm trying to add dependencies for <a href=\"https://opentelemetry.io/docs/zero-code/java/spring-boot-starter/getting-started/\" rel=\"nofollow noreferrer\">opentelemetry instrumentation</a>.\nI am getting <code>java.lang.ClassNotFoundException: io.opentelemetry.api.incubator.events.EventLoggerProvider</code> error when running <code>./gradlew composedown clean cleandocker assemble dockerbuild composeup</code>.</p>\n<p>My <code>libs.versions.toml</code> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code># Once you will upgrade spring boot version all those dependencies will be updated accordingly\n[versions]\nflagsmithStarterVersion = &quot;0.2.69&quot;\nfeatureFlagsJavaClientVersion = &quot;0.3.85&quot;\ncommon-platform = &quot;6.0.563&quot;\nwebjars-bootsrap = &quot;5.3.3&quot;\nspringdoc-openapi = &quot;2.6.0&quot;\nlogin-filter = &quot;50.243&quot;\nlogback-encoder = &quot;8.0&quot;\nguava = &quot;33.3.1-jre&quot;\nkjobster = &quot;2.7.160&quot;\njaxb = &quot;2.3.1&quot;\nmysql-connector = &quot;8.0.33&quot;\njooq-codegen = &quot;3.19.11&quot;\naws-sdk-version = &quot;2.30.13&quot;\njavaxAnnotation = &quot;1.3.2&quot;\n\n[libraries]\nspring-context = { module = &quot;org.springframework:spring-context&quot; }\nspring-boot-kafka = { module = &quot;org.springframework.kafka:spring-kafka&quot;}\nspring-boot-starter-jdbc = { module = &quot;org.springframework.boot:spring-boot-starter-jdbc&quot; }\nspring-boot-starter-data-jdbc = { module = &quot;org.springframework.boot:spring-boot-starter-data-jdbc&quot; }\nspring-boot-starter-web = { module = &quot;org.springframework.boot:spring-boot-starter-web&quot; }\nspring-boot-starter-jooq = { module = &quot;org.springframework.boot:spring-boot-starter-jooq&quot; }\njooq-codegen = { module = &quot;org.jooq:jooq-codegen&quot;, version.ref=&quot;jooq-codegen&quot; }\nspring-boot-starter-thymeleaf = { module = &quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot; }\nspring-boot-starter-security = { module = &quot;org.springframework.boot:spring-boot-starter-security&quot; }\nspring-boot-starter-actuator = { module = &quot;org.springframework.boot:spring-boot-starter-actuator&quot; }\nspring-boot-devtools = { module = &quot;org.springframework.boot:spring-boot-devtools&quot; }\nspring-boot-configuration-processor = { module = &quot;org.springframework.boot:spring-boot-configuration-processor&quot; }\nspring-aspects = { module = &quot;org.springframework:spring-aspects&quot; }\nliquibase = { module = &quot;org.liquibase:liquibase-core&quot; }\ncommons-pool2 = { module = &quot;org.apache.commons:commons-pool2&quot; }\ncommons-lang3 = { module = &quot;org.apache.commons:commons-lang3&quot; }\nmicrometer-registry-statsd = { module = &quot;io.micrometer:micrometer-registry-statsd&quot; }\ndatadog-utils = { module = &quot;com.kenshoo:datadog-utils&quot;, version.ref = &quot;common-platform&quot; }\naws-credentials-provider = { module = &quot;com.kenshoo:aws-credentials-provider&quot;, version.ref = &quot;common-platform&quot; }\nwebjars-bootstrap = { module = &quot;org.webjars:bootstrap&quot;, version.ref = &quot;webjars-bootsrap&quot; }\nspringdoc-openapi-starter = { module = &quot;org.springdoc:springdoc-openapi-starter-webmvc-ui&quot;, version.ref = &quot;springdoc-openapi&quot; }\nkenshoo-ssofilter-spring = { module = &quot;com.kenshoo.ls:ssofilter-spring&quot;, version.ref = &quot;login-filter&quot; }\nlogback-encoder = { module = &quot;net.logstash.logback:logstash-logback-encoder&quot;, version.ref = &quot;logback-encoder&quot; }\nguava = { module = &quot;com.google.guava:guava&quot;, version.ref = &quot;guava&quot; }\nkjobster = { module = &quot;com.kenshoo:kjobster&quot;, version.ref = &quot;kjobster&quot; }\ndropwizard-metrics-core = { module = &quot;io.dropwizard.metrics:metrics-core&quot; }\njaxb-api = { module = &quot;javax.xml.bind:jaxb-api&quot;, version.ref = &quot;jaxb&quot; }\njaxb-runtime = { module = &quot;org.glassfish.jaxb:jaxb-runtime&quot;, version.ref = &quot;jaxb&quot; }\nlombok = { module = &quot;org.projectlombok:lombok&quot; }\nmysql-connector-java = { module = &quot;mysql:mysql-connector-java&quot;, version.ref=&quot;mysql-connector&quot; }\n\nawsBedrockAgent = { module = &quot;software.amazon.awssdk:bedrockagent&quot;, version.ref = &quot;aws-sdk-version&quot; }\nawsBedrockAgentRuntime = { module = &quot;software.amazon.awssdk:bedrockagentruntime&quot;, version.ref = &quot;aws-sdk-version&quot; }\nawsBedrockRuntime = { module = &quot;software.amazon.awssdk:bedrockruntime&quot;, version.ref = &quot;aws-sdk-version&quot; }\nawsNettyNioClient = { module = &quot;software.amazon.awssdk:netty-nio-client&quot;, version.ref = &quot;aws-sdk-version&quot; }\nawsSts = { module = &quot;software.amazon.awssdk:sts&quot;,  version.ref = &quot;aws-sdk-version&quot; }\nawsSdkS3 = { group = &quot;software.amazon.awssdk&quot;, name = &quot;s3&quot;, version.ref = &quot;aws-sdk-version&quot; }\nawsSdkS3TransferManager = { group = &quot;software.amazon.awssdk&quot;, name = &quot;s3-transfer-manager&quot;, version.ref = &quot;aws-sdk-version&quot; }\n\nreportApiEntities = { module = &quot;com.kenshoo:flat-view-public-api-entities&quot;, version = &quot;latest.integration&quot; }\nflatViewCommon = { module = &quot;com.kenshoo:flat-view-common&quot;, version = &quot;latest.integration&quot; }\n\nopenPlatformApiModel = { module = &quot;com.kenshoo:open-platform&quot;, version = &quot;5.1.427&quot; }\njacksonDatabind = { module = &quot;com.fasterxml.jackson.core:jackson-databind&quot;, version = &quot;2.15.0&quot; }\nspringWeb = { module = &quot;org.springframework:spring-web&quot;}\nspringRetry = { module = &quot;org.springframework.retry:spring-retry&quot;, version = &quot;2.0.10&quot; }\njakartaAnnotation = { module = &quot;jakarta.annotation:jakarta.annotation-api&quot;, version = &quot;3.0.0&quot; }\njwt-decoder = { module = &quot;com.auth0:java-jwt&quot;, version = &quot;4.4.0&quot; }\njavaxAnnotation = { group = &quot;javax.annotation&quot;, name = &quot;javax.annotation-api&quot;, version.ref = &quot;javaxAnnotation&quot; }\njavaCsv = { module = &quot;net.sourceforge.javacsv:javacsv&quot;, version = &quot;2.0&quot; }\nflagsmithStarter = { module = &quot;io.skai.feature.flag:feature-flags-spring-boot-starter&quot;, version.ref = &quot;flagsmithStarterVersion&quot;}\nfeatureFlagsJavaClient = { module = &quot;io.skai.feature.flag:feature-flags-java-client&quot;, version.ref = &quot;featureFlagsJavaClientVersion&quot;}\n\notelSpringBootStarted = {module = &quot;io.opentelemetry.instrumentation:opentelemetry-spring-boot-starter&quot;}\notelIncubator = {module = &quot;io.opentelemetry:opentelemetry-api-incubator&quot;, version = &quot;1.48.0-alpha&quot;}\n</code></pre>\n<p>My main <code>build.gradle</code> file:</p>\n<pre><code>apply plugin: 'docker-compose'\n...\nbuildscript {\n    ext {\n        springBootVersion = '3.3.4'\n        springCloudVersion = '2023.0.3'\n        dependencyManagementPluginVersion = '1.1.6'\n        dockerComposePluginVersion = '0.17.8'\n        gradleTasksPluginVersion = '0.1.29'\n        vaultkaPluginVersion = '0.2.39'\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n        classpath(&quot;io.spring.gradle:dependency-management-plugin:${dependencyManagementPluginVersion}&quot;)\n        classpath &quot;com.avast.gradle:gradle-docker-compose-plugin:${dockerComposePluginVersion}&quot;\n        classpath &quot;com.kenshoo.tasksplugin:gradle-tasks-plugin:${gradleTasksPluginVersion}&quot;\n        classpath &quot;com.kenshoo.vaultkaplugin:vaultka-gradle-plugin:${vaultkaPluginVersion}&quot;\n        classpath &quot;org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:5.1.0.4882&quot;\n    }\n    configurations.classpath {\n        resolutionStrategy.activateDependencyLocking()\n    }\n...\ndependencies {\n    implementation project(path: ':my-module')\n}\n...\nsubprojects {\n    apply plugin: 'java'\n    apply plugin: 'idea'\n    apply plugin: 'io.spring.dependency-management'\n\n   ...\n\n    java {\n        sourceCompatibility = JavaVersion.VERSION_17\n        targetCompatibility = JavaVersion.VERSION_17\n    }\n...\ndependencyManagement {\n        imports {\n            mavenBom &quot;org.springframework.boot:spring-boot-dependencies:${springBootVersion}&quot;\n            mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}&quot;\n            mavenBom &quot;io.opentelemetry.instrumentation:opentelemetry-instrumentation-bom:2.14.0&quot;\n        }\n    }\n</code></pre>\n<p>My my <code>my-module/build.gradle</code>:</p>\n<pre><code>plugins {\n    id 'java'\n}\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compileOnly libs.lombok\n    annotationProcessor libs.lombok\n\n    implementation libs.featureFlagsJavaClient\n    implementation libs.awsSdkS3\n    implementation libs.awsSdkS3TransferManager\n    implementation libs.awsBedrockAgent\n    implementation libs.awsBedrockAgentRuntime\n    implementation libs.awsBedrockRuntime\n    implementation libs.awsNettyNioClient\n    implementation libs.awsSts\n    implementation dependencies.create(libs.aws.credentials.provider.get()) {\n        exclude group: 'org.apache.commons', module: 'commons-lang'\n    }\n    implementation libs.spring.context\n    implementation libs.jacksonDatabind\n    implementation libs.springWeb\n    implementation libs.springRetry\n    implementation libs.jakartaAnnotation\n    implementation libs.micrometer.registry.statsd\n\n    implementation libs.otelSpringBootStarted\n    implementation libs.otelIncubator\n\n    implementation project(path: ':chat-executor-api')\n    testImplementation platform('org.junit:junit-bom:5.9.1')\n    testImplementation 'org.junit.jupiter:junit-jupiter'\n}\n</code></pre>\n<p>I tried to use a lower version of <code>opentelemetry-spring-boot-starter</code> and <code>opentelemetry-api-incubator</code>, or to remove the <code>opentelemetry-api-incubator</code> dependency, but nothing helped...\nWhen checking if the incubator dependency was added I can see that it exists in the dependencies tree (io.opentelemetry:opentelemetry-api-incubator:1.48.0-alpha).</p>\n<p>Any idea?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}