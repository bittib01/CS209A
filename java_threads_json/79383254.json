{
  "question": {
    "tags": [
      "java",
      "spring",
      "helidon",
      "helidon-webclient",
      "helidon-httpclient"
    ],
    "owner": {
      "account_id": 3164962,
      "reputation": 164,
      "user_id": 2675190,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/rLQNJ.jpg?s=256",
      "display_name": "Shanij P.S",
      "link": "https://stackoverflow.com/users/2675190/shanij-p-s"
    },
    "is_answered": false,
    "view_count": 76,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1740135953,
    "creation_date": 1737694685,
    "question_id": 79383254,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79383254/registerrestclient-is-not-passign-correct-value-in-java",
    "title": "RegisterRestClient is not passign correct value in java",
    "body": "<p>I have below rest client in java as below:</p>\n<pre><code>import jakarta.ws.rs.*;\nimport org.eclipse.microprofile.rest.client.annotation.RegisterClientHeaders;\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\n\nimport a.b.c.TransferClientHeaders;\n\nimport jakarta.enterprise.context.ApplicationScoped;\nimport jakarta.ws.rs.core.MediaType;\nimport jakarta.ws.rs.core.Response;\n@RegisterRestClient(configKey = &quot;personkey&quot;)\n@RegisterClientHeaders(TransferClientHeaders.class)\n@ApplicationScoped\n\npublic interface PersonClient {\n\n    @Path(&quot;/person/deletePersonBySKey&quot;)\n    @DELETE\n    @Produces(MediaType.APPLICATION_JSON)\n    @Consumes(MediaType.APPLICATION_JSON)\n    Response deletePersonBySKey(String personSKey);\n\n}\n\n\n\n\npublic class TransferClientHeaders implements ClientHeadersFactory {\n\n    private static final Logger logger = LoggerFactory.getLogger(EntityService.class);\n\n    @Override\n    public MultivaluedMap&lt;String, String&gt; update(MultivaluedMap&lt;String, String&gt; incomingHeaders, MultivaluedMap&lt;String, String&gt; outgoingHeaders) {\n        MultivaluedMap transferredHeaders = new MultivaluedHashMap&lt;&gt;();\n        transferredHeaders.putAll(outgoingHeaders);\n        transferredHeaders.put(&quot;ofs_remote_user&quot;, incomingHeaders.get(&quot;remote_user&quot;));\n        logger.debug(&quot;modified headers {}&quot;, incomingHeaders.get(&quot;remote_user&quot;));\n        return transferredHeaders;\n    }\n}\n</code></pre>\n<p>On the server side code, the endpoint is like:</p>\n<pre><code>@FunctionsAllowed(&quot;F1,F2&quot;)\n@DeleteMapping(value = &quot;/deletePersonBySKey&quot;)\npublic ResponseEntity deletePersonBySKey(@RequestBody String personSKey) throws Exception {\n\n    logger.debug(&quot;Inside The Person Controller&quot;);\n    // logic\n    } catch (Exception e) {\n        logger.error(&quot;Exception occurred &quot;, e);\n\n        try {\n            responseJson.put(&quot;STATUS&quot;, &quot;FAILED&quot;);\n            responseJson.put(&quot;MESSAGE&quot;, &quot;Person Services delete failed with exception: &quot; + e.getMessage());\n        } catch (JSONException e1) {\n            logger.error(&quot;Exception occurred &quot;, e1);\n        }\n        return new ResponseEntity(responseJson.toString(), HttpStatus.OK);\n    }\n    return ResponseEntity.ok(&quot;200&quot;);\n}\n</code></pre>\n<p>I am calling this from the client as below:</p>\n<pre><code>@Inject\n    @RestClient\n    PersonClient personClient;\n\n\npersonClient.deletePersonBySKey(&quot;1234&quot;);\n</code></pre>\n<p>This is reaching to the server side, but on the log, i am seeing exception : 400 BAD_REQUEST.</p>\n<ul>\n<li>I tried by not giving @Produces and @Consumes, no luck</li>\n<li>I tried by modifying transferredHeaders for adding content type as json, plain\ntext ect. but not luck</li>\n<li>I tried giving json string like personClient.deletePersonBySKey(&quot;&quot;12345&quot;&quot;); but no luck</li>\n<li>I cannot modify the server side endpoint</li>\n</ul>\n<p>I am stuck on this. Not sure what is the correct way of passing this\npersonSKey</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}