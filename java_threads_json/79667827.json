{
  "question": {
    "tags": [
      "java",
      "file-upload",
      "tomcat9"
    ],
    "owner": {
      "account_id": 6892252,
      "reputation": 516,
      "user_id": 5295284,
      "user_type": "registered",
      "accept_rate": 67,
      "profile_image": "https://lh3.googleusercontent.com/-Svwr5dpIcGU/AAAAAAAAAAI/AAAAAAAAAHE/hmZ18QEWihg/s256-rj/photo.jpg",
      "display_name": "tombo_189",
      "link": "https://stackoverflow.com/users/5295284/tombo-189"
    },
    "is_answered": true,
    "view_count": 6100,
    "answer_count": 5,
    "score": 10,
    "last_activity_date": 1755749371,
    "creation_date": 1750085840,
    "last_edit_date": 1750091491,
    "question_id": 79667827,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79667827/tomcat-multipart-upload-for-many-attachments-10-not-working-after-update-to-9",
    "title": "tomcat multipart upload for many attachments (&gt;10) not working after update to 9.0.106",
    "body": "<p>Awe have upgraded our Tomcat version from 9.0.102 to 9.0.106. Since then, it is no longer possible to upload more than 10 files in a single POST request, which is from the client's side initiated by:</p>\n<pre><code>&lt;form ... enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;&gt;\n  &lt;input type=&quot;file&quot; name=&quot;attachments&quot; multiple=&quot;1&quot;&gt;\n</code></pre>\n<p>Before the update, it was possible to upload many files in one POST request without any issue. Now, if the user uploads more files, we receive the following exception:</p>\n<pre><code>org.apache.tomcat.util.http.fileupload.impl.FileCountLimitExceededException\n</code></pre>\n<p>This happens while evaluating in the servlet's doPost method:</p>\n<pre><code>Log.println(&quot;upload: parts=&quot; + request.getParts().size() + &quot; contentLength=&quot; + request.getContentLength());\n</code></pre>\n<p>So it seems that something has changed in Tomcat between version 9.0.102 and 9.0.106 related to the property:</p>\n<pre><code>FileUploadBase.fileCountMax\n</code></pre>\n<p>However, when checking the source code, the default value is still initialized with -1 (which should mean &quot;unlimited&quot;), but in the deployment environment it somehow behaves as if it was set to 10.</p>\n<p>We have downloaded the Tomcat binary directly from Apache.org and are not using any packaged version provided by the Linux distribution.</p>\n<p>Even explicitly setting</p>\n<pre><code>org.apache.tomcat.util.http.fileupload.FileUploadBase.fileCountMax=200\n</code></pre>\n<p>in catalina.properties has no effect.</p>\n<p>Any ideas where this new default limit might be coming from?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}