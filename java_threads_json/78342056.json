{
  "question": {
    "tags": [
      "java",
      "unit-testing",
      "junit",
      "code-coverage"
    ],
    "owner": {
      "user_type": "does_not_exist",
      "display_name": "user1034461"
    },
    "is_answered": true,
    "view_count": 523,
    "accepted_answer_id": 78342693,
    "answer_count": 2,
    "score": 2,
    "last_activity_date": 1740159309,
    "creation_date": 1713366828,
    "last_edit_date": 1713373655,
    "question_id": 78342056,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78342056/junit-code-coverage-switch-statement-with-default-branch",
    "title": "JUnit code coverage switch statement with default branch",
    "body": "<p>I have util method to process some text. The way of processing is determined by <code>enum Mode</code>. While writing unit test to cover this method, I had to add dummy <code>enum</code> element in order to include <code>default</code> part of <code>switch</code> statement into testing. Default part is my check for the case if <code>enum</code> is extended by new element and this new element is not added to <code>switch</code> statement meaning processing would be impossible for that new element. If I remove dummy element and try with <code>null</code>, then I get NPE and Java don't even enter <code>switch</code> statement - which is normal behavior when you use <code>null</code> for <code>switch</code> statement.</p>\n<p><strong>The question:</strong> Is there a way to avoid adding dummy <code>enum</code> element but still cover <code>default</code> part of <code>switch</code> statement in unit test?</p>\n<p>Addition for clarity: Java 17, JUnit Jupiter 5, Eclipse Code Coverage Tool</p>\n<p><strong>Code</strong></p>\n<pre><code>abstract class LineBreaker {\n\n    public enum Mode {\n        LAST_SPACES,\n        LAST_CHARS,\n        DUMMY\n    }\n\n    public static String process(\n        final String text,\n        final LineBreaker.Mode mode,\n        final int amount\n    ) {\n        switch (mode) {\n            case LAST_SPACES : {\n                // blah blah create `processingResult`\n                return processingResult;\n            }\n            case LAST_CHARS : {\n                // blah blah create `processingResult`\n                return processingResult;\n            }\n            default :\n                throw new IllegalStateException(\n                    &quot;Processor for &quot; +\n                        LineBreaker.class.getSimpleName() + &quot;.&quot; +\n                        LineBreaker.Mode.class.getSimpleName() + &quot;.&quot; +\n                        mode.name() +\n                        &quot; not implemented&quot;\n                );\n        }\n    }\n\n}\n</code></pre>\n<p><strong>Unit test</strong></p>\n<pre><code>@Test\nvoid testLineBreakerException() {\n    assertThrows(\n        IllegalStateException.class,\n        () -&gt; LineBreaker.process( &quot;Dog&quot;, LineBreaker.Mode.DUMMY, 10 ),\n        &quot;Expected &quot; + IllegalStateException.class.getSimpleName()\n    );\n}\n\n</code></pre>\n<p><strong>Unit test without additional dummy enum element</strong></p>\n<p><a href=\"https://i.sstatic.net/0lhKD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/0lhKD.png\" alt=\"Unit test without additional dummy enum element\" /></a></p>\n<p><strong>Code coverage without additional dummy enum element</strong></p>\n<p><a href=\"https://i.sstatic.net/pzbrr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pzbrr.png\" alt=\"Code coverage without additional dummy enum element\" /></a></p>\n<hr />\n<p><strong>Unit test with additional dummy enum element</strong></p>\n<p><a href=\"https://i.sstatic.net/eYmSP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/eYmSP.png\" alt=\"Unit test with additional dummy enum element\" /></a></p>\n<p><strong>Code coverage without additional dummy enum element</strong></p>\n<p><a href=\"https://i.sstatic.net/IF9yZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/IF9yZ.png\" alt=\"Code coverage without additional dummy enum element\" /></a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}