{
  "question": {
    "tags": [
      "java",
      "jaxb",
      "maven-2",
      "code-generation"
    ],
    "owner": {
      "account_id": 41000638,
      "reputation": 81,
      "user_id": 30069745,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/a3a69251e352b29092173ec09ee319a9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Rinke",
      "link": "https://stackoverflow.com/users/30069745/rinke"
    },
    "is_answered": true,
    "view_count": 108,
    "answer_count": 3,
    "score": 0,
    "last_activity_date": 1765274186,
    "creation_date": 1761151540,
    "last_edit_date": 1761569514,
    "question_id": 79797047,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79797047/jaxb2-inheritance-plugin-does-not-extend-a-class-in-src-test-java",
    "title": "jaxb2 inheritance plugin does not extend a class in /src/test/java",
    "body": "<p>I'm on a java/maven project, using the <code>jaxb2</code> inheritance plugin in order to  define parent classes for xjc-generated java classes.</p>\n<p>I'm having this xsd:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema \n    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n    xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n    xmlns:inheritance=&quot;http://jaxb2-commons.dev.java.net/basic/inheritance&quot;\n    jaxb:extensionBindingPrefixes=&quot;inheritance&quot;\n    elementFormDefault=&quot;qualified&quot; \n    jaxb:version=&quot;2.1&quot;&gt;\n\n    &lt;xs:element name=&quot;input&quot;&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:sequence&gt;\n                &lt;xs:element ref=&quot;test.thing&quot;/&gt;\n            &lt;/xs:sequence&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n    \n    &lt;xs:element name=&quot;test.thing&quot;&gt;    \n        &lt;xs:annotation&gt;\n            &lt;xs:appinfo&gt;\n                &lt;inheritance:implements&gt;\ninput.generation.common.IXmlHasListedElementsWithStartTime\n                &lt;/inheritance:implements&gt;  \n                &lt;inheritance:extends&gt;\ninput.generation.common.XmlAbstractTestThingWithListedElementWithStartTime\n                &lt;/inheritance:extends&gt;  \n            &lt;/xs:appinfo&gt;\n        &lt;/xs:annotation&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:sequence&gt;\n                &lt;xs:element name=&quot;start.timed.thing&quot; type=&quot;start.timed.thing&quot; maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot;&gt;\n                    &lt;xs:annotation&gt;\n                        &lt;xs:appinfo&gt;\n                            &lt;jaxb:property name=&quot;startTimedThings&quot;/&gt;\n                        &lt;/xs:appinfo&gt;\n                    &lt;/xs:annotation&gt;\n                &lt;/xs:element&gt;\n            &lt;/xs:sequence&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n    \n    &lt;xs:complexType name=&quot;start.timed.thing&quot;&gt;\n        &lt;xs:annotation&gt;\n            &lt;xs:appinfo&gt;\n                &lt;inheritance:implements&gt;\n                    input.generation.IHasStartTime\n                &lt;/inheritance:implements&gt;  \n            &lt;/xs:appinfo&gt;\n        &lt;/xs:annotation&gt;\n        &lt;xs:attribute name=&quot;start&quot; use=&quot;optional&quot; type=&quot;xs:date&quot;/&gt;\n    &lt;/xs:complexType&gt;\n    \n&lt;/xs:schema&gt;\n\n</code></pre>\n<p>It is generating a class <code>XmlTestThing</code> extends <code>XmlAbstractTestThingWithListedElementWithStartTime</code> implements <code>IXmlHasListedElementsWithStartTime</code>.</p>\n<p>The ultimate goal is that the interface defines an easy method that gives the right version of XmlTestThing, given the date.</p>\n<p>Here's the problem: when I do a mvn clean install on my project, the process fails on compile errors in my IDE (eclipse). The problem is that the generated class <code>XmlTestThing</code> cannot find its abstract parent <code>XmlAbstractTestThingWithListedElementWithStartTime</code>. It has no problems finding the interface.</p>\n<p>However, doing a refresh on the project, just shows that in eclipse there is no compile problem reported for <code>XmlTestThing</code>: maven cannot find the import, while eclipse can.</p>\n<p>The generated class is in target/generated-test-sources.\nThe interface to be implemented is in src/main/java\nThe class to be extended is in src/test/java.</p>\n<p>I've tested this a bit, and found the following:</p>\n<ul>\n<li>if the class to be extended is in src/main/java, then it all functions</li>\n<li>if the class to be extended is in src/test/java, eclipse can find it, but maven reports a compile error because it is not able to find it from target/generated-test-sources.</li>\n</ul>\n<p>Apparently maven can find the interface in /src/main/java, but not the parent class in /src/test/java. Or does target/generated-test-sources not have access to src/test/java?</p>\n<p>Some more info:</p>\n<p>This is the part of pom.xml arranging the test-resources:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;!--  \n    The standard location for generated sources is under target, so that\n    it falls outside the scope of subversion/git. However, the standard maven\n    setup doesn't support java sources not under src/main/java or src/test/java.  \n    This plugin lets maven know that the generated sources under target\n    should also be considered as a source folder for java classes.\n    In this case it is used for test sources.  --&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;add-test-source&lt;/id&gt;\n            &lt;phase&gt;generate-test-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;add-test-source&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;sources&gt;\n                    &lt;!-- This tells the plugin that generated-sources under target is a source folder. --&gt;\n                    &lt;source&gt;${project.build.directory}/generated-test-sources/java/&lt;/source&gt;\n                &lt;/sources&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>and this is the pom.xml configuration of class generation:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;  \n    &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n    &lt;version&gt;0.15.3&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;schemaDirectory&gt;src/test/resources&lt;/schemaDirectory&gt;\n        &lt;generateDirectory&gt;${project.build.directory}/generated-test-sources/java&lt;/generateDirectory&gt;\n        &lt;extension&gt;true&lt;/extension&gt;\n        &lt;strict&gt;false&lt;/strict&gt;\n        &lt;forceRegenerate&gt;true&lt;/forceRegenerate&gt;\n        &lt;args&gt;\n            &lt;arg&gt;-Xinheritance&lt;/arg&gt;\n        &lt;/args&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb2-basics&lt;/artifactId&gt;\n                &lt;version&gt;0.11.1&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;  \n            &lt;id&gt;input&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;schemaIncludes&gt;\n                    &lt;include&gt;testInput.xsd&lt;/include&gt;\n                &lt;/schemaIncludes&gt;\n                &lt;bindingIncludes&gt;\n                    &lt;include&gt;testInput.xjb&lt;/include&gt;\n                &lt;/bindingIncludes&gt;  \n            &lt;/configuration&gt;\n        &lt;/execution&gt;  \n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>This xjb does some prefixing of class names:</p>\n<pre><code>&lt;jaxb:bindings xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot; xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; version=&quot;2.0&quot; schemaLocation=&quot;testInput.xsd&quot;&gt;\n    &lt;jaxb:schemaBindings&gt;\n        &lt;jaxb:package name=&quot;nl.erasmusmc.mgz.core.input.generated.test&quot;/&gt;\n        &lt;jaxb:nameXmlTransform&gt;\n            &lt;!-- Prefix all generated classes with Xml --&gt;\n            &lt;jaxb:typeName prefix=&quot;Xml&quot;/&gt;\n            &lt;jaxb:elementName prefix=&quot;Xml&quot;/&gt;\n            &lt;jaxb:modelGroupName prefix=&quot;Xml&quot;/&gt;\n            &lt;jaxb:anonymousTypeName prefix=&quot;Xml&quot;/&gt;\n        &lt;/jaxb:nameXmlTransform&gt;\n    &lt;/jaxb:schemaBindings&gt;\n\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>And this would be an xml input file under test:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;input \n    xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n    xmlns:inheritance=&quot;http://jaxb2-commons.dev.java.net/basic/inheritance&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:noNamespaceSchemaLocation=&quot;testInput.xsd&quot; &gt;\n   \n  &lt;test.thing&gt;\n      &lt;start.timed.thing start=&quot;1800-01-01&quot;/&gt;  \n      &lt;start.timed.thing start=&quot;1970-01-01&quot;/&gt;  \n      &lt;start.timed.thing start=&quot;2000-01-01&quot;/&gt;  \n  &lt;/test.thing&gt; \n\n&lt;/input&gt;\n\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}