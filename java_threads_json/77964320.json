{
  "question": {
    "tags": [
      "java",
      "maven",
      "log4j2",
      "open-telemetry"
    ],
    "owner": {
      "account_id": 15300680,
      "reputation": 197,
      "user_id": 11039211,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/YxwKI.jpg?s=256",
      "display_name": "Ivan Webber",
      "link": "https://stackoverflow.com/users/11039211/ivan-webber"
    },
    "is_answered": true,
    "view_count": 1146,
    "accepted_answer_id": 78369275,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1713828776,
    "creation_date": 1707420665,
    "question_id": 77964320,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77964320/slf4j2-and-log4j1-to-log4j2",
    "title": "SLF4J2 and Log4J1 to Log4J2",
    "body": "<p>I have been scratching my head over logger dependencies. I want my own code to use the SLF4J 2 API and in tests and runtime use Log4J2 as the provider. However, I have a dependency on OpenLr's binary package that uses Log4J1. Additionally, I want to setup telemetry and have my logs exported.</p>\n<p>I found these docs:</p>\n<ul>\n<li><a href=\"https://www.slf4j.org/manual.html\" rel=\"nofollow noreferrer\">https://www.slf4j.org/manual.html</a></li>\n<li><a href=\"https://www.slf4j.org/legacy.html\" rel=\"nofollow noreferrer\">https://www.slf4j.org/legacy.html</a></li>\n<li><a href=\"https://logging.apache.org/log4j/2.x/runtime-dependencies.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/runtime-dependencies.html</a></li>\n</ul>\n<p>It seemed like the correct dependencies would be:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;!-- Set SLF4J 2 API version --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                &lt;version&gt;${slf4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!-- Set Log4J 2 API version --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n...\n        &lt;!-- Use SLF4J API so logging framework is code independent. --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Redirect dependencies using Log4j 1 to Log4j 2 instead. --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Add logging framework. --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-slf4j2-impl&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n            &lt;!-- includes log4j-api of same version --&gt;\n        &lt;/dependency&gt;\n        &lt;!-- OpenTelemetry to produce metrics and logs --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-api&lt;/artifactId&gt;\n            &lt;version&gt;${opentelemetry.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Dependencies needed for Geneva export with OTLP agent on docker --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-sdk-extension-autoconfigure&lt;/artifactId&gt;\n            &lt;version&gt;${opentelemetry.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\n            &lt;version&gt;${opentelemetry.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry.instrumentation&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-log4j-appender-2.17&lt;/artifactId&gt;\n            &lt;version&gt;${opentelemetry.version}-alpha&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>In another module without opentelemetry these settings seem to work, but in the main project SLF4J can't find a binding. A teammate told me that the following (setting logging to use log4j-reload) works:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;!-- Use SLF4J API so logging framework is code independent. --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Add logging framework. --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I'm just not sure why the log4j 2 provider is not working. Is there an incompatability with OpenTelemetry? Please help me understand.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}