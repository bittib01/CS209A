{
  "question": {
    "tags": [
      "java",
      "minecraft-forge"
    ],
    "owner": {
      "account_id": 30806451,
      "reputation": 1,
      "user_id": 23631182,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocK_QK2xzQHTkcycuc450Ry8WTPjswTdAR-fzrQw10YSmA=k-s256",
      "display_name": "Code Corruption",
      "link": "https://stackoverflow.com/users/23631182/code-corruption"
    },
    "is_answered": true,
    "view_count": 1591,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1755715744,
    "creation_date": 1726828197,
    "question_id": 79006375,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79006375/forge-1-21-1-mod-not-loading-correctly-error",
    "title": "Forge 1.21.1 mod not loading correctly error",
    "body": "<p>According to IntelliJ forge 1.21.1 has deprecated <code>.get()</code> and <code>.get().getModEventBus()</code>, I am wondering if this is why my code is running into errors. If so, how do I now write it? I have tried asking ChatGPT about the new method (kept telling me to use <code>.get().getModEventBus()</code>) and researching (either says the search didn't match any documents or other forge issues and how to install forge) to no avail. I don't believe this is the error and it doesn't matter too much about the <code>.get()</code> as i have seen others using it still in forge 1.21.1.\nI have tried launching my mod but it crashes with this error:</p>\n<pre><code>Copy-Chat (copychat) has failed to load correctly\njava.lang.IllegalArgumentException: Listener for event class\nnet.minecraftforge.event.server.ServerStratingEvent takes an argument that is not a subtype of the base type interface\nnet.minecraftforge.fml.event.IModBusEvent\n</code></pre>\n<p>Many thanks, Code.</p>\n<p>The mod can send different messages, and soon (hopefully) joining and leaving messages. If there are other mods that do the same purpose for forge 1.21.1 I am not really interested as I want to make my own (its about the creativity and challenge it presents, but this is one challenge that I do want and need help with). Granted it is not too realistic right now but I will fix that when this is fixed!</p>\n<p>Mod Code:</p>\n<pre><code>package com.github.CodeCorruption0.copychat;\n\nimport com.mojang.brigadier.Command;\nimport com.mojang.brigadier.CommandDispatcher;\nimport com.mojang.brigadier.context.CommandContext;\nimport com.mojang.brigadier.arguments.StringArgumentType;\nimport net.minecraft.commands.CommandSourceStack;\nimport net.minecraft.commands.Commands;\nimport net.minecraft.network.chat.Component;\nimport net.minecraft.network.chat.Style;\nimport net.minecraft.network.chat.TextColor;\nimport net.minecraft.server.level.ServerPlayer;\nimport net.minecraft.commands.arguments.EntityArgument;\nimport net.minecraftforge.event.server.ServerStartingEvent;\nimport net.minecraftforge.eventbus.api.IEventBus;\nimport net.minecraftforge.fml.common.Mod;\nimport net.minecraftforge.fml.javafmlmod.FMLJavaModLoadingContext;\n\nimport java.util.function.Supplier;\n\n@Mod(CopyChat.MOD_ID)\npublic class CopyChat {\n    public static final String MOD_ID = &quot;copychat&quot;;\n\n    public CopyChat() {\n        IEventBus modEventBus = FMLJavaModLoadingContext.get().getModEventBus();\n        modEventBus.addListener(this::onServerStarting);\n    }\n\n    private void onServerStarting(ServerStartingEvent event) {\n        registerCommands(event.getServer().getCommands().getDispatcher());\n    }\n\n    private void registerCommands(CommandDispatcher&lt;CommandSourceStack&gt; dispatcher) {\n        dispatcher.register(Commands.literal(&quot;copy-chat&quot;)\n                .then(Commands.literal(&quot;Server&quot;)\n                        .then(Commands.argument(&quot;message&quot;, StringArgumentType.greedyString())\n                                .executes(context -&gt; sendServerMessage(context, StringArgumentType.getString(context, &quot;message&quot;)))\n                        )\n                )\n                .then(Commands.literal(&quot;Player&quot;)\n                        .then(Commands.argument(&quot;player&quot;, EntityArgument.player())\n                                .then(Commands.argument(&quot;message&quot;, StringArgumentType.greedyString())\n                                        .executes(context -&gt; sendPlayerMessage(context, EntityArgument.getPlayer(context, &quot;player&quot;), StringArgumentType.getString(context, &quot;message&quot;)))\n                                )\n                        )\n                )\n                .then(Commands.literal(&quot;MSG&quot;)\n                        .then(Commands.argument(&quot;target&quot;, EntityArgument.player())\n                                .then(Commands.argument(&quot;sender&quot;, StringArgumentType.string())\n                                        .then(Commands.argument(&quot;message&quot;, StringArgumentType.greedyString())\n                                                .executes(context -&gt; sendMessage(context, EntityArgument.getPlayer(context, &quot;target&quot;), StringArgumentType.getString(context, &quot;sender&quot;), StringArgumentType.getString(context, &quot;message&quot;)))\n                                        )\n                                )\n                        )\n                )\n        );\n    }\n\n    private int sendServerMessage(CommandContext&lt;CommandSourceStack&gt; context, String message) {\n        context.getSource().sendSuccess((Supplier&lt;Component&gt;) Component.literal(&quot;[SERVER] &quot; + message), false);\n        return Command.SINGLE_SUCCESS;\n    }\n\n    private int sendPlayerMessage(CommandContext&lt;CommandSourceStack&gt; context, ServerPlayer target, String message) {\n        target.sendSystemMessage(Component.literal(&quot;[Player] &quot; + message));\n        return Command.SINGLE_SUCCESS;\n    }\n\n    private int sendMessage(CommandContext&lt;CommandSourceStack&gt; context, ServerPlayer target, String sender, String message) {\n        target.sendSystemMessage(Component.literal(sender + &quot;: &quot; + message).setStyle(Style.EMPTY.withItalic(true).withColor(TextColor.fromRgb(0xA9A9A9))));\n        return Command.SINGLE_SUCCESS;\n    }\n}\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'eclipse'\n    id 'idea'\n    id 'net.minecraftforge.gradle' version '[6.0.16,6.2)'\n}\n\n\ngroup = mod_group_id\nversion = mod_version\n\nbase {\n    archivesName = mod_id\n}\n\njava {\n    toolchain.languageVersion = JavaLanguageVersion.of(21)\n}\n\nminecraft {\n    // The mappings can be changed at any time and must be in the following format.\n    // Channel:   Version:\n    // official   MCVersion             Official field/method names from Mojang mapping files\n    // parchment  YYYY.MM.DD-MCVersion  Open community-sourced parameter names and javadocs layered on top of official\n    //\n    // You must be aware of the Mojang license when using the 'official' or 'parchment' mappings.\n    // See more information here: https://github.com/MinecraftForge/MCPConfig/blob/master/Mojang.md\n    //\n    // Parchment is an unofficial project maintained by ParchmentMC, separate from MinecraftForge\n    // Additional setup is needed to use their mappings: https://parchmentmc.org/docs/getting-started\n    //\n    // Use non-default mappings at your own risk. They may not always work.\n    // Simply re-run your setup task after changing the mappings to update your workspace.\n    mappings channel: mapping_channel, version: mapping_version\n\n    // When true, this property will have all Eclipse/IntelliJ IDEA run configurations run the &quot;prepareX&quot; task for the given run configuration before launching the game.\n    // In most cases, it is not necessary to enable.\n    // enableEclipsePrepareRuns = true\n    // enableIdeaPrepareRuns = true\n\n    // This property allows configuring Gradle's ProcessResources task(s) to run on IDE output locations before launching the game.\n    // It is REQUIRED to be set to true for this template to function.\n    // See https://docs.gradle.org/current/dsl/org.gradle.language.jvm.tasks.ProcessResources.html\n    copyIdeResources = true\n\n    // When true, this property will add the folder name of all declared run configurations to generated IDE run configurations.\n    // The folder name can be set on a run configuration using the &quot;folderName&quot; property.\n    // By default, the folder name of a run configuration is the name of the Gradle project containing it.\n    // generateRunFolders = true\n\n    // This property enables access transformers for use in development.\n    // They will be applied to the Minecraft artifact.\n    // The access transformer file can be anywhere in the project.\n    // However, it must be at &quot;META-INF/accesstransformer.cfg&quot; in the final mod jar to be loaded by Forge.\n    // This default location is a best practice to automatically put the file in the right place in the final jar.\n    // See https://docs.minecraftforge.net/en/latest/advanced/accesstransformers/ for more information.\n    // accessTransformer = file('src/main/resources/META-INF/accesstransformer.cfg')\n\n    // Default run configurations.\n    // These can be tweaked, removed, or duplicated as needed.\n    runs {\n        // applies to all the run configs below\n        configureEach {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            // The markers can be added/remove as needed separated by commas.\n            // &quot;SCAN&quot;: For mods scan.\n            // &quot;REGISTRIES&quot;: For firing of registry events.\n            // &quot;REGISTRYDUMP&quot;: For getting the contents of all registries.\n            property 'forge.logging.markers', 'REGISTRIES'\n\n\n            // Recommended logging level for the console\n            // You can set various levels here.\n            // Please read: https://stackoverflow.com/questions/2031163/when-to-use-the-different-log-levels\n            property 'forge.logging.console.level', 'debug'\n        }\n\n        client {\n            // Comma-separated list of namespaces to load gametests from. Empty = all namespaces.\n            property 'forge.enabledGameTestNamespaces', mod_id\n        }\n\n        server {\n            property 'forge.enabledGameTestNamespaces', mod_id\n            args '--nogui'\n        }\n\n        // This run config launches GameTestServer and runs all registered gametests, then exits.\n        // By default, the server will crash when no gametests are provided.\n        // The gametest system is also enabled by default for other run configs under the /test command.\n        gameTestServer {\n            property 'forge.enabledGameTestNamespaces', mod_id\n        }\n\n        data {\n            // example of overriding the workingDirectory set in configureEach above\n            workingDirectory project.file('run-data')\n\n            // Specify the modid for data generation, where to output the resulting resource, and where to look for existing resources.\n            args '--mod', mod_id, '--all', '--output', file('src/generated/resources/'), '--existing', file('src/main/resources/')\n        }\n    }\n}\n\n// Include resources generated by data generators.\nsourceSets.main.resources { srcDir 'src/generated/resources' }\n\nrepositories {\n    // Put repositories for dependencies here\n    // ForgeGradle automatically adds the Forge maven and Maven Central for you\n\n    // If you have mod jar dependencies in ./libs, you can declare them as a repository like so.\n    // See https://docs.gradle.org/current/userguide/declaring_repositories.html#sub:flat_dir_resolver\n    // flatDir {\n    //     dir 'libs'\n    // }\n}\n\ndependencies {\n    // Specify the version of Minecraft to use.\n    // Any artifact can be supplied so long as it has a &quot;userdev&quot; classifier artifact and is a compatible patcher artifact.\n    // The &quot;userdev&quot; classifier will be requested and setup by ForgeGradle.\n    // If the group id is &quot;net.minecraft&quot; and the artifact id is one of [&quot;client&quot;, &quot;server&quot;, &quot;joined&quot;],\n    // then special handling is done to allow a setup of a vanilla dependency without the use of an external repository.\n    minecraft &quot;net.minecraftforge:forge:${minecraft_version}-${forge_version}&quot;\n\n    // Example mod dependency with JEI - using fg.deobf() ensures the dependency is remapped to your development mappings\n    // The JEI API is declared for compile time use, while the full JEI artifact is used at runtime\n    // compileOnly fg.deobf(&quot;mezz.jei:jei-${mc_version}-common-api:${jei_version}&quot;)\n    // compileOnly fg.deobf(&quot;mezz.jei:jei-${mc_version}-forge-api:${jei_version}&quot;)\n    // runtimeOnly fg.deobf(&quot;mezz.jei:jei-${mc_version}-forge:${jei_version}&quot;)\n\n    // Example mod dependency using a mod jar from ./libs with a flat dir repository\n    // This maps to ./libs/coolmod-${mc_version}-${coolmod_version}.jar\n    // The group id is ignored when searching -- in this case, it is &quot;blank&quot;\n    // implementation fg.deobf(&quot;blank:coolmod-${mc_version}:${coolmod_version}&quot;)\n\n    // For more info:\n    // http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html\n    // http://www.gradle.org/docs/current/userguide/dependency_management.html\n\n    // Hack fix for now, force jopt-simple to be exactly 5.0.4 because Mojang ships that version, but some transtive dependencies request 6.0+\n    implementation('net.sf.jopt-simple:jopt-simple:5.0.4') { version { strictly '5.0.4' } }\n}\n\n// This block of code expands all declared replace properties in the specified resource targets.\n// A missing property will result in an error. Properties are expanded using ${} Groovy notation.\n// When &quot;copyIdeResources&quot; is enabled, this will also run before the game launches in IDE environments.\n// See https://docs.gradle.org/current/dsl/org.gradle.language.jvm.tasks.ProcessResources.html\ntasks.named('processResources', ProcessResources).configure {\n    var replaceProperties = [minecraft_version   : minecraft_version, minecraft_version_range: minecraft_version_range,\n                             forge_version       : forge_version, forge_version_range: forge_version_range,\n                             loader_version_range: loader_version_range,\n                             mod_id              : mod_id, mod_name: mod_name, mod_license: mod_license, mod_version: mod_version,\n                             mod_authors         : mod_authors, mod_description: mod_description,]\n\n    inputs.properties replaceProperties\n\n    filesMatching(['META-INF/mods.toml', 'pack.mcmeta']) {\n        expand replaceProperties + [project: project]\n    }\n}\n\n// Example for how to get properties into the manifest for reading at runtime.\ntasks.named('jar', Jar).configure {\n    manifest {\n        attributes([&quot;Specification-Title&quot;     : mod_id,\n                    &quot;Specification-Vendor&quot;    : mod_authors,\n                    &quot;Specification-Version&quot;   : &quot;1&quot;, // We are version 1 of ourselves\n                    &quot;Implementation-Title&quot;    : project.name,\n                    &quot;Implementation-Version&quot;  : project.jar.archiveVersion,\n                    &quot;Implementation-Vendor&quot;   : mod_authors,\n                    &quot;Implementation-Timestamp&quot;: new Date().format(&quot;yyyy-MM-dd'T'HH:mm:ssZ&quot;)])\n    }\n\n    // This is the preferred method to reobfuscate your jar file\n    finalizedBy 'reobfJar'\n}\n\ntasks.withType(JavaCompile).configureEach {\n    options.encoding = 'UTF-8' // Use the UTF-8 charset for Java compilation\n}\n\n// Merge the resources and classes into the same directory.\n// This is done because java expects modules to be in a single directory.\n// And if we have it in multiple we have to do performance intensive hacks like having the UnionFileSystem\n// This will eventually be migrated to ForgeGradle so modders don't need to manually do it. But that is later.\nsourceSets.each {\n    def dir = layout.buildDirectory.dir(&quot;sourcesSets/$it.name&quot;)\n    it.output.resourcesDir = dir\n    it.java.destinationDirectory = dir\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}