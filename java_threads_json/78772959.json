{
  "question": {
    "tags": [
      "java",
      "java-8",
      "jar",
      "nio"
    ],
    "owner": {
      "account_id": 34211180,
      "reputation": 47,
      "user_id": 26445707,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/94bba61a49153f99950dbb273b04e80c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "CJOverflow",
      "link": "https://stackoverflow.com/users/26445707/cjoverflow"
    },
    "is_answered": true,
    "view_count": 248,
    "answer_count": 2,
    "score": 5,
    "last_activity_date": 1722182756,
    "creation_date": 1721483802,
    "last_edit_date": 1721662596,
    "question_id": 78772959,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78772959/how-to-work-with-zipfilesystems-keep-open-or-re-open-as-needed",
    "title": "How to work with (Zip)FileSystems - keep open or re-open as needed?",
    "body": "<p>I'm working on a project with Java 8. The component I'm working on provides access to files, e.g. config files, that are classpath resources.</p>\n<p>It's my first time working with <code>nio.file.Path</code>and <code>nio.file.FileSystem</code>. I've looked up several things online, but what I can't figure out is how to handle <code>FileSystem</code>s correctly, because to access a file using <code>Path</code> the `FileSystemÂ´ must be/remain open.</p>\n<p>The overall use case is that several consumers can request the same or different config files at any time. The access to a file resource will be provided using a <code>Path</code> that is a member of a <code>MyResource</code> object.</p>\n<p>This is a rough draft of how a <code>Path</code> is created atm.</p>\n<pre><code>Path getResource(fileNameStr) {\n  Path result = null;\n\n  URI uri =  ClassLoader.getSystemResource(fileNameStr).toURI();\n\n  Map&lt;String, String&gt; env = new HashMap&lt;String, String&gt;(); \n  env.put(&quot;create&quot;, &quot;true&quot;);\n\n  FileSystem zipfs = FileSystems.newFileSystem(uri);\n  result = Paths.get(uri);\n\n  // question: close zipfs or keep open?\n\n  return result;\n}\n</code></pre>\n<p>What I would like to understand: Can a <code>(Zip)FileSystem</code> remain open to ease further working with a <code>Path</code> instance and e.g. needed <code>InputStream</code>s? Or should it always be closed and later &quot;reloaded&quot; when a file will actually be read.</p>\n<p>My assumption is that keeping multiple <code>ZipFileSystem</code>s open indefinitely is not intended, but not keeping them open means that consumers must always check if a needed <code>ZipFileSystem</code> already exist and if not, they must create one. Also the closing of a <code>ZipFileSystem</code> must be managed if several consumers access the same JAR simultaneously . It would be possible for me to add further functionalities to ease the file access, but I'd assume if that is needed, it would already exist. Therefore there must be an answer/process of working with <code>(Zip)FileSystem</code>s I'm not understanding yet.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}