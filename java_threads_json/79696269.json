{
  "question": {
    "tags": [
      "java",
      "azure",
      "azure-functions",
      "gson"
    ],
    "owner": {
      "account_id": 2793925,
      "reputation": 25,
      "user_id": 2403557,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/21fc1820cfd3a4446d800c36c26c40ba?s=256&d=identicon&r=PG",
      "display_name": "Ricardo Comar",
      "link": "https://stackoverflow.com/users/2403557/ricardo-comar"
    },
    "is_answered": true,
    "view_count": 111,
    "accepted_answer_id": 79702151,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1752602365,
    "creation_date": 1752095932,
    "last_edit_date": 1752097172,
    "question_id": 79696269,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79696269/class-blockblobclient-declares-multiple-json-fields-named-client-in-function-a",
    "title": "Class BlockBlobClient declares multiple JSON fields named &#39;client&#39; in Function App Blob Trigger",
    "body": "<p>I'm trying to create a Function App to be triggered by blob storage events, and would like to retrieve the file metadata fields to use as parameters to file processing logic.</p>\n<p>But when I declare @BlobTrigger in a BlobClient blobClient, raises the exception below. If I change to String content (or byte[]) the trigger works as expected.</p>\n<p>I tried to remove gson as a indirect dependency in pom.xml, also tried to declare jackson to be the default serialized, but no success.</p>\n<p>I managed to create by hand the blobClient and reach the file metadata, but I think that's not the right approach.</p>\n<p>Am I missing something ?</p>\n<p>Thanks in advance</p>\n<ul>\n<li>azure-functions-java-library : 3.1.0</li>\n<li>azure-storage-blob : 12.28.0</li>\n<li>Azure Functions Core Tools\nCore Tools Version:       4.0.7512\nCommit hash: N/A +8be8cc84f6ad64c784e083bf4da7fa381bdd3449 (64-bit)\nFunction Runtime Version: 4.1040.300.25317</li>\n</ul>\n<p>Reference: <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-storage-blob-trigger?tabs=python-v2%2Cisolated-process%2Cnodejs-v4%2Cextensionv5&amp;pivots=programming-language-java#example\" rel=\"nofollow noreferrer\">Azure Blob storage trigger for Azure Functions </a></p>\n<p>Code snippet:</p>\n<pre><code>    @FunctionName(&quot;processBlob&quot;)\n    public void run(\n            @BlobTrigger(name = &quot;content&quot;, path = &quot;%GATEWAY_CONTAINER_NAME%%GATEWAY_SOURCE_FOLDER%/{fileName}&quot;, connection = &quot;SourceBlogStorageConnStr&quot;, dataType = &quot;binary&quot;) BlobClient blobClient,\n            @BindingName(&quot;fileName&quot;) String fileName,\n            ExecutionContext ctx) {\n\n        ctx.getLogger().info(&quot;Size = &quot; + blobClient.getProperties().getBlobSize());\n        ctx.getLogger().info(&quot;Filename = &quot; + fileName);\n        ctx.getLogger().info(&quot;Metadata = &quot; + blobClient.getProperties().getMetadata().entrySet());\n    }\n\n</code></pre>\n<p>Output:</p>\n<pre><code>Executing 'Functions.processBlob' (Reason='New blob detected(LogsAndContainerScan): my_blob_storage/my_folder/my_file.csv', Id=bb2845c7-9d8c-4ecd-b6e0-21b42b73a345)\n[2025-07-09T20:58:04.183Z] Trigger Details: MessageId: 28459ab1-e4de-4c2d-9bfb-901df92c32de, DequeueCount: 1, InsertedOn: 2025-07-09T20:58:03.000+00:00, BlobCreated: 2025-07-09T17:55:50.000+00:00, BlobLastModified: 2025-07-09T20:58:02.000+00:00\n[2025-07-09T20:58:04.209Z] Executed 'Functions.processBlob' (Failed, Id=bb2845c7-9d8c-4ecd-b6e0-21b42b73a345, Duration=30ms)\n[2025-07-09T20:58:04.209Z] System.Private.CoreLib: Exception while executing function: Functions.processBlob. System.Private.CoreLib: Result: Failure\n[2025-07-09T20:58:04.209Z] Exception: IllegalArgumentException: Class com.azure.storage.blob.specialized.BlockBlobClient declares multiple JSON fields named 'client'; conflict is caused by fields com.azure.storage.blob.specialized.BlockBlobClient#client and com.azure.storage.blob.specialized.BlobClientBase#client\n[2025-07-09T20:58:04.209Z] See https://github.com/google/gson/blob/main/Troubleshooting.md#duplicate-fields\n[2025-07-09T20:58:04.210Z] Stack: java.lang.IllegalArgumentException: Class com.azure.storage.blob.specialized.BlockBlobClient declares multiple JSON fields named 'client'; conflict is caused by fields com.azure.storage.blob.specialized.BlockBlobClient#client and com.azure.storage.blob.specialized.BlobClientBase#client\n[2025-07-09T20:58:04.210Z] See https://github.com/google/gson/blob/main/Troubleshooting.md#duplicate-fields\n[2025-07-09T20:58:04.210Z]      at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createDuplicateFieldException(ReflectiveTypeAdapterFactory.java:313)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:409)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:161)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.Gson.getAdapter(Gson.java:628)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:201)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:395)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:161)\n[2025-07-09T20:58:04.210Z]      at com.google.gson.Gson.getAdapter(Gson.java:628)\n[2025-07-09T20:58:04.211Z]      at com.google.gson.Gson.fromJson(Gson.java:1360)\n[2025-07-09T20:58:04.211Z]      at com.google.gson.Gson.fromJson(Gson.java:1262)\n[2025-07-09T20:58:04.211Z]      at com.google.gson.Gson.fromJson(Gson.java:1171)\n[2025-07-09T20:58:04.211Z]      at com.google.gson.Gson.fromJson(Gson.java:1137)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.DataOperations.convertFromJson(DataOperations.java:158)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.DataOperations.apply(DataOperations.java:114)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.DataSource.computeByType(DataSource.java:56)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.RpcStringDataSource.computeByType(RpcStringDataSource.java:5)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.DataSource.computeByName(DataSource.java:42)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.RpcStringDataSource.computeByName(RpcStringDataSource.java:5)\n[2025-07-09T20:58:04.211Z]      at com.microsoft.azure.functions.worker.binding.BindingDataStore.getDataByName(BindingDataStore.java:66)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.binding.ExecutionContextDataSource.getBindingData(ExecutionContextDataSource.java:181)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.broker.ParameterResolver.resolve(ParameterResolver.java:44)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.broker.ParameterResolver.resolveArguments(ParameterResolver.java:22)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.broker.EnhancedJavaMethodExecutorImpl.execute(EnhancedJavaMethodExecutorImpl.java:20)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.chain.FunctionExecutionMiddleware.invoke(FunctionExecutionMiddleware.java:19)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.chain.InvocationChain.doNext(InvocationChain.java:21)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.broker.JavaFunctionBroker.invokeMethod(JavaFunctionBroker.java:195)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:34)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:10)\n[2025-07-09T20:58:04.212Z]      at com.microsoft.azure.functions.worker.handler.MessageHandler.handle(MessageHandler.java:44)\n[2025-07-09T20:58:04.213Z]      at com.microsoft.azure.functions.worker.JavaWorkerClient$StreamingMessagePeer.lambda$onNext$0(JavaWorkerClient.java:94)\n[2025-07-09T20:58:04.213Z]      at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n[2025-07-09T20:58:04.213Z]      at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n[2025-07-09T20:58:04.213Z]      at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n[2025-07-09T20:58:04.213Z]      at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n[2025-07-09T20:58:04.213Z]      at java.base/java.lang.Thread.run(Thread.java:840)\n</code></pre>\n<p>This works:</p>\n<pre><code>    @FunctionName(&quot;processBlob&quot;)\n    public void run(\n            @BlobTrigger(name = &quot;content&quot;, path = &quot;%GATEWAY_CONTAINER_NAME%%GATEWAY_SOURCE_FOLDER%/{fileName}&quot;, connection = &quot;SourceBlogStorageConnStr&quot;, dataType = &quot;string&quot;) String content,\n                    @BindingName(&quot;fileName&quot;) String fileName,\n            ExecutionContext ctx) {\n\n        BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\n                .connectionString(System.getenv(&quot;GATEWAY_CONN_STRING&quot;))\n                .buildClient();\n\n        BlobContainerClient containerClient = blobServiceClient\n                .getBlobContainerClient(\n                        System.getenv(&quot;GATEWAY_CONTAINER_NAME&quot;) + System.getenv(&quot;GATEWAY_SOURCE_FOLDER&quot;));\n\n        BlobClient blobClient = containerClient.getBlobClient(fileName);\n\n        ctx.getLogger().info(&quot;Size = &quot; + blobClient.getProperties().getBlobSize());\n        ctx.getLogger().info(&quot;Filename = &quot; + fileName);\n        ctx.getLogger().info(&quot;Metadata = &quot; + blobClient.getProperties().getMetadata().entrySet());\n    }\n</code></pre>\n<pre><code>\n[2025-07-09T21:37:02.435Z] Executing 'Functions.processBlob' (Reason='New blob detected(LogsAndContainerScan): my_blob_storage/my_folder/my_file.csv', Id=bb2845c7-9d8c-4ecd-b6e0-21b42b73a345)\n[2025-07-09T21:37:02.435Z] Trigger Details: MessageId: 4726d7c3-558e-4d52-81f1-88fda86286c6, DequeueCount: 1, InsertedOn: 2025-07-09T21:37:02.000+00:00, BlobCreated: 2025-07-09T17:55:50.000+00:00, BlobLastModified: 2025-07-09T21:37:01.000+00:00\n[2025-07-09T21:37:02.608Z] SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\n[2025-07-09T21:37:02.609Z] SLF4J: Defaulting to no-operation (NOP) logger implementation\n[2025-07-09T21:37:02.609Z] SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n[2025-07-09T21:37:08.580Z] Size = 1236484\n[2025-07-09T21:37:08.581Z] Filename = my_file.csv\n[2025-07-09T21:37:08.581Z] Metadata = [Metadata3=value, Metadata4=value, Metadata5=value, Metadata1=value, Metadata2=value]\n[2025-07-09T21:37:08.581Z] Function &quot;processBlob&quot; (Id: 1dc69e2a-682e-47ca-9805-2094f1ab1cf5) invoked by Java Worker\n[2025-07-09T21:37:08.591Z] Executed 'Functions.processBlob' (Succeeded, Id=1dc69e2a-682e-47ca-9805-2094f1ab1cf5, Duration=6196ms)\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}