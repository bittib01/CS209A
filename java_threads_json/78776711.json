{
  "question": {
    "tags": [
      "java",
      "postgresql",
      "jdbc",
      "prepared-statement",
      "ltree"
    ],
    "owner": {
      "account_id": 34239898,
      "reputation": 1,
      "user_id": 26459223,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/1b232e8be0c988ceb2d7f2839b16df5c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "P. M.",
      "link": "https://stackoverflow.com/users/26459223/p-m"
    },
    "is_answered": false,
    "view_count": 117,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1741116973,
    "creation_date": 1721613498,
    "last_edit_date": 1741048578,
    "question_id": 78776711,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78776711/java-type-in-jdbc-preparedstatements-for-postgresql-ltree-array-of-ltree-elem",
    "title": "Java type in JDBC PreparedStatements for Postgresql ltree[] (Array of ltree elements)",
    "body": "<p>I have a JDBC Prepared Statement that take a parameter of <code>ltree[]</code>, the <a href=\"https://www.postgresql.org/docs/current/ltree.html\" rel=\"nofollow noreferrer\">hierarchical tree-like data type</a> in Postgres.</p>\n<p>My goal is to query multiple entries from <code>my_table</code>, where the path is <code>ltree</code> type and is the primary key. Performance is critical. So I'm using Prepared Statements. I don't want to construct the query programmatically, so I want to pass the list of primary keys (<code>ltree[]</code>) as a parameter.</p>\n<p>Here is my prepared Statement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PreparedStatement myStatement =  connection.prepareStatement(\n                &quot;&quot;&quot;\n                        SELECT path\n                        FROM   my_table\n                        WHERE  path IN ( ? )\n                        &quot;&quot;&quot;);\n</code></pre>\n<p>The code where I try to populate the parameter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; listWithQuotes = new ArrayList&lt;&gt;();\nlistWithQuotes.add(&quot;A.B.C&quot;);\nlistWithQuotes.add(&quot;A.B&quot;);\n\nArray array = connection.createArrayOf(&quot;ltree[]&quot;,listWithQuotes.toArray() );\n            currStatement.setArray(1,array);\n            ResultSet rs = currStatement.executeQuery();\n</code></pre>\n<p>Here is the error message I'm getting:</p>\n<blockquote>\n<p>java.lang.RuntimeException: java.lang.RuntimeException: org.postgresql.util.PSQLException: Unable to find server array type for provided name ltree[].</p>\n</blockquote>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}