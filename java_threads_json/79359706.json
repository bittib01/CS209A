{
  "question": {
    "tags": [
      "java",
      "spring",
      "maven",
      "jacoco"
    ],
    "owner": {
      "account_id": 21944050,
      "reputation": 71,
      "user_id": 16224172,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/c7e0ba54e94f13d23d2234f3eca373b5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "countinglambdastosleep",
      "link": "https://stackoverflow.com/users/16224172/countinglambdastosleep"
    },
    "is_answered": false,
    "view_count": 49,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1738093719,
    "creation_date": 1736975343,
    "last_edit_date": 1736996297,
    "question_id": 79359706,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79359706/how-to-build-javaagent-jacoco-flag-through-code",
    "title": "How to build javaagent jacoco flag through code?",
    "body": "<p>I have a spring app using failsafe and to run IT's by launching the application jar through custom code, and there is no organizational appetite to have it run directly through maven.</p>\n<p>To get test coverage, I need to add the flag</p>\n<pre class=\"lang-none prettyprint-override\"><code>-javaagent:{mavenHome}/repository/org/jacoco/org.jacoco.agent/0.8.10/org.jacoco.agent-0.8.10-runtime.jar=destfile={targetLocation}/jacoco-it.exec\n</code></pre>\n<p>To build this string flag, I have to add</p>\n<pre class=\"lang-java prettyprint-override\"><code>String mavenHome = System.getenv(&quot;MAVEN_HOME&quot;);\n</code></pre>\n<p>Also, this assumes that the path to the jacoco agent jar will always be the same. I also can't get the jacoco version number as it's located in.</p>\n<p>My coworker told me to do a maven search in <code>MAVEN_HOME/repository/org/jacoco/org.jacoco.agent</code> (which has all the versions number), and get the most recent version by finding the max version in that folder, but this seems so hacky. It's very &quot;automagical&quot; when you have maven launch the jar files, as it automatically adds this flag. But since our code is custom-launching jars through code, I need to create this flag myself. Are there any non-hacky ways to do this?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}