{
  "question": {
    "tags": [
      "java",
      "android",
      "proximitysensor"
    ],
    "owner": {
      "account_id": 465919,
      "reputation": 1121,
      "user_id": 870345,
      "user_type": "registered",
      "accept_rate": 93,
      "profile_image": "https://www.gravatar.com/avatar/08d7f0176f0323fd1ab69d4dde8b4c72?s=256&d=identicon&r=PG",
      "display_name": "Steven",
      "link": "https://stackoverflow.com/users/870345/steven"
    },
    "is_answered": true,
    "view_count": 391,
    "accepted_answer_id": 79786460,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1760015811,
    "creation_date": 1707843401,
    "last_edit_date": 1707862212,
    "question_id": 77989636,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77989636/proximity-sensor-on-physical-android-device",
    "title": "Proximity sensor on physical Android device",
    "body": "<p>I am seeing proximity sensor detection behavior on physical Android devices that is so far off from what I am expecting that I must be missing some foundational huge thing. Here's what I see:</p>\n<p>I wrote a simple app that displays the proximity sensor value.</p>\n<p><code>activity_main.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/proxValue&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:textSize=&quot;60dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p><code>MainActivity.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity implements SensorEventListener {\n\n  TextView proxValue;\n  SensorManager sensorManager;\n  Sensor proximitySensor;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    proxValue = (TextView) findViewById(R.id.proxValue);\n    sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n    proximitySensor = sensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);\n  }\n\n  @Override\n  protected void onPause() {\n    super.onPause();\n    sensorManager.unregisterListener(this);\n  }\n\n  @Override\n  protected void onResume() {\n    super.onResume();\n    sensorManager.registerListener(this, proximitySensor, SensorManager.SENSOR_DELAY_NORMAL);\n  }\n\n  @Override\n  public void onSensorChanged(SensorEvent event) {\n    if (event.sensor.getType() == Sensor.TYPE_PROXIMITY) {\n      proxValue.setText(String.valueOf(event.values[0]));\n    }\n  }\n\n  @Override\n  public void onAccuracyChanged(Sensor sensor, int accuracy) {\n  }\n\n}\n</code></pre>\n<p>In the <em>device emulator</em>, when I move the virtual sensor's proximity slider around, it works as I would expect: the float value displayed on screen corresponds to the slider value.</p>\n<p><a href=\"https://youtu.be/sFwKp7k2qtg\" rel=\"nofollow noreferrer\">Video of emulator behavior</a></p>\n<p>However, when I run this on a <em>physical device</em> (devices tested listed below), I see two unexpected behaviors:</p>\n<ol>\n<li>The proximity detection is triggered not by me waving my hand in front of the device (near the top), but rather when by placing my palm anywhere on the screen</li>\n<li>It only displays 0.0 or 5.0.</li>\n</ol>\n<p><a href=\"https://youtu.be/a6zjzREoVxI\" rel=\"nofollow noreferrer\">Video of device behavior</a></p>\n<p>Edit: to clarify, the behavior I expected is that when my hand waves close to the front of the phone (without making physical contact, say hovering 1&quot;), the proximity sensor is able to indicate that it's 1&quot; away. Think, for example, a push-up tracker app that you lay on the ground and do push ups on top of, that uses the proximity sensor to determine that you've sufficiently lowered to count as a push up.<code>&lt;/edit&gt;</code></p>\n<p>Meanwhile, the phone app's proximity sensor behaves correctly/as-expected: while in a phone call, if I place the phone near my head (without making physical contact), the screen will black out.</p>\n<p>Related, I tried <a href=\"https://play.google.com/store/apps/details?id=io.kodular.borekbandell.Proximity_sensor_test\" rel=\"nofollow noreferrer\">this proximity sensor test app</a> with same problematic results on physical devices.</p>\n<p>Android version 14/API 34</p>\n<p>Devices tested:</p>\n<ul>\n<li>Samsung S23+</li>\n<li>Samsung A53 5G</li>\n<li>Pixel 6A</li>\n</ul>\n<p>Thanks in advance for any help.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}