{
  "question": {
    "tags": [
      "java",
      "spring",
      "hibernate",
      "jpa"
    ],
    "owner": {
      "account_id": 1488686,
      "reputation": 422,
      "user_id": 1396337,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/6107b09afa6e90ec7a981625129a3b98?s=256&d=identicon&r=PG",
      "display_name": "Mumrah",
      "link": "https://stackoverflow.com/users/1396337/mumrah"
    },
    "is_answered": true,
    "view_count": 135,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1762513289,
    "creation_date": 1762431029,
    "last_edit_date": 1762442356,
    "question_id": 79811246,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79811246/hibernate-6-unidirectional-many-to-one-relationship-and-database-cascading-delet",
    "title": "Hibernate 6 unidirectional many to one relationship and database cascading deletes",
    "body": "<p>I have an extensive JPA model which exclusively uses unidirectional @ManyToOne relationships from child to parent, for example like this.</p>\n<pre><code>public class Child {\n  @ManyToOne(optional = false)\n  @JoinColumn(name = &quot;parent&quot;)\n  private Parent parent\n}\n</code></pre>\n<p>There are zillions of relations like this in a rather convoluted hierarchy leading to a root-most entity.  We've set up database cascading deletes, so it is only necessary to delete the root-most entity when we want to delete things.  This was considerably more efficient than doing it in JPA.  This used to work fine but with Hibernate 6 we're encountering a problem.</p>\n<p>If I've loaded an <code>Child</code> entity at some point in a test, say, then try to delete a <code>Parent</code> entity I get an exception like this</p>\n<pre><code>org.hibernate.TransientObjectException: persistent instance references an unsaved transient instance of 'Parent'\n</code></pre>\n<p>I can see from the stack that this exception is being raised via <code>CascadingAction.CHECK_ON_FLUSH</code>.  From debug I can also see that the relation triggering this is from child to parent.  This is perhaps not unreasonably checking that the loaded entities don't have any dangling references.  They obviously will, however, because we're not deleting things using JPA, it is done via data base cascading deletes.</p>\n<p>I really don't want to have to replicate the DB cascading deletes in JPA and as mention it is considerably slower than data base cascading deletes.</p>\n<p>Is there a way to disable this check, or to instead flag these relationships as data-base cascading deletes so Hibernate knows it can just remove the entities safely?</p>\n<p>NB I'm using Spring Boot.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}