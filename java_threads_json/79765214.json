{
  "question": {
    "tags": [
      "java",
      "gwt",
      "classcastexception",
      "gwt-elemental"
    ],
    "owner": {
      "account_id": 29072465,
      "reputation": 1,
      "user_id": 22270430,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/AAcHTtdS9TAdwUt_FvdoywI1bPX0cwwHWehNE3H6OWYj2Z-_=k-s256",
      "display_name": "FanTech",
      "link": "https://stackoverflow.com/users/22270430/fantech"
    },
    "is_answered": false,
    "view_count": 39,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1757949888,
    "creation_date": 1757943606,
    "last_edit_date": 1757949888,
    "question_id": 79765214,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79765214/classcastexception-when-traversing-childnodes-in-gwt-elemental2-during-text-high",
    "title": "ClassCastException when traversing childNodes in GWT Elemental2 during text highlighting implementation",
    "body": "<p>​​Problem Description​​:</p>\n<p>I'm implementing text highlighting functionality using GWT and Elemental2. When traversing through <code>childNodes</code> to process text nodes for highlighting, I'm encountering a <code>ClassCastException</code> when trying to cast nodes to <code>HTMLElement</code>.​​</p>\n<p>Scenario​​:</p>\n<p>I need to highlight text content within a DOM element and its children. My approach involves recursively traversing through <code>childNodes</code> checking node types (<code>Node.TEXT_NODE</code> vs <code>Node.ELEMENT_NODE</code>) and</p>\n<ul>\n<li>For text nodes: creating highlighted spans using <code>DocumentFragment</code></li>\n<li>For element nodes: recursing into child nodes</li>\n</ul>\n<p>During this traversal, I'm getting a <code>ClassCastException</code> when processing non-element nodes.</p>\n<p>​​Code Snippet​​:</p>\n<pre><code>private void highlightText(Node parentNode) {\n    NodeList&lt;Node&gt; childNodes = parentNode.childNodes;\n    for (int i = 0; i &lt; childNodes.length; i++) {\n        Node node = childNodes.getAt(i);\n        if (node.nodeType == Node.TEXT_NODE) {\n            // Process text node - THIS WORKS FINE\n            processTextNode(parentNode, (Text) node);\n        } else if (node instanceof HTMLElement) {\n            // PROBLEM AREA: This cast sometimes fails\n            HTMLElement element = (HTMLElement) node;\n            // Recursively process child nodes\n            if (element.hasChildNodes()) {\n                highlightText(element);\n            }\n        }\n    }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}