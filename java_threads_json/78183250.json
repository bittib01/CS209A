{
  "question": {
    "tags": [
      "java",
      "spring-boot"
    ],
    "owner": {
      "account_id": 325224,
      "reputation": 36974,
      "user_id": 646276,
      "user_type": "registered",
      "accept_rate": 61,
      "profile_image": "https://www.gravatar.com/avatar/2bee1ec15d20928432d69759f97fd722?s=256&d=identicon&r=PG",
      "display_name": "Lolly",
      "link": "https://stackoverflow.com/users/646276/lolly"
    },
    "is_answered": true,
    "view_count": 116,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1723311532,
    "creation_date": 1710799548,
    "last_edit_date": 1723311532,
    "question_id": 78183250,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78183250/java-iterate-list-of-objects-and-add-to-map-of-map",
    "title": "Java iterate list of objects and add to map of map",
    "body": "<p>I have an employee table like below,</p>\n<pre><code>id | name | department | sub_department |\n-----------------------------------------\n1  | emp1 | Finance    | finance_asia   | \n2  | emp2 | Finance    | finance_emea   |\n3  | emp3 | Retail     | retail_us      |\n4  | emp4 | Investment | inv_africa     |\n5  | emp5 | Investment | inv_aus        |\n</code></pre>\n<p>I have a Spring Boot project which gets data from above table using JPA repository,</p>\n<pre><code>List&lt;Employee&gt; empList = empRepo.findAll();\n</code></pre>\n<p>Employee class has id, name, department and sub_department of type String.</p>\n<p>Now I need to create a <code>Map&lt;department, Map&lt;sub_department, List&lt;Employee&gt;&gt;&gt;</code>. I am able to achieve using below code,</p>\n<pre><code>Map&lt;String, Map&lt;String, List&lt;Employee&gt;&gt;&gt; departmentMap = new HashMap&lt;&gt;();\nvar empList = empRepo.findAll();\nempList.stream().foreach(emp -&gt; {\n   if (departmentMap.get(emp.getDepartment()) == null) {\n       departmentMap.put(emp.getDepartment(), new HashMap&lt;String, List&lt;Employee&gt;&gt;);\n   }\n   if (departmentMap.get(emp.getDepartment()).get(emp.getSubDepartment()) == null) {\n       departmentMap.get(emp.getDepartment()).put(emp.getSubDepartment(), new ArrayList&lt;Employee&gt;);   \n   }\n   departmentMap.get(emp.getDepartment()).get(emp.getSubDepartment()).add(emp);\n});\n</code></pre>\n<p>The above code does the job. But it is more traditional or legacy approach. Is there any approach more efficient than this and can be achieved with less lines of code?</p>\n<p>Edit: Missed to add one thing. <code>List&lt;Employee&gt;</code> should be based on name.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}