{
  "question": {
    "tags": [
      "java",
      "oshi"
    ],
    "owner": {
      "account_id": 17341040,
      "reputation": 43,
      "user_id": 13792906,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/388ccfc70cee7a6f0e7e45d748a835a6?s=256&d=identicon&r=PG",
      "display_name": "Eduardo",
      "link": "https://stackoverflow.com/users/13792906/eduardo"
    },
    "is_answered": true,
    "view_count": 338,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1729871700,
    "creation_date": 1729616840,
    "last_edit_date": 1729871112,
    "question_id": 79115144,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79115144/how-to-accurately-calculate-cpu-usage-of-a-process-with-oshi-compared-to-task-ma",
    "title": "How to accurately calculate CPU usage of a process with OSHI compared to Task Manager?",
    "body": "<p>I'm developing a resource monitoring system for a game using LibGDX and the OSHI library to get CPU and memory usage information. However, I'm facing issues when comparing the CPU usage values returned by the OSHI API with those shown in the Windows Task Manager.</p>\n<p>Currently, I'm using the getProcessCpuLoadCumulative() method to retrieve the cumulative CPU usage of a process, but the values returned differ significantly from those displayed in the Task Manager. I've tried several approaches, but I still can't get the values to match.</p>\n<p>Here's the code I'm using to calculate CPU usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getCPU() {\n    lastCPUCheckTime += Gdx.graphics.getDeltaTime();\n    if (lastCPUCheckTime &gt;= UPDATE_INTERVAL) {\n        lastCPUCheckTime = 0;\n        \n        // Get current process info\n        osProcess = operatingSystem.getProcess(operatingSystem.getProcessId());\n        \n        // Get cumulative CPU usage\n        double cpuUsage = osProcess.getProcessCpuLoadCumulative(osProcess) * 100;\n        \n        cachedCPU = String.format(&quot;%.2f%%&quot;, cpuUsage);\n    }\n    return cachedCPU;\n}\n</code></pre>\n<p>The problem is that the CPU value returned by getProcessCpuLoadCumulative() is out of sync with what I see in the Task Manager. For example, while the Task Manager shows around 30% CPU usage for my process, the value obtained via OSHI can be significantly lower or higher.</p>\n<p>How can I correctly calculate the CPU usage of a specific process with OSHI so that the value matches what is displayed in the Windows Task Manager?  And more specifically:</p>\n<ul>\n<li><p>Is there any way to account for the &quot;logical processors&quot; and the cores on which the process is running to obtain a more accurate reading?</p>\n</li>\n<li><p>Does OSHI provide a way to identify the cores that the process is using and calculate CPU usage based on those specific cores?</p>\n</li>\n</ul>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}