{
  "question": {
    "tags": [
      "java",
      "kotlin",
      "gson"
    ],
    "owner": {
      "account_id": 38388126,
      "reputation": 61,
      "user_id": 28748656,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/ed55bdfa51ce11b47dcbdb3818be5504?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "likespro",
      "link": "https://stackoverflow.com/users/28748656/likespro"
    },
    "is_answered": true,
    "view_count": 114,
    "accepted_answer_id": 79625089,
    "answer_count": 2,
    "score": 3,
    "last_activity_date": 1747395490,
    "creation_date": 1747383605,
    "question_id": 79624766,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79624766/deserialize-numbers-strictly-in-gson",
    "title": "Deserialize numbers strictly in Gson",
    "body": "<p>I want to make Gson deserializing numbers strictly, for example when Gson receives <code>&quot;123&quot;</code> and needs to deserialize it to <code>Int</code>, it must throw an exception and not automatically convert the string to number.</p>\n<p><strong>The goal</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val str1 = &quot;&quot;&quot;{&quot;key&quot;:&quot;123&quot;}&quot;&quot;&quot;\nGson().fromJson(str1, intMapType) // throws an Exception\n\nval str2 = &quot;&quot;&quot;{&quot;key&quot;:123}&quot;&quot;&quot;\nGson().fromJson(str2, intMapType) // returns valid Map&lt;String, Int&gt;\n</code></pre>\n<hr />\n<p><strong>I have already tried</strong> to register cursom type adapters for <code>Int</code> and <code>String</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    private class StrictIntDeserializer : JsonDeserializer&lt;Int&gt; {\n        override fun deserialize(json: JsonElement, typeOfT: Type, context: JsonDeserializationContext): Int {\n            if (!json.isJsonPrimitive || !json.asJsonPrimitive.isNumber) {\n                throw JsonParseException(&quot;Expected Int but got: $json&quot;)\n            }\n            return json.asInt\n        }\n    }\n\n    private class StrictStringDeserializer : JsonDeserializer&lt;String&gt; {\n        override fun deserialize(json: JsonElement, typeOfT: Type, context: JsonDeserializationContext): String {\n            if (!json.isJsonPrimitive || !json.asJsonPrimitive.isString) {\n                throw JsonParseException(&quot;Expected String but got: $json&quot;)\n            }\n            return json.asString\n        }\n    }\n\n\n    private val gson = GsonBuilder()\n        .registerTypeHierarchyAdapter(Int::class.java, StrictIntDeserializer())\n        .registerTypeHierarchyAdapter(String::class.java, StrictStringDeserializer())\n        .create()\n</code></pre>\n<p>But this does not work.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}