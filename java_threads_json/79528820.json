{
  "question": {
    "tags": [
      "java",
      "spring",
      "hibernate",
      "spring-data-jpa"
    ],
    "owner": {
      "account_id": 23423057,
      "reputation": 51,
      "user_id": 17482962,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/4f5c5670847da918da26a97245245fe0?s=256&d=identicon&r=PG",
      "display_name": "samh",
      "link": "https://stackoverflow.com/users/17482962/samh"
    },
    "is_answered": true,
    "view_count": 46,
    "accepted_answer_id": 79528878,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1742729966,
    "creation_date": 1742726713,
    "question_id": 79528820,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79528820/confused-about-session-persist-and-session-save",
    "title": "confused about Session.persist() and Session.save()",
    "body": "<p>i want to know the differenc ebetween the Session.persist(0 and Session.save(),from the search on the net the community says that the persist() dont actually make any immediate request to the database untill flushing or committing but in the other hand save() when the primary key is auto-generated by the database its executing it immediatly\nhaah but the plot twist is that from the test above it seems that they behave the same:\nthe code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Repository\n@EnableTransactionManagement\nclass myclass{\n                @Autowired\n                SessionFactory sf;\n                @Transactional\n                public List&lt;Object&gt; list(ApplicationContext ctx){\n                        Session session=sf.getCurrentSession();\n                        Query query=session.createQuery(&quot;select i from ilyass i&quot;);\n                        List&lt;Object&gt; list=query.getResultList();\n                        return list;\n                }\n                public ilyass save(ilyass ily)throws InterruptedException {\n                        Session session=sf.getCurrentSession();\n                        session.persist(ily);\n                        for(int i=0;i&lt;10;i++){\n                                System.out.println(&quot;iliawait!&quot;);\n                                Thread.sleep(2000);\n                        }\n                        System.out.println(&quot;ID:+ &quot;+ily.id);\n                        return ily;\n                } \n                public Saiidd saveSaid(Saiidd ily)throws InterruptedException{\n                        Session session=sf.getCurrentSession();\n                        session.persist(ily);\n                        for(int i=0;i&lt;10;i++){\n                                System.out.println(&quot;sawait!&quot;);\n                                Thread.sleep(2000);\n                        }\n                        System.out.println(&quot;ID:+ &quot;+ily.it);\n                        return ily;\n                } \n}\n\n</code></pre>\n<p>the demo:</p>\n<pre class=\"lang-java prettyprint-override\"><code>AnnotationConfigApplicationContext ctx=new AnnotationConfigApplicationContext(demo.class);\n        ilyass ilias=new ilyass();\n        ilias.name=&quot;af&quot;;\n        Saiidd said=new Saiidd();\n        said.username=&quot;az&quot;;\n        said.it=229;\n        myclass mydao=ctx.getBean(myclass.class);\n       mydao.save(ilias);\n       System.out.println(&quot;id: &quot;+ilias.id);\n\n         mydao.saveSaid(said);\n        System.out.println(&quot;id: &quot;+said.it);\n\n</code></pre>\n<p>=&gt; the results:</p>\n<p>=&gt;</p>\n<pre><code>Hibernate: \n    /* insert entities.ilyass\n        */ insert \n        into\n            ilyass\n            (id, name) \n        values\n            (default, ?)\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\nID:+ 30\nid: 30\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nID:+ 229\nHibernate: \n    /* insert entities.Saiidd\n        */ insert \n        into\n            Saiidd\n            (username, it) \n        values\n            (?, ?)\nid: 229\n</code></pre>\n<p>=&gt; testing the save() method</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Repository\n@EnableTransactionManagement\nclass myclass{\n                @Autowired\n                SessionFactory sf;\n                @Transactional\n                public List&lt;Object&gt; list(ApplicationContext ctx){\n                        Session session=sf.getCurrentSession();\n                        Query query=session.createQuery(&quot;select i from ilyass i&quot;);\n                        List&lt;Object&gt; list=query.getResultList();\n                        return list;\n                }\n                public ilyass save(ilyass ily)throws InterruptedException {\n                        Session session=sf.getCurrentSession();\n                        session.persist(ily);\n                        for(int i=0;i&lt;10;i++){\n                                System.out.println(&quot;iliawait!&quot;);\n                                Thread.sleep(2000);\n                        }\n                        System.out.println(&quot;ID:+ &quot;+ily.id);\n                        return ily;\n                } \n                public Saiidd saveSaid(Saiidd ily)throws InterruptedException{\n                        Session session=sf.getCurrentSession();\n                        session.save(ily);\n                        for(int i=0;i&lt;10;i++){\n                                System.out.println(&quot;sawait!&quot;);\n                                Thread.sleep(2000);\n                        }\n                        System.out.println(&quot;ID:+ &quot;+ily.it);\n                        return ily;\n                } \n}\n\n</code></pre>\n<p>the same demo code used</p>\n<p>the result:</p>\n<pre><code>Mar 23, 2025 6:41:38 AM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nHibernate: \n    /* insert entities.ilyass\n        */ insert \n        into\n            ilyass\n            (id, name) \n        values\n            (default, ?)\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\niliawait!\nID:+ 32\nid: 32\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nsawait!\nID:+ 228\nHibernate: \n    /* insert entities.Saiidd\n        */ insert \n        into\n            Saiidd\n            (username, it) \n        values\n            (?, ?)\nid: 228\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}