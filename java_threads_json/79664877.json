{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "openapi",
      "springdoc"
    ],
    "owner": {
      "account_id": 390323,
      "reputation": 111,
      "user_id": 750308,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b03ebe98138bd5c42fa68627837d32f9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Nicklas",
      "link": "https://stackoverflow.com/users/750308/nicklas"
    },
    "is_answered": false,
    "view_count": 89,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1753764927,
    "creation_date": 1749818935,
    "last_edit_date": 1753764927,
    "question_id": 79664877,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79664877/why-does-method-level-produces-not-override-class-level-in-spring-when-generatin",
    "title": "Why does method-level produces not override class-level in Spring when generating OpenAPI spec with springdoc?",
    "body": "<p>Using Spring Boot (3.5.0) with springdoc (2.8.9) I noticed something unexpected when specifying produces at both the class and method levels in a @RestController.</p>\n<p>According to the Javadoc for <code>org.springframework.web.bind.annotation.RequestMapping#produces</code>:</p>\n<blockquote>\n<p>Supported at the type level as well as at the method level! If specified at both levels, the method level produces condition overrides the type level condition.</p>\n</blockquote>\n<p>However, in my example controller below:</p>\n<pre><code>@RestController\n@RequestMapping(produces = MediaType.APPLICATION_JSON_VALUE)\npublic class MediaTypeDemoController {\n\n    @GetMapping(&quot;/json&quot;)\n    public ResponseEntity&lt;Map&lt;String, String&gt;&gt; getJsonResponse() {\n        Map&lt;String, String&gt; response = Map.of(&quot;message&quot;, &quot;This is JSON&quot;);\n        return ResponseEntity.ok(response);\n    }\n\n    @GetMapping(value = &quot;/xml&quot;, produces = MediaType.APPLICATION_XML_VALUE)\n    public ResponseEntity&lt;String&gt; getXmlResponse() {\n        String xml = &quot;&lt;message&gt;This is XML&lt;/message&gt;&quot;;\n        return ResponseEntity.ok(xml);\n    }\n}\n</code></pre>\n<p>The OpenAPI spec generated for <code>GET /xml</code> includes both <code>application/json</code> and <code>application/xml</code> as possible response media types. I expected it to only list <code>application/xml</code>, since it's explicitly declared at the method level.</p>\n<p><strong>Update:</strong>\nFixed by <a href=\"https://github.com/springdoc/springdoc-openapi/pull/3026\" rel=\"nofollow noreferrer\">https://github.com/springdoc/springdoc-openapi/pull/3026</a></p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}