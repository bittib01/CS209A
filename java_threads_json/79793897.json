{
  "question": {
    "tags": [
      "java",
      "datetime",
      "quarkus",
      "graalvm",
      "graalvm-native-image"
    ],
    "owner": {
      "account_id": 294022,
      "reputation": 118190,
      "user_id": 597657,
      "user_type": "registered",
      "accept_rate": 99,
      "profile_image": "https://i.sstatic.net/0h5ec.jpg?s=256",
      "display_name": "Eng.Fouad",
      "link": "https://stackoverflow.com/users/597657/eng-fouad"
    },
    "is_answered": true,
    "view_count": 144,
    "accepted_answer_id": 79794693,
    "answer_count": 1,
    "score": 3,
    "last_activity_date": 1760945746,
    "creation_date": 1760809904,
    "last_edit_date": 1760848677,
    "question_id": 79793897,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79793897/graalvm-native-image-localized-data-time-data",
    "title": "GraalVM native-image localized data/time data",
    "body": "<p>Given this sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var ARABIC_GREGORIAN_DATE_FORMATTER = DateTimeFormatter.ofPattern(&quot;EEEE dd\\\\MM\\\\yyyy G&quot;).localizedBy(Locale.forLanguageTag(&quot;ar&quot;));\nfinal var ENGLISH_GREGORIAN_DATE_FORMATTER = DateTimeFormatter.ofPattern(&quot;EEEE dd/MM/yyyy G&quot;).localizedBy(Locale.ENGLISH);\n\nvar now = Instant.now();\nString arabicGregorianDate = ARABIC_GREGORIAN_DATE_FORMATTER.format(now.atZone(ZoneId.systemDefault()));\nString englishGregorianDate = ENGLISH_GREGORIAN_DATE_FORMATTER.format(now.atZone(ZoneId.systemDefault()));\n\nLog.info(&quot;arabicGregorianDate = &quot; + arabicGregorianDate);\nLog.info(&quot;englishGregorianDate = &quot; + englishGregorianDate);\n</code></pre>\n<p>When running in JVM mode, I get this output:</p>\n<pre><code>arabicGregorianDate = السبت 18\\10\\2025 م\nenglishGregorianDate = Saturday 18/10/2025 AD\n</code></pre>\n<p>However, when I compile it to GraalVM native-image and run it, I get this output:</p>\n<pre><code>arabicGregorianDate = Sat 18\\10\\2025 CE\nenglishGregorianDate = Saturday 18/10/2025 AD\n</code></pre>\n<p>Notice that Arabic word for Saturday <code>السبت</code> is fallbacked to <code>Sat</code> and <code>م</code> to <code>CE</code>?</p>\n<p>I am assuming some data (CLDR?) is missing from the native-image and needs some configurations to include those data. How to do that? Tried the GraalVM tracing agent but that did not fix the issue.</p>\n<p>I am using <code>-H:IncludeLocales=ar,en</code> as well.</p>\n<p>Reproducer: <a href=\"https://github.com/Eng-Fouad/graal-native-date-locale\" rel=\"nofollow noreferrer\">https://github.com/Eng-Fouad/graal-native-date-locale</a></p>\n<hr />\n<h3>Edit:</h3>\n<p>I found the required localization resources inside the module <code>jdk.localedata</code>, specifically at <code>sun.text.resources.cldr.ext.FormatData_ar</code>.\nHowever, I tried to add it to <code>reachability-metadata.json</code> but that didn't work.</p>\n<hr />\n<h3>Edit 2:</h3>\n<p>I added the option <code>-H:+TraceLocalizationFeature</code> and I noticed the resource bundle <code>sun.text.resources.cldr.FormatData</code> with locale <code>ar</code> is included in native image (but does not work):</p>\n<pre><code>Adding bundle sun.util.resources.cldr.CalendarData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CurrencyNames, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.LocaleNames, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.TimeZoneNames, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CalendarData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CurrencyNames, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.LocaleNames, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.TimeZoneNames, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CalendarData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CurrencyNames, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.LocaleNames, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.TimeZoneNames, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CalendarData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.CurrencyNames, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.LocaleNames, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.cldr.TimeZoneNames, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.cldr.FormatData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CalendarData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CurrencyNames, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.LocaleNames, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.TimeZoneNames, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorInfo, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorResources, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.CollationData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CalendarData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CurrencyNames, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.LocaleNames, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.TimeZoneNames, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorInfo, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorResources, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.CollationData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CalendarData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CurrencyNames, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.LocaleNames, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.TimeZoneNames, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorInfo, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorResources, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.CollationData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CalendarData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.CurrencyNames, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.LocaleNames, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.resources.TimeZoneNames, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorInfo, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.BreakIteratorResources, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.CollationData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.text.resources.FormatData, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.logging.resources.logging, locale  with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.logging.resources.logging, locale ar with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.logging.resources.logging, locale en_US with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\nAdding bundle sun.util.logging.resources.logging, locale en with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)\n</code></pre>\n<p>Not sure why <code>FormatData</code> is listed twice with each locale. Also not sure what <code>with condition ConfigurationCondition(type=class java.lang.Object, runtimeChecked=true)</code> is.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}