{
  "question": {
    "tags": [
      "java",
      "swagger-ui"
    ],
    "owner": {
      "account_id": 10187542,
      "reputation": 2735,
      "user_id": 20692967,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name": "Sergey Zolotarev",
      "link": "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered": true,
    "view_count": 3922,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1757706305,
    "creation_date": 1703604418,
    "last_edit_date": 1703970359,
    "question_id": 77717946,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77717946/enabling-an-authorize-button-in-swagger-ui-declaratively",
    "title": "Enabling an Authorize button in Swagger UI declaratively",
    "body": "<p>How do I enable the &quot;Authorize&quot; button in Swagger UI? I got it all set up, but if the endpoints require authentication, it's not going to work straight from the UI. I need to be able to pass JWT tokens as <code>Authorization</code> header values</p>\n<p>Do I need to pass some yml property?</p>\n<p>Should I write something here?</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@SpringBootApplication\n@OpenAPIDefinition(info = info(version = &quot;1.0&quot;, title = &quot;Hello World API&quot;), security = @SecurityRequirement(name = &quot;/* here */&quot;))\npublic class HelloworldMreApplication {\n\npublic static void main(String[] args) {\nSpringApplication.run(HelloworldMreApplication.class, args);\n}\n\n}\n\n</code></pre>\n<p>I also tried this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@RestController\n@RequestMapping(&quot;/auth&quot;)\n@Tag(name = &quot;Message Controller&quot;)\n@SecurityScheme(type = SecuritySchemeType.HTTP, name = &quot;basicAuth&quot;)\npublic class MessageController {\n\n@GetMapping(&quot;/hello-world&quot;)\n// ...\n\n</code></pre>\n<p>I got the button, but it's not useful. Once I click on it, I get a popup that only says &quot;Available authorizations&quot;</p>\n<p><a href=\"https://i.sstatic.net/ieVE6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/ieVE6.png\" alt=\"enter image description here\" /></a></p>\n<p>A more verbose variation produced the same result</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SecurityScheme(type = SecuritySchemeType.HTTP, name = &quot;basicAuth&quot;,\ndescription = &quot;authorization with JWT token&quot;, scheme = &quot;token&quot;,\nbearerFormat = &quot;bearer&quot;)\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/45035621/23106712\">This answer</a> doesn't seem to be helpful in my case. I'm sure there's a declarative solution to this (which I would prefer). One guy in the comments asked whether it could be achieved with annotations too, and the person who posted the answer shared <a href=\"https://cxf.apache.org/docs/swagger2feature.html\" rel=\"nofollow noreferrer\">this link</a>. I don't see any annotation-based solutions there, though</p>\n<h1>UPD</h1>\n<p>What I found is that it doesn't have to do with JSONs served to Swagger UI at all. What matters is this annotation at a service controller class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@Tag(name = &quot;Message Controller&quot;)\n@SecurityScheme(type = SecuritySchemeType.HTTP, name = &quot;basicAuth&quot;, scheme = &quot;bearer&quot;)\npublic class MessageController {\n</code></pre>\n<p>That service's Swagger UI now has this button:</p>\n<p><a href=\"https://i.sstatic.net/aAs25.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/aAs25.png\" alt=\"enter image description here\" /></a></p>\n<p>However, my Gateway's UI still gets a disfunctional button (see the first screenshot above)</p>\n<p>You may compare the service's and the Gateway's Swagger UI JSONs: they are for all intents and purposes identical. I checked whether the differences they <em>do</em> have may have influenced the outcome (like <code>http</code> vs. <code>HTTP</code>). They don't</p>\n<p>Still confused as to what to do. I tried putting <code>@SecurityScheme(..)</code> on the Gateway's main class (the one annotated with <code>@SpringBootApplication</code>) or on a random controller class. It didn't help</p>\n<pre class=\"lang-json prettyprint-override\"><code>// service\n\n{\n  &quot;openapi&quot;: &quot;3.0.1&quot;,\n  &quot;info&quot;: {\n    &quot;title&quot;: &quot;Hello World API&quot;,\n    &quot;version&quot;: &quot;1.0&quot;\n  },\n  &quot;servers&quot;: [\n    {\n      &quot;url&quot;: &quot;http://localhost:8090&quot;,\n      &quot;description&quot;: &quot;Generated server url&quot;\n    }\n  ],\n  &quot;paths&quot;: {\n    &quot;/joy&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;Message Controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;getMessageOfJoy&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/SuccessMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    &quot;/auth/hello-world&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;Message Controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;getHelloWorld&quot;,\n        &quot;parameters&quot;: [\n          {\n            &quot;name&quot;: &quot;principal&quot;,\n            &quot;in&quot;: &quot;query&quot;,\n            &quot;required&quot;: false,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;string&quot;\n            }\n          }\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/SuccessMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    &quot;/error&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      },\n      &quot;put&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error_3&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      },\n      &quot;post&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error_2&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      },\n      &quot;delete&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error_5&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      },\n      &quot;options&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error_6&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      },\n      &quot;head&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error_1&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      },\n      &quot;patch&quot;: {\n        &quot;tags&quot;: [\n          &quot;my-error-controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;error_4&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/FailureMessage&quot;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  &quot;components&quot;: {\n    &quot;schemas&quot;: {\n      &quot;SuccessMessage&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;message&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n          }\n        }\n      },\n      &quot;FailureMessage&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;message&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n          },\n          &quot;method&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;enum&quot;: [\n              &quot;GET&quot;,\n              &quot;HEAD&quot;,\n              &quot;POST&quot;,\n              &quot;PUT&quot;,\n              &quot;PATCH&quot;,\n              &quot;DELETE&quot;,\n              &quot;OPTIONS&quot;,\n              &quot;TRACE&quot;\n            ]\n          },\n          &quot;request_path&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n          }\n        }\n      }\n    },\n    &quot;securitySchemes&quot;: {\n      &quot;basicAuth&quot;: {\n        &quot;type&quot;: &quot;http&quot;,\n        &quot;scheme&quot;: &quot;bearer&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<pre class=\"lang-json prettyprint-override\"><code>// gateway\n\n{\n  &quot;openapi&quot;: &quot;3.0.1&quot;,\n  &quot;info&quot;: {\n    &quot;title&quot;: &quot;Hello World API&quot;,\n    &quot;version&quot;: &quot;1.0&quot;\n  },\n  &quot;servers&quot;: [\n    {\n      &quot;url&quot;: &quot;https://localhost:8080&quot;,\n      &quot;description&quot;: &quot;Api-Gateway-V2&quot;\n    }\n  ],\n  &quot;paths&quot;: {\n    &quot;/api/v1/joy&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;Message Controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;getMessageOfJoy&quot;,\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/SuccessMessage&quot;,\n                  &quot;exampleSetFlag&quot;: false\n                },\n                &quot;exampleSetFlag&quot;: false\n              }\n            }\n          }\n        }\n      }\n    },\n    &quot;/api/v1/hello-world&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;Message Controller&quot;\n        ],\n        &quot;operationId&quot;: &quot;getHelloWorld&quot;,\n        &quot;parameters&quot;: [\n          {\n            &quot;name&quot;: &quot;principal&quot;,\n            &quot;in&quot;: &quot;query&quot;,\n            &quot;required&quot;: false,\n            &quot;style&quot;: &quot;FORM&quot;,\n            &quot;explode&quot;: true,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;string&quot;,\n              &quot;exampleSetFlag&quot;: false,\n              &quot;types&quot;: [\n                &quot;string&quot;\n              ]\n            }\n          }\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;content&quot;: {\n              &quot;*/*&quot;: {\n                &quot;schema&quot;: {\n                  &quot;$ref&quot;: &quot;#/components/schemas/SuccessMessage&quot;,\n                  &quot;exampleSetFlag&quot;: false\n                },\n                &quot;exampleSetFlag&quot;: false\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  &quot;components&quot;: {\n    &quot;schemas&quot;: {\n      &quot;SuccessMessage&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;message&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;exampleSetFlag&quot;: false,\n            &quot;types&quot;: [\n              &quot;string&quot;\n            ]\n          }\n        },\n        &quot;exampleSetFlag&quot;: false,\n        &quot;types&quot;: [\n          &quot;object&quot;\n        ]\n      },\n      &quot;FailureMessage&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;message&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;exampleSetFlag&quot;: false,\n            &quot;types&quot;: [\n              &quot;string&quot;\n            ]\n          },\n          &quot;method&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;exampleSetFlag&quot;: false,\n            &quot;types&quot;: [\n              &quot;string&quot;\n            ],\n            &quot;enum&quot;: [\n              &quot;GET&quot;,\n              &quot;HEAD&quot;,\n              &quot;POST&quot;,\n              &quot;PUT&quot;,\n              &quot;PATCH&quot;,\n              &quot;DELETE&quot;,\n              &quot;OPTIONS&quot;,\n              &quot;TRACE&quot;\n            ]\n          },\n          &quot;request_path&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;exampleSetFlag&quot;: false,\n            &quot;types&quot;: [\n              &quot;string&quot;\n            ]\n          }\n        },\n        &quot;exampleSetFlag&quot;: false,\n        &quot;types&quot;: [\n          &quot;object&quot;\n        ]\n      }\n    },\n    &quot;securitySchemes&quot;: {\n      &quot;basicAuth&quot;: {\n        &quot;type&quot;: &quot;HTTP&quot;,\n        &quot;scheme&quot;: &quot;bearer&quot;\n      }\n    },\n    &quot;extensions&quot;: {\n      \n    }\n  }\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}