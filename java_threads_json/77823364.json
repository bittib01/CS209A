{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "kotlin"
    ],
    "owner": {
      "account_id": 24607110,
      "reputation": 133,
      "user_id": 18509169,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/7fe68eba4ba15ac4b944d71f3160149e?s=256&d=identicon&r=PG",
      "display_name": "Tony",
      "link": "https://stackoverflow.com/users/18509169/tony"
    },
    "is_answered": true,
    "view_count": 2561,
    "accepted_answer_id": 78008157,
    "answer_count": 1,
    "score": 3,
    "last_activity_date": 1708094997,
    "creation_date": 1705376098,
    "question_id": 77823364,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77823364/springs-new-restclient-appears-to-retry-but-only-on-status-429",
    "title": "Springs new RestClient appears to retry but only on status 429",
    "body": "<pre><code>        val restClient = RestClient.builder()\n            .defaultHeader(HttpHeaders.CONTENT_TYPE, APPLICATION_JSON.toString())\n            .baseUrl(simproWebhookContext.inboundWebhookUrl!!)\n            .build()\n\n        restClient.post()\n            .contentType(APPLICATION_JSON)\n            .body(deriveSimproContactJsonBody(custContact, siteContact, simproWebhookContext))\n            .retrieve()\n            .toBodilessEntity()\n</code></pre>\n<p>in my unit tests, this works exactly as expected except when I set the mock status to 429</p>\n<pre><code>    wm1.stubFor(post(urlEqualTo(&quot;/test-inboundWebhookUrl&quot;))\n        .willReturn(aResponse().withStatus(400)))\n</code></pre>\n<p>val requests = findAll(postRequestedFor(urlEqualTo(&quot;/test-inboundWebhookUrl&quot;)))\nassertEquals(requests.size, 1)</p>\n<p>but if I set it to 429</p>\n<p>wm1.stubFor(post(urlEqualTo(&quot;/test-inboundWebhookUrl&quot;))\n.willReturn(aResponse().withStatus(429)))</p>\n<p>the requests.size is always 2</p>\n<p>There is no logic in my code that traps in any way for 429, so I'm assuming this is a feature in the RestClient code.</p>\n<p>Where / how can I configure the retry logic?</p>\n<p>Here's my spring boot version: id(&quot;org.springframework.boot&quot;) version &quot;3.2.1&quot;</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}