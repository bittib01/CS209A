{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "nginx",
      "testing",
      "network-programming"
    ],
    "owner": {
      "account_id": 22793781,
      "reputation": 53,
      "user_id": 16947644,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b2dad0d329aba5fec28fe0c46ec192ce?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Dick Donington",
      "link": "https://stackoverflow.com/users/16947644/dick-donington"
    },
    "is_answered": true,
    "view_count": 91,
    "accepted_answer_id": 78429853,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1714843733,
    "creation_date": 1712855956,
    "last_edit_date": 1712860480,
    "question_id": 78312052,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78312052/why-nginx-cannot-send-the-request-to-the-backend",
    "title": "Why Nginx cannot send the request to the backend?",
    "body": "<p>Situation: I can acccess the <a href=\"http://10.32.19.107:8080/success\" rel=\"nofollow noreferrer\">http://10.32.19.107:8080/success</a> page using Spring Boot, and I wrote a default.conf for Nginx like this:</p>\n<pre><code>location /test/ {\n        proxy_pass http://10.32.19.107:8080/success;\n    }\n</code></pre>\n<p>Then I restart the Nginx container which is in docker. I entered <a href=\"http://10.32.19.107/test\" rel=\"nofollow noreferrer\">http://10.32.19.107/test</a> but got a 404.</p>\n<p>Here is my whole Nginx default.conf:</p>\n<pre><code>server {\n\n    listen       80;\n    server_name  10.32.19.107;\n\n    # 首页\n    index index.html;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n    location /test/ {\n        proxy_pass http://10.32.19.107:8080/success;\n    }\n\n    location /api/ {\n        auth_request /auth;\n        \n        proxy_pass http://10.32.19.107:8080/success;\n    }\n\n    location = /auth {\n        \n        internal;\n        \n        set $query '';\n        if ($request_uri ~* &quot;[^\\?]+\\?(.*)$&quot;) {\n            set $query $1;\n        }\n        \n        proxy_pass http://10.32.19.107:8080/verify?$query;\n        \n        proxy_pass_request_body off;\n        \n        proxy_set_header Content-Type &quot;&quot;;\n     }\n\n    error_page 404 /404.html;\n        location = /40x.html {\n\n        }\n\n    error_page   500 502 503 504  /50x.html;\n     location = /50x.html {\n     }\n\n}\n</code></pre>\n<p>Task: I want to access the same page as <a href=\"http://10.32.19.107:8080/success\" rel=\"nofollow noreferrer\">http://10.32.19.107:8080/success</a> when I entered <a href=\"http://10.32.19.107/test\" rel=\"nofollow noreferrer\">http://10.32.19.107/test</a>.</p>\n<p>Action: I deleted the Nginx container and map the conf, html, logs, ssl, nginx.conf, conf.d, default.conf to the same file/directory in Nginx and reinstall the container. Here is my command:</p>\n<pre><code>sudo docker run --name Nginx -p 80:80 \n\n-v /home/jpdeng/projects/openai-microservice/dev-ops/nginx/logs:/var/log/nginx  \\\n\n-v /home/jpdeng/projects/openai-microservice/dev-ops/nginx/html:/usr/share/nginx/html \\\n\n-v /home/jpdeng/projects/openai-microservice/dev-ops/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \\\n\n-v /home/jpdeng/projects/openai-microservice/dev-ops/nginx/conf/conf.d:/etc/nginx/conf.d \\\n\n-v /home/jpdeng/projects/openai-microservice/dev-ops/nginx/conf/conf.d/default.conf:/etc/nginx/conf.d/default.conf \\\n\n-v /home/jpdeng/projects/openai-microservice/dev-ops/nginx/ssl:/etc/nginx/ssl/  \\--privileged=true -d --restart=always nginx\n</code></pre>\n<p>Result: still 404 and I don't know why.</p>\n<pre><code>\nuser  nginx;\nworker_processes  auto;\n\nerror_log  /var/log/nginx/error.log notice;\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '\n                      '$status $body_bytes_sent &quot;$http_referer&quot; '\n                      '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}