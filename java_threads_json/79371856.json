{
  "question": {
    "tags": [
      "java",
      "spring-security",
      "microsoft-graph-api"
    ],
    "owner": {
      "account_id": 15529865,
      "reputation": 33,
      "user_id": 11203698,
      "user_type": "registered",
      "profile_image": "https://lh5.googleusercontent.com/-k0PebiShgKE/AAAAAAAAAAI/AAAAAAAAAp4/n_h-DO_I9kE/s256-rj/photo.jpg",
      "display_name": "Roman",
      "link": "https://stackoverflow.com/users/11203698/roman"
    },
    "is_answered": false,
    "view_count": 94,
    "answer_count": 0,
    "score": 2,
    "last_activity_date": 1740654867,
    "creation_date": 1737387510,
    "last_edit_date": 1740654867,
    "question_id": 79371856,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79371856/microsofts-social-login-spring-boot",
    "title": "Microsofts social login spring boot",
    "body": "<p>I am trying to setup Microsoft Login. I have been able to successfully login if I add the user to the directory, but I can't do this for every user. Does anyone have any insights as to what the setup needs to be to let any user just log in to an online store with their Microsoft accounts? I have turned on the setting to allow any account to login, but still get the error</p>\n<blockquote>\n<p>The account needs to be added as an external user in the tenant first.\nSign out and sign in again with a different Azure Active Directory\nuser account.</p>\n</blockquote>\n<p>They have so many different portals for the same things and it's such a mess trying to figure out the most basic thing. I have looked through a bunch of different documentation and tutorials, and I still can't figure it out. The problem seems to be with the configuration.</p>\n<pre class=\"lang-ini prettyprint-override\"><code>spring.security.oauth2.client.registration.microsoft.clientId=xxx\nspring.security.oauth2.client.registration.microsoft.clientSecret=xxx\nspring.security.oauth2.client.registration.microsoft.scope=.default\nspring.security.oauth2.client.registration.microsoft.redirectUri={baseUrl}/oauth2/callback/{registrationId}\nspring.security.oauth2.client.registration.microsoft.authorizationGrantType=authorization_code\nspring.security.oauth2.client.registration.microsoft.clientAuthenticationMethod=client_secret_post\nspring.security.oauth2.client.provider.microsoft.authorization-uri=https://login.microsoftonline.com/common/oauth2/v2.0/authorize\nspring.security.oauth2.client.provider.microsoft.token-uri=https://login.microsoftonline.com/common/oauth2/v2.0/token\nspring.security.oauth2.client.provider.microsoft.jwk-set-uri=https://login.microsoftonline.com/common/discovery/v2.0/keys\n</code></pre>\n<p>My understanding is I have to use the common endpoints if I want to allow a public sign up, is that correct?</p>\n<p>I have a working Google sign-in, and just want to get Microsoft to work in the same way.</p>\n<p>Using Spring Boot Security, pass the Bearer token to the front end.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}