{
  "question": {
    "tags": [
      "java",
      "hibernate",
      "quarkus",
      "quarkus-panache"
    ],
    "owner": {
      "account_id": 28542941,
      "reputation": 11,
      "user_id": 21848773,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/9ce4f7f24da34a1cbbf5832bd7ac134b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "mildgrey",
      "link": "https://stackoverflow.com/users/21848773/mildgrey"
    },
    "is_answered": true,
    "view_count": 61,
    "accepted_answer_id": 79460837,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1740344976,
    "creation_date": 1740212663,
    "question_id": 79459261,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79459261/table-laptop-seq-doesnt-exist-despite-hibernate-update-table-generation",
    "title": "Table laptop_seq doesn&#39;t exist despite Hibernate &#39;update&#39; table generation",
    "body": "<p>This is  a <code>Laptop</code> entity class which extends <code>PanacheEntity</code>\nand we have LaptopResource class</p>\n<pre><code>import io.quarkus.hibernate.orm.panache.PanacheEntity;\nimport jakarta.persistence.Entity;\n\n@Entity\npublic class Laptop extends PanacheEntity {\n    private String name;\n    private String brand;\n    private int ram;\n    private int externalStorage;\n}\n\nimport eagle.tailung.entity.Laptop;\nimport jakarta.transaction.Transactional;\nimport jakarta.ws.rs.*;\nimport jakarta.ws.rs.core.MediaType;\nimport jakarta.ws.rs.core.Response;\n\nimport java.net.URI;\nimport java.util.List;\n@Path(&quot;/laptop/&quot;)\npublic class LaptopResource {\n    @POST\n    @Transactional\n    @Consumes(MediaType.APPLICATION_JSON)\n    @Produces(MediaType.APPLICATION_JSON)\n    public Response addLaptop(Laptop laptop){\n        Laptop.persist(laptop);\n        if(laptop.isPersistent()){\n            return Response.created(URI.create(&quot;/laptop/&quot;+laptop.id)).build();\n        }\n        return Response.status(Response.Status.BAD_REQUEST).build();\n    }\n\n}\n</code></pre>\n<p>and I have the this application.properties</p>\n<pre><code>quarkus.datasource.db-kind=mysql \nquarkus.datasource.username=username\nquarkus.datasource.password=password\n\nquarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/hibernate_orm_test\nquarkus.datasource.jdbc.max-size=16\nquarkus-hibernate-orm.database.generation=update\n</code></pre>\n<p>I am facing an exception when sending a POST request to /laptop:</p>\n<p><img src=\"https://i.sstatic.net/2fVo2eqM.png\" alt=\"request in Swagger-UI\" /></p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;details&quot;: &quot;Error id bedefe4e-3ca0-4731-b2fa-d183959db81d-5, org.jboss.resteasy.spi.UnhandledException: org.hibernate.HibernateException: Could not apply work&quot;,\n&quot;stack&quot;: &quot;org.jboss.resteasy.spi.UnhandledException: org.hibernate.HibernateException: Could not apply work\n    at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:107)\n    at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:344)\n    at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:205)\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:452)\n    at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invokePropagateNotFound$6(SynchronousDispatcher.java:275)\n    at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:154)\n    at org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:321)\n    at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:157)\n    at org.jboss.resteasy.core.SynchronousDispatcher.invokePropagateNotFound(SynchronousDispatcher.java:260)\n    at io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:86)\n    at io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:151)\n    at io.quarkus.resteasy.runtime.standalone.VertxRequestHandler$1.run(VertxRequestHandler.java:97)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$15.runWith(VertxCoreRecorder.java:639)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.doRunWith(EnhancedQueueExecutor.java:2675)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2654)\n    at org.jboss.threads.EnhancedQueueExecutor.runThreadBody(EnhancedQueueExecutor.java:1627)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1594)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:11)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:11)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: org.hibernate.HibernateException: Could not apply work\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.doInNewTransaction(JtaIsolationDelegate.java:173)\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.lambda$delegateWork$3(JtaIsolationDelegate.java:90)\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.doInSuspendedTransaction(JtaIsolationDelegate.java:125)\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.delegateWork(JtaIsolationDelegate.java:88)\n    at org.hibernate.id.enhanced.TableStructure$1.getNextValue(TableStructure.java:135)\n    at org.hibernate.id.enhanced.PooledLoOptimizer.generate(PooledLoOptimizer.java:65)\n    at org.hibernate.id.enhanced.SequenceStyleGenerator.generate(SequenceStyleGenerator.java:585)\n    at org.hibernate.id.IdentifierGenerator.generate(IdentifierGenerator.java:135)\n    at org.hibernate.event.internal.AbstractSaveEventListener.generateId(AbstractSaveEventListener.java:155)\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)\n    at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)\n    at io.quarkus.hibernate.orm.runtime.session.TransactionScopedSession.persist(TransactionScopedSession.java:146)\n    at org.hibernate.engine.spi.SessionLazyDelegator.persist(SessionLazyDelegator.java:282)\n    at org.hibernate.Session_OpdLahisOZ9nWRPXMsEFQmQU03A_Synthetic_ClientProxy.persist(Unknown Source)\n    at io.quarkus.hibernate.orm.panache.common.runtime.AbstractJpaOperations.persist(AbstractJpaOperations.java:105)\n    at io.quarkus.hibernate.orm.panache.common.runtime.AbstractJpaOperations.persist(AbstractJpaOperations.java:100)\n    at io.quarkus.hibernate.orm.panache.common.runtime.AbstractJpaOperations.persist(AbstractJpaOperations.java:116)\n    at io.quarkus.hibernate.orm.panache.PanacheEntityBase.persist(PanacheEntityBase.java:768)\n    at eagle.tailung.entity.Laptop.persist(Laptop.java)\n    at eagle.tailung.Resource.LaptopResource.addLaptop(LaptopResource.java:24)\n    at eagle.tailung.Resource.LaptopResource_Subclass.addLaptop$$superforward(Unknown Source)\n    at eagle.tailung.Resource.LaptopResource_Subclass$$function$$3.apply(Unknown Source)\n    at io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:73)\n    at io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:62)\n    at io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:136)\n    at io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:107)\n    at io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.doIntercept(TransactionalInterceptorRequired.java:38)\n    at io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:61)\n    at io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.intercept(TransactionalInterceptorRequired.java:32)\n    at io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired_Bean.intercept(Unknown Source)\n    at io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:42)\n    at io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:30)\n    at io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:27)\n    at eagle.tailung.Resource.LaptopResource_Subclass.addLaptop(Unknown Source)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:154)\n    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:118)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:560)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:452)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:413)\n    at org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:321)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:415)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:378)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:356)\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:70)\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:429)\n    ... 17 more\nCaused by: org.hibernate.HibernateException: Unable to perform isolated work\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.doTheWork(JtaIsolationDelegate.java:193)\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.lambda$delegateWork$2(JtaIsolationDelegate.java:90)\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.doInNewTransaction(JtaIsolationDelegate.java:161)\n    ... 69 more\nCaused by: java.sql.SQLSyntaxErrorException: Table 'hibernate_orm_test.laptop_seq' doesn't exist\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:912)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:968)\n    at io.agroal.pool.wrapper.PreparedStatementWrapper.executeQuery(PreparedStatementWrapper.java:80)\n    at org.hibernate.id.enhanced.TableStructure.executeQuery(TableStructure.java:250)\n    at org.hibernate.id.enhanced.TableStructure$1$1.execute(TableStructure.java:149)\n    at org.hibernate.id.enhanced.TableStructure$1$1.execute(TableStructure.java:136)\n    at org.hibernate.jdbc.WorkExecutor.executeReturningWork(WorkExecutor.java:58)\n    at org.hibernate.jdbc.AbstractReturningWork.accept(AbstractReturningWork.java:34)\n    at org.hibernate.resource.transaction.backend.jta.internal.JtaIsolationDelegate.doTheWork(JtaIsolationDelegate.java:187)\n    ... 71 more&quot;\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}