{
  "question": {
    "tags": [
      "java",
      "postgresql",
      "spring-boot",
      "rest",
      "maven"
    ],
    "owner": {
      "account_id": 26403306,
      "reputation": 21,
      "user_id": 20053464,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ALm5wu18IyxBxFd8Q-mR7om9WA-mcOpw0ayMjTcYOjtw=k-s256",
      "display_name": "dqdq dqsss",
      "link": "https://stackoverflow.com/users/20053464/dqdq-dqsss"
    },
    "is_answered": false,
    "view_count": 175,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1724909665,
    "creation_date": 1721152495,
    "last_edit_date": 1721153687,
    "question_id": 78756075,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78756075/spring-boot-error-404-when-accessing-localhost-endpoint",
    "title": "Spring Boot: Error 404 when accessing localhost endpoint",
    "body": "<p>Just to give a little background on the project; I'm making a Spring Boot project using Maven. I have a two microservices, one called &quot;products&quot; and one called &quot;config-server&quot; to configure the different microservices. I already have a database called &quot;product&quot; on my local postgres server with a table called &quot;product&quot;, which has a bunch of items.<br />\nUnfortunately, I get the following error when I am trying to make a GET request to the <code>http://localhost:8222/api/v1/products</code> URL despite setting up the endpoints:</p>\n<pre><code>{\n  &quot;timestamp&quot;: 1436442596410,\n  &quot;status&quot;: 404,\n  &quot;error&quot;: &quot;Not Found&quot;,\n  &quot;message&quot;: &quot;No message available&quot;,\n  &quot;path&quot;: &quot;/api/v1/products&quot;\n}\n</code></pre>\n<p>Here are some of the relevant files:</p>\n<p>ProductController.java:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/products&quot;)\n@RequiredArgsConstructor\npublic class ProductController {\n\n    private final ProductService service;\n\n    @PostMapping\n    public ResponseEntity&lt;Integer&gt; createProduct(\n            @RequestBody @Valid ProductRequest request\n    ) {\n        return ResponseEntity.ok(service.createProduct(request));\n    }\n\n    @PostMapping(&quot;/purchase&quot;)\n    public ResponseEntity&lt;List&lt;ProductPurchaseResponse&gt;&gt; purchaseProducts(\n            @RequestBody List&lt;ProductPurchaseRequest&gt; request\n    ) {\n        return ResponseEntity.ok(service.purchaseProducts(request));\n    }\n\n    @GetMapping(&quot;/{product-id}&quot;)\n    public ResponseEntity&lt;ProductResponse&gt; findById(\n            @PathVariable(&quot;product-id&quot;) Integer productId\n    ) {\n        return ResponseEntity.ok(service.findById(productId));\n    }\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;ProductResponse&gt;&gt; findAll() {\n        return ResponseEntity.ok(service.findAll());\n    }\n}\n</code></pre>\n<p>ProductService.java:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class ProductService {\n\n    private final ProductRepository repository;\n    private final ProductMapper mapper;\n\n    public Integer createProduct(\n            ProductRequest request\n    ) {\n        var product = mapper.toProduct(request);\n        return repository.save(product).getId();\n    }\n\n    public ProductResponse findById(Integer id) {\n        return repository.findById(id)\n                .map(mapper::toProductResponse)\n                .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Product not found with ID:: &quot; + id));\n    }\n\n    public List&lt;ProductResponse&gt; findAll() {\n        return repository.findAll()\n                .stream()\n                .map(mapper::toProductResponse)\n                .collect(Collectors.toList());\n    }\n\n    @Transactional(rollbackFor = ProductPurchaseException.class)\n    public List&lt;ProductPurchaseResponse&gt; purchaseProducts(\n            List&lt;ProductPurchaseRequest&gt; request\n    ) {\n        var productIds = request\n                .stream()\n                .map(ProductPurchaseRequest::productId)\n                .toList();\n        var storedProducts = repository.findAllByIdInOrderById(productIds);\n        if (productIds.size() != storedProducts.size()) {\n            throw new ProductPurchaseException(&quot;One or more products does not exist&quot;);\n        }\n        var sortedRequest = request\n                .stream()\n                .sorted(Comparator.comparing(ProductPurchaseRequest::productId))\n                .toList();\n        var purchasedProducts = new ArrayList&lt;ProductPurchaseResponse&gt;();\n        for (int i = 0; i &lt; storedProducts.size(); i++) {\n            var product = storedProducts.get(i);\n            var productRequest = sortedRequest.get(i);\n            if (product.getAvailableQuantity() &lt; productRequest.quantity()) {\n                throw new ProductPurchaseException(&quot;Insufficient stock quantity for product with ID:: &quot; + productRequest.productId());\n            }\n            var newAvailableQuantity = product.getAvailableQuantity() - productRequest.quantity();\n            product.setAvailableQuantity(newAvailableQuantity);\n            repository.save(product);\n            purchasedProducts.add(mapper.toproductPurchaseResponse(product, productRequest.quantity()));\n        }\n        return purchasedProducts;\n    }\n\n}\n</code></pre>\n<p>Here is the ProductApplication.java, which is outside the controller file:</p>\n<pre><code>@SpringBootApplication\npublic class ProductApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ProductApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Now in my &quot;config-server&quot; microservice, I have some YAML files to handle the services.</p>\n<p>Here is the gateway-service.yml file:</p>\n<pre><code>server:\n  port: 8222\nspring:\n  cloud:\n    gateway:\n      discovery:\n        locator:\n          enabled: true\n      routes: \n        - id: product-service\n          uri: lb:http://PRODUCT-SERVICE\n          predicates:\n            - Path=/api/v1/products/**\n</code></pre>\n<p>product-service.yml:</p>\n<pre><code>server:\n  port: 8050\nspring:\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://localhost:5432/product\n    username: XXX\n    password: XXX\n  jpa:\n    hibernate:\n      ddl-auto: validate\n    database: postgresql\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\n  flyway:\n    baseline-on-migrate: true\n    enabled: true\n    baseline-description: &quot;init&quot;\n    baseline-version: 0\n    user: ${spring.datasource.username}\n    password: ${spring.datasource.password}\n</code></pre>\n<p>And this is the application.yml file to configure the Eureka server:</p>\n<pre><code>eureka:\n  instance:\n    hostname: localhost\n  client:\n    service-url:\n      defaultZone: http://localhost:8761/eureka\nname:\n  value: XXX\nspring:\n  cloud:\n    config:\n      override-system-properties: false\n\nmanagement:\n  tracing:\n    sampling:\n      probability: 1.0\n</code></pre>\n<p>What I have tried:</p>\n<p>I have confirmed that all the microservices are deployed in the Eureka server in port 8761:</p>\n<p><a href=\"https://i.sstatic.net/5ThR6gHO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/5ThR6gHO.png\" alt=\"enter image description here\" /></a></p>\n<p>I am also pretty much 100% sure that there is no error in my file hierarchy or in any of my pom.xml files.<br />\nI've also confirmed that the Spring Boot application is able to connect to my postgresSQL database as I was able to insert some data there using Flyway.</p>\n<p>I would appreciate any help as to why I'm getting a 404 error when making the GET request. Thanks!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}