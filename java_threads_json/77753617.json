{
  "question": {
    "tags": [
      "java",
      "apache-kafka",
      "trace",
      "open-telemetry",
      "open-telemetry-collector"
    ],
    "owner": {
      "account_id": 22997862,
      "reputation": 13,
      "user_id": 17122324,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/5edef266a63c43e0c4e280b20fde1b9c?s=256&d=identicon&r=PG",
      "display_name": "igor kali",
      "link": "https://stackoverflow.com/users/17122324/igor-kali"
    },
    "is_answered": false,
    "view_count": 801,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1730136015,
    "creation_date": 1704302542,
    "last_edit_date": 1704367221,
    "question_id": 77753617,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77753617/parent-span-not-connecting-in-opentelemetry-with-kafka-and-java",
    "title": "Parent Span Not Connecting in OpenTelemetry with Kafka and Java",
    "body": "<p>I'm working with two Java services connected via Kafka, and I've integrated OpenTelemetry for distributed tracing. In Service A, I create a parent span, and in the Kafka message, I include two string values: traceId and spanId.</p>\n<p>However, in Service B, I'm having trouble using these values to connect a new span to the parent span.</p>\n<p>Here's what I've tried in Service B:</p>\n<pre><code>SpanContext spanContext = SpanContext.create(parentTraceId, parentSpanId, TraceFlags.getDefault(), TraceState.getDefault());\n\nSpan kafkaMessageSpan = otelTracer.spanBuilder(&quot;kafka-message2-processing&quot;)\n        .setParent(Context.current().with(Span.wrap(spanContext)))\n        .startSpan();\n\nkafkaMessageSpan.end();\n</code></pre>\n<p>The parentTraceId and parentSpanId values look like this in the logs:</p>\n<p>parentTraceId: 5e3a44aa9817427c970800316ff717e7\nparentSpanId: 91367512fa425dca</p>\n<p>What am I missing? Any help would be appreciated. Thanks!</p>\n<hr />\n<p>I've also tried to use createFromRemoteParent. but nothing changed</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}