{
  "question": {
    "tags": [
      "java",
      "minecraft-forge"
    ],
    "owner": {
      "account_id": 31060774,
      "reputation": 11,
      "user_id": 23872804,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/82169690e537461319fd3a6b6873275b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Ego Solus",
      "link": "https://stackoverflow.com/users/23872804/ego-solus"
    },
    "is_answered": true,
    "view_count": 62,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1721750515,
    "creation_date": 1721735006,
    "question_id": 78783239,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78783239/minecraft-crashes-when-ragemode-is-enabled-by-pressing-the-u-key",
    "title": "Minecraft crashes when RageMode is enabled by pressing the U key",
    "body": "<p>I will say right away, in the logs error does not appear, I use forge version 2859 for minecraft 1.12.2, I wrote a couple of classes one of which is responsible for RageMode, the essence is that the player when turning on RageMode should fly to the nearest entity and inflict it 200 damage, and so once again within 10 seconds, if the player meets obstacles, he must destroy them hitbox. The next class KeyInputHandler, it is responsible for checking the pressing of the key U and then activates RageMode. what is the problem - when entering the game everything is normal, but when you press U the game completely freezes and the only way to turn it off - it is forced to close, looking at the logs there is no record of any errors, just an inscription exit the game with code 0.</p>\n<p>Here are the codes:\nmain file</p>\n<pre><code>package daun.aut.utils;\n\nimport daun.aut.utils.Handlers.KeyInputHandler;\nimport daun.aut.recipes.SmeltingRecipes;\nimport daun.aut.tabs.autTab;\nimport daun.aut.utils.Handlers.RegistryHandler;\nimport daun.aut.utils.proxy.CommonProxy;\nimport net.minecraft.creativetab.CreativeTabs;\nimport net.minecraftforge.common.MinecraftForge;\nimport net.minecraftforge.fml.common.Mod;\nimport net.minecraftforge.fml.common.Mod.Instance;\nimport net.minecraftforge.fml.common.SidedProxy;\nimport net.minecraftforge.fml.common.Mod.EventHandler;\nimport net.minecraftforge.fml.common.event.FMLInitializationEvent;\nimport net.minecraftforge.fml.common.event.FMLPostInitializationEvent;\nimport net.minecraftforge.fml.common.event.FMLPreInitializationEvent;\n\n\n\n    @Mod(modid = Reference.MODID, name = Reference.NAME, version = Reference.VERSION)\n    public class Main\n    {\n        public static final CreativeTabs autTab = new autTab(&quot;autismotab&quot;);\n\n        @Instance\n        public static Main instance;\n\n        @SidedProxy(modId = Reference.MODID, clientSide= Reference.CLIENT, serverSide = Reference.COMMON)\n        public static CommonProxy proxy;\n\n        @EventHandler\n        public static void preInit(FMLPreInitializationEvent event)\n        {\n            RegistryHandler.otherRegistries();\n            KeyInputHandler.registerKeyBindings();\n\n        }\n\n        @EventHandler\n        public static void Init(FMLInitializationEvent event) {\n            SmeltingRecipes.init();\n            MinecraftForge.EVENT_BUS.register(new CustomFog());\n            MinecraftForge.EVENT_BUS.register(new KeyInputHandler());\n        }\n\n        @EventHandler\n        public static void postInit(FMLPostInitializationEvent event) {\n        }\n\n    }\n</code></pre>\n<p>RageMode</p>\n<pre><code>package daun.aut.utils;\n\nimport net.minecraft.entity.EntityLivingBase;\nimport net.minecraft.entity.player.EntityPlayer;\nimport net.minecraft.util.DamageSource;\nimport net.minecraft.util.math.BlockPos;\nimport net.minecraft.util.math.Vec3d;\nimport net.minecraft.world.World;\n\npublic class RageMode {\n\n    private EntityPlayer player;\n    private World world;\n    private long startTime;\n    private final long duration = 10 * 20; // 10 seconds (20 ticks per second)\n    private final double speed = 1.5; // Speed of movement\n\n    public RageMode(EntityPlayer player) {\n        this.player = player;\n        this.world = player.world;\n        this.startTime = world.getTotalWorldTime();\n        activateRage();\n    }\n\n    private void activateRage() {\n        while (world.getTotalWorldTime() &lt; startTime + duration) {\n            EntityLivingBase target = findNearestTarget();\n            if (target != null) {\n                moveTowards(target);\n                attack(target);\n                breakObstacles();\n            }\n        }\n    }\n\n    private EntityLivingBase findNearestTarget() {\n        // Logic to find the nearest living entity\n        return player.world.getNearestAttackablePlayer(player, 50.0, 50.0);\n    }\n\n    private void moveTowards(EntityLivingBase target) {\n        // Logic to move towards the target entity linearly\n        Vec3d playerPos = player.getPositionVector();\n        Vec3d targetPos = target.getPositionVector();\n        Vec3d direction = targetPos.subtract(playerPos).normalize();\n        Vec3d newPos = playerPos.add(direction.scale(speed / 20.0)); // Move by speed per tick\n\n        player.setPositionAndUpdate(newPos.x, newPos.y, newPos.z);\n    }\n\n    private void attack(EntityLivingBase target) {\n        // Logic to attack the target entity\n        target.attackEntityFrom(DamageSource.causePlayerDamage(player), 200.0f);\n    }\n\n    private void breakObstacles() {\n        // Logic to break obstacles (blocks)\n        BlockPos playerPos = player.getPosition();\n        Vec3d lookVec = player.getLookVec();\n        BlockPos blockPos = playerPos.add(lookVec.x, lookVec.y, lookVec.z); // Convert Vec3d to BlockPos\n\n        if (!world.isAirBlock(blockPos)) {\n            world.destroyBlock(blockPos, true);\n        }\n    }\n}\n\n</code></pre>\n<p>Handler</p>\n<pre><code>package daun.aut.utils.Handlers;\n\nimport daun.aut.utils.RageMode;\nimport net.minecraft.client.Minecraft;\nimport net.minecraft.client.settings.KeyBinding;\nimport net.minecraft.entity.player.EntityPlayer;\nimport net.minecraftforge.fml.client.registry.ClientRegistry;\nimport net.minecraftforge.fml.common.eventhandler.SubscribeEvent;\nimport net.minecraftforge.fml.common.gameevent.InputEvent;\nimport org.lwjgl.input.Keyboard;\n\npublic class KeyInputHandler {\n\n    private static final KeyBinding rageKey = new KeyBinding(&quot;key.ragemode&quot;, Keyboard.KEY_U, &quot;key.categories.gameplay&quot;);\n\n    public static void registerKeyBindings() {\n        ClientRegistry.registerKeyBinding(rageKey);\n    }\n\n    @SubscribeEvent\n    public void onKeyInput(InputEvent.KeyInputEvent event) {\n        if (rageKey.isPressed()) {\n            EntityPlayer player = Minecraft.getMinecraft().player;\n            if (player != null) {\n                new RageMode(player);\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>I need everything to work properly and not crash.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}