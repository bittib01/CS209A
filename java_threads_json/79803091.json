{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "azure-keyvault"
    ],
    "owner": {
      "account_id": 4939453,
      "reputation": 1680,
      "user_id": 3976630,
      "user_type": "registered",
      "accept_rate": 54,
      "profile_image": "https://www.gravatar.com/avatar/c3357bd702bd65d7a661dc261393287a?s=256&d=identicon&r=PG",
      "display_name": "DPM",
      "link": "https://stackoverflow.com/users/3976630/dpm"
    },
    "is_answered": true,
    "view_count": 60,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1762544888,
    "creation_date": 1761671242,
    "question_id": 79803091,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79803091/azure-keyvault-configuration-from-multiple-sources-with-spring-boot",
    "title": "Azure keyvault configuration from multiple sources with Spring boot",
    "body": "<p>I am creating POC for new component and I am using Azure keyvault.</p>\n<p>I have something like that:</p>\n<pre><code>@Getter\n@Setter\n@ConfigurationProperties(&quot;ssl&quot;)\npublic class SSLProperties {\n\n    @Value(&quot;${MySecret}&quot;)\n    private String trustStorePass;\n\n    private TrustStore trustStore;\n\n    @Data\n    public static class TrustStore {\n        private String path;\n    }\n\n}\n</code></pre>\n<p>and in my config class it is referenced like:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties({ SSLProperties.class })\npublic class MyConfigs{\n</code></pre>\n<p>When I pass as environment variables these (with correct values) everything is working as expected and the respective property is injected correctly:</p>\n<pre><code>SPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_ENDPOINT=&lt;endpoint&gt;\nSPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_PROFILE_TENANT_ID=&lt;tenant&gt;\nSPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_CREDENTIAL_CLIENT_SECRET=&lt;client_secret&gt;\nSPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_CREDENTIAL_CLIENT_ID=&lt;clientId&gt;\n</code></pre>\n<p>But when I pass these variables as environment variables:</p>\n<pre><code>SPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_PROFILE_TENANT_ID=&lt;tenant&gt;\nSPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_CREDENTIAL_CLIENT_SECRET=&lt;client_secret&gt;\nSPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY_SOURCES_0_CREDENTIAL_CLIENT_ID=&lt;clientId&gt;\n</code></pre>\n<p>and endpoint is passed in the application.properties file:</p>\n<pre><code>spring.cloud.azure.keyvault.secret.property-sources[0].endpoint=&lt;my_endpoint&gt;\n</code></pre>\n<p>I get exception like this:</p>\n<pre><code>Caused by: org.springframework.util.PlaceholderResolutionException: Could not resolve placeholder 'MySecret' in value &quot;${MySecret}&quot;\n    at org.springframework.util.PlaceholderResolutionException.withValue(PlaceholderResolutionException.java:81)\n    at org.springframework.util.PlaceholderParser$ParsedValue.resolve(PlaceholderParser.java:423)\n    at org.springframework.util.PlaceholderParser.replacePlaceholders(PlaceholderParser.java:128)\n    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:118)\n    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:114)\n    at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:255)\n    at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:226)\n    at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:201)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:971)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1649)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1627)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)\n    ... 33 common frames omitted\nThe code is modified a bit as it is work related and I cannot just copy-paste it, but only names are changed\n</code></pre>\n<p>Spring boot version is 3.4.5 and I am using  com.azure.spring:spring-cloud-azure-starter-keyvault dependency.</p>\n<p>I want to do this in that way, but I cannot make it work.</p>\n<p>What is the reason for that?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}