{
  "question": {
    "tags": [
      "java",
      "json",
      "enums",
      "jackson",
      "jackson-databind"
    ],
    "owner": {
      "account_id": 4054999,
      "reputation": 973,
      "user_id": 3333319,
      "user_type": "registered",
      "accept_rate": 54,
      "profile_image": "https://www.gravatar.com/avatar/76f8b38655dbddae03b97a41ea94221e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Sirion",
      "link": "https://stackoverflow.com/users/3333319/sirion"
    },
    "is_answered": true,
    "view_count": 448,
    "accepted_answer_id": 78691840,
    "answer_count": 3,
    "score": -1,
    "last_activity_date": 1719843057,
    "creation_date": 1715177935,
    "last_edit_date": 1715257234,
    "question_id": 78449208,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78449208/deserialize-mapenum-object-in-java-with-jackson-library",
    "title": "Deserialize Map&lt;Enum&lt;?&gt;, Object&gt; in Java with Jackson library",
    "body": "<p>I need to serialize and deserialize in JSON format a Java map using the Jackson library.\nThe map type is <code>Map&lt;Enum&lt;?&gt;, Object&gt;</code> and its purpose is to store a configuration made by key-value pairs, where keys are enum instances coming from a third party library (hence I do not have control over their definition).\nKeys can be enums of different type, whereas values can be <code>int</code>, <code>double</code> or <code>String</code>.\nAlso, you can assume that different enums have different instance names.</p>\n<p>Serialization works fine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n  public enum IntParam {I1, I2, I3}\n  public enum DoubleParam {D1, D2, D3}\n  public enum StringParam {S1, S2, S3}\n\n  public static void main(final String[] args) {\n    Map&lt;Enum&lt;?&gt;, Object&gt; config = Map.of(\n        IntParam.I1, 0, \n        DoubleParam.D2, 1.0, \n        StringParam.S3, &quot;sss&quot;\n    );\n    new ObjectMapper().writeValueAsString(config)\n    // {&quot;I1&quot;: 1, &quot;D2&quot;: 1.0, &quot;S3&quot;: &quot;sss&quot;} \n  }\n</code></pre>\n<p>The problem is deserializing the above object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String json = &quot;{\\&quot;I1\\&quot;: 1, \\&quot;D2\\&quot;: 1.0, \\&quot;S3\\&quot;: \\&quot;sss\\&quot;}&quot;;\n    new ObjectMapper().readValue(json, new TypeReference&lt;Map&lt;Enum&lt;?&gt;, Object&gt;&gt;())\n</code></pre>\n<p>fails because Jackson cannot know which enum contains instances named <code>I1</code>, <code>D2</code> and <code>S3</code>.</p>\n<p>I would like to achieve something like</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;com.external.company.IntParam.I1&quot;: 1,\n   &quot;com.external.company.DoubleParam.D2&quot;: 1.0,\n   &quot;com.external.company.StringParam.S3&quot;: &quot;sss&quot;\n}\n</code></pre>\n<p>during serialization and then be able to deserialize it.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}