{
  "question": {
    "tags": [
      "java",
      "apache-kafka-streams",
      "failover"
    ],
    "owner": {
      "account_id": 14679305,
      "reputation": 385,
      "user_id": 10601340,
      "user_type": "registered",
      "profile_image": "https://lh4.googleusercontent.com/-hRRddkodyzs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCjv8vKt_PiizhYWzSDFE3QS4TQTw/mo/s256-rj/photo.jpg",
      "display_name": "Aakash Gupta",
      "link": "https://stackoverflow.com/users/10601340/aakash-gupta"
    },
    "is_answered": true,
    "view_count": 128,
    "accepted_answer_id": 79669531,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1750181340,
    "creation_date": 1741898383,
    "question_id": 79507577,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79507577/kafka-stream-message-processing-semantics",
    "title": "Kafka stream message processing semantics",
    "body": "<p>I am designing a Kafka stream app and want to know few details in order to design my failover strategy. I tried reading Kafka stream doc and existing stackoverflow posts, but was unable to find the answer to these queries.</p>\n<p>I have one topic with 10 partitions, where the data is properly partitioned, so that no two keys belong to different partitions. I have a Kafka stream app, where I manually set the number of threads to 10 via the Kafka stream config. Each partition can be processed independently (there are no global operations). There are no subtopologies, but there are few state stores. All Kafka stream threads reside on same device, and there is no other I/O other than Kafka stream topics and state stores.</p>\n<p>I want to know the following:</p>\n<ol>\n<li>Since each partition is assigned one thread, is it guaranteed that “A message will traverse through entire topology before the Kafka stream app start reading another message from same partition”, or, is it possible that “A message is read from a partition, it traverse partially in the topology, and before reaching sink node, next message from the partition is read and partially processed”. I want to know this because processing for a message depends on the state of sink topic, which I am storing in a KTable store just before data dump.</li>\n<li>In case of failover, I read that Kafka client will not commit if sink node didn’t receive that message. Say, the message traversed through the store in topology and just before reaching the sink node, the system crashes. Assuming that the state store persisted, should I make sure that state store handles message repeats? Are there some guarantees from Kafka stream for this? I am maintaining the data average in one of the state stores, and is wondering the behaviour in failover.</li>\n</ol>\n<p>Thanks!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}