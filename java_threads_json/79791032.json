{
  "question": {
    "tags": [
      "java",
      "completable-future",
      "java-17",
      "java-threads"
    ],
    "owner": {
      "account_id": 30972277,
      "reputation": 11,
      "user_id": 23787449,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/7dad22697a8edea3311a7d07985b97ed?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "thevasssa",
      "link": "https://stackoverflow.com/users/23787449/thevasssa"
    },
    "is_answered": true,
    "view_count": 109,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1760542764,
    "creation_date": 1760522958,
    "last_edit_date": 1760526107,
    "question_id": 79791032,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79791032/completablefutures-join-and-get-vs-thread-interruption",
    "title": "CompletableFutures, join() and get() vs thread interruption",
    "body": "<p>In my code (Java 17) I am used to handle exceptions from combined <code>CompletableFuture</code>s with <code>get()</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    CompletableFuture.allOf(someFuture, someOtherFuture).get();\n} catch (InterruptedException | ExecutionException ex) {\n    Thread.currentThread().interrupt();\n    if (ex.getCause() instanceof CustomException customException) {\n        throw customException;\n    }\n    throw new CustomException(CustomErrorCodeEnum.UNEXPECTED_ERROR,\n                              ex.getCause().getMessage());\n}\n</code></pre>\n<p>The part that I have a question about is the <code>Thread.currentThread().interrupt()</code>. I think this approach of mine is valid, since when the <code>InterruptedException</code> is thrown, the interrupted flag needs to be set on my thread.</p>\n<p>But now I am wondering if I can use <code>join()</code> – which does not throw <code>InterruptedException</code> – instead of <code>get()</code> without swallowing the interrupt (thus losing the information about the interrupt). I would like to use it like this (for example):</p>\n<pre><code>try {\n    CompletableFuture.allOf(someFuture, someOtherFuture).join();\n} catch (CompletionException | CancellationException ex) {\n    if (ex.getCause() instanceof CustomException customException) {\n        throw customException;\n    }\n    throw new CustomException(CustomErrorCodeEnum.UNEXPECTED_ERROR,\n                              ex.getCause().getMessage());\n}\n</code></pre>\n<p>I have read the implementation of <code>join()</code> and <code>get()</code> methods and it seems to me, that in the <code>join()</code> method is the <code>Thread.currentThread().interrupt()</code> already called so one does not lose the information about the interrupt, but I am not 100% sure, so my question is: is it safe to use the <code>join()</code> variant? Won't I lose some information?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}