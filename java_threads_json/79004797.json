{
  "question": {
    "tags": [
      "java",
      "minecraft",
      "minecraft-fabric"
    ],
    "owner": {
      "account_id": 35758727,
      "reputation": 3,
      "user_id": 27385789,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/d1c3b7b8e3044f790c704670305bde41?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "SMGPDBGMCB",
      "link": "https://stackoverflow.com/users/27385789/smgpdbgmcb"
    },
    "is_answered": true,
    "view_count": 180,
    "accepted_answer_id": 79005329,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1741350714,
    "creation_date": 1726789501,
    "question_id": 79004797,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79004797/is-it-possible-to-create-a-potion-with-multiple-effects-and-put-it-in-a-brewing",
    "title": "Is it possible to create a potion with multiple effects and put it in a brewing recipe without registering the potion?",
    "body": "<p>I am making a server side only fabric 1.21.1 mod which adds custom potions with vanilla effects.\nI have been unsuccessful in making the recipe without registering items/potions which cause vanilla players to get kicked on encountering the item and fabric players to be unable to join.</p>\n<p>Initially, I tried registering a potion recipe with <code>builder.registerPotionRecipe()</code>, but that takes in <code>RegistryEntry&lt;Potion&gt;</code> and not <code>Potion</code>, which I had created.\nI then started using <code>builder.registerItemRecipe()</code>, but that lead to the server not starting.\nRegistering the Item or Potion would lead to vanilla clients being kicked whenever encountering the item in game, and fabric players would be unable to join because the client lacks the registry.\nI did see that the brewing recipe existed as I was able to put the emerald block in the ingredients slot, and the brewing stand started.</p>\n<pre><code>    @Override\n    public void onInitializeServer() {\n        ArrayList&lt;StatusEffectInstance&gt; RICH_POTION_EFFECTS = new ArrayList&lt;&gt;();\n        RICH_POTION_EFFECTS.add(new StatusEffectInstance(StatusEffects.HERO_OF_THE_VILLAGE, 480, 5));\n        RICH_POTION_EFFECTS.add(new StatusEffectInstance(StatusEffects.LUCK, 480, 3));\n        Item RICH_POTION = new Item(new Item.Settings().component(DataComponentTypes.POTION_CONTENTS, new PotionContentsComponent(Optional.empty(),Optional.empty(), RICH_POTION_EFFECTS)));\n\n        Item AWKWARD_POTION = new Item(new Item.Settings().component(DataComponentTypes.POTION_CONTENTS, new PotionContentsComponent(Potions.AWKWARD)));\n            FabricBrewingRecipeRegistryBuilder.BUILD.register(builder -&gt; {\n                builder.registerItemRecipe(\n                        AWKWARD_POTION,\n                        Items.EMERALD_BLOCK,\n                        RICH_POTION\n                );\n            });\n    }\n</code></pre>\n<pre><code>[17:10:46] [main/ERROR] (Minecraft) Failed to start the minecraft server\n java.lang.IllegalStateException: Some intrusive holders were not registered: [Reference{null=[unregistered]}, Reference{null=[unregistered]}]\n    at net.minecraft.registry.SimpleRegistry.freeze(SimpleRegistry.java:359) ~[minecraft-common-c2b31d572c-1.21.1-net.fabricmc.yarn.1_21_1.1.21.1+build.3-v2.jar:?]\n    at net.minecraft.registry.Registries.freezeRegistries(Registries.java:264) ~[minecraft-common-c2b31d572c-1.21.1-net.fabricmc.yarn.1_21_1.1.21.1+build.3-v2.jar:?]\n    at net.minecraft.registry.Registries.bootstrap(Registries.java:248) ~[minecraft-common-c2b31d572c-1.21.1-net.fabricmc.yarn.1_21_1.1.21.1+build.3-v2.jar:?]\n    at net.minecraft.server.Main.handler$zhp000$fabric-registry-sync-v0$afterModInit(Main.java:1547) ~[minecraft-common-c2b31d572c-1.21.1-net.fabricmc.yarn.1_21_1.1.21.1+build.3-v2.jar:?]\n    at net.minecraft.server.Main.main(Main.java:111) [minecraft-common-c2b31d572c-1.21.1-net.fabricmc.yarn.1_21_1.1.21.1+build.3-v2.jar:?]\n    at net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:480) [fabric-loader-0.16.5.jar:?]\n    at net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74) [fabric-loader-0.16.5.jar:?]\n    at net.fabricmc.loader.impl.launch.knot.KnotServer.main(KnotServer.java:23) [fabric-loader-0.16.5.jar:?]\n    at net.fabricmc.devlaunchinjector.Main.main(Main.java:86) [dev-launch-injector-0.2.1+build.8.jar:?]\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}