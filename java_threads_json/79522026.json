{
  "question": {
    "tags": [
      "java",
      "jboss",
      "wildfly",
      "junit5"
    ],
    "owner": {
      "account_id": 5279068,
      "reputation": 1103,
      "user_id": 4215032,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/89f165cd1807676191742cbdb0bafc3b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Pp88",
      "link": "https://stackoverflow.com/users/4215032/pp88"
    },
    "is_answered": true,
    "view_count": 77,
    "accepted_answer_id": 79526514,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1742588162,
    "creation_date": 1742450565,
    "last_edit_date": 1742546935,
    "question_id": 79522026,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79522026/junit5-wildfly-testengine-implementation-is-found-via-class-forname-but-not-foun",
    "title": "Junit5 Wildfly TestEngine implementation is found via Class.forName but not found using the ClassLoader",
    "body": "<p>I have a WAR deployed on WildFly that depends on a module where JUnit 5 JARs are located. I keep getting this exception:</p>\n<blockquote>\n<p>[Cannot create Launcher without at least one TestEngine; consider\nadding an engine implementation JAR to the classpath]:\norg.junit.platform.commons.PreconditionViolationException: Cannot\ncreate Launcher without at least one TestEngine; consider adding an\nengine implementation JAR to the classpath</p>\n</blockquote>\n<p>The code that I'm using for testing this is</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/Paolo&quot;)\npublic class HelloController {\n    Logger logger = LoggerFactory.getLogger(HelloController.class);\n    @GetMapping(&quot;/hello&quot;)\n    String hello() throws ClassNotFoundException {\n       Class.forName(&quot;org.junit.jupiter.engine.JupiterTestEngine&quot;); // no exception thrown\n       Iterable&lt;TestEngine&gt; testEngines = ServiceLoader.load(TestEngine.class,\n                ClassLoaderUtils.getDefaultClassLoader()); // method used by junit to found the TestEngineImplementation JupiterTestEngine is the only real implementation\n       logger.info(&quot;testEngines: {}&quot;, testEngines.iterator().hasNext()); // false\n       return &quot;Hi&quot;;\n   }\n}\n</code></pre>\n<p>If instead of having JUnit 5 JARs in the module, I put them in the <code>WEB-INF/lib</code> of the WAR, everything works just fine.</p>\n<p>I understood from <a href=\"https://docs.redhat.com/en/documentation/red_hat_jboss_enterprise_application_platform/7.1/html/development_guide/class_loading_and_modules\" rel=\"nofollow noreferrer\">here</a> that modules are loaded and put on the classpath of the WAR.</p>\n<p>Why, if I move the JARs under <code>WEB-INF/lib</code>, it works? What is the difference?</p>\n<p>You can find the complete example <a href=\"https://github.com/paolopiccinini/mockito-bug\" rel=\"nofollow noreferrer\">here</a>, the correct branch is junit5.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}