{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "spring-data-jpa",
      "jaxb"
    ],
    "owner": {
      "account_id": 30104774,
      "reputation": 1,
      "user_id": 23070931,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/QccoS.png?s=256",
      "display_name": "Nadger",
      "link": "https://stackoverflow.com/users/23070931/nadger"
    },
    "is_answered": false,
    "view_count": 640,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1748382547,
    "creation_date": 1747574131,
    "last_edit_date": 1747588391,
    "question_id": 79627475,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79627475/spring-boot-3-x-jpa-app-with-java-21-cannot-overcome-java-lang-classnotfoundexce",
    "title": "Spring Boot 3.x JPA app with java 21 cannot overcome java.lang.ClassNotFoundException: jakarta.xml.bind.JAXBException",
    "body": "<p>I'm trying to get started with a simple Spring Boot JPA app that uses Java 21.\nI'm doing this because I'm trying to isolate what I need to do to overcome the dreaded <code>java.lang.ClassNotFoundException: jakarta.xml.bind.JAXBException</code> that I'm getting with another, much larger project.</p>\n<p>This is my absolute minimal POM to get the simplest example to work;</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n                             https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-jpa-demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-boot-jpa-demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot with JPA&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I've got a User entity, controller, service and repository, all absolute mininmum.\nNo matter what I do the POM, I cannot overcome the following stack trace</p>\n<pre><code>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2025-05-18T13:50:59.734+01:00 ERROR 26716 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: jakarta/xml/bind/JAXBException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1234) ~[spring-context-6.1.5.jar:6.1.5]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.5.jar:6.1.5]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.5.jar:6.1.5]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.4.jar:3.2.4]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.4.jar:3.2.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.4.jar:3.2.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.4.jar:3.2.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-3.2.4.jar:3.2.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-3.2.4.jar:3.2.4]\n    at com.example.demo.DemoApplication.main(DemoApplication.java:12) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.2.4.jar:3.2.4]\nCaused by: java.lang.NoClassDefFoundError: jakarta/xml/bind/JAXBException\n    at org.hibernate.boot.spi.XmlMappingBinderAccess.&lt;init&gt;(XmlMappingBinderAccess.java:45) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]\n    at org.hibernate.boot.MetadataSources.getXmlMappingBinderAccess(MetadataSources.java:119) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.prepare(MetadataBuildingProcess.java:153) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:296) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:198) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:63) ~[spring-orm-6.1.5.jar:6.1.5]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.1.5.jar:6.1.5]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.5.jar:6.1.5]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.5.jar:6.1.5]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.5.jar:6.1.5]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.5.jar:6.1.5]\n    ... 19 common frames omitted\n**Caused by: java.lang.ClassNotFoundException: jakarta.xml.bind.JAXBException**\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526) ~[na:na]\n    ... 31 common frames omitted\n\n</code></pre>\n<p>If I downgrade everything to Spring Boot 2.x, Java to 11, add the javax dependencies and adjust the persistence references, it works.\nBut I cannot get it to function with 3.x, whatever I try and with all the suggestions that Claude can give me too :)</p>\n<p>I tried adding any all the suggested dependencies, the glassfish implementation and the Eclipse versions, all to no avail</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n    &lt;version&gt;4.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;version&gt;4.0.5&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>What am I doing wrong?</p>\n<p>Here's the dep tree @dan1st</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------&lt; com.example:spring-boot-jpa-demo &gt;------------------\n[INFO] Building spring-boot-jpa-demo 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- dependency:3.6.1:tree (default-cli) @ spring-boot-jpa-demo ---\n[INFO] com.example:spring-boot-jpa-demo:jar:0.0.1-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter-data-jpa:jar:3.2.4:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-aop:jar:3.2.4:compile\n[INFO] |  |  +- org.springframework:spring-aop:jar:6.1.5:compile\n[INFO] |  |  \\- org.aspectj:aspectjweaver:jar:1.9.21:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:3.2.4:compile\n[INFO] |  |  +- com.zaxxer:HikariCP:jar:5.0.1:compile\n[INFO] |  |  \\- org.springframework:spring-jdbc:jar:6.1.5:compile\n[INFO] |  +- org.hibernate.orm:hibernate-core:jar:6.4.4.Final:compile\n[INFO] |  |  +- jakarta.persistence:jakarta.persistence-api:jar:3.1.0:compile\n[INFO] |  |  +- jakarta.transaction:jakarta.transaction-api:jar:2.0.1:compile\n[INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.5.3.Final:compile\n[INFO] |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:6.0.6.Final:runtime\n[INFO] |  |  +- io.smallrye:jandex:jar:3.1.2:runtime\n[INFO] |  |  +- com.fasterxml:classmate:jar:1.6.0:compile\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.14.12:runtime\n[INFO] |  |  +- org.glassfish.jaxb:jaxb-runtime:jar:4.0.5:runtime\n[INFO] |  |  |  \\- org.glassfish.jaxb:jaxb-core:jar:4.0.5:runtime\n[INFO] |  |  |     +- org.glassfish.jaxb:txw2:jar:4.0.5:runtime\n[INFO] |  |  |     \\- com.sun.istack:istack-commons-runtime:jar:4.1.2:runtime\n[INFO] |  |  +- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime\n[INFO] |  |  \\- org.antlr:antlr4-runtime:jar:4.13.0:compile\n[INFO] |  +- org.springframework.data:spring-data-jpa:jar:3.2.4:compile\n[INFO] |  |  +- org.springframework.data:spring-data-commons:jar:3.2.4:compile\n[INFO] |  |  +- org.springframework:spring-orm:jar:6.1.5:compile\n[INFO] |  |  +- org.springframework:spring-context:jar:6.1.5:compile\n[INFO] |  |  +- org.springframework:spring-tx:jar:6.1.5:compile\n[INFO] |  |  +- org.springframework:spring-beans:jar:6.1.5:compile\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\n[INFO] |  |  \\- org.slf4j:slf4j-api:jar:2.0.12:compile\n[INFO] |  \\- org.springframework:spring-aspects:jar:6.1.5:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.2.4:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.2.4:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.2.4:compile\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.14:compile\n[INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.14:compile\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.21.1:compile\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.21.1:compile\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.12:compile\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:2.2:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.2.4:compile\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.4:compile\n[INFO] |  |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.4:compile\n[INFO] |  |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.4:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.4:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.4:compile\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.4:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.2.4:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.19:compile\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.19:compile\n[INFO] |  +- org.springframework:spring-web:jar:6.1.5:compile\n[INFO] |  |  \\- io.micrometer:micrometer-observation:jar:1.12.4:compile\n[INFO] |  |     \\- io.micrometer:micrometer-commons:jar:1.12.4:compile\n[INFO] |  \\- org.springframework:spring-webmvc:jar:6.1.5:compile\n[INFO] |     \\- org.springframework:spring-expression:jar:6.1.5:compile\n[INFO] +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.2:compile\n[INFO] |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.3:compile\n[INFO] +- com.sun.xml.bind:jaxb-impl:jar:4.0.5:runtime\n[INFO] |  \\- com.sun.xml.bind:jaxb-core:jar:4.0.5:runtime\n[INFO] |     \\- org.eclipse.angus:angus-activation:jar:2.0.2:runtime\n[INFO] +- com.h2database:h2:jar:2.2.224:runtime\n[INFO] +- org.springframework.boot:spring-boot-devtools:jar:3.2.4:runtime\n[INFO] |  +- org.springframework.boot:spring-boot:jar:3.2.4:compile\n[INFO] |  \\- org.springframework.boot:spring-boot-autoconfigure:jar:3.2.4:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-validation:jar:3.2.4:compile\n[INFO] |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.19:compile\n[INFO] |  \\- org.hibernate.validator:hibernate-validator:jar:8.0.1.Final:compile\n[INFO] |     \\- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile\n[INFO] +- org.projectlombok:lombok:jar:1.18.30:compile\n[INFO] \\- org.springframework.boot:spring-boot-starter-test:jar:3.2.4:test\n[INFO]    +- org.springframework.boot:spring-boot-test:jar:3.2.4:test\n[INFO]    +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.2.4:test\n[INFO]    +- com.jayway.jsonpath:json-path:jar:2.9.0:test\n[INFO]    +- net.minidev:json-smart:jar:2.5.0:test\n[INFO]    |  \\- net.minidev:accessors-smart:jar:2.5.0:test\n[INFO]    |     \\- org.ow2.asm:asm:jar:9.3:test\n[INFO]    +- org.assertj:assertj-core:jar:3.24.2:test\n[INFO]    +- org.awaitility:awaitility:jar:4.2.0:test\n[INFO]    +- org.hamcrest:hamcrest:jar:2.2:test\n[INFO]    +- org.junit.jupiter:junit-jupiter:jar:5.10.2:test\n[INFO]    |  +- org.junit.jupiter:junit-jupiter-api:jar:5.10.2:test\n[INFO]    |  |  +- org.opentest4j:opentest4j:jar:1.3.0:test\n[INFO]    |  |  +- org.junit.platform:junit-platform-commons:jar:1.10.2:test\n[INFO]    |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO]    |  +- org.junit.jupiter:junit-jupiter-params:jar:5.10.2:test\n[INFO]    |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.10.2:test\n[INFO]    |     \\- org.junit.platform:junit-platform-engine:jar:1.10.2:test\n[INFO]    +- org.mockito:mockito-core:jar:5.7.0:test\n[INFO]    |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.12:test\n[INFO]    |  \\- org.objenesis:objenesis:jar:3.3:test\n[INFO]    +- org.mockito:mockito-junit-jupiter:jar:5.7.0:test\n[INFO]    +- org.skyscreamer:jsonassert:jar:1.5.1:test\n[INFO]    |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO]    +- org.springframework:spring-core:jar:6.1.5:compile\n[INFO]    |  \\- org.springframework:spring-jcl:jar:6.1.5:compile\n[INFO]    +- org.springframework:spring-test:jar:6.1.5:test\n[INFO]    \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.909 s\n[INFO] Finished at: 2025-05-18T18:09:27+01:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}