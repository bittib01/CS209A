{
  "question": {
    "tags": [
      "java",
      "compiler-warnings",
      "java-21"
    ],
    "owner": {
      "account_id": 424143,
      "reputation": 2201,
      "user_id": 803975,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/4ea5ec84f7ef1898ff9810f4e9980ce2?s=256&d=identicon&r=PG",
      "display_name": "whaleberg",
      "link": "https://stackoverflow.com/users/803975/whaleberg"
    },
    "is_answered": true,
    "view_count": 342,
    "accepted_answer_id": 79384824,
    "answer_count": 1,
    "score": 6,
    "last_activity_date": 1737732457,
    "creation_date": 1737143615,
    "last_edit_date": 1737144541,
    "question_id": 79365976,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79365976/why-does-this-escape-warning-trigger-when-calling-final-methods-from-the-super",
    "title": "Why does &#39;this-escape&#39; warning trigger when calling final methods from the superclass",
    "body": "<p>Java 21 introduces a new <strong>this-escape</strong> warning which warns against situations where a constructor is calling a method which can be overriden by a subclass.  This is a potentially dangerous situation because the overriden method might now depend on fields in the subclass which are not yet initialized because the superclass constructor isn't finished.</p>\n<p>I don't understand why the warning is triggering when a class calls a final method which is declared in one of it's own parents.</p>\n<p>Here's an example:</p>\n<pre><code>package org.example;\n\npublic class A {\n    public final int getNumber() {\n        return 10;\n    }\n}\n\npublic class B extends A {\n    public B(){\n        getNumber(); // Compiler warns here:\n                     // warning: [this-escape] possible 'this' escape \n                     // before subclass is fully initialized\n    }\n}\n</code></pre>\n<p>Is there a way that B can be extended which would cause a problem?  If getNumber() was not final then a subclass of B could potentially break itself, but I don't see the error condition here.</p>\n<p>A potential problem is if the superclass method calls another non-final method.  Assuming that that not the case, is there still an error condition?</p>\n<p>I can't tell if this warning is a false positive, or a very esoteric error I don't understand.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}