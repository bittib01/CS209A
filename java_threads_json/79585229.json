{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "hibernate",
      "spring-data-jpa"
    ],
    "owner": {
      "account_id": 24111,
      "reputation": 1891,
      "user_id": 61104,
      "user_type": "registered",
      "accept_rate": 85,
      "profile_image": "https://www.gravatar.com/avatar/de357816d5d57debab13abc5999ab068?s=256&d=identicon&r=PG",
      "display_name": "Kevin",
      "link": "https://stackoverflow.com/users/61104/kevin"
    },
    "is_answered": false,
    "view_count": 100,
    "answer_count": 2,
    "score": 0,
    "last_activity_date": 1748454984,
    "creation_date": 1745265092,
    "last_edit_date": 1745265360,
    "question_id": 79585229,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79585229/how-can-i-determine-if-my-service-uses-a-db-connection",
    "title": "How can I determine if my service uses a DB connection?",
    "body": "<p>I have a Spring Boot app using Hibernate and Spring Data JPA. In order to manage DB transactions, I use the <code>org.springframework.transaction.annotation.Transactional</code> annotation around services.</p>\n<p>In some services I have methods where they should use a DB transaction, and other methods where they do not need a DB transaction, and I want to make sure they are not taking DB connections from the pool.</p>\n<pre><code>@Service\n@Transactional(readOnly = true)\npublic class UserService {\n\n  // Needs a DB transaction and definitely gets one\n  public Page&lt;User&gt; getUsers(Pageable pageable) {\n    ...\n  }\n\n  // Should not use a DB transaction\n  @Transactional(propagation = Propagation.NEVER)\n  public WhoAmI whoAmI() {\n    ...\n  }\n}\n</code></pre>\n<p><code>UserService</code> is only called directly from a controller. It is not called by another service that is already in a transaction (which should be enforced by <code>Propagation.NEVER</code>).</p>\n<p>Based on some stack traces I saw, it seems like my <code>whoAmI</code> method might be waiting on a DB connection even though it should never use one.</p>\n<ol>\n<li>Is <code>@Transactional(propagation = Propagation.NEVER)</code> equivalent to running the method in a class that is not annotated with <code>@Transactional</code>? And would that mean that it does never attempts to acquire a DB connection?</li>\n<li>How can I verify that <code>whoAmI</code> does not acquire a DB connection at any point while it is being called?</li>\n</ol>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}