{
  "question": {
    "tags": [
      "java",
      "rest",
      "csv",
      "spring-mvc"
    ],
    "owner": {
      "account_id": 35531768,
      "reputation": 329,
      "user_id": 27261123,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/e4db8ad90c980382d79cdc33a0d54d66?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Cagepi",
      "link": "https://stackoverflow.com/users/27261123/cagepi"
    },
    "is_answered": true,
    "view_count": 139,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1735063063,
    "creation_date": 1734877155,
    "last_edit_date": 1735063063,
    "question_id": 79301152,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79301152/accept-csv-of-dtos-in-spring-web-rest-controller",
    "title": "Accept CSV of DTOs in Spring Web REST controller",
    "body": "<p>I need to create a POST endpoint that accepts a CSV file of DTOs.</p>\n<p>How do I achieve it?</p>\n<p>Spring Web can automatically convert JSONs to my custom objects, so I don't have to accept a string and then parse it myself. Can Spring Web do the same thing for CSVs? Or do I have to actually accept a file and then parse it manually myself (probably using some external library, like Apache Commons Csv)?</p>\n<pre class=\"lang-java prettyprint-override\"><code>// what I want to work but what apparently doesn't\n    @PostMapping(path = &quot;/batch&quot;, consumes = &quot;text/csv&quot;)\n    public ResponseEntity&lt;Void&gt; postSocksBatch(List&lt;SocksRequestDto&gt; socksRequestDtos) {\n        socksRequestDtos.forEach(socksService::save);\n        return ResponseEntity.status(HttpStatus.CREATED).build();\n    }\n</code></pre>\n<h1>Attempt 1</h1>\n<p>I got 415 Unsupported Media Type</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(path = &quot;/batch&quot;, consumes = &quot;text/csv&quot;)\n    public ResponseEntity&lt;Void&gt; postSocksBatch(@RequestBody Object file) {\n</code></pre>\n<pre><code>curl --location 'http://localhost:8080/api/socks/batch' \\\n--header 'Content-Type: text/csv' \\\n--data-binary '@/C:/Users/nadch/OneDrive/Рабочий стол/socks.csv'\n</code></pre>\n<p><a href=\"https://i.sstatic.net/Tp1gWpOJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/Tp1gWpOJ.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.sstatic.net/QqQ7w8nZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/QqQ7w8nZ.png\" alt=\"enter image description here\" /></a></p>\n<h1>Attepmt 2</h1>\n<p>500 Internal Server Error</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(path = &quot;/batch&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public ResponseEntity&lt;Void&gt; postSocksBatch(@RequestBody MultipartFile file) {\n</code></pre>\n<pre><code>curl --location 'http://localhost:8080/api/socks/batch' \\\n--header 'Content-Type: multipart/form-data' \\\n--data-binary '@/C:/Users/nadch/OneDrive/Рабочий стол/socks.csv'\n</code></pre>\n<p><a href=\"https://i.sstatic.net/rtD8h0kZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/rtD8h0kZ.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/36005436/the-request-was-rejected-because-no-multipart-boundary-was-found-in-springboot\">Leaving</a> <code>Content-Type</code> blank resulted in 415</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}