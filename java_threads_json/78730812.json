{
  "question": {
    "tags": [
      "java",
      "sqlite",
      "codenameone"
    ],
    "owner": {
      "account_id": 29557990,
      "reputation": 521,
      "user_id": 22653206,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/6dfa8d5644edff26627a12b7725d7884?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "curtjacobs1",
      "link": "https://stackoverflow.com/users/22653206/curtjacobs1"
    },
    "is_answered": false,
    "view_count": 118,
    "answer_count": 0,
    "score": 1,
    "last_activity_date": 1722400500,
    "creation_date": 1720617471,
    "last_edit_date": 1722400500,
    "question_id": 78730812,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78730812/having-trouble-connecting-to-my-database-in-codename-one",
    "title": "Having trouble connecting to my database in Codename One",
    "body": "<p>I have been fighting to copy my included SQLite database to FileSystemStorage, but I finally succeeded. I had to put the masters in my resources folder because I kept getting an &quot;error opening connection&quot; on the InputStream when I placed them in the src folder. Once I finally got them to copy, I am now getting the error trying to open the db with</p>\n<pre><code>Database db = Display.getInstance().openOrCreate(&quot;players.db&quot;);\n</code></pre>\n<p>I have added the backslash in front of the name, added the backslash database in front of the name, and added the FileSystemStorage(path) as the name, and I still get the connection error. Any ideas would be appreciated. Thanks.\nSystem M1 16&quot; MacBook Pro, IntelliJ 2023.2.5, JRE 8</p>\n<p><strong>Edit:</strong>\nMy databases were created with DB Browser for SQLite</p>\n<p>I have attached a simple build to test opening the database and inserting values. Both the db statement and the db execute throw &quot;error opening connection&quot; when building the app.</p>\n<pre><code>    private boolean savenadd() {\n        String plnm = plyrname.getText();\n        String pladd = plyradd.getText();\n        String plph = plyrphn.getText();\n        String plp1 = plyrpos1.getText();\n        String plp2 = plyrpos2.getText();\n        String plp3 = plyrpos3.getText();\n        Dialog d = new Dialog(&quot;Database loading...&quot;);\n            try {\n                db = Display.getInstance().openOrCreate(&quot;players.db&quot;);\n                String query = &quot;insert into players (name, address, phone, pos1, pos2, pos3) values (plnm, pladd, plph, plp1, plp2, plp3)&quot;;\n                db.execute(query);\n            } catch (IOException err) {\n                return (false);\n            }\n        return (false);\n    }\n</code></pre>\n<p><strong>Edit 2</strong>\nThe code for copying the databases to storage:</p>\n<pre><code>public class DBDemo extends BaseDesignForm {\n    private Form currentForm;\n    private Resources theme;\n\n    public DBDemo() throws IOException {\n        theme = UIManager.initFirstTheme(&quot;/theme&quot;);\n        Toolbar.setGlobalToolbar(true);\n        Form dbimport = new Form();\n        dbimport.show();\n\n        Dialog.show(&quot;Databases&quot;, &quot;Copying Databases&quot;, &quot;OK&quot;, &quot;Cancel&quot;);\n        String pathp = Display.getInstance().getDatabasePath(&quot;players.db&quot;).toString();\n        InputStream pi = Display.getInstance().getResourceAsStream(getClass(), &quot;/&quot; + &quot;players.db&quot;);\n        OutputStream po = FileSystemStorage.getInstance().openOutputStream(pathp);\n        Util.copy(pi, po);\n        Util.cleanup(po);\n        Util.cleanup(pi);\n\n        String pathpl = Display.getInstance().getDatabasePath(&quot;plys.db&quot;).toString();\n        OutputStream plo = FileSystemStorage.getInstance().openOutputStream(pathpl);\n        InputStream pli = Display.getInstance().getResourceAsStream(getClass(), &quot;/&quot; + &quot;plys.db&quot;);\n        Util.copy(pli, plo);\n        Util.cleanup(plo);\n        Util.cleanup(pli);\n\n        String pathr = Display.getInstance().getDatabasePath(&quot;rndo.db&quot;).toString();\n        OutputStream ro = FileSystemStorage.getInstance().openOutputStream(pathr);\n        InputStream ri = Display.getInstance().getResourceAsStream(getClass(), &quot;/&quot; + &quot;rndo.db&quot;);\n        Util.copy(ri, ro);\n        Util.cleanup(ro);\n        Util.cleanup(ri);\n\n        String pathpm = Display.getInstance().getDatabasePath(&quot;pandr.db&quot;).toString();\n        OutputStream pmo = FileSystemStorage.getInstance().openOutputStream(pathpm);\n        InputStream pmi = Display.getInstance().getResourceAsStream(getClass(), &quot;/&quot; + &quot;pandr.db&quot;);\n        Util.copy(pmi, pmo);\n        Util.cleanup(pmo);\n        Util.cleanup(pmi);\n    }\n}\n</code></pre>\n<p>Here is the error trace from the console, showing the error on EntrPlyr.java:78 in the savenadd() method, the line after the try is entered:</p>\n<pre><code>java.sql.SQLException: Error opening connection\n    at org.sqlite.SQLiteConnection.open(SQLiteConnection.java:179)\n    at org.sqlite.SQLiteConnection.&lt;init&gt;(SQLiteConnection.java:105)\n    at org.sqlite.JDBC.createConnection(JDBC.java:113)\n    at org.sqlite.JDBC.connect(JDBC.java:87)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:677)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:189)\n    at com.codename1.impl.javase.JavaSEPort.openOrCreateDB(JavaSEPort.java:11778)\n    at com.codename1.ui.Display.openOrCreate(Display.java:4582)\n    at com.touchlineassist.myapp.EntrPlyr.savenadd(EntrPlyr.java:78)\n    at com.touchlineassist.myapp.EntrPlyr.lambda$new$0(EntrPlyr.java:59)\n    at com.codename1.ui.util.EventDispatcher.fireActionEvent(EventDispatcher.java:349)\n    at com.codename1.ui.Button.fireActionEvent(Button.java:687)\n    at com.codename1.ui.Button.released(Button.java:728)\n    at com.codename1.ui.Button.pointerReleased(Button.java:835)\n    at com.codename1.ui.LeadUtil.pointerReleased(LeadUtil.java:153)\n    at com.codename1.ui.Form.pointerReleased(Form.java:3881)\n    at com.codename1.ui.Component.pointerReleased(Component.java:5341)\n    at com.codename1.ui.Display.handleEvent(Display.java:2424)\n    at com.codename1.ui.Display.edtLoopImpl(Display.java:1300)\n    at com.codename1.ui.Display.mainEDTLoop(Display.java:1218)\n    at com.codename1.ui.RunnableWrapper.run(RunnableWrapper.java:120)\n    at com.codename1.impl.CodenameOneThread.run(CodenameOneThread.java:176)\nCaused by: java.lang.Exception: Error loading native library: /org/sqlite/native/Mac/aarch64/libsqlitejdbc.jnilib\n    at org.sqlite.SQLiteJDBCLoader.loadSQLiteNativeLibrary(SQLiteJDBCLoader.java:241)\n    at org.sqlite.SQLiteJDBCLoader.initialize(SQLiteJDBCLoader.java:63)\n    at org.sqlite.NativeDB.load(NativeDB.java:50)\n    at org.sqlite.SQLiteConnection.open(SQLiteConnection.java:175)\n    ... 21 more\n</code></pre>\n<p>Edit 3\nI right click-Analyze-Inspect Code on the pom file, and got this error\n<a href=\"https://i.sstatic.net/fGNamf6t.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/fGNamf6t.jpg\" alt=\"Error Message on pom file\" /></a></p>\n<p>Edit 4\nInstalled fresh IntelliJ 2024.1.4, added the Codename One plugin. Created a new Initilizr for DBDemo, and copied in the SQL Sample/DBDemo.java code. When I run in the Simulator, the MyDB.db shell (no schema) is copied to the database folder, and then the Simulator fails with nullPointerException on the Util.copy(i, o) line in copyDB(). I took a screen shot after running the Simulator by right clicking on the pom file and performing Analyze-Inspect Code for the pom file.\n<a href=\"https://i.sstatic.net/fGNamf6t.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/fGNamf6t.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Edit 5\nStack Trace</p>\n<pre><code>[EDT] 0:0:0,9 - Exception: java.lang.NullPointerException - null\njava.lang.NullPointerException\n    at com.codename1.io.Util.copyNoClose(Util.java:149)\n    at com.codename1.io.Util.copyNoClose(Util.java:135)\n    at com.codename1.io.Util.copy(Util.java:170)\n    at com.codename1.io.Util.copy(Util.java:124)\n    at com.example.dbdemo.DBDemo.copyDb(DBDemo.java:56)\n    at com.example.dbdemo.DBDemo.lambda$start$2(DBDemo.java:79)\n    at com.codename1.ui.Command$1.actionPerformed(Command.java:334)\n    at com.codename1.ui.SideMenuBar$CommandWrapper.actionPerformed(SideMenuBar.java:1818)\n    at com.codename1.ui.util.EventDispatcher.fireActionEvent(EventDispatcher.java:349)\n    at com.codename1.ui.Button.fireActionEvent(Button.java:679)\n    at com.codename1.ui.Button.released(Button.java:728)\n    at com.codename1.ui.Button.pointerReleased(Button.java:835)\n    at com.codename1.ui.LeadUtil.pointerReleased(LeadUtil.java:153)\n    at com.codename1.ui.Form.pointerReleased(Form.java:3881)\n    at com.codename1.ui.Component.pointerReleased(Component.java:5341)\n    at com.codename1.ui.Display.handleEvent(Display.java:2424)\n    at com.codename1.ui.Display.edtLoopImpl(Display.java:1300)\n    at com.codename1.ui.Display.mainEDTLoop(Display.java:1218)\n    at com.codename1.ui.RunnableWrapper.run(RunnableWrapper.java:120)\n    at com.codename1.impl.CodenameOneThread.run(CodenameOneThread.java:176)\nRendering frame took too long 250 milliseconds\nCSS&gt; null\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}