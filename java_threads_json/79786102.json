{
  "question": {
    "tags": [
      "javascript",
      "java",
      "android",
      "node.js",
      "multer"
    ],
    "owner": {
      "account_id": 36075145,
      "reputation": 83,
      "user_id": 27551345,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/2LH7DwM6.jpg?s=256",
      "display_name": "OuterTowner",
      "link": "https://stackoverflow.com/users/27551345/outertowner"
    },
    "is_answered": false,
    "view_count": 73,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1759992016,
    "creation_date": 1759992016,
    "question_id": 79786102,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79786102/can-a-backend-using-multer-for-file-uploads-recognize-an-image-sent-as-a-byte",
    "title": "Can a backend using Multer for file uploads recognize an image sent as a byte[] in the request?",
    "body": "<p>In a B/S architecture system, the backend is written in Node.js and uses Multer to handle file uploads, and the frontend is an Android application written in Java. If the frontend gets photo data from the camera as a byte[] (YUV), transforms it to JPEG form's byte[], wraps it to multipart/form-data, and sends it to the backend, can Multer correctly recognize this uploaded file and save the picture successfully?</p>\n<p>The code in Android is like this:</p>\n<pre><code>public void login(String account,, byte[] photoYUVBytes, final LoginCallback callback) {\n        RequestBody accountBody = account != null ? RequestBody.create(MediaType.parse(&quot;text/plain&quot;), account) : null;\n        MultipartBody.Part photoPart = null;\n        if (photoYUVBytes != null) {\n            Camera.Size size = MainFragment.getPreviewSize();\n            byte[] photoBytes = yuvToJpeg(photoYUVBytes,size.width,size.height);\n            RequestBody photoBody = RequestBody.create(MediaType.parse(&quot;image/*&quot;), photoBytes);\n            photoPart = MultipartBody.Part.createFormData(&quot;photo&quot;, &quot;face.jpg&quot;, photoBody);\n        }\n\n        Call&lt;LoginResponse&gt; call = loginApi.login(accountBody, photoPart);\n        call.enqueue(new Callback&lt;LoginResponse&gt;() {\n            @Override\n            public void onResponse(Call&lt;LoginResponse&gt; call, Response&lt;LoginResponse&gt; response) {\n                if (response.isSuccessful() &amp;&amp; response.body() != null) {\n                    callback.onSuccess(response.body());\n                } else {\n                    callback.onError(...);\n                }\n            }\n        });\n    }\n</code></pre>\n<p>and the backend code is like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, 'uploads/'); // store catalog\n    },\n    filename: function (req, file, cb) {\n        const ext = path.extname(file.originalname) || '.jpg'; \n        cb(null, `${Date.now()}${ext}`);\n    }\n});\nconst upload = multer({ storage: storage });\nrouter.post(&quot;/login&quot;, upload.single(&quot;photo&quot;) , async (req, res) =&gt; {...}\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}