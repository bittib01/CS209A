{
  "question": {
    "tags": [
      "java",
      "android",
      "kotlin",
      "google-api"
    ],
    "owner": {
      "account_id": 34842251,
      "reputation": 11,
      "user_id": 26817940,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/3d6735294a4f23e3ee3dd42c3d29265e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "elamal",
      "link": "https://stackoverflow.com/users/26817940/elamal"
    },
    "is_answered": true,
    "view_count": 258,
    "accepted_answer_id": 78905893,
    "answer_count": 1,
    "score": 1,
    "last_activity_date": 1724863633,
    "creation_date": 1723632502,
    "last_edit_date": 1723746012,
    "question_id": 78870518,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78870518/credentialmanager-and-google-identity-signin-api-how-to",
    "title": "CredentialManager and Google Identity Signin API How to",
    "body": "<p>I'm extremely confuse and lost on how to proceed with the &quot;recent&quot; <a href=\"https://developer.android.com/identity/sign-in/credential-manager-siwg\" rel=\"nofollow noreferrer\">google authenticate process</a>\nFor context I'm compiling an aosp, the goal of my apk is to get the personal infos (the user google image account) .</p>\n<p>OK so if i take the official example (with my already existing accountManager)\n(I'm sorry if some information are inaccurate that is the first time I'm implementing android google api)</p>\n<pre><code>        private val accountManager by lazy { AccountManager.get(context) }\n            ...\n        val googleAccount = accountManager.getAccountsByType(ACCOUNT_TYPE_GOOGLE).lastOrNull()\n///googleAccount contain my email and account name\n        val googleIdOption: GetGoogleIdOption = GetGoogleIdOption.Builder()\n            .setFilterByAuthorizedAccounts(true)\n            .setServerClientId(googleAccount!!.name)//WEB_CLIENT_ID\n            .setAutoSelectEnabled(true)\n            .\n(&quot;&lt;nonce string to use when generating a Google ID token&gt;&quot;)\n            .build()\n        Log.d(TAG, &quot;testGoogleAccountInfos() googleIdOption:$googleIdOption&quot;)\n</code></pre>\n<p>for the things I don't understand:</p>\n<ol>\n<li><p><strong>setServerClientId(googleAccount!!.name)//WEB_CLIENT_ID</strong>\nFrom the official documentation:\n<code>In the Credentials page, create an Android client ID for your app if you don't already have one. You will need to specify your app's package name and SHA-1 signature. </code>\nIf i understand correctly, I have to create a google account so that i can register my apk, so that other google account can re-register themself using my apk? but they are already registered with the account manager. Also if I recall correctly deprecated GoogleSignInOptions did not need such a things. Is that some new mandatory process or a good practice advice that can be skipped?</p>\n</li>\n<li><p><strong>setNonce(&quot;nonce string to use when generating a Google ID token&quot;)</strong>\nI<a href=\"https://developer.android.com/google/play/integrity/classic?hl=fr#nonce\" rel=\"nofollow noreferrer\">'ve readed the documentation and kinda understand what it does</a>, for the parameter the documentation specify:\n<code>from a cryptographically generated random number on the server side or from a pre-existing identifier, such as a session or transaction ID.</code> on the server side??? the server are the google one are they not? And for the session/transaction id, do you know what is the good common approach to generate it?</p>\n</li>\n<li><p>now let's assume everything went fine and my user is registered/connected. From the different documentations <a href=\"https://developers.google.com/identity/android-credential-manager/android/reference/kotlin/com/google/android/libraries/identity/googleid/GetGoogleIdOption.Builder?hl=fr#setServerClientId(kotlin.String)\" rel=\"nofollow noreferrer\">GetGoogleIdOption</a>, <a href=\"https://developer.android.com/identity/sign-in/credential-manager-siwg\" rel=\"nofollow noreferrer\">Authenticate</a>, etc..) I really don't see a way to get the account information such as the user account picture.\nI've seen other post such as <a href=\"https://stackoverflow.com/questions/78601294/how-to-authenticate-google-sign-in-using-credentialmanager-and-authorize-to-goog\">google-sign-in</a> but to my understanding the methods are deprecated.</p>\n</li>\n</ol>\n<p>I'm sorry if some part are confused and thanks you in advance for any help.</p>\n<p>-- Edit\nOk i really need help, I restarted from a clean environment and tried to follow step by step the <a href=\"https://developer.android.com/identity/sign-in/credential-manager-siwg\" rel=\"nofollow noreferrer\">google example</a></p>\n<p>On the step of &quot;Create OAuth client ID&quot; you are <em><strong>required</strong></em> to provide your <em><strong>keystore</strong></em> in the SHA-1 certificate fingerprint.\nHow is that acceptable?! if I'm trying to integrate or migrate my api call, i will not use the official google account to do it... and if I'm using a throwable account i will not load into it nor my production keystore nor my debug one for obvious reason.</p>\n<p>I'm really lost, did i misinterpret or miss something, can't i just do a classic connect email/password to access my account?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}