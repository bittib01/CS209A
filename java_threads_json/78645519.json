{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "spring-security"
    ],
    "owner": {
      "account_id": 31759933,
      "reputation": 1,
      "user_id": 24575209,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/XqM7l.jpg?s=256",
      "display_name": "Winston Oge",
      "link": "https://stackoverflow.com/users/24575209/winston-oge"
    },
    "is_answered": false,
    "view_count": 83,
    "answer_count": 1,
    "score": -1,
    "last_activity_date": 1719376360,
    "creation_date": 1718857696,
    "last_edit_date": 1719376360,
    "question_id": 78645519,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78645519/form-submission-doesnt-go-through-gets-blocked-by-spring-security",
    "title": "Form submission doesn&#39;t go through (gets blocked by spring security)",
    "body": "<p>I am trying to save user details in database spring jpa hibernate. But cannot save.</p>\n<p>Here is the Security Config Class</p>\n<pre><code>@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http \n             .csrf((csrf) -&gt; csrf \n              .csrfTokenRepository(csrfTokenRepository()))\n             .csrf((csrf) -&gt; csrf   \n              .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))  \n                \n                \n            .authorizeHttpRequests((requests) -&gt; requests\n                .requestMatchers(&quot;/&quot;, &quot;/login&quot;, &quot;/signup&quot;, \n                        &quot;buyer/buyer-registration&quot;, \n                        &quot;buyer/buyer-reg-success&quot;, &quot;buyer/buyer-reg-error&quot;, &quot;/registration-error&quot;).permitAll()\n                .requestMatchers(&quot;/edit&quot;, &quot;/delete&quot;).authenticated()    \n                .anyRequest().authenticated())\n                \n                .formLogin((form) -&gt; form\n                .loginPage(&quot;/login&quot;)\n                                .defaultSuccessUrl(&quot;/home&quot;, true)\n                                .failureUrl(&quot;/login?error=true&quot;)     \n                .permitAll())\n            .logout((logout) -&gt; logout \n                                .logoutSuccessUrl(&quot;/&quot;)\n                                .permitAll())\n                \n            \n                 .sessionManagement((session) -&gt; session\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                \n            \n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class); \n        \n\n</code></pre>\n<p>Here is the Thymeleaf HTML codes.\nThe Security Config and the Thymeleaf codes</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;title&gt;Buyer Registration&lt;/title&gt;\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Buyer Registration&lt;/h1&gt;\n    &lt;form th:action=&quot;@{/buyer/registerNewBuyer}&quot; th:object=&quot;${buyer}&quot; method=&quot;post&quot;&gt;\n        &lt;label for=&quot;buyerUserName&quot;&gt;Username:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;buyerUserName&quot; th:field=&quot;*{buyerUserName}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;f_name&quot;&gt;First Name:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;f_name&quot; th:field=&quot;*{f_name}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;l_name&quot;&gt;Last Name:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;l_name&quot; th:field=&quot;*{l_name}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;h2&gt;Location&lt;/h2&gt;\n        &lt;label for=&quot;kindred&quot;&gt;Kindred:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;kindred&quot; th:field=&quot;*{buyerLocation.kindred}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;village&quot;&gt;Village:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;village&quot; th:field=&quot;*{buyerLocation.village}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;community&quot;&gt;Community:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;community&quot; th:field=&quot;*{buyerLocation.community}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;l_g_a&quot;&gt;LGA:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;l_g_a&quot; th:field=&quot;*{buyerLocation.l_g_a}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;state&quot;&gt;State:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;state&quot; th:field=&quot;*{buyerLocation.state}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;label for=&quot;country&quot;&gt;Country:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;country&quot; th:field=&quot;*{buyerLocation.country}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;h2&gt;Google Location&lt;/h2&gt;\n        &lt;label for=&quot;google_coordinates&quot;&gt;Google Coordinates:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;google_coordinates&quot; th:field=&quot;*{buyerGoogleLocation.google_coordinates}&quot; required/&gt;&lt;br/&gt;\n\n        &lt;button type=&quot;submit&quot;&gt;Register&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>Below is the logs</p>\n<pre><code>2024-06-20 07:16:00 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit\n2024-06-20 07:16:00 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1555152978&lt;open&gt;)]\n2024-06-20 07:16:00 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1555152978&lt;open&gt;)] after transaction\n2024-06-20 07:16:00 DEBUG o.s.s.j.JdbcIndexedSessionRepository - Cleaned up 0 expired sessions\n2024-06-20 07:16:06 DEBUG o.s.security.web.FilterChainProxy - Securing POST /buyer/registerNewBuyer\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext\n2024-06-20 07:16:06 DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8080/login\n2024-06-20 07:16:06 DEBUG o.s.security.web.FilterChainProxy - Securing GET /login\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext\n2024-06-20 07:16:06 DEBUG o.s.security.web.FilterChainProxy - Secured GET /login\n2024-06-20 07:16:06 DEBUG o.s.web.servlet.DispatcherServlet - GET &quot;/login&quot;, parameters={}\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.marketgb.productgb.AuthenticationController#login(Model)\n2024-06-20 07:16:06 DEBUG o.s.u.f.SpringTemplateLoader - Looking for FreeMarker template with name [login_en_US.ftlh]\n2024-06-20 07:16:06 DEBUG o.s.u.f.SpringTemplateLoader - Looking for FreeMarker template with name [login_en.ftlh]\n2024-06-20 07:16:06 DEBUG o.s.u.f.SpringTemplateLoader - Looking for FreeMarker template with name [login.ftlh]\n2024-06-20 07:16:06 DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.c.f.c.c.BeanFactoryAwareFunctionRegistry - Function 'favicon.ico' is not found in cache\n2024-06-20 07:16:06 DEBUG o.s.c.f.c.c.BeanFactoryAwareFunctionRegistry - Function 'favicon.ico' is not available in FunctionCatalog or BeanFactory\n2024-06-20 07:16:06 DEBUG o.s.c.f.c.c.BeanFactoryAwareFunctionRegistry - Function 'favicon.ico' is not found in cache\n2024-06-20 07:16:06 DEBUG o.s.c.f.c.c.BeanFactoryAwareFunctionRegistry - Function 'favicon.ico' is not found in cache\n2024-06-20 07:16:06 DEBUG o.s.c.f.c.c.BeanFactoryAwareFunctionRegistry - Function 'favicon.ico' is not available in FunctionCatalog or BeanFactory\n2024-06-20 07:16:06 DEBUG o.s.c.f.c.c.BeanFactoryAwareFunctionRegistry - Function 'favicon.ico' is not found in cache\n2024-06-20 07:16:06 DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext\n2024-06-20 07:16:06 DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8080/login\n2024-06-20 07:16:06 DEBUG o.s.security.web.FilterChainProxy - Securing GET /login\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext\n2024-06-20 07:16:06 DEBUG o.s.security.web.FilterChainProxy - Secured GET /login\n2024-06-20 07:16:06 DEBUG o.s.web.servlet.DispatcherServlet - GET &quot;/login&quot;, parameters={}\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.marketgb.productgb.AuthenticationController#login(Model)\n2024-06-20 07:16:06 DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected '*/*' given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8]\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:16:06 DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK\n2024-06-20 07:16:06 DEBUG o.s.s.w.h.S.SESSION_LOGGER - No session found by id: Caching result for getSession(false) for this HttpServletRequest.\n2024-06-20 07:17:00 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [null]: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT\n2024-06-20 07:17:00 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(874249822&lt;open&gt;)] for JPA transaction\n2024-06-20 07:17:00 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2b52e6c4]\n2024-06-20 07:17:00 DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL update\n2024-06-20 07:17:00 DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL statement [DELETE FROM SPRING_SESSION\nWHERE EXPIRY_TIME &lt; ?\n</code></pre>\n<p>I have adjusted my security config call to permit all registration endpoints. I have adjusted my thmeleaf to good. But yet cannot save to database</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}