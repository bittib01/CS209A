{
  "question": {
    "tags": [
      "java",
      "jackson",
      "flowable"
    ],
    "owner": {
      "account_id": 30273024,
      "reputation": 43,
      "user_id": 23200236,
      "user_type": "registered",
      "profile_image": "https://lh3.googleusercontent.com/a/ACg8ocIndngGrnyl-j5dfXmDALdzNL0Wf5ruK4VaYttKrdZabQ=k-s256",
      "display_name": "lei qin",
      "link": "https://stackoverflow.com/users/23200236/lei-qin"
    },
    "is_answered": true,
    "view_count": 79,
    "accepted_answer_id": 78135153,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1710066492,
    "creation_date": 1704452018,
    "last_edit_date": 1710066492,
    "question_id": 77764068,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/77764068/flowable-jackson-transformation-deployment-of-flowable-prompt-commandcontextut",
    "title": "Flowable: Jackson transformation Deployment of flowable, prompt CommandContextUtil. GetResourceEntityManager () is null",
    "body": "<p>This is my call</p>\n<pre><code>public IPage&lt;Deployment&gt; deploymentPage(Query query, String key, String name, String tenantId) {\n    DeploymentQuery deploymentQuery = repositoryService.createDeploymentQuery();\n    if (StringUtil.isNotBlank(key)) {\n        deploymentQuery.deploymentKeyLike(StringPool.PERCENT + key + StringPool.PERCENT);\n    }\n    if (StringUtil.isNotBlank(name)) {\n        deploymentQuery.deploymentNameLike(StringPool.PERCENT + name + StringPool.PERCENT);\n    }\n    if (StringUtil.isNotBlank(tenantId)) {\n        deploymentQuery.deploymentTenantId(tenantId);\n    }\n    IPage&lt;Deployment&gt; page = Condition.getPage(query);\n    long count = deploymentQuery.count();\n    List&lt;Deployment&gt; deployments = deploymentQuery.orderByTenantId().orderByDeploymentTime().desc().listPage((query.getCurrent() - 1) * query.getSize(), query.getSize());\n    page.setRecords(deployments);\n    page.setTotal(count);\n    return page;\n}\n\n</code></pre>\n<p>I use <code>JSON</code> to return <code>IPage\\&lt;Deployment\\&gt;</code></p>\n<p>Error:</p>\n<blockquote>\n<p>Could not write JSON: (was java.lang.NullPointerException); nested\nexception is com.fasterxml.jackson.databind.JsonMappingException: (was\njava.lang.NullPointerException) (through reference chain:\norg.springblade.core.tool.api.R[&quot;data&quot;]-&gt;com.baomidou.mybatisplus.extension.plugins.pagination.Page[&quot;records&quot;]-&gt;java.util.ArrayList[0]-&gt;org.flowable.engine.impl.persistence.entity.DeploymentEntityImpl[&quot;resources&quot;])</p>\n</blockquote>\n<p>After locating, it was found that <code>CommandContextUtil.getResourceEntityManager().findResourcesByDeploymentId(id);</code> line <code>CommandContextUtil.getResourceEntityManager()</code> is null</p>\n<pre><code>    @Override\n    public Map&lt;String, EngineResource&gt; getResources() {\n        if (resources == null &amp;&amp; id != null) {\n            List&lt;ResourceEntity&gt; resourcesList = CommandContextUtil.getResourceEntityManager().findResourcesByDeploymentId(id);\n            resources = new HashMap&lt;&gt;();\n            for (ResourceEntity resource : resourcesList) {\n                resources.put(resource.getName(), resource);\n            }\n        }\n        return resources;\n    }\n</code></pre>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}