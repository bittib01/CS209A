{
  "question": {
    "tags": [
      "java",
      "jenkins",
      "jenkins-plugins",
      "java-17",
      "tomcat9"
    ],
    "owner": {
      "account_id": 34919197,
      "reputation": 21,
      "user_id": 26861164,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/04151c406e297bd8e7ce197d1e821868?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Jim OShea",
      "link": "https://stackoverflow.com/users/26861164/jim-oshea"
    },
    "is_answered": true,
    "view_count": 644,
    "accepted_answer_id": 78889611,
    "answer_count": 2,
    "score": 1,
    "last_activity_date": 1752241368,
    "creation_date": 1724069856,
    "question_id": 78887864,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78887864/jenkins-boot-failing-after-upgrade-to-jdk-17",
    "title": "Jenkins Boot Failing after upgrade to JDK 17",
    "body": "<p>We are running Jenkins 2.426.3 on Windows servers and Apache Tomcat 9.0.89 currently with Java JDK 11. We tried switching to JDK 17, but ran into this error when starting Tomcat:</p>\n<pre><code>16-Aug-2024 16:46:00.664 INFO [Inspecting plugin F:\\Jenkins\\plugins\\blueocean-git-pipeline.hpi] jenkins.InitReactorRunner$1.onAttained Loaded all jobs\n16-Aug-2024 16:46:00.703 INFO [Inspecting plugin F:\\Jenkins\\plugins\\blueocean-github-pipeline.hpi] jenkins.InitReactorRunner$1.onAttained Configuration for all jobs updated\n16-Aug-2024 16:46:00.722 INFO [Download metadata thread] hudson.util.Retrier.start Attempt #1 to do the action check updates server\n16-Aug-2024 16:46:04.306 INFO [Inspecting plugin F:\\Jenkins\\plugins\\blueocean-github-pipeline.hpi] jenkins.InitReactorRunner$1.onAttained Completed initialization\n16-Aug-2024 16:46:04.322 SEVERE [Jenkins initialization thread] hudson.util.BootFailure.publish Failed to initialize Jenkins\n    hudson.util.HudsonFailedToLoad: java.io.IOException: java.lang.RuntimeException: Failed to serialize jenkins.model.Jenkins#views for class hudson.model.Hudson\n        at hudson.WebAppMain$3.run(WebAppMain.java:264)\n    Caused by: java.io.IOException: java.lang.RuntimeException: Failed to serialize jenkins.model.Jenkins#views for class hudson.model.Hudson\n        at hudson.XmlFile.write(XmlFile.java:223)\n        at jenkins.model.Jenkins.save(Jenkins.java:3624)\n        at jenkins.model.Jenkins.&lt;init&gt;(Jenkins.java:1013)\n        at hudson.model.Hudson.&lt;init&gt;(Hudson.java:86)\n        at hudson.model.Hudson.&lt;init&gt;(Hudson.java:82)\n        at hudson.WebAppMain$3.run(WebAppMain.java:247)\n    Caused by: java.lang.RuntimeException: Failed to serialize jenkins.model.Jenkins#views for class hudson.model.Hudson\n        at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:274)\n        at hudson.util.RobustReflectionConverter$2.visit(RobustReflectionConverter.java:241)\n        at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:174)\n        at hudson.util.RobustReflectionConverter.doMarshal(RobustReflectionConverter.java:226)\n        at hudson.util.RobustReflectionConverter.marshal(RobustReflectionConverter.java:163)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:59)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:44)\n        at com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:83)\n        at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)\n        at com.thoughtworks.xstream.XStream.marshal(XStream.java:1303)\n        at com.thoughtworks.xstream.XStream.marshal(XStream.java:1292)\n        at com.thoughtworks.xstream.XStream.toXML(XStream.java:1265)\n        at hudson.XmlFile.write(XmlFile.java:216)\n        ... 5 more\n    Caused by: java.lang.RuntimeException: Failed to serialize hudson.model.ListView#jobNames for class hudson.model.ListView\n        at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:274)\n        at hudson.util.RobustReflectionConverter$2.visit(RobustReflectionConverter.java:241)\n        at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:174)\n        at hudson.util.RobustReflectionConverter.doMarshal(RobustReflectionConverter.java:226)\n        at hudson.util.RobustReflectionConverter.marshal(RobustReflectionConverter.java:163)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:59)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:44)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:87)\n        at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeBareItem(AbstractCollectionConverter.java:94)\n        at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:66)\n        at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeCompleteItem(AbstractCollectionConverter.java:81)\n        at com.thoughtworks.xstream.converters.collections.CollectionConverter.marshal(CollectionConverter.java:75)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:59)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:83)\n        at hudson.util.RobustReflectionConverter.marshallField(RobustReflectionConverter.java:283)\n        at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:270)\n        ... 18 more\n    Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private static final long java.lang.String$CaseInsensitiveComparator.serialVersionUID accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @24f055ef\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n        at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\n        at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\n        at com.thoughtworks.xstream.converters.reflection.FieldDictionary.buildDictionaryEntryForClass(FieldDictionary.java:176)\n        at com.thoughtworks.xstream.converters.reflection.FieldDictionary.buildMap(FieldDictionary.java:142)\n        at com.thoughtworks.xstream.converters.reflection.FieldDictionary.fieldsFor(FieldDictionary.java:80)\n        at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:167)\n        at hudson.util.RobustReflectionConverter.doMarshal(RobustReflectionConverter.java:206)\n        at hudson.util.RobustReflectionConverter.marshal(RobustReflectionConverter.java:163)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:59)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:44)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:87)\n        at com.thoughtworks.xstream.converters.collections.TreeMapConverter.marshalComparator(TreeMapConverter.java:67)\n        at com.thoughtworks.xstream.converters.collections.TreeSetConverter.marshal(TreeSetConverter.java:52)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n        at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:59)\n        at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:83)\n        at hudson.util.RobustReflectionConverter.marshallField(RobustReflectionConverter.java:283)\n        at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:270)\n        ... 35 more\n16-Aug-2024 16:46:04.330 INFO [Jenkins initialization thread] hudson.lifecycle.Lifecycle.onStatusUpdate Stopping Jenkins\n16-Aug-2024 16:46:04.374 INFO [Jenkins initialization thread] jenkins.model.Jenkins$16.onAttained Started termination\n16-Aug-2024 16:46:04.385 INFO [Jenkins initialization thread] hudson.plugins.build_timeout.global.Lifecycle.shutdown Shutdown complete - Global TimeOut ScheduledExecutorService had 0 tasks pending\n16-Aug-2024 16:46:11.407 WARNING [Jenkins initialization thread] org.jenkinsci.plugins.workflow.cps.CpsFlowExecution$9.onFailure null\n    org.jenkinsci.remoting.util.ExecutorServiceUtils$FatalRejectedExecutionException: Cannot execute the command java.util.concurrent.FutureTask@49f2a3b3[Not completed, task = java.util.concurrent.Executors$RunnableAdapter@7e92a04[Wrapped task = org.jenkinsci.plugins.workflow.cps.CpsVmExecutorService$1@18a3bf79]]. The executor service is shutting down\n        at hudson.remoting.SingleLaneExecutorService.execute(SingleLaneExecutorService.java:116)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\n        at jenkins.util.InterceptingExecutorService.submit(InterceptingExecutorService.java:46)\n        at org.jenkinsci.plugins.workflow.cps.CpsFlowExecution$5.onSuccess(CpsFlowExecution.java:925)\n        at org.jenkinsci.plugins.workflow.cps.CpsFlowExecution$5.onSuccess(CpsFlowExecution.java:921)\n        at org.jenkinsci.plugins.workflow.support.concurrent.Futures$1.run(Futures.java:147)\n        at org.jenkinsci.plugins.workflow.support.concurrent.DirectExecutor.execute(DirectExecutor.java:33)\n        at com.google.common.util.concurrent.AbstractFuture.executeListener(AbstractFuture.java:1286)\n        at com.google.common.util.concurrent.AbstractFuture.addListener(AbstractFuture.java:760)\n        at com.google.common.util.concurrent.AbstractFuture$TrustedFuture.addListener(AbstractFuture.java:134)\n        at org.jenkinsci.plugins.workflow.support.concurrent.Futures.addCallback(Futures.java:157)\n        at org.jenkinsci.plugins.workflow.support.concurrent.Futures.addCallback(Futures.java:97)\n        at org.jenkinsci.plugins.workflow.cps.CpsFlowExecution.runInCpsVmThread(CpsFlowExecution.java:921)\n        at org.jenkinsci.plugins.workflow.cps.CpsFlowExecution.suspendAll(CpsFlowExecution.java:1678)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at hudson.init.TaskMethodFinder.invoke(TaskMethodFinder.java:109)\n        at hudson.init.TaskMethodFinder$TaskImpl.run(TaskMethodFinder.java:185)\n        at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:305)\n        at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:221)\n        at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:120)\n        at org.jvnet.hudson.reactor.Reactor$Node.runIfPossible(Reactor.java:142)\n        at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:131)\n        at org.jvnet.hudson.reactor.Reactor$Node.runIfPossible(Reactor.java:142)\n        at org.jvnet.hudson.reactor.Reactor.execute(Reactor.java:284)\n        at jenkins.model.Jenkins._cleanUpRunTerminators(Jenkins.java:3735)\n        at jenkins.model.Jenkins.cleanUp(Jenkins.java:3658)\n        at hudson.WebAppMain$3.run(WebAppMain.java:268)\n16-Aug-2024 16:46:11.844 INFO [Jenkins initialization thread] jenkins.model.Jenkins$16.onAttained Completed termination\n16-Aug-2024 16:46:11.844 INFO [Jenkins initialization thread] jenkins.model.Jenkins._cleanUpDisconnectComputers Starting node disconnection\n16-Aug-2024 16:46:12.170 INFO [Jenkins initialization thread] jenkins.model.Jenkins._cleanUpShutdownPluginManager Stopping plugin manager\n16-Aug-2024 16:46:12.212 INFO [Jenkins initialization thread] jenkins.model.Jenkins._cleanUpPersistQueue Persisting build queue\n16-Aug-2024 16:46:12.227 WARNING [Jenkins initialization thread] hudson.model.listeners.SaveableListener.fireOnChange null\n    java.lang.NullPointerException: Cannot invoke &quot;hudson.plugins.jobConfigHistory.JobConfigHistory.isSaveable(hudson.model.Saveable, hudson.XmlFile)&quot; because &quot;plugin&quot; is null\n        at hudson.plugins.jobConfigHistory.JobConfigHistorySaveableListener.onChange(JobConfigHistorySaveableListener.java:55)\n        at hudson.model.listeners.SaveableListener.fireOnChange(SaveableListener.java:82)\n        at hudson.model.Queue.save(Queue.java:479)\n        at jenkins.model.Jenkins._cleanUpPersistQueue(Jenkins.java:3921)\n        at jenkins.model.Jenkins.cleanUp(Jenkins.java:3676)\n        at hudson.WebAppMain$3.run(WebAppMain.java:268)\n16-Aug-2024 16:46:12.227 INFO [Jenkins initialization thread] jenkins.model.Jenkins._cleanUpAwaitDisconnects Waiting for node disconnection completion\n16-Aug-2024 16:46:12.227 SEVERE [Jenkins initialization thread] jenkins.model.Jenkins._cleanUpPluginServletFilters Failed to stop filters\n    java.lang.NoClassDefFoundError: net/bull/javamelody/MonitoringInitialContextFactory\n        at net.bull.javamelody.FilterContext.destroy(FilterContext.java:472)\n        at net.bull.javamelody.MonitoringFilter.destroy(MonitoringFilter.java:176)\n        at net.bull.javamelody.PluginMonitoringFilter.destroy(PluginMonitoringFilter.java:74)\n        at hudson.util.PluginServletFilter.cleanUp(PluginServletFilter.java:191)\n        at jenkins.model.Jenkins._cleanUpPluginServletFilters(Jenkins.java:3985)\n        at jenkins.model.Jenkins.cleanUp(Jenkins.java:3682)\n        at hudson.WebAppMain$3.run(WebAppMain.java:268)\n    Caused by: java.lang.ClassNotFoundException: net.bull.javamelody.MonitoringInitialContextFactory\n        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\n        at jenkins.util.URLClassLoader2.findClass(URLClassLoader2.java:35)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:592)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)\n        ... 7 more\n16-Aug-2024 16:46:12.242 INFO [Jenkins initialization thread] hudson.lifecycle.Lifecycle.onStatusUpdate Jenkins stopped\n16-Aug-2024 16:46:12.430 SEVERE [SyncQueueListener] hudson.init.impl.InstallUncaughtExceptionHandler$DefaultUncaughtExceptionHandler.uncaughtException A thread (SyncQueueListener/73) died unexpectedly due to an uncaught exception. This may leave your server corrupted and usually indicates a software bug.\n    java.lang.IllegalStateException: Jenkins.instance is missing. Read the documentation of Jenkins.getInstanceOrNull to see what you are doing wrong.\n        at jenkins.model.Jenkins.get(Jenkins.java:819)\n        at hudson.model.Queue.getInstance(Queue.java:3077)\n        at org.jenkinsci.plugins.pubsub.listeners.SyncQueueListener.lambda$static$0(SyncQueueListener.java:113)\n        at java.base/java.lang.Thread.run(Thread.java:842)\n</code></pre>\n<p>Need to determine where to address the problem. Switching back to JDK 11 boots fine. Not sure if this is caused by a plugin or a configuration that is incompatible with JDK 17. All agents/nodes are running the same version of JDK, but we didn't have any connecting when the master was upgraded. Any assistance is appreciated.</p>\n<p>Tried upgrading Java JDK 11 to JDK 17, expecting Jenkins to boot.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}