{
  "question": {
    "tags": [
      "java",
      "annotations"
    ],
    "owner": {
      "account_id": 6467617,
      "reputation": 43,
      "user_id": 5008929,
      "user_type": "registered",
      "profile_image": "https://lh4.googleusercontent.com/-lNEMtoXD1To/AAAAAAAAAAI/AAAAAAAAADc/ggbmkBflG20/s256-rj/photo.jpg",
      "display_name": "A User",
      "link": "https://stackoverflow.com/users/5008929/a-user"
    },
    "is_answered": true,
    "view_count": 127,
    "closed_date": 1752433770,
    "answer_count": 1,
    "score": -3,
    "last_activity_date": 1752483802,
    "creation_date": 1752232009,
    "last_edit_date": 1752483802,
    "question_id": 79698240,
    "link": "https://stackoverflow.com/questions/79698240/repeatable-annotations",
    "closed_reason": "Needs details or clarity",
    "title": "Repeatable annotations",
    "body": "<p>I have a custom annotation <code>@myAnno</code> that I want repeatable. This <code>@myAnno</code> annotation is marked with another annotation called <code>@Constraint</code>. When I process an object I look for all annotations that are marked with the <code>@Constraint</code> annotation and process them.</p>\n<p>Now, if I use the <code>@Repeatable</code> annotation on <code>@myAnno</code> I have to define a container annotation and <code>@myAnno</code> is actually removed from the object and gets replaced by the container annotation.</p>\n<p>This means I now seemingly have no way to find all my annotation marked with <code>@Constraint</code> as they all got replaced with the container annotations that I do not know when processing.</p>\n<p>I do not know them as there can be any new custom defined repeatable annotations with <code>@Constraint</code>.</p>\n<p>How do I find the repeated versions of all annotations annotated with <code>@Constraint</code> on an object?</p>\n<p>All Google searches only point to solutions where I either know the annotation type or the annotations container type.</p>\n<p>UPDATE:\nIt is about runtime processing. Let me try again explaining the issue in other words:</p>\n<p>The problems is that i am looking for repeatable annotation of an UNKNOWN type. The type is unknown because i  provide a framework similar to bean validtion where you can define your own annotations (by adding the annotation constraint to your custom annotation type).</p>\n<p>Now, the problem is when scanning for annotations, it is easy to find those where their type was annotated by my constraint annotation but this is not the case for repeatable annotation as they get wrapped by a container annotation that can be arbitrary.</p>\n<p>Hence, i cannot use getAnnotationsByType as i do not know the annotation type using by constrain and is not listed in getAnnotations either (you only find the container annotation in there).</p>\n<p>My current workaround is looking for annotations in getAnnotations that contain as only method &quot;Something extends Annotation[] value()&quot; and that something is defined with my Constraint annotation. Then i can either use the array directly or call the getAnnotationsByType with &quot;something&quot;.</p>\n<p>But this feels kinda stupid. When they added the shortcut getAnnotationsByType which resolve the container of repeating annotations they could just add thos to getAnnotations instead of the containers. The design seems just unnecessary complicated and not usefull.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}