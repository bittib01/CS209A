{
  "question": {
    "tags": [
      "java",
      "spring-boot",
      "reactor-netty"
    ],
    "owner": {
      "account_id": 42065294,
      "reputation": 1,
      "user_id": 30577008,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/43f5c0b96e06a1a54833c69bb04938bd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Sahajdeep Kharbanda",
      "link": "https://stackoverflow.com/users/30577008/sahajdeep-kharbanda"
    },
    "is_answered": false,
    "view_count": 683,
    "answer_count": 0,
    "score": 0,
    "last_activity_date": 1747940135,
    "creation_date": 1747646068,
    "last_edit_date": 1747940135,
    "question_id": 79628435,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79628435/connection-reset-by-peer-error-using-netty",
    "title": "Connection reset by peer error using Netty",
    "body": "<p>I’m seeing intermittent <code>&quot;connection reset by peer&quot;</code> errors with a few of our third‑party integrations. Our setup is:</p>\n<ol>\n<li>Java 17</li>\n<li>Spring Boot 2.6.6</li>\n<li>Reactor Netty 0.9.12.RELEASE and reactor‑netty‑http 1.0.17</li>\n<li>Idle‑connection timeout on our load balancer / NGINX: 30 seconds</li>\n</ol>\n<p>I tried using provided solution, and added following properties only, as I want to keep my connections unbounded.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConnectionProvider provider = ConnectionProvider.builder(&quot;fixed&quot;)\n                .maxIdleTime(Duration.ofSeconds(20))\n                .evictInBackground(Duration.ofSeconds(120))\n                .build();\nHttpClient client = HttpClient.create(provider);\n</code></pre>\n<p>This stopped the <code>&quot;connection reset by peer&quot;</code> errors, but I then started getting <code>&quot;handshake timed out after 10000ms&quot;</code> errors. I also verified that the default TLS version for Java 17 is v1.3 (with fallback to v1.2). So I tried explicitly forcing TLS v1.2:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient client = HttpClient.create()\n                .headers(headers -&gt; headers.add(HttpHeaders.CONNECTION, &quot;keep-alive&quot;))\n                .secure(sslContextSpec -&gt; {\n                    try {\n                        sslContextSpec.sslContext(SslContextBuilder.forClient().protocols(&quot;TLSv1.2&quot;).build());\n                    } catch (SSLException e) {\n                        throw new RuntimeException(e);\n                    }\n                });\n</code></pre>\n<p>This fixed the <code>“connection reset by peer”</code> issue, but still resulted in <code>&quot;handshake timed out after 10000ms&quot;</code> errors. I wanted to understand that how are TLS version settings related to the <code>ConnectionProvider</code>’s <code>idle‑time</code> settings, and why am I now seeing handshake timeouts with both approaches, and how can I resolve this issue?</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}