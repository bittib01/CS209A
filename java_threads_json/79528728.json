{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "kotlin"
    ],
    "owner": {
      "account_id": 10467026,
      "reputation": 619,
      "user_id": 7716142,
      "user_type": "registered",
      "profile_image": "https://i.sstatic.net/0GI9w.png?s=256",
      "display_name": "minh tri Vo",
      "link": "https://stackoverflow.com/users/7716142/minh-tri-vo"
    },
    "is_answered": false,
    "view_count": 59,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1742810204,
    "creation_date": 1742722603,
    "last_edit_date": 1742723962,
    "question_id": 79528728,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/79528728/configurationproperties-kotlin-class-cannot-bind-env-variables-for-base-classs",
    "title": "ConfigurationProperties Kotlin class cannot bind env variables for base class&#39;s properties",
    "body": "<p>I have a spring boot - kotlin project, which I am upgrading from Spring 5, Java 8 to Spring 6, Java 21</p>\n<p><code>build.gradle.kts</code></p>\n<pre><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;2.1.20&quot;\n    id(&quot;org.springframework.boot&quot;) version &quot;3.4.4&quot;\n    id(&quot;org.jetbrains.kotlin.plugin.spring&quot;) version &quot;2.1.20&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.7&quot;\n}\n\ndependencies {\n    implementation(&quot;org.springframework.boot:spring-boot-starter&quot;)\n    implementation(kotlin(&quot;reflect&quot;))\n}\n</code></pre>\n<p><code>MyProperties.kt</code></p>\n<pre><code>@ConfigurationProperties(prefix = &quot;my.test&quot;)\n@Component\nclass MyProperties {\n    var customs: List&lt;CustomA&gt; = listOf()\n    var bases: List&lt;Base&gt; = listOf()\n\n    open class Base(\n        var type: String = &quot;&quot;\n    )\n\n    class CustomA(\n        var y: String = &quot;&quot;,\n        var z: String = &quot;&quot;,\n    ) : Base()\n}\n</code></pre>\n<p>Run the application by <code>bootRun</code> task, with these env variables:</p>\n<pre><code>MY_TEST_BASES_0_TYPE=value4;MY_TEST_CUSTOMS_0_TYPE=value3;MY_TEST_CUSTOMS_0_Y=value1;MY_TEST_CUSTOMS_0_Z=value2\n</code></pre>\n<p>I would expect that the <code>myProperties.customs[0].type</code> would return <code>value3</code>, but it would return an empty string instead.</p>\n<p>The problem only happens if the <code>kotlin(&quot;reflect&quot;)</code> dependency exists and does not occur in Spring 5, java 8.</p>\n<p>It looks like the base class's properties are not bound at all. If I modify the <code>MyProperties</code> class as this, the <code>type</code> property will bind correctly</p>\n<pre><code>open class Base(\n   open var type: String = &quot;&quot;\n)\n\nclass CustomA(\n   override var type: String = &quot;&quot;,\n   var y: String = &quot;&quot;,\n   var z: String = &quot;&quot;,\n) : Base()\n</code></pre>\n<p>Questions: Are there any fixes for all classes? In my code base, I have multiple Kotlin classes that extend from another base Kotlin class so manually fixing each class would not be a good idea.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}