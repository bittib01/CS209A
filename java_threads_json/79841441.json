{
  "question": {
    "tags": [
      "java",
      "spring",
      "spring-boot",
      "multithreading",
      "vegeta"
    ],
    "owner": {
      "account_id": 44951839,
      "reputation": 5,
      "user_id": 32021136,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/b203477f4a9ca6274e84d041276e1df7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "Stephanye Cristine",
      "link": "https://stackoverflow.com/users/32021136/stephanye-cristine"
    },
    "is_answered": false,
    "view_count": 102,
    "closed_date": 1765632021,
    "answer_count": 0,
    "score": -2,
    "last_activity_date": 1766233238,
    "creation_date": 1765237906,
    "last_edit_date": 1766233238,
    "question_id": 79841441,
    "link": "https://stackoverflow.com/questions/79841441/eof-errors-in-spring-boot-under-load-with-traditional-vs-virtual-threads-vegeta",
    "closed_reason": "Not suitable for this site",
    "title": "EOF errors in Spring Boot under load with traditional vs virtual threads (Vegeta)",
    "body": "<h1>Spring Boot + Vegeta: EOF errors and lower-than-expected throughput under load (traditional vs virtual threads)</h1>\n<p>I'm load testing a <strong>Spring Boot API created only for benchmarking purposes</strong>.<br />\nThe API does <strong>no real work</strong> â€” it simply <strong>blocks each request for 100 ms</strong> and then returns a response.</p>\n<p>Despite this, I'm hitting throughput limits and getting errors that I can't fully explain.</p>\n<hr />\n<h2>Environment</h2>\n<ul>\n<li><strong>Server:</strong> macOS (Apple M2), 8 GB RAM\n<ul>\n<li>Spring Boot 3.x</li>\n<li>Java 21</li>\n</ul>\n</li>\n<li><strong>Client:</strong> Intel i5 machine generating load</li>\n<li><strong>Network:</strong> Local network (very low latency)</li>\n</ul>\n<hr />\n<h2>Test Goal</h2>\n<ul>\n<li>Execute <strong>5,000 requests over 10 minutes</strong> using <strong>Vegeta</strong></li>\n<li>Compare server behavior using:\n<ul>\n<li><strong>Traditional threads</strong></li>\n<li><strong>Virtual threads (Project Loom)</strong></li>\n</ul>\n</li>\n</ul>\n<hr />\n<h2>Observed Behavior</h2>\n<ul>\n<li>I can only reach around <strong>3,000 requests</strong> within the same 10-minute window</li>\n<li>Many requests fail with <strong>EOF errors</strong>, for example:</li>\n</ul>\n<p>GET <a href=\"http://192.168.1.16/threads/traditional\" rel=\"nofollow noreferrer\">http://192.168.1.16/threads/traditional</a>\n: EOF</p>\n<ul>\n<li>The API itself <strong>does not crash</strong></li>\n<li>The limitation appears to be related to:\n<ul>\n<li>Thread handling</li>\n<li>JVM configuration</li>\n<li>Spring Boot embedded server limits</li>\n<li>Connection handling under sustained load</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h2>Vegeta Command</h2>\n<pre class=\"lang-bash prettyprint-override\"><code>echo &quot;GET http://192.168.1.16/threads/traditional&quot; | vegeta attack -duration=10m -rate=&lt;rate&gt; | vegeta report\n</code></pre>\n<h2>Questions</h2>\n<ol>\n<li><p>Has anyone experienced <strong>EOF errors when load testing Spring Boot APIs with Vegeta</strong>?</p>\n</li>\n<li><p>Could this be related to:</p>\n<ul>\n<li><strong>Traditional vs virtual threads</strong></li>\n<li><strong>Connection limits</strong> in the embedded server (Tomcat/Netty)</li>\n<li><strong>JVM or OS-level tuning</strong>?</li>\n</ul>\n</li>\n<li><p>What changes (<strong>Spring Boot configuration, JVM flags, or Vegeta parameters</strong>) are required to reliably reach <strong>5,000 requests in 10 minutes</strong>, given that each request blocks for <strong>100 ms</strong>?</p>\n</li>\n<li><p>What are good ways to <strong>monitor threads and open connections</strong> to identify the actual bottleneck?</p>\n</li>\n</ol>\n<hr />\n<p>Any insights or configuration tips would be greatly appreciated.</p>\n<p>Thanks!</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}