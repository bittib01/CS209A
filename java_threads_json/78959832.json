{
  "question": {
    "tags": [
      "java",
      "gradle",
      "github-actions",
      "build.gradle",
      "github-packages"
    ],
    "owner": {
      "account_id": 15178500,
      "reputation": 5047,
      "user_id": 10952503,
      "user_type": "registered",
      "profile_image": "https://lh5.googleusercontent.com/-giWYO8mHjKI/AAAAAAAAAAI/AAAAAAAABMw/iZ-Xb0wfMoE/s256-rj/photo.jpg",
      "display_name": "Elikill58",
      "link": "https://stackoverflow.com/users/10952503/elikill58"
    },
    "is_answered": false,
    "view_count": 203,
    "answer_count": 1,
    "score": 2,
    "last_activity_date": 1727962777,
    "creation_date": 1725701865,
    "last_edit_date": 1727529741,
    "question_id": 78959832,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/78959832/publish-javadoc-with-gradle-on-github-package",
    "title": "Publish javadoc with gradle on github package",
    "body": "<p>I have a gradle project which is used as an API. This API is published on github package, but without javadoc, even if the comment are well present on github's repository.</p>\n<p>The main <code>build.gradle</code> is like that:</p>\n<pre><code>import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar\n\nplugins {\n    id 'java-library'\n    id &quot;maven-publish&quot;\n    id 'io.github.goooler.shadow' version '8.1.7'\n}\n\njava.toolchain.languageVersion.set(JavaLanguageVersion.of(21))\n\npublishing {\n    repositories {\n        maven {\n            name = &quot;github&quot;\n            url = uri(&quot;https://maven.pkg.github.com/MyProject/MyProject&quot;)\n            credentials(HttpHeaderCredentials);\n            authentication {\n                header(HttpHeaderAuthentication)\n            }\n        }\n    }\n    publications {\n        gpr(MavenPublication) {\n            artifact(&quot;build/libs/MyProject-1.0-SNAPSHOT.jar&quot;) {\n               builtBy shadowJar\n            }\n            groupId 'com.example'\n            artifactId 'myproject'\n        }\n    }\n}\n\narchivesBaseName = 'MyProject'\n\nsourceSets.main {\n    java.srcDirs = ['src']\n    resources.srcDirs = ['resources']\n}\n\ncompileJava.options.encoding = 'UTF-8'\n\nshadowJar {\n    archiveBaseName.set('MyProject')\n    archiveClassifier.set(null)\n}\n\nbuild.dependsOn shadowJar\n</code></pre>\n<p>When using <code>./gradlew shadowJar publish</code> it works fine, and I well see the package available on github. I can access to it, but there is only the jar file, without source AND without the javadoc. So my IDE doesn't show me comment when using method, even if they have.</p>\n<p>To be clear, when using this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n   /**\n    * Run all tests.\n    */\n   public static void runTests() {\n   }\n}\n</code></pre>\n<p>I don't see the <code>Run all tests</code> comment when using code <code>Test.runTests()</code>. (Even if I do for some others dependencies, so the issue is not from my IDE)</p>\n<p>I tried to add this:</p>\n<pre><code>java {\n    withSourcesJar()\n    withJavadocJar()\n}\n</code></pre>\n<p>But I got error:</p>\n<pre><code>* What went wrong:\nExecution failed for task ':publishGprPublicationToGithubRepository'.\n&gt; Failed to publish publication 'gpr' to repository 'github'\n   &gt; Could not PUT 'https://maven.pkg.github.com/MyProject/MyProject/com/example/myproject/1.0-SNAPSHOT/myproject-1.0-20240906.132919-68.jar.sha1'. Received status code 409 from server: Conflict\n</code></pre>\n<h3>I'm using this github action to publish it:</h3>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Build with gradle\n\non:\n  push:\n    branches: [ master ]\n  pull_request:\n    branches: [ master ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v4\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        distribution: 'temurin'\n        java-version: '21'\n        cache: gradle\n    - name: Grant execute permission for gradlew\n      run: chmod +x gradlew\n    - name: Build\n      run: ./gradlew shadowJar publish -PgithubAuthHeaderName='Authorization' -PgithubAuthHeaderValue='Bearer ${{ secrets.TOKEN }}'\n    - name: Upload Artifact to GitHub Action\n      uses: actions/upload-artifact@v4\n      with: \n        name: MyProject\n        path: build/libs/MyProject-*.jar\n</code></pre>\n<h2>How can I publish javadoc to github package with gradle?</h2>\n<p>I made a <a href=\"https://meta.stackoverflow.com/questions/366988/what-does-mcve-mean\">MCVE</a> :</p>\n<ul>\n<li>Github repository <a href=\"https://github.com/Elikill58/GradlePublishIssue\" rel=\"nofollow noreferrer\">GradlePublishIssue</a> that is an example of API. Simply contains <code>com.elikill58.test.GradleIssue</code> class, with method <code>checkIfIssue</code> that has comment.</li>\n<li>Github repository <a href=\"https://github.com/Elikill58/GradlePublishIssueExample\" rel=\"nofollow noreferrer\">GradlePublishIssueExample</a> that use the first example.</li>\n<li>In case of eclipse, here is what I see:\n<img src=\"https://i.sstatic.net/pvURqKfg.png\" alt=\"Eclipse screenshot\" /></li>\n</ul>\n<p>Note: Both github actions use <code>TOKEN</code> as secret, which a basic auth token. Else, you can change according to your way of auth.</p>\n"
  },
  "answers": [],
  "question_comments": [],
  "answer_comments": {}
}