{
  "question": {
    "tags": [
      "java",
      "docker",
      "jar",
      "dockerfile",
      "classpath"
    ],
    "owner": {
      "account_id": 28350574,
      "reputation": 1,
      "user_id": 21682131,
      "user_type": "registered",
      "profile_image": "https://www.gravatar.com/avatar/353acada65af525469f585aa0d2f7797?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name": "boredStackOverflowuser",
      "link": "https://stackoverflow.com/users/21682131/boredstackoverflowuser"
    },
    "is_answered": false,
    "view_count": 8442,
    "answer_count": 1,
    "score": 0,
    "last_activity_date": 1764910840,
    "creation_date": 1682099323,
    "question_id": 76075609,
    "content_license": "CC BY-SA 4.0",
    "link": "https://stackoverflow.com/questions/76075609/setting-classpath-within-docker-container-using-dockerfile",
    "title": "Setting CLASSPATH within Docker container using Dockerfile",
    "body": "<p>I have been trying to &quot;dockerize&quot; a microservice that I have built using java. However, I am having some issues with the classpath when using Docker. I am on a Linux machine using java open jdk 1.8. My dockerfile looks something like:</p>\n<pre><code>FROM openjdk:version\n\n#`Make the directories I need\nRUN mkdir -p /opt/service/libs\n\nENV LIBS_PATH=/opt/service/libs\nENV CLASSPATH=LIBS_PATH&quot;/*&quot;\n\nCOPY ./target/libs $LIBS_PATH\nCOPY ./target/MY_SERVICE.jar $LIBS_PATH\n\nENTRYPOINT java -cp $CLASSPATH &quot;com.org.service.mainClass&quot;\n</code></pre>\n<p>I have noticed when I do this and I echo the $CLASSPATH inside of the docker container, (using docker run), it returns all of the adresses of the jar files, but with a space in between instead of a : seperator. This implies two things, it knows where all of these jar files are and that the jar files have been successfully copied. I still get an error on the java -cp line. The error is as follows:</p>\n<blockquote>\n<p>Error: Could not find or load main class .opt.service.libs.FirstJarInLibsFolder.jar</p>\n</blockquote>\n<p>If I change the <code>CLASSPATH</code> to have the <code>:</code> separators where it is supposed to, I instead get the error:</p>\n<blockquote>\n<p>Error: Could not find or load main class com.org.service.mainClass</p>\n</blockquote>\n<p>even though my JAR contains that class.</p>\n<p>Any thoughts on what it could be?</p>\n<p>I have tried what is detailed above.</p>\n"
  },
  "answers": [
    {
      "owner": {
        "account_id": 5384013,
        "reputation": 7199,
        "user_id": 4288506,
        "user_type": "registered",
        "accept_rate": 77,
        "profile_image": "https://www.gravatar.com/avatar/e4dd357b6d026a2f4a9fa090ff2a414c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Marcono1234",
        "link": "https://stackoverflow.com/users/4288506/marcono1234"
      },
      "is_accepted": false,
      "score": 0,
      "last_activity_date": 1682460663,
      "last_edit_date": 1682460663,
      "creation_date": 1682460224,
      "answer_id": 76105756,
      "question_id": 76075609,
      "content_license": "CC BY-SA 4.0",
      "body": "<p>This line looks incorrect:</p>\n<pre><code>ENV CLASSPATH=LIBS_PATH&quot;/*&quot;\n</code></pre>\n<p>It should probably have a <code>$</code> before the variable name, see also the <a href=\"https://docs.docker.com/engine/reference/builder/#environment-replacement\" rel=\"nofollow noreferrer\">Dockerfile reference</a>.</p>\n<pre><code>ENV CLASSPATH=$LIBS_PATH&quot;/*&quot;\n</code></pre>\n<p>Additionally to be safe you should probably put quotes around the <code>java -cp</code> argument:</p>\n<pre><code>ENTRYPOINT java -cp &quot;$CLASSPATH&quot; &quot;com.org.service.MainClass&quot;\n</code></pre>\n<p>(As mentioned <a href=\"https://stackoverflow.com/questions/76075609/setting-classpath-within-docker-container-using-dockerfile?noredirect=1#comment134215962_76075609\">in the comments</a>, this also uses the correct capitalization of <code>MainClass</code>)</p>\n<hr />\n<blockquote>\n<p>when I do this and I echo the $CLASSPATH inside of the docker container, (using docker run), it returns all of the adresses of the jar files, but with a space in between</p>\n</blockquote>\n<p>This probably performs wildcard expansion in the shell for the <code>*</code> in the classpath; you would have to run <code>echo &quot;$CLASSPATH&quot;</code> (with quotes) to prevent this and verify that the path is correct. The result from the wildcard expansion might not necessarily be the same as how <code>java</code> behaves. For example as seen in <a href=\"https://stackoverflow.com/q/219585\">this question</a> the shell will expand <code>*.jar</code> just fine, but passing it to <code>java -cp</code> will not work, you will have to use only <code>*</code> (as you have done).</p>\n"
    }
  ],
  "question_comments": [
    {
      "owner": {
        "account_id": 28350574,
        "reputation": 1,
        "user_id": 21682131,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/353acada65af525469f585aa0d2f7797?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "boredStackOverflowuser",
        "link": "https://stackoverflow.com/users/21682131/boredstackoverflowuser"
      },
      "reply_to_user": {
        "account_id": 5384013,
        "reputation": 7199,
        "user_id": 4288506,
        "user_type": "registered",
        "accept_rate": 77,
        "profile_image": "https://www.gravatar.com/avatar/e4dd357b6d026a2f4a9fa090ff2a414c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Marcono1234",
        "link": "https://stackoverflow.com/users/4288506/marcono1234"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1682445455,
      "post_id": 76075609,
      "comment_id": 134215962,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 28350574,
        "reputation": 1,
        "user_id": 21682131,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/353acada65af525469f585aa0d2f7797?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "boredStackOverflowuser",
        "link": "https://stackoverflow.com/users/21682131/boredstackoverflowuser"
      },
      "reply_to_user": {
        "account_id": 14357,
        "reputation": 9557,
        "user_id": 29470,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/65d747d7ca1ea7c6fae309cce663236c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Tim Moore",
        "link": "https://stackoverflow.com/users/29470/tim-moore"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1682445408,
      "post_id": 76075609,
      "comment_id": 134215952,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 5384013,
        "reputation": 7199,
        "user_id": 4288506,
        "user_type": "registered",
        "accept_rate": 77,
        "profile_image": "https://www.gravatar.com/avatar/e4dd357b6d026a2f4a9fa090ff2a414c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Marcono1234",
        "link": "https://stackoverflow.com/users/4288506/marcono1234"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1682254970,
      "post_id": 76075609,
      "comment_id": 134183037,
      "content_license": "CC BY-SA 4.0"
    },
    {
      "owner": {
        "account_id": 14357,
        "reputation": 9557,
        "user_id": 29470,
        "user_type": "registered",
        "profile_image": "https://www.gravatar.com/avatar/65d747d7ca1ea7c6fae309cce663236c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name": "Tim Moore",
        "link": "https://stackoverflow.com/users/29470/tim-moore"
      },
      "edited": false,
      "score": 0,
      "creation_date": 1682113148,
      "post_id": 76075609,
      "comment_id": 134170136,
      "content_license": "CC BY-SA 4.0"
    }
  ],
  "answer_comments": {
    "76105756": []
  }
}